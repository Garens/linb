var undefined,_=window._=function(){return +new Date()},Namespace=window.Namespace=function(e){var d=e.split("."),c=window;return _.get(c,d)||_.set(c,d,{})},Class=window.Class=function(C,q,h){var c,y=[],n=Class,g=window,x=n._fun,d=n._reg,e,s,v,l,A;h=h||{};if(l=_.get(g,C.split("."))){return l}q=(!q?[]:typeof q=="string"?[q]:q);for(v=0;l=q[v];v++){if(!(y[v]=(_.get(g,l.split("."))||(linb&&linb.SC&&linb.SC(l))))){throw new Error("errNoParent:"+l)}}if(h.Dependency){for(v=0;l=h.Dependency[v];v++){if(!(_.get(g,l.split("."))||(linb&&linb.SC&&linb.SC(l)))){throw new Error("errNoDependency:"+l)}}}e=y[0];c=h.Static||{};l={};for(v in c){if(d[v]){l[v]=1}}for(v in l){delete c[v]}c.Before=h.Before||(e&&e.Before);c.After=h.After||(e&&e.After);c.$End=h.$End||(e&&e.$End);c.__gc=h.__gc||c.__gc||(e&&e.__gc)||function(){Class.__gc(this.$key)};var m=function(){if(typeof this.initialize=="function"){this.initialize()}};if(typeof h.Constructor=="function"){s=x(h.Constructor,"Constructor",C,e||m,"constructor");s.Constructor=String(h.Constructor)}else{if(e){var z=m,p=e.Constructor;if(p){z=new Function(p.slice(p.indexOf("(")+1,p.indexOf(")")).split(","),p.slice(p.indexOf("{")+1,p.lastIndexOf("}")))}s=x(z,"Constructor",C,e.upper,"constructor");s.Constructor=p}else{s=m}}A=_.fun();for(v=y.length-1;l=y[v--];){_.merge(A,l);_.merge(A.prototype,l.prototype)}s.KEY=s.$key=s.prototype.KEY=s.prototype.$key=C;n._wrap(s,c,0,A,"static");if(l=h.Instance){n._wrap(s.prototype,l,1,A.prototype,"instance")}n._inherit(s,A);n._inherit(s.prototype,A.prototype);A=null;if(_.tryF(s.Before,arguments,s)===false){return false}for(v=0;l=y[v];v++){l=(l.$children||(l.$children=[]));for(var u=0,r=l.length,B;u<r;u++){if(l[r]==C){B=true;break}}if(!B){l[l.length]=C}}s.$linb$=1;s.$children=[];s.$parent=y;s.prototype.constructor=s;s.prototype.$linb$=1;s[C]=s.prototype[C]=true;_.set(g,C.split("."),s);_.tryF(s.After,[],s);_.tryF(h.Initialize,[],s);_.tryF(s.$End,[],s);_.breakO([h.Static,h.Instance,h],2);return s},linb=window.linb=function(d,c){return linb.Dom.pack(d,c)};_.merge=function(h,g,d){var c,e;if(typeof d=="function"){e=d;d="fun"}switch(d){case"fun":for(c in g){if(true===e(g[c],c)){h[c]=g[c]}}break;case"all":for(c in g){h[c]=g[c]}break;case"with":for(c in g){if(c in h){h[c]=g[c]}}break;default:for(c in g){if(!(c in h)){h[c]=g[c]}}}return h};_.merge(_,{fun:function(){return function(){}},exec:function(c){var g=this,i=document,f=i.getElementsByTagName("head")[0]||i.documentElement,e=i.createElement("script");e.type="text/javascript";if(linb.browser.ie){e.text=c}else{e.appendChild(i.createTextNode(c))}f.insertBefore(e,f.firstChild);f.removeChild(e)},get:function(f,e){if(!e){return f}else{if(typeof e=="string"){return f[e]}else{for(var d=0,c=e.length;d<c;){if(!f||(f=f[e[d++]])===undefined){return}}return f}}},set:function(j,h,g){if(typeof h!="string"){var d,e=0,c,f=h.length-1;for(;e<f;){d=h[e++];if(j[d]&&((c=typeof j[d])=="object"||c=="function")){j=j[d]}else{j=j[d]={}}}h=h[f]}if(g===undefined){if(j.hasOwnProperty&&j.hasOwnProperty(h)){delete j[h]}else{j[h]=undefined}}else{return j[h]=g}},tryF:function(c,d,e,f){return(c&&typeof c=="function")?c.apply(e||null,d||[]):f},asyRun:function(c,f,d,e){return setTimeout(typeof c=="string"?c:function(){c.apply(e,d||[]);c=d=null},f||0)},asyHTML:function(e,h,f,d){var g=document.createElement("div"),c=document.createDocumentFragment();g.innerHTML=e;(function(){var j=step||10;while(--j&&g.firstChild){c.appendChild(g.firstChild)}if(g.firstChild){setTimeout(arguments.callee,f||0)}else{h(c)}})()},isEmpty:function(d){for(var c in d){return false}return true},resetRun:function(g,c,j,f,h){var i=arguments.callee,e=g,d=i.$cache||((i.exists=function(l){return this.$cache[l]})&&(i.$cache={}));if(d[e]){clearTimeout(d[e])}if(typeof c=="function"){d[e]=setTimeout(function(){delete d[e];c.apply(h||null,f||[])},j||0)}else{delete d[e]}},observableRun:function(e,c,d){linb.Thread.observableRun(e,c,d)},breakO:function(j,k){var m=k||1,c=1+(arguments[2]||0),d=arguments.callee,g="___gc_",f;if(j&&(typeof j=="object"||typeof j=="function")&&j!==window&&j!==document&&j.nodeType!==1){if(j.hasOwnProperty(g)){return}else{try{j[g]=null}catch(h){return}}for(f in j){if(j.hasOwnProperty(f)&&j[f]){if(typeof j[f]=="object"||typeof j[f]=="function"){if(c<m){d(j[f],m,c)}}try{j[f]=null}catch(h){}}}if(j.length){j.length=0}delete j[g]}},each:function(f,c,e){e=e||f;for(var d in f){if(false===c.call(e,f[d],d,f)){break}}return f},copy:function(d,c){return _.clone(d,c,1)},clone:function(g,d,q){if(g&&typeof g=="object"){var k=g.constructor,n=k==Array;if(n||k==Object){var m=arguments.callee,j=n?[]:{},p,f=0,e;if(!q){if(q===0){return g}else{q=100}}if(n){e=g.length;for(;f<e;f++){if(typeof d=="function"&&false===d.call(g,g[f],f)){continue}j[j.length]=((p=g[f])&&q&&typeof p=="object")?m(p,d,q-1):p}}else{for(f in g){if(d===true?f.charAt(0)=="_":typeof d=="function"?false===d.call(g,g[f],f):0){continue}j[f]=((p=g[f])&&q&&typeof p=="object")?m(p,d,q-1):p}}return j}else{return g}}else{return g}},filter:function(g,d,c){if(!c&&g&&g.constructor==Array){var h,f,k,j=[],e;for(h=0,f=g.length;h<f;h++){j[j.length]=g[h]}g.length=0;for(h=0,f=j.length;h<f;h++){if(typeof d=="function"?false!==d.call(j,j[h],h):1){g[g.length]=j[h]}}}else{var h,m={};for(h in g){if(d===true?h.charAt(0)=="_":typeof d=="function"?false===d.call(g,g[h],h):0){m[h]=1}}for(h in m){delete g[h]}}return g},toArr:function(g,e){if(!g){return[]}var c=[];if(typeof e=="boolean"){for(var f in g){c[c.length]=e?f:g[f]}}else{if(typeof g=="string"){c=g.split(e||",")}else{for(var f=0,d=g.length;f<d;++f){c[f]=g[f]}}}return c},toUTF8:function(c){return c.replace(/[^\x00-\xff]/g,function(e,d){return"\\u"+((d=e.charCodeAt())<16?"000":d<256?"00":d<4096?"0":"")+d.toString(16)})},fromUTF8:function(c){return c.replace(/\\u([0-9a-f]{3})([0-9a-f])/g,function(e,d,f){return String.fromCharCode((parseInt(d,16)*16+parseInt(f,16)))})},urlEncode:function(e){var c=[],d,f;for(d in e){if(_.isDefined(f=e[d])){c.push(encodeURIComponent(d)+"="+encodeURIComponent(typeof f=="string"?f:_.serialize(f)))}}return c.join("&")},urlDecode:function(k,n){if(!k){return n?"":{}}var h,f={},m=k.split("&"),c;for(var g=0,d=m.length;g<d;g++){c=m[g];h=c.split("=");try{f[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}catch(j){f[h[0]]=h[1]}}return n?f[n]:f},isDefined:function(c){return c!==undefined},isNull:function(c){return c===null},isSet:function(c){return c!==undefined&&c!==null&&c!==NaN},isObj:function(c){return !!c&&(typeof c=="object"||typeof c=="function")},isBool:function(c){return typeof c=="boolean"},isNumb:function(c){return typeof c=="number"&&isFinite(c)},isDate:function(c){return Object.prototype.toString.call(c)==="[object Date]"},isFun:function(c){return Object.prototype.toString.call(c)==="[object Function]"},isArr:function(c){return Object.prototype.toString.call(c)==="[object Array]"},isHash:function(c){return !!c&&typeof c=="object"&&(c.constructor==Object||(c.constructor&&Object.prototype.toString.call(c)=="[object Object]"&&/^\s*function\s+Object\(\s*\)/.test(c.constructor.toString())))},isReg:function(c){return Object.prototype.toString.call(c)==="[object RegExp]"},isStr:function(c){return typeof c=="string"},isArguments:function(c){return !!(c&&c.callee&&c.callee.arguments===c)},str:{startWith:function(d,c){return d.indexOf(c)===0},endWith:function(d,e){var c=d.length-e.length;return c>=0&&d.lastIndexOf(e)===c},repeat:function(d,c){return new Array(c+1).join(d)},initial:function(c){return c.charAt(0).toUpperCase()+c.substring(1)},trim:function(c){return c.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ltrim:function(c){return c.replace(/^[\s\xa0]+/,"")},rtrim:function(c){return c.replace(/[\s\xa0]+$/,"")},toDom:function(h){var g=linb.$getGhostDiv(),f=[];g.innerHTML=h;for(var e=0,d=g.childNodes,c=d.length;e<c;e++){f[f.length]=d[e]}g=null;return linb(f)}},arr:{subIndexOf:function(c,f,g){if(g===undefined){return -1}for(var e=0,d=c.length;e<d;e++){if(c[e]&&c[e][f]===g){return e}}return -1},removeFrom:function(c,d,e){c.splice(d,e||1);return c},removeValue:function(c,f){for(var d=c.length,e=d-1;e>=0;e--){if(c[e]===f){c.splice(e,1)}}return c},insertAny:function(c,h,g,f){var e=c.length;f=h.constructor!=Array||f;if(g===0){if(f){c.unshift(h)}else{c.unshift.apply(c,h)}}else{var d;if(!g||g<0||g>e){g=e}if(g!=e){d=c.splice(g,e-g)}if(f){c[c.length]=h}else{c.push.apply(c,h)}if(d){c.push.apply(c,d)}}return g},indexOf:function(c,f){for(var e=0,d=c.length;e<d;e++){if(c[e]===f){return e}}return -1},each:function(c,f,h,j){var g,e,d=c;if(!d){return d}if(d.constructor!=Array){if((d=d._nodes)||d.constructor!=Array){throw new Error("errNotArray")}if(j===undefined){j=1}}e=d.length;h=h||c;if(!j){for(g=0;g<e;g++){if(f.call(h,d[g],g,d)===false){break}}}else{for(g=e-1;g>=0;g--){if(f.call(h,d[g],g,d)===false){break}}}return c},removeDuplicate:function(c,g){var e=c.length,d=[];for(var f=e-1;f>=0;f--){if(g?this.subIndexOf(c,g,c[f][g])===f:this.indexOf(c,c[f])===f){d.push(c[f])}}return d.reverse()}}});_.merge(_.fun,{body:function(fun){with(String(fun)){return slice(indexOf("{")+1,lastIndexOf("}"))}},args:function(fun){with(String(fun)){return slice(indexOf("(")+1,indexOf(")")).split(",")}},clone:function(c){return new Function(_.fun.args(c),_.fun.body(c))}});_.merge(Class,{_reg:{$key:1,$parent:1,$children:1,KEY:1,Static:1,Instance:1,Constructor:1,Initialize:1},_reg2:{nodeType:1,constructor:1,prototype:1,toString:1,valueOf:1,hasOwnProperty:1,isPrototypeOf:1,propertyIsEnumerable:1,toLocaleString:1},_fun:function(c,d,e,g,f){c.$name$=d;c.$original$=e;if(f){c.$type$=f}if(g){c.upper=g}return c},_other:["toString","valueOf"],_o:{},_inherit:function(f,h,c){var d,g,e=this._reg;for(d in h){if(d in f||(!c&&e[d])||d.charAt(0)=="$"){continue}g=h[d];if(g&&g.$linb$){continue}f[d]=g}},_wrap:function(s,d,v,u,h){var w=this,n,m,g,l=s.KEY,c=w._reg,e=w._reg2,q=w._fun,p=w._other;for(n in d){if(e[n]||(!v&&c[n])){continue}g=d[n];s[n]=(typeof g!="function")?g:q(g,n,l,typeof u[n]=="function"&&u[n],h)}for(m=0;n=p[m++];){g=d[n];if(g&&(g==w._o[n])){continue}s[n]=(typeof g!="function")?g:q(g,n,l,typeof u[n]=="function"&&u[n],h)}},__gc:function(f){if(typeof f=="object"){f=f.KEY||""}var e=_.get(window,f.split(".")),g,d,c;if(e){if(g=_.get(window,["linb","$cache","SC"])){delete g[f]}if(e.$parent){e.$parent.length=0}if(g=e.$children){for(var d=0,h;h=g[d];d++){if(h=_.get(window,h.split("."))){h.__gc()}}g.length=0}for(d in e){if(d!="upper"&&typeof e[d]=="function"){for(c in e[d]){if(e[d].hasOwnProperty(c)){delete e[d][c]}}}}_.breakO(e);e=e.prototype;for(d in e){if(d!="upper"&&typeof e[d]=="function"){for(c in e[d]){if(e[d].hasOwnProperty(c)){delete e[d][c]}}}}_.breakO(e);_.set(window,f.split("."))}},destroy:function(c){Class.__gc(c)}});_.merge(linb,{DEFAULTHREF:"javascript:;",IEUNSELECTABLE:' unselectable="on" ',SERIALIZEMAXLAYER:99,SERIALIZEMAXSIZE:9999,$localeKey:"en",$localeDomId:"linblid",$dateFormat:"",Locale:{en:{}},$cache:{thread:{},SC:{},hookKey:{},snipScript:{},ghostDiv:[],domPurgeData:{},profileMap:{},reclaimId:{},template:{},UIKeyMapEvents:{}},setDateFormat:function(c){linb.$dateFormat=c},getDateFormat:function(){return linb.$dateFormat},setAppLangKey:function(c){linb.$appLangKey=c},getAppLangKey:function(c){return linb.$appLangKey},getLang:function(){return linb.$localeKey},setLang:function(r,u){var d=linb.Locale,k=linb.getRes,w,s,h,e,n,c,p,q=[];linb.$localeKey=r;s=linb.browser.ie?document.all.tags("span"):document.getElementsByTagName("span");for(h=0;w=s[h];h++){if(w.id==linb.$localeDomId){q[q.length]=w}}n=function(){(function(){e=q.splice(0,100);for(h=0;w=e[h];h++){if(typeof(s=k(w.className))=="string"){w.innerHTML=s}}if(q.length){setTimeout(arguments.callee,0)}_.tryF(u)}())},p="linb.Locale."+r,c=function(){var f=linb.$appLangKey;if(f){linb.include(p+"."+f,linb.getPath("Locale."+r,".js"),n,n)}else{n()}};linb.include(p,linb.getPath(p,".js"),c,c)},_langParamReg:/\x24(\d+)/g,getRes:function(f){var c,d,e,g=arguments;if(typeof f=="string"){if(f.indexOf("-")!=-1){e=f.split("-");f=e[0];g=e}c=f.split(".")}else{c=f}d=_.get(linb.Locale[linb.$localeKey],c);return(e=typeof d)=="string"?(g.length>1?d.replace(linb._langParamReg,function(i,j,h){h=g[1+ +j];return(h===null||h===undefined)?i:h}):d):e=="function"?d.apply(null,g):d?d:c[c.length-1]},wrapRes:function(f){var c=f,d,e;if(c.charAt(0)=="$"){arguments[0]=c.substr(1,c.length-1)}d=f;e=linb.getRes.apply(null,arguments);if(d==e){e=c}return'<span id="'+linb.$localeDomId+'" class="'+d+'" '+linb.IEUNSELECTABLE+">"+e+"</span>"},request:function(d,e,g,h,f,c){return((typeof e=="object"&&((function(k){for(var j in k){if(k[j]&&k[j].nodeType==1){return 1}}})(e)))?linb.IAjax:(c&&c.method&&c.method.toLowerCase()=="post")?linb.absIO.isCrossDomain(d)?linb.IAjax:linb.Ajax:linb.absIO.isCrossDomain(d)?linb.SAjax:linb.Ajax).apply(null,arguments).start()},include:function(f,c,d,e){if(f&&linb.SC.get(f)){_.tryF(d)}else{linb.SAjax(c,"",d,e,0,{rspType:"script",checkKey:f}).start()}},_m:[],main:function(c){linb._m.push(c)},getPath:function(h,c,j){h=h.split(".");if(j){var e=[h[0],j];for(var g=1,d=h.length;g<d;g++){e.push(h[g])}h.length=0;h=e}var k,f=linb.ini;if(h[0]=="linb"){k=f.path;h.shift();if(h.length==(j?1:0)){h.push("linb")}}else{k=f.appPath;if(h.length==((j?1:0)+1)&&c==".js"){h.push("index")}if(f.verPath){k+=f.verPath+"/"}if(f.ver){k+=f.ver+"/"}}if(k.slice(-1)!="/"){k+="/"}return k+h.join("/")+(c||"/")},log:_.fun(),message:_.fun(),_pool:[],getObject:function(c){return linb._pool["$"+c]},_ghostDivId:"linb.ghost::",$getGhostDiv:function(){var e=linb.$cache.ghostDiv,d=0,c=e.length,f;do{f=e[d++]}while(d<c&&(f&&f.firstChild));if(!f||f.firstChild){f=document.createElement("div");f.id=linb._ghostDivId;e.push(f)}return f},$linbid:0,$registerNode:function(e){var f,d,c=linb.$cache.domPurgeData;if(!(e.$linbid&&(d=c[e.$linbid])&&d.element==e)){f="!"+linb.$linbid++;d=c[f]||(c[f]={});d.element=e;e.$linbid=d.$linbid=f}e=null;return d},getId:function(c){if(typeof c=="string"){c=document.getElementById(c)}return c?window===c?"!window":document===c?"!document":(c.$linbid||""):""},getNode:function(c){return linb.use(c).get(0)},getNodeData:function(c,d){if(!c){return}return _.get(linb.$cache.domPurgeData[typeof c=="string"?c:linb.getId(c)],d)},setNodeData:function(c,e,d){if(!c){return}return _.set(linb.$cache.domPurgeData[typeof c=="string"?c:linb.getId(c)],e,d)},$purgeChildren:function(h){var d=linb.$cache,p=d.profileMap,c=d.UIKeyMapEvents,q=d.domPurgeData,g=h.getElementsByTagName("*"),k=g.length,u=[],n,m,f,x,s,r,e;for(n=0;n<k;n++){if(!(s=g[n])){continue}if(x=s.$linbid){if(f=q[x]){if(r=f.eHandlers){for(m in r){s[m]=null}}for(m in f){f[m]=null}delete q[x]}if(linb.browser.ie){s.removeAttribute("$linbid")}else{delete s.$linbid}}if(e=s.id){if(e in p){f=p[e];if(!f){continue}x=f.renderId;if("!window"===x||"!document"===x){continue}f.__gc();u[u.length]=n;if(f.$domId&&f.$domId!=f.domId){u[u.length]=f.$domId}}}}for(n=0;n<u.length;){delete p[u[n++]]}h.innerHTML=""},create:function(d){var c,k,h,j=arguments.callee,f=j.r1||(j.r1=/</);if(typeof d=="string"){if(h=linb.absBox.$type[d]){c=[];for(var g=1,e=arguments.length;g<e;g++){c[g-1]=arguments[g]}k=new (linb.SC(h))(false);if(k._ini){k._ini.apply(k,c)}}else{if(f.test(d)){k=_.str.toDom(d)}else{k=document.createElement(d);k.id=typeof id=="string"?id:_.id();k=linb(k)}}}else{k=new (linb.SC(d.key))(d)}return k},use:function(f){var e=linb._tempBox||(linb._tempBox=linb()),d=e._nodes;d[0]=f;if(d.length!=1){d.length=1}return e}});new function(){var n=window,q=navigator.userAgent.toLowerCase(),k=document,m=linb.browser={kde:/webkit/.test(q),opr:/opera/.test(q),ie:/msie/.test(q)&&!/opera/.test(q),gek:/mozilla/.test(q)&&!/(compatible|webkit)/.test(q),isStrict:k.compatMode=="CSS1Compat",isChrome:/chrome/.test(q),isSafari:/safari/.test(q),isWin:/(windows|win32)/.test(q),isMac:/(macintosh|mac os x)/.test(q),isAir:/adobeair/.test(q),isLinux:/linux/.test(q),isSecure:location.href.toLowerCase().indexOf("https")==0},p=function(d,e){return d+(m.ver=q.split(e)[1].split(".")[0])};linb.$secureUrl=m.isSecure&&m.ie?'javascript:""':"about:blank";_.filter(m,function(d){return !!d});if(m.ie){m[p("ie","msie ")]=true;if(m.ie6){try{document.execCommand("BackgroundImageCache",false,true)}catch(j){}n.XMLHttpRequest=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}}else{if(m.gek){m[p("gek",/.+\//)]=true}else{if(m.opr){m[p("opr","opera/")]=true}else{if(m.kde){m[p("kde","webkit/")]=true}}}}m.contentBox=function(d){return(m.ie||m.opr)?!/BackCompat|QuirksMode/.test(k.compatMode):(d=(d=d||k.documentElement).style["-moz-box-sizing"]||d.style["box-sizing"])?(d=="content-box"):true}();var x=linb.ini={};if(window.linb_ini){_.merge(x,window.linb_ini)}if(!x.path){var r,h=document.getElementsByTagName("script"),c=/js\/linb(-[\w]+)?\.js$/,g=h.length;while(--g>=0){r=h[g].src;if(r.match(c)){x.path=r.replace(c,"");break}}}_.merge(x,{appPath:location.href.split("?")[0].replace(/[^\\\/]+$/,""),file_bg:x.path+"bg.gif",blank_image:m.ie&&m.ver<=7?(x.path+"bg.gif"):"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",dummy_tag:"$_dummy_$"});if(!x.path){x.path=x.appPath+"/jsLinb"}var i=function(){if(k.addEventListener&&!m.kde){k.removeEventListener("DOMContentLoaded",arguments.callee,false)}try{for(var f=0,d=linb._m.length;f<d;f++){_.tryF(linb._m[f])}linb._m.length=0;linb.isDomReady=true}catch(s){_.asyRun(function(){throw s})}};if(k.addEventListener&&!m.kde){k.addEventListener("DOMContentLoaded",i,false)}else{if(m.ie){(function(){try{k.activeElement.id;k.documentElement.doScroll("left");i()}catch(d){setTimeout(arguments.callee,1)}})()}else{(function(){/loaded|complete/.test(k.readyState)?i():setTimeout(arguments.callee,1)})()}}};Class("linb.Thread",null,{Constructor:function(d,e,g,i,j,c,f){var l=this,h=arguments.callee,k=linb.$cache.thread;if(l.constructor!==h||!!l.id){return new h(d,e,g,i,j,c,f)}if(typeof d!="string"){d="$"+(l.constructor.$linbid++)}l.id=d;l.profile=k[d]||(k[d]={id:d,_start:false,time:0,_left:0,_asy:-1,index:0,tasks:e||[],delay:g||0,callback:i,onStart:j,onEnd:c,cache:{},status:"run",cycle:!!f})},Instance:{_fun:_.fun(),__gc:function(){var c=linb.$cache.thread,e=c[this.id];if(e){delete c[this.id];e.tasks.length=0;for(var d in e){e[d]=null}}},_task:function(){var c=this,j=c.profile,e={args:[]},h=j.tasks[j.index],g,d,f=typeof h;j._asy=-1;if(!j.status){return}if(f=="function"){e.task=h}else{if(f=="object"){for(d in h){e[d]=h[d]}}}if(typeof e.task!="function"){e.task=c._fun}if(typeof e.callback!="function"){e.callback=j.callback}e.args.push(j.id);j.index++;j.time=_();g=_.tryF(e.task,e.args||[j.id],e.scope||c,null);if(!j.status){return}if(e.id){j.cache[e.id]=g}if(e.callback){if(false===_.tryF(e.callback,[j.id],c,true)){c.abort();return}}if(j.status!=="run"){return}if(!j||j.status!=="run"){return}c.start()},start:function(g){var d=this,f=d.profile,c,e;if(f._start===false){f._start=true;if(false===_.tryF(f.onStart,[f.id],d)){return d.abort()}}if(!f.tasks.length){return d.abort()}if(f.index>=f.tasks.length){if(f.cycle===true){d.profile.index=0}else{return d.abort()}}c=f.tasks[f.index];e=typeof c=="number"?c:typeof c.delay=="number"?c.delay:f.delay;f._left=(g||g===0)?g:e;if(f._asy!=-1){clearTimeout(f._asy)}f._asy=_.asyRun(d._task,f._left,[],d);f.time=_();return d},suspend:function(){var d,c=this.profile;if(c.status=="pause"){return}c.status="pause";if(c._asy!==-1){clearTimeout(c._asy);if(c.index>0){c.index--}}d=c._left-(_()-c.time);c._left=(d>=0?d:0);return this},resume:function(d){var c=this;if(c.profile.status=="run"){return}d=d===undefined?c.profile._left:d===true?c.profile.delay:d===false?0:(Number(d)||0);c.profile.status="run";c.start(d);return c},abort:function(){var c=this.profile;c.status="stop";clearTimeout(c._asy);_.tryF(c.onEnd,[c.id]);this.__gc()},links:function(c){var e=this.profile,d=e.onEnd,f=e.id;e.onEnd=function(){_.tryF(d,[f]);c.start()};return this},insert:function(c,g){var f=this,h=f.profile.tasks,e=h.length,d;if(c.constructor!=Array){c=[c]}g=g||f.profile.index;if(g<0||g>e){g=e}if(g==-1){h.push.apply(h,c)}else{d=h.splice(g,e-g);h.push.apply(h,c);h.push.apply(h,d)}return f},getCache:function(c){return this.profile.cache[c]},setCache:function(c,d){this.profile.cache[c]=d;return this},isAlive:function(){return !!linb.$cache.thread[this.id]}},After:function(){var e=this,h=function(f){e[f]=function(j){var i;if(linb.$cache.thread[j]){(i=linb.Thread(j))[f].apply(i,Array.prototype.slice.call(arguments,1))}}},d="start,suspend,resume,abort".split(",");for(var g=0,c=d.length;g<c;g++){h(d[g])}},Static:{$asFunction:1,$linbid:1,__gc:function(){linb.$cache.thread={}},isAlive:function(c){return !!linb.$cache.thread[c]},observableRun:function(g,d,e){var c=linb.Thread,f=linb.Dom;if(!_.isArr(g)){g=[g]}if(linb.$cache.thread[e]){if(typeof d=="function"){g.push(d)}c(e).insert(g)}else{c(e,g,0,null,function(h){if(f){f.busy(h)}},function(h){_.tryF(d,arguments,this);if(f){f.free(h)}}).start()}},group:function(d,j,k,l,c){var m={},h=linb.Thread,g=function(r,n,q){if(typeof r=="string"){r=h(r)}if(r){var p=function(){var f=arguments.callee;_.tryF(f.onEnd,arguments,this);f.onEnd=null;delete m[n];_.tryF(k,[n,q],this);if(_.isEmpty(m)){h.resume(q)}};p.onEnd=r.profile.onEnd;r.profile.onEnd=p;r.start()}};for(var e in j){m[e]=1}return h(d,[function(n){if(!_.isEmpty(j)){h.suspend(n);for(var f in j){g(j[f],f,n)}}}],0,null,l,c)},repeat:function(e,d,c,f){return linb.Thread(null,[_.fun()],d||0,e,c,f,true).start()}}});Class("linb.absIO",null,{Constructor:function(e,k,j,c,g,q){if(typeof e=="object"){q=e}else{q=q||{};_.merge(q,{uri:e,query:k,onSuccess:j,onFail:c,threadid:g})}var p=this,m=arguments.callee,d=p.constructor;if((d!==m)||p.id){return new m(q)}_.merge(q,{id:q.id||(_()+""+(d._id++)),uri:q.uri||"",query:q.query||"",asy:q.asy!==false,method:"POST"==(q.method||d.method).toUpperCase()?"POST":"GET"},"all");var n="retry,timeout,reqType,rspType,optimized,customQS".split(",");for(var h=0,f=n.length;h<f;h++){q[n[h]]=(n[h] in q)?q[n[h]]:d[n[h]]}_.merge(p,q,"all");if(p.reqType=="xml"){p.method="POST"}if(d.events){_.merge(p,d.events)}p.query=p.customQS(p.query);if(typeof p.query=="object"&&p.reqType!="xml"){p.query=_.clone(p.query,function(i){return i!==undefined})}if(!p._useForm&&typeof p.query!="string"&&p.reqType!="xml"){p.query=d._buildQS(p.query,p.reqType=="json",p.method=="POST")}return p},Instance:{_fun:_.fun(),_flag:0,_response:"",_retryNo:0,_time:function(){var d=this,e=d.constructor;d._clear();if(d._retryNo<d.retry){d._retryNo++;_.tryF(d.onRetry,[d._retryNo],d);d.start()}else{if(false!==_.tryF(d.onTimeout,[],d)){d._onError(new Error("Request timeout"))}}},_onEnd:function(){var c=this;if(!c._end){c._end=true;if(c._flag>0){clearTimeout(c._flag);c._flag=0}linb.Thread.resume(c.threadid);_.tryF(c.onEnd,[],c);c._clear()}},_onStart:function(){var c=this;linb.Thread.suspend(c.threadid);_.tryF(c.onStart,[],c)},_onResponse:function(){var c=this;if(false!==_.tryF(c.beforeSuccess,[c._response,c.rspType,c.threadid],c)){_.tryF(c.onSuccess,[c._response,c.rspType,c.threadid],c)}c._onEnd()},_onError:function(d){var c=this;if(false!==_.tryF(c.beforeFail,[d,c.threadid],c)){_.tryF(c.onFail,[d.name+": "+d.message,c.rspType,c.threadid],c)}c._onEnd()},isAlive:function(){return !this._end},abort:function(){this._onEnd()}},Static:{$abstract:true,_id:1,method:"GET",retry:0,timeout:60000,reqType:"form",rspType:"text",optimized:false,type:"type",randkey:"id",callback:"callback",_buildQS:function(e,c,d){return c?((c=_.serialize(e))&&(d?c:encodeURIComponent(c))):_.urlEncode(e)},customQS:function(c){return c},_if:function(g,i,d){var f=linb.browser.ie,h=g.createElement(f?"<iframe name='"+i+"' "+(d?"onload='linb.IAjax._o(\""+i+"\")'":"")+">":"iframe"),c;if(i){h.id=h.name=i}if(!f&&d){h.onload=d}h.style.display="none";g.body.appendChild(h);c=frames[frames.length-1];return[h,c,c.document]},isCrossDomain:function(f){f=f||"";var e=arguments.callee,d=e.r||(e.r=/(http(s)?\:\/\/)?([\w\.]+(:[\d]+)?)(.*)/),c;if((c=f.indexOf(":"))==-1||c>f.indexOf("/")){return false}if(f.indexOf("file:")===0){return !!location.host}return location.host!=f.replace(d,"$3")},groupCall:function(j,k,c,d,h){var e,g=function(m,f,l){l[f]=linb.Thread(null,[function(i){m.threadid=i;m.start()}])};for(e in j){g(j[e],e,j)}return linb.Thread.group(null,j,k,function(){linb.Thread(h).suspend();_.tryF(c,arguments,this)},function(){_.tryF(d,arguments,this);linb.Thread(h).resume()}).start()}}});Class("linb.Ajax","linb.absIO",{Instance:{_XML:null,_header:function(d,c){if(this._XML){this._XML.setRequestHeader(d,c)}},start:function(){var self=this;if(false===_.tryF(self.beforeStart,[],self)){self._onEnd();return}if(!self._retryNo){self._onStart()}try{with(self){self._XML=new window.XMLHttpRequest();if(asy){self._XML.onreadystatechange=function(){if(self&&self._XML&&self._XML.readyState==4){self._complete.apply(self);self._clear()}}}if(!_retryNo&&method!="POST"){if(query){uri=uri.split("?")[0]+"?"+query}query=null}self._XML.open(method,uri,asy);self._header("Content-type",method=="POST"?"application/x-www-form-urlencoded;charset=UTF-8":"text/plain;charset=UTF-8");self._header("X-Requested-With","XMLHttpRequest");var cookie="",ac;if(optimized){try{self._header("User-Agent",null);self._header("Accept",null);self._header("Accept-Language",null);self._header("Connection","keep-alive");self._header("Keep-Alive",null);self._header("Cookie",null);self._header("Cookie","")}catch(e){}}if(false===_.tryF(self.beforeSend,[self._XML],self)){self._onEnd();return}try{self._XML.send(query)}catch(e){}if(asy){if(self._XML&&timeout>0){_flag=_.asyRun(function(){if(self&&!self._end){self._time()}},self.timeout)}}else{_complete()}}}catch(e){self._onError(e)}return self},abort:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML.abort();c._XML=null}arguments.callee.upper.call(c)},_clear:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML=null}},_complete:function(){with(this){var ns=this,status=ns._XML.status;_response=rspType=="text"?ns._XML.responseText:ns._XML.responseXML;if(status===undefined||status===0||status==304||(status>=200&&status<300)){_onResponse()}else{_onError(new Error("XMLHTTP returns : "+status))}}}},Static:{$asFunction:1}});Class("linb.SAjax","linb.absIO",{Instance:{start:function(){var e=this,k,j=e.constructor,g,i,f=false;if(false===_.tryF(e.beforeStart,[],e)){e._onEnd();return}if(!e._retryNo){e._onStart()}if(e.rspType=="script"){e.retry=0}k=e.id;if(j._pool[k]){j._pool[k].push(e)}else{j._pool[k]=[e]}var d=j._n=document,h=function(){if(!f){f=true;if(e.rspType=="script"){if(typeof e.checkKey=="string"){_.asyRun(function(){_.exec("if(linb.SC.get('"+e.checkKey+"'))linb.SAjax._pool['"+k+"'][0]._onResponse();else linb.SAjax._pool['"+k+"'][0]._loaded();")})}else{e._onResponse()}}else{e._loaded()}}};i=e.node=d.createElement("script");i.src=e.uri+(e.query?"?"+e.query:"");i.type="text/javascript";i.charset="utf-8";i.id="linb:script:"+e.id;i.onload=i.onreadystatechange=function(){if(f){return}var c=this.readyState;if(!c||c=="loaded"||c=="complete"){h()}if(c=="interactive"&&linb.browser.opr){linb.Thread.repeat(function(){if(f){return false}if(/loaded|complete/.test(document.readyState)){h();return false}},50)}};if(linb.browser.gek){i.onerror=h}d.body.appendChild(i);i=null;if(e.timeout>0){e._flag=_.asyRun(function(){if(e&&!e._end){e._time()}},e.timeout)}},_clear:function(){var e=this,h=e.node,g=e.constructor,d=e.constructor._pool;d.length=0;delete d[e.id];if(h){e.node=h.id=h.onload=h.onreadystatechange=h.onerror=null;var f=g._n.createElement("div");f.appendChild(h.parentNode&&h.parentNode.removeChild(h)||h);if(linb.browser.ie){_.asyRun(function(){f.innerHTML=h.outerHTML="";h=f=null})}else{f.innerHTML="";h=f=null}}},_loaded:function(){var c=this;_.asyRun(function(){if(c.id&&c.constructor._pool[c.id]){c._onError(new Error("SAjax return script doesn't match"))}},500)}},Static:{$asFunction:1,_pool:{},$response:function(h){var d=this;try{if(h&&(o=d._pool[h[d.randkey]])){for(var f=0,c=o.length;f<c;f++){o[f]._response=h;o[f]._onResponse()}}else{d._onError(new Error("SAjax return value formatting error, or no matched 'id': "+h))}}catch(g){linb.Debugger&&linb.Debugger.trace(g)}},customQS:function(i){var j=this.constructor,f=j.type,e=j.randkey,d=j.callback,h=(this.rspType!="script"),g=h?e+"="+this.id+"&type=script&":"";if(typeof i=="string"){return(i&&i+"&")+g+(h?d+"=linb.SAjax.$response":"")}else{if(h){i[f]="script";i[e]=this.id;i[d]="linb.SAjax.$response"}return i}}}});Class("linb.IAjax","linb.absIO",{Instance:{_useForm:true,start:function(){var s=this,m=s.constructor,l,e,r,g,j,f,p,d,h;if(false===_.tryF(s.beforeStart,[],s)){s._onEnd();return}if(!s._retryNo){s._onStart()}e=s.id;if(m._pool[e]){m._pool[e].push(s)}else{m._pool[e]=[s]}s._onload=h=function(x){if(s.OK){return}if(!s.node){return}var i=s.node.contentWindow,v=linb.IAjax,u,k;if(linb.browser.opr){try{if(i.location=="about:blank"){return}}catch(n){}}s.OK=1;i.location.replace(v._getDummy()+"#"+linb.ini.dummy_tag);_.asyRun(function(){if(linb.browser.kde&&i.name===undefined){_.asyRun(arguments.callee);return}else{try{i.name}catch(z){_.asyRun(arguments.callee);return}}var y;if(s.id==i.name){s._clear();s._onError(new Error("IAjax no return value"));return}else{y=i.name}if(y&&(u=_.unserialize(y))&&(k=v._pool[u[v.randkey]])){for(var w=0,c=k.length;w<c;w++){k[w]._response=u;k[w]._onResponse()}}else{s._clear();s._onError(new Error("IAjax return value formatting error, or no matched 'id': "+y))}})};var q=m._if(document,e,h);s.node=q[0];s.frm=q[1];d=s.form=document.createElement("form");d.style.display="none";d.action=s.uri;d.method=s.method;d.target=e;j=s.query||{};for(l in j){if(j[l]&&j[l].nodeType==1){j[l].id=j[l].name=l;d.appendChild(j[l]);p=true}else{if(_.isDefined(j[l])){r=document.createElement("input");r.id=r.name=l;r.value=typeof j[l]=="string"?j[l]:_.serialize(j[l],function(c){return c!==undefined});d.appendChild(r)}}}if(s.method=="POST"&&p){d.enctype="multipart/form-data";if(d.encoding){d.encoding=d.enctype}}document.body.appendChild(d);d.submit();r=d=null;if(s.timeout>0){s._flag=_.asyRun(function(){if(s&&!s._end){s._time()}},s.timeout)}},_clear:function(){var g=this,m=g.node,h=g.form,l=g.constructor,k=document.createElement("div");if(linb.browser.gek&&m){try{m.onload=null;var j=m.contentWindow.document;j.write(" ");j.close()}catch(i){}}g.form=g.node=g.frm=null;if(m){k.appendChild(m.parentNode.removeChild(m))}if(h){k.appendChild(h.parentNode.removeChild(h))}k.innerHTML="";h=k=null}},Static:{$asFunction:1,method:"POST",_pool:{},_o:function(f){var c=this,d=c._pool[f],e=d[d.length-1];_.tryF(e._onload)},_getDummy:function(l){l=l||window;var q=this,k,c,p=l.document,s=linb.ini,r=linb.browser,m=q.isCrossDomain;if(q.dummy){return q.dummy}if(s.dummy){return q.dummy=s.dummy}if(r.gek){k=p.getElementsByTagName("link");for(var h=0,g=k.length;h<g;h++){c=k[h];if(c.rel=="stylesheet"&&!m(c.href)){return q.dummy=c.href.split("#")[0]}}}if(!m(s.path)){if(!p.getElementById("linb:img:bg")){c=p.createElement("img");c.id="linb:img:bg";c.src=s.file_bg;c.style.display="none";p.body.appendChild(c);c=null}}if(c=p.getElementById("linb:img:bg")){return q.dummy=c.src.split("#")[0]}else{k=p.getElementsByTagName("img");for(var h=0,g=k.length;h<g;h++){c=k[h];if(c.src&&!m(c.src)){return q.dummy=c.src.split("#")[0]}}}try{if(l!=l.parent){if((l=l.parent)&&!m(""+l.document.location.href)){return q._getDummy(l)}}}catch(n){}return"/favicon.ico"},customQS:function(f){var e=this,g=e.constructor,d=g.type;f[d]="iframe";f[g.randkey]=e.id;return f}}});Class("linb.SC",null,{Constructor:function(h,i,c,g,d){var f=linb.$cache.SC,e;if(e=f[h]||(f[h]=_.get(window,h.split(".")))){_.tryF(i,[h,null,g],e)}else{d=d||{};d.$cb=i;if(c){d.threadid=g}e=f[h]=linb.SC._call(h||"",d,c)}return e},Static:{$asFunction:1,__gc:function(c){linb.$cache.SC={}},get:function(d,c){return _.get(c||window,(d||"").split("."))},_call:function(q,u,l){l=!!l;var g,n,c,e,k=[],p=linb.SC.get,h=linb.$cache.snipScript,j=function(s,v,r){var f=this;if(s){if(!p(q)){if(f.$p){(f.$cache||h)[f.$tag]=s}else{try{_.exec(s)}catch(i){throw new Error(i.name+": "+i.message+" "+f.$tag)}}}}_.tryF(f.$cb,[f.$tag,s,r],p(q)||{})},d=function(i){var f=this;_.tryF(f.$cb,[null,null,f.threadid],f)};if(!(c=p(q))){if(n=h[q]){l=false;j.call({$cb:u.$cb},n);delete h[q]}if(!(c=p(q))){e=linb.getPath(q,".js","js");u=u||{};u.$tag=q;var m;if(l&&!u.$p){u.rspType="script";m=linb.SAjax}else{u.asy=l;m=linb.Ajax}m(e,"",j,d,null,u).start();if(!l){c=p(q)}}}else{if(u.$cb){j.call(u)}}return c},loadSnips:function(h,d,j,c,f){if(!h||!h.length){_.tryF(c,[f]);return}var k={},n={$p:1,$cache:d||linb.$cache.snipScript};for(var g=0,e=h.length;g<e;g++){k[h[g]]=1}if(j||c){n.$cb=function(i){if(j){_.tryF(j,arguments,this)}delete k[i||this.$tag];if(_.isEmpty(k)){_.tryF(c,[f]);c=null;linb.Thread.resume(f)}}}linb.Thread.suspend(f);for(var g=0,m;m=h[g++];){this._call(m,_.merge({$tag:m},n),true)}},runInBG:function(g,h,k,c){var e=0,d,l,m=this,f=function(i){while(g.length>e&&(l=m.get(d=g[e++]))){}if(!l){m._call(d,{threadid:i},true)}if(g.length<e){linb.Thread(i).abort()}if(g.length==e){e++}};linb.Thread(null,[f],1000,h,k,c,true).start()},execSnips:function(c){var d,f=c||linb.$cache.snipScript;for(d in f){try{_.exec(f[d])}catch(g){throw g}}f={}},groupCall:function(e,g,d,f){if(e){var c=this;c.execSnips();linb.Thread.suspend(f);c.loadSnips(e,0,g,function(){c.execSnips();_.tryF(d,[f]);d=null;linb.Thread.resume(f)})}else{_.tryF(d,[f])}}}});new function(){var M={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","/":"\\/","\x0B":"\\u000b"},H={"@window":"window","@this":"this"},A=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,D=/^(-\d+|\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?((?:[+-](\d{2})(\d{2}))|Z)?$/,E=function(t,i,a,v,m,n,p){for(i in t){if((a=typeof(v=t[i]))=="string"&&(v=D.exec(v))){m=v[8]&&v[8].charAt(0);if(m!="Z"){n=(m=="-"?-1:1)*((+v[9]||0)*60)+(+v[10]||0)}else{n=0}m=new Date(+v[1],+v[2]-1,+v[3],+v[4],+v[5],+v[6],+v[7]||0);n+=m.getTimezoneOffset();if(n){m.setTime(m.getTime()+n*60000)}t[i]=m}else{if(a=="object"&&t[i]&&(t[i].constructor===Object||t[i].constructor===Array)){E(t[i])}}}return t},R=function(n){return n<10?"0"+n:n},F="function",N="number",L="boolean",S="string",O="object",T={},MS=function(x,s){return"."+((s=x[s]())?s<10?"00"+s:s<100?"0"+s:s:"000")},Z=(function(a,b){a=-(new Date).getTimezoneOffset()/60;b=a>0?"+":"-";a=""+Math.abs(a);return b+(a.length==1?"0":"")+a+"00"})();T["undefined"]=function(){return"null"};T[L]=function(x){return String(x)};T[N]=function(x){return isFinite(x)&&!isNaN(x)?String(x):"null"};T[S]=function(x){return H[x]||'"'+(A.test(x)?x.replace(A,function(a,b){if(b=M[a]){return b}return"\\u"+((b=a.charCodeAt())<16?"000":b<256?"00":b<4096?"0":"")+b.toString(16)}):x)+'"'};T[O]=function(x,filter,dateformat,deep,max){var me=arguments.callee,map=me.map||(me.map={prototype:1,constructor:1,toString:1,valueOf:1});deep=deep||1;max=max||0;if(deep>linb.SERIALIZEMAXLAYER||max>linb.SERIALIZEMAXSIZE){return'"too much recursion!"'}max++;if(x){var a=[],b=[],c=x.constructor,f,i,l,v;if(x===window){return"window"}if(x===document){return"document"}if((typeof x==O||typeof x==F)&&typeof c!=F){return x.nodeType?"document.getElementById('"+x.id+"')":"$alien"}else{if(c==Array){a[0]="[";l=x.length;for(i=0;i<l;++i){if(typeof filter=="function"&&false==filter.call(x,x[i],i)){continue}if(f=T[typeof(v=x[i])]){if(typeof(v=f(v,filter,dateformat,deep+1,max))==S){b[b.length]=v}}}a[2]="]"}else{if(c==Date){if(dateformat=="utc"){return'"'+x.getUTCFullYear()+"-"+R(x.getUTCMonth()+1)+"-"+R(x.getUTCDate())+"T"+R(x.getUTCHours())+":"+R(x.getUTCMinutes())+":"+R(x.getUTCSeconds())+MS(x,"getUTCMilliseconds")+'Z"'}else{if(dateformat=="gmt"){return'"'+x.getFullYear()+"-"+R(x.getMonth()+1)+"-"+R(x.getDate())+"T"+R(x.getHours())+":"+R(x.getMinutes())+":"+R(x.getSeconds())+MS(x,"getMilliseconds")+Z+'"'}else{return"new Date("+[x.getFullYear(),x.getMonth(),x.getDate(),x.getHours(),x.getMinutes(),x.getSeconds(),x.getMilliseconds()].join(",")+")"}}}else{if(c==RegExp){return String(x)}else{if(typeof x.serialize==F){x=x.serialize()}if(typeof x==O){if(x.nodeType){return"document.getElementById('"+x.id+"')"}else{a[0]="{";for(i in x){if(map[i]||(filter===true?i.charAt(0)=="_":typeof filter=="function"?false===filter.call(x,x[i],i):0)){continue}if(f=T[typeof(v=x[i])]){if(typeof(v=f(v,filter,dateformat,deep+1,max))==S){b[b.length]=T.string(i)+":"+v}}}a[2]="}"}}else{return String(x)}}}}}a[1]=b.join(", ");return a[0]+a[1]+a[2]}return"null"};T[F]=function(x){return x.$path?x.$path:String(x)};_.serialize=function(obj,filter,dateformat){return T[typeof obj](obj,filter,dateformat||(linb&&linb.$dateFormat))||""};_.stringify=function(obj,filter,dateformat){return _.fromUTF8(_.serialize(obj,filter,dateformat))};_.unserialize=function(str,dateformat){try{str=eval("({_:"+str+"})");if(dateformat||(linb&&linb.$dateFormat)){E(str)}return str._}catch(e){return false}}};_.id=function(){var c=this,d=arguments.callee;if(c.constructor!==d||c.a){return(d._||(d._=new d)).next()}c.a=[-1];c.b=[""];c.value=""};_.id.prototype={constructor:_.id,_chars:"abcdefghijklmnopqrstuvwxyz".split(""),next:function(i){with(this){i=(i||i===0)?i:b.length-1;var m,k,l;if((m=a[i])>=25){m=0;if(i===0){a.splice(0,0,1);b.splice(0,0,"a");l=a.length;for(k=1;k<l;++k){a[k]=0;b[k]="0"}++i}else{next(i-1)}}else{++m}a[i]=m;b[i]=_chars[m];return value=b.join("")}}};Class("linb.absProfile",null,{Constructor:function(){if(!this.$linbid){this.$linbid=linb.absProfile.$linbid.next()}},Instance:{getId:function(){return this.$linbid},link:function(f,g,e){var c=this,d="$"+c.$linbid;e=e||c;if(f[d]){c.unLink(g)}f[d]=e;if(_.isArr(f)){f.push(e)}c._links[g]=f;return c},unLink:function(f){var c=this,e,d="$"+c.$linbid;if(!c._links){return}if(!(e=c._links[f])){return}if(_.isArr(e)){_.arr.removeValue(e,e[d])}delete e[d];delete c._links[f];return c},unLinkAll:function(){var d=this,g="$"+d.$linbid,c=d._links,f,e;for(e in c){f=c[e];if(_.isArr(f)){_.arr.removeValue(f,f[g])}delete f[g]}d._links={};return d}},Static:{$linbid:new _.id,$abstract:true}});(linb.Locale.en||(linb.Locale.en={})).inline={ok:"O K",cancel:"Cancel",set:"SET",today:"Today",yes:"Yes",no:"No"};linb.Locale.en.date={WEEKS:{"0":"Su","1":"Mo","2":"Tu","3":"We","4":"Th","5":"Fr","6":"Sa","7":"WK"},VIEWS:{"10 ms":"10 millisecond","100 ms":"100 milliseconds","1 s":"1 second","10 s":"10 seconds","1 n":"1 minute","5 n":"5 minutes","10 n":"10 minutes","30 n":"30 minutes","1 h":"1 hour","2 h":"2 hours","6 h":"6 hours","1 d":"1 day","1 w":"1 week","15 d":"15 days","1 m":"1 month","1 q":"1 quarter","1 y":"1 year","1 de":"10 years","1 c":"1 century"},MONTHS:{"1":"Jan.","2":"Feb.","3":"Mar.","4":"Apr.","5":"May.","6":"Jun.","7":"Jul.","8":"Aug.","9":"Sep.","10":"Oct.","11":"Nov.","12":"Dec."},MS:"ms",S:"s",N:"n",H:"h",D:"d",W:"w",M:"m",Q:"q",Y:"y",DE:"de",C:"c",HN:function(e,d,c){return d+":"+c},DHN:function(g,e,d,f){return e+"th "+d+":"+f},MDHN:function(i,f,e,h,g){return e+"th "+linb.getRes("date.MONTHS."+f)+" "+h+":"+g},HNS:function(g,e,d,f){return e+":"+d+":"+f},HNSMS:function(i,f,e,h,g){return f+":"+e+":"+h+" "+g},YM:function(e,d,c){return linb.getRes("date.MONTHS."+c)+" "+d},YQ:function(e,d,c){return c+"Q "+d},YMD:function(g,e,d,f){return e+"-"+(d.length==1?"0":"")+d+"-"+(f.length==1?"0":"")+f},YMD2:function(g,e,d,f){return linb.getRes("date.MONTHS."+d)+" "+f+", "+e},MD:function(e,d,c){return linb.getRes("date.MONTHS."+d)+" "+c},YMDH:function(i,f,e,h,g){return f+"-"+(e.length==1?"0":"")+e+"-"+(h.length==1?"0":"")+h+" "+g+":00"},YMDHN:function(k,g,f,j,i,h){return g+"-"+(f.length==1?"0":"")+f+"-"+(j.length==1?"0":"")+j+" "+i+":"+h},YMDHNS:function(m,h,g,l,k,j,i){return h+"-"+(g.length==1?"0":"")+g+"-"+(l.length==1?"0":"")+l+" "+k+":"+j+":"+i},ALL:function(q,i,h,p,m,l,k,j){return i+"-"+(h.length==1?"0":"")+h+"-"+(p.length==1?"0":"")+p+" "+m+":"+l+":"+k+" "+j}};linb.Locale.en.color={LIST:{FFFFFF:"White",FFFFF0:"Ivory",FFFFE0:"Light Yellow",FFFF00:"Yellow",FFFAFA:"Snow",FFFAF0:"Floral White",FFFACD:"Lemon Chiffon",FFF8DC:"Cornislk",FFF5EE:"Sea Shell",FFF0F5:"Lavender Blush",FFEFD5:"Papaya Whip",FFEBCD:"Blanched Almond",FFE4E1:"Misty Rose",FFE4C4:"Bisque",FFE4B5:"Moccasin",FFDEAD:"Navajo White",FFDAB9:"Peach Puff",FFD700:"Gold",FFC0CB:"Pink","FFB6C1 ":"Light Pink",FFA500:"Orange",FFA07A:"Light Salmon",FF8C00:"Dark Orange",FF7F50:"Coral",FF69B4:"Hot Pink",FF6347:"Tomato",FF4500:"Orange Red",FF1493:"Deep Pink",FF00FF:"Magenta",FF00FF:"Fuchsia",FF0000:"Red",FDF5E6:"Old Lace",FAFAD2:"Light Goldenrod Yellow",FAF0E6:"Linen",FAEBD7:"Antique White",FA8072:"Salmon",F8F8FF:"Ghost White",F5FFFA:"Medium Spring Green",F5F5F5:"White Smoke",F5DEB3:"Wheat",F4A460:"Sandy Brown",F0FFFF:"Azure",F0FFF0:"Honeydew",F0F8FF:"Alice Blue",F0E68C:"Khaki",F08080:"Light Coral",EEE8AA:"Pale Godenrod",EE82EE:"Violet",E9967A:"Dark Salmon",E6E6FA:"Lavender",E1FFFF:"Light Cyan",DEB887:"Bruly Wood",DDA0DD:"plum",DCDCDC:"Gainsboro",DC143C:"Crimson",DB7093:"Pale Violet Red",DAA520:"Gold Enrod",DA70D6:"Orchid",D8BFD8:"Thistle",D3D3D3:"Light Grey",D2B48C:"Tan",D2691E:"Chocolate",CD853F:"Peru",CD5C5C:"Indian Red",C71585:"Medium Violet Red",C0C0C0:"Silver",BDB76B:"Dark Khaki",BC8F8F:"Rosy Brown",BA55D3:"Medium Orchid",B22222:"Fire Brick",B0E0E6:"Pow Der Blue",B0C4DE:"Light Steel Blue",AFEEEE:"Pale Turquoise",ADFF2F:"Green Yellow",ADD8E6:"Light BLue",A9A9A9:"Dark Gray",A52A2A:"Brown",A0522D:"Sienna","9932CC":"Dark Orchid","98FB98":"Pale Green","9400D3":"Dark Voilet","9370DB":"Medium Purple","90EE90":"Light Green","8FBC8F":"Dark Sea Green","8B4513":"Saddle Brown","8B008B":"Dark Magenta","8B0000":"Dark Red","8A2BE2":"Blue Violet","87CEFA":"Light Sky Blue","87CEEB":"Sky Blue","808080":"Gray","808000":"Olive","800080":"Purple","800000":"Maroon","7FFFAA":"Auqamarin","7FFF00":"Chartreuse","7CFC00":"Lawn Green","7B68EE":"Medium Slate Blue","778899":"Light Slate Gray","708090":"Slate Gray","6B8E23":"Beige","6A5ACD":"Slate Blue","696969":"Dim Gray","6495ED":"Cornflower Blue","5F9EA0":"Cadet Blue","556B2F":"Olive Drab","4B0082":"Indigo","48D1CC":"Medium Turquoise","483D8B":"Dark Slate Blue","4682B4":"Steel Blue","4169E1":"Royal Blue","40E0D0":"Turquoise","3CB371":"Spring Green","32CD32":"Lime Green","2F4F4F":"Dark Slate Gray","2E8B57":"Sea Green","228B22":"Forest Green","20B2AA":"Light Sea Green","1E90FF":"Doder Blue","191970":"Midnight Blue","00FFFF":"Cyan","00FFFF":"Aqua","00FF7F":"Mint Cream","00FF00":"Lime","00FA9A":"Medium Aquamarine","00CED1":"Dark Turquoise","00BFFF":"Deep Sky Blue","008B8B":"Dark Cyan","008080":"Teal","008000":"Green","006400":"Dark Green","0000FF":"Blue","0000CD":"Medium Blue","00008B":"Dark Blue","000080":"Navy","000000":"Black"}};linb.Locale.en.editor={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",forecolor:"Font Color",bgcolor:"Background Color",left:"Align Left",center:"Align Center",right:"Align Right",justify:"Justify",indent:"Indent",outdent:"Outdent",ol:"Ordered List",ul:"Unordered List",hr:"Insert Horizontal Rule",unlink:"Remove Link",removeformat:"Remove Formatting",html:"HTML Editor",insertimage:"Insert Image",insertimage2:"Image URL:",createlink:"Insert Link",createlink2:"Link URL:",fontsize:"Font Size",fontname:"Font Family",formatblock:"Font Block",fontsizeList:"1,1(8pt);2,2(10pt);3,3(12pt);4,4(14pt);5,5(18pt);6,6(24pt);...,...",fontnameList:"Arial;Arial Black;Comic Sans MS;Courier New;Impact;Tahoma;Times New Roman;Trebuchet MS;Verdana;...",formatblockList:"p,Normal;h1,Heading1;h2,Heading2;h3,Heading3;h4,Heading4;h5,Heading5;h6,Heading6;...,..."};Class("linb.Event",null,{Constructor:function(v,s,c,y){var n=linb.Event,B=0,q,l,g=linb.DragDrop,e,d,p,k;if(!(v=v||window.event)||!(e=s)){e=s=null;return false}s=null;d=v.type;if("mouseover"==d||"mouseout"==d){B=(g&&g._profile.isWorking)?1:2;if(B!=1&&c){e=null;return n.$FALSE}if(!n._handleMouseHover(v,e,B==1)){e=null;return n.$FALSE}if(B==1){p=g&&g._dropElement}}else{if((k=n._tabHookStack).length&&n._kb[d]&&(v.$key||v.keyCode||v.charCode)==9&&false===n._handleTabHook(n.getSrc(v),k=k[k.length-1])){e=null;return}}q=y||n.getId(e);if(k=n._getProfile(q)){if(d=="DOMMouseScroll"){d="mousewheel"}if(d=="mousedown"||d=="mousewheel"){_.tryF(linb.Dom._blurTrigger,[k,v])}else{if(d=="resize"){d="size";if(linb.browser.ie&&window===e){var i=linb.browser.contentBox&&document.documentElement.clientWidth||document.body.clientWidth,x=linb.browser.contentBox&&document.documentElement.clientHeight||document.body.clientHeight;if(k._w==i&&k._h==x){e=null;return}k._w=i;k._h=x}}}var u,z,C,m=true,A=[];for(u=0;u<=2;++u){if(B==1&&u!==0&&!v.$force){break}if(B==2&&u===0){continue}C=n._type[d+u]||(n._type[d+u]=n._getEventName(d,u));if(!v.$e||v.$all||(C==v.$name)){k._getEV(A,q,C,e.$linbid)}}z=function(h,f){for(var r=0,j;j=arguments.callee.tasks[r++];){if(false===j(k,h,f)){return false}}return true};z.tasks=A;m=z(v,e.$linbid);if(g){if(d=="drag"){g._onDrag=z}else{if(d=="dragover"){g._onDragover=z}}}else{z.tasks.length=0;delete z.tasks;z=null}if(B==1){if("mouseover"==d&&g._dropElement==e.$linbid&&p&&p!=e.$linbid){l=linb.use(p).get(0);n({type:"mouseout",target:l,$e:true,$name:"beforeMouseout",preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}},l);g.setDropElement(e.$linbid)}if("mouseout"==d&&!g._dropElement&&p&&p==e.$linbid){n._preDropable=q;_.asyRun(function(){delete linb.Event._preDropable})}if(e.$linbid==g._dropElement){m=false}}if(m===false){n.stopBubble(v)}e=null;return m}},Static:{$FALSE:linb.browser.opr?undefined:false,_type:{},_kb:{keydown:1,keypress:1,keyup:1},_reg:/(-[\w]+)|([\w]+$)/g,$eventhandler:function(){return linb.Event(arguments[0],this)},$eventhandler2:function(){return linb.Event(arguments[0],this,1)},$eventhandler3:function(){return linb.Event(arguments[0],linb.Event.getSrc(arguments[0]||window.event))},_events:("mouseover,mouseout,mousedown,mouseup,mousemove,mousewheel,click,dblclick,contextmenu,keydown,keypress,keyup,scroll,blur,focus,load,unload,change,select,submit,error,move,size,dragbegin,drag,dragstop,dragleave,dragenter,dragover,drop").split(","),_getEventName:function(c,d){return(c=this._map1[c])&&((d===0||d==1||d==2)?c[d]:c)},_getProfile:function(e,d,c){return e&&((d=(c=linb.$cache.profileMap)[e])?d["linb.UIProfile"]?d:(c=c[e.replace(this._reg,"")])?c:d:c[e.replace(this._reg,"")])},_handleTabHook:function(g,f){if(g===document){return true}var e=g,d,c=e.tabIndex;do{if(linb.getId(e)==f[0]){e=g=null;return true}}while(e&&(e=e.parentNode)&&e!==document&&e!==window);d=_.tryF(f[1],[f[0],c],g);e=g=null;return false},_handleMouseHover:function(c,g,j){if(g==document){g=null;return true}var e=(c.type=="mouseover"?c.fromElement:c.toElement)||c.relatedTarget;if(j&&c.type=="mouseover"&&this._preDropable){try{do{if(e&&e.id&&e.id==this._preDropable){g=e=null;return true}}while(e&&(e=e.parentNode)&&e!==document&&e!==window)}catch(i){}}if(linb.browser.gek){try{do{if(e==g){g=e=null;return false}}while(e&&(e=e.parentNode))}catch(i){var h=this.getPos(c),e=linb([g]),d=e.offset(),k=e.cssSize(),f=(h.left<d.left||h.left>d.left+k.width||h.top<d.top||h.top>d.top+k.height);g=e=null;return c.type=="mouseover"?!f:f}}else{do{if(e==g){g=e=null;return false}}while(e&&(e=e.parentNode))}g=e=null;return true},_tabHookStack:[],pushTabOutTrigger:function(d,c){this._tabHookStack.push([linb(d)._nodes[0],c]);return this},popTabOutTrigger:function(c){if(c){this._tabHookStack=[]}else{this._tabHookStack.pop()}return this},getSrc:function(d){var c;return((c=d.target||d.srcElement||null)&&linb.browser.kde&&c.nodeType==3)?c.parentNode:c},getId:function(c){return window===c?"!window":document===c?"!document":c.id},getBtn:function(c){return linb.browser.ie?c.button==4?"middle":c.button==2?"right":"left":c.which==2?"middle":c.which==3?"right":"left"},getPos:function(g){g=g||window.event;if("pageX" in g){return{left:g.pageX,top:g.pageY}}else{var i=document,h=i.documentElement,c=i.body,e=(h&&h.scrollLeft||c&&c.scrollLeft||0)-(h.clientLeft||0),f=(h&&h.scrollTop||c&&c.scrollTop||0)-(h.clientTop||0);return{left:g.clientX+e,top:g.clientY+f}}},getKey:function(c){c=c||window.event;var h=[],n,e=c.$key||c.keyCode||c.charCode||0;if(typeof e=="string"){h[0]=e}else{var m=String.fromCharCode(e),j=c.type;if((j=="keypress"&&e>=33&&e<=128)||((e>=48&&e<=57)||(e>=65&&e<=90))){h[0]=m}else{if(!(n=arguments.callee.map)){n=arguments.callee.map={};var e,g=("3,enter,8,backspace,9,tab,12,numlock,13,enter,19,pause,20,capslock,27,esc,32, ,33,pageup,34,pagedown,35,end,36,home,37,left,38,up,39,right,40,down,44,printscreen,45,insert,46,delete,50,down,52,left,54,right,56,up,91,win,92,win,93,apps,96,0,97,1,98,2,99,3,100,4,101,5,102,6,103,7,104,8,105,9,106,*,107,+,109,-,110,.,111,/,112,f1,113,f2,114,f3,115,f4,116,f5,117,f6,118,f7,119,f8,120,f9,121,f10,122,f11,123,f12,144,numlock,145,scroll,186,;,187,=,189,-,190,.,191,/,192,`,219,[,220,\\,221,],222,',224,meta,63289,numlock,63276,pageup,63277,pagedown,63275,end,63273,home,63234,left,63232,up,63235,right,63233,down,63272,delete,63302,insert,63236,f1,63237,f2,63238,f3,63239,f4,63240,f5,63241,f6,63242,f7,63243,f8,63244,f9,63245,f10,63246,f11,63247,f12,63248,print").split(",");for(var f=1,d=g.length;f<d;f=f+2){n[g[f-1]]=g[f]}g.length=0;n[188]=","}h[0]=n[e]||m}}if((c.modifiers)?(c.modifiers&Event.CONTROL_MASK):(c.ctrlKey||c.ctrlLeft||e==17||e==57391)){if(e==17||e==57391){h[0]=""}h.push("1")}else{h.push("")}if((c.modifiers)?(c.modifiers&Event.SHIFT_MASK):(c.shiftKey||c.shiftLeft||e==16||e==57390)){if(e==16||e==57390){h[0]=""}h.push("1")}else{h.push("")}if((c.modifiers)?false:(c.altKey||c.altLeft||e==18||e==57388)){if(e==18||e==57388){h[0]=""}h.push("1")}else{h.push("")}h[0]=h[0];h.key=(c.type=="keypress"&&this.$keydownchar&&this.$keydownchar.length>1)?this.$keydownchar:h[0];h.type=c.type;if(h[1]){h.ctrlKey=1}if(h[2]){h.shiftKey=1}if(h[3]){h.altKey=1}this.$keydownchar=(c.type=="keydown")?h[0]:null;return h},getEventPara:function(g,c){if(!c){c=linb.Event.getPos(g)}var f=this.getKey(g),e={pageX:c&&c.left,pageY:c&&c.top,keyCode:f[0],ctrlKey:f[1],shiftKey:f[2],altKey:f[3]};for(var d in g){if(d.charAt(0)=="$"){e[d]=g[d]}}return e},stopBubble:function(c){c=c||window.event;if(c.stopPropagation){c.stopPropagation()}c.cancelBubble=true;this.stopDefault(c)},stopDefault:function(c){c=c||window.event;if(c.preventDefault){c.preventDefault()}c.returnValue=false},keyboardHook:function(j,c,e,g,i,h,l){if(j){var d=linb.$cache.hookKey,f=(j||"").toLowerCase()+":"+(c?"1":"")+":"+(e?"1":"")+":"+(g?"1":"");if(typeof i!="function"){delete d[f]}else{d[f]=[i,h,l]}}return this},getWheelDelta:function(c){return c.wheelDelta?c.wheelDelta/120:-c.detail/3}},Initialize:function(){var g=this;var d={move:null,size:null,drag:null,dragstop:null,dragover:null,mousewheel:null,dragbegin:"onmousedown",dragenter:"onmouseover",dragleave:"onmouseout",drop:"onmouseup"},c=["before","on","after"],h,f,e;h=g._map1={};_.arr.each(g._events,function(i){e=_.str.initial(i);h[i]=[c[0]+e,c[1]+e,c[2]+e]});h=g._eventMap={};f=g._eventHandler={};_.arr.each(g._events,function(i){e=_.str.initial(i);h[i]=h[c[1]+i]=h[c[0]+e]=h[c[1]+e]=h[c[2]+e]=i;f[i]=f[c[1]+i]=f[c[0]+e]=f[c[1]+e]=f[c[2]+e]=(i in d)?d[i]:("on"+i)});window.onresize=g.$eventhandler;if(window.addEventListener){window.addEventListener("DOMMouseScroll",g.$eventhandler3,false)}document.onmousewheel=window.onmousewheel=g.$eventhandler3}});Class("linb.CSS",null,{Static:{_r:linb.browser.ie?"rules":"cssRules",_baseid:"linb:css:base",_firstid:"linb:css:first",_lastid:"linb:css:last",_reg1:/\.(\w+)\[CLASS~="\1"\]/g,_reg2:/\[ID"([^"]+)"\]/g,_reg3:/\*([.#])/g,_reg4:/\s+/g,_reg5:/\*\|/g,_reg6:/(\s*,\s*)/g,_rep:function(d){var c=this;return d.replace(c._reg1,".$1").replace(c._reg2,"#$1").replace(c._reg3,"$1").replace(c._reg4," ").replace(c._reg5,"").replace(c._reg6,",").toLowerCase()},_createCss:function(k,g){var f=this,d=this._getHead(),i=f._firstid,h=f._lastid,e,j;e=document.createElement("style");e.type="text/css";e.id=k;if(!g){j=document.getElementById(i)||d.firstChild;while((j=j.nextSibling)&&!/^(script|link|style)$/i.test(""+j.tagName)){}if(j){d.insertBefore(e,j)}else{if(j=document.getElementById(h)){d.insertBefore(e,j)}else{d.appendChild(e)}}}else{d.appendChild(e)}return e},_getCss:function(d,c){return document.getElementById(d)||this._createCss(d,c)},_getBase:function(){return this._getCss(this._baseid)},_getFirst:function(){return this._getCss(this._firstid)},_getLast:function(){return this._getCss(this._lastid,true)},_getHead:function(){return this._head||(this._head=document.getElementsByTagName("head")[0]||document.documentElement)},_check:function(){if(!linb.browser.ie){return}var g=0;for(var f=this._getHead(),e=0,d=f.childNodes,c;c=d[e++];){if(c.type=="text/css"){g++}}return g>20},get:function(h,g){for(var f=this._getHead(),e=0,d=f.childNodes,c;c=d[e++];){if(c.type=="text/css"&&h in c&&c[h]==g){return c}}},addStyleSheet:function(c,k,d){var i,g=this,f=g._getHead(),h=function(l,r,m){var q=document.createElement("style");q.type="text/css";if(r){q.id=r}if(linb.browser.ie){q.styleSheet.cssText=l||""}else{try{q.appendChild(document.createTextNode(l||""))}catch(n){q.styleSheet.cssText=l||""}}f.insertBefore(q,m?g._getLast():g._getBase());q.disabled=true;q.disabled=false;return q},j=function(l,m){var n=m?g._getLast():g._getBase();n.styleSheet.cssText+=l;return n};if(k&&(k=k.replace(/[^\w\-\_\.\:]/g,"_"))&&(i=g.get("id",k))){return i}if(g._check()){return j(c,d)}else{return h(c,k,d)}},includeLink:function(d,j,h,c){var i,g=this,f=g._getHead();if(d&&(i=g.get("href",d))){}else{i=document.createElement("link");i.type="text/css";i.rel="stylesheet";i.href=d;if(j){i.id=j}i.media="all";_.each(c,function(k,e){i.setAttribute(e,k)})}f.insertBefore(i,h?g._getBase():g._getLast());i.disabled=true;i.disabled=false;return i},remove:function(e,d){var c=this._getHead();if(d=this.get(e,d)){d.disabled=true;c.removeChild(d)}},replaceLink:function(c,l,h,d){var i=this,j=i._getHead(),g={},f,k;g[l]=d;f=i.includeLink(c,null,false,g);if(k=i.get(l,h)){j.replaceChild(f,k)}f.disabled=true;f.disabled=false},_build:function(c,f,d){var e="";_.each(f,function(h,g){e+=g.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+h+";"});return d?e:c+"{"+e+"}"},setStyleRules:function(g,n,d){var m=this,s=true,f=document.styleSheets,l,i,c,q,j,k,r,p;g=_.str.trim(g.replace(/\s+/g," "));if(!(n&&d)){q=g.toLowerCase();_.arr.each(_.toArr(f),function(u){try{u[m._r]}catch(h){return}_.arr.each(_.toArr(u[m._r]),function(e,w){if(!e.selectorText){return}if(e.disabled){return}c=m._rep(e.selectorText);p=c.split(",");if(!n){s=false;if(_.arr.indexOf(p,q)!=-1&&p.length>1){p=_.arr.removeFrom(p,_.arr.indexOf(p,q)).join(",");r=e.cssText.slice(e.cssText.indexOf("{")+1,e.cssText.lastIndexOf("}"));if(u.insertRule){u.insertRule(p+"{"+r+"}",u[m._r].length)}else{if(u.addRule){u.addRule(p,r)}}if(u.deleteRule){u.deleteRule(w)}else{u.removeRule(w)}u.disabled=true;u.disabled=false}else{if(c==q){if(u.deleteRule){u.deleteRule(w)}else{u.removeRule(w)}u.disabled=true;u.disabled=false}}}else{if(c==q){l=e;return false}if(_.arr.indexOf(p,q)!=-1){i=e;return false}}},null,true);if(l){s=false;try{_.each(n,function(v,e){e=e.replace(/(-[a-z])/gi,function(w,x){return x.charAt(1).toUpperCase()});l.style[e]=typeof v=="function"?v(l.style[e]):v})}catch(h){}u.disabled=true;u.disabled=false;return false}else{if(i){s=false;u.insertRule(m._build(g,n),u[m._r].length);u.disabled=true;u.disabled=false;return false}}},null,true)}if(d||s){m._addRules(g,n)}return m},$getCSSValue:function(n,g){var s=this,p=s._r,e=document.styleSheets,h=e.length,f,d,u,r,q,c;n=_.str.trim(n.replace(/\s+/g," "));for(r=h-1;r>=0;r--){f=(d=e[r][p]).length;for(q=f-1;q>=0;q--){if((u=d[q]).selectorText&&!u.disabled){c=s._rep(u.selectorText);if(_.arr.indexOf(c.split(","),n)!=-1){return u.style[g]}}}}},_addRules:function(c,e){var d=this,f=d._getLast(),g=f.sheet||f.styleSheet;if(g.insertRule){g.insertRule(d._build(c,e),g[d._r].length)}else{if(g.addRule){g.addRule(c,d._build(c,e,true))}}f.disabled=true;f.disabled=false;return d}},Initialize:function(){var c=linb.browser;this.addStyleSheet("html{color:#000;background:#FFF;}body{cursor:default;font:13px/1.231 arial,helvetica,clean,sans-serif;}"+(linb.browser.ie?"body{font-size:small;font:x-small;}":"")+"body *{line-height:1.22em;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;empty-cells:show;font-size:inherit;"+(linb.browser.ie?"font:100%;":"")+"}fieldset,img,body,html{border:0;}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:normal;}ol,ul,li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym {border:0;font-variant:normal;}sup {vertical-align:text-top;}sub {vertical-align:text-bottom;}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit;}"+(c.ie?"input,textarea,select{font-size:100%;}":"")+"legend{color:#000;}del,ins{text-decoration:none;}pre,code,kbd,samp,tt{font-family:monospace;"+(c.ie?"font-size:108%;":"")+"line-height:100%;}select,input,button,textarea{font:99% arial,helvetica,clean,sans-serif;border-width:1px;}"+(linb.browser.ie6?("#"+linb.$localeDomId+"{vertical-align:baseline;}"):"")+"a{color:#0000ee;text-decoration:none;}a:hover{color:red}"+(c.gek?"a:focus{outline-offset:-1px;-moz-outline-offset:-1px !important}":"")+"div{font-size:12px;}span{outline-offset:-1px;"+(c.gek?parseFloat(linb.browser.ver)<3?"-moz-outline-offset:-1px !important;display:-moz-inline-block;display:-moz-inline-box;display:inline-block;":"display:inline-block;":c.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(c.ie?"zoom:1;":"")+"}h1{font-size:138.5%;}h2{font-size:123.1%;}h3{font-size:108%;}h1,h2,h3{margin:1em 0;}h1,h2,h3,h4,h5,h6,strong {font-weight:bold;}em{font-style:italic;}","linb.CSS")}});Class("linb.DomProfile","linb.absProfile",{Constructor:function(c){arguments.callee.upper.call(this);linb.$cache.profileMap[this.domId=c]=this},Instance:{__gc:function(){delete linb.$cache.profileMap[this.domId]},_getEV:function(d,h,e){var g=linb.$cache.profileMap[h];if(g&&(g=g.events)&&(g=g[e])){for(var f=0,c=g.length;f<c;f++){if(typeof g[g[f]]=="function"){d[d.length]=g[g[f]]}}}}},Static:{get:function(c){return linb.$cache.profileMap[c]},$abstract:true}});Class("linb.absBox",null,{Constructor:function(){this._nodes=[]},Before:function(d){var c=linb.absBox;if(c){(c=c.$type)[d.replace("linb.","")]=c[d]=d}},Instance:{__gc:function(){this._nodes=0},_get:function(c){var d=this._nodes;return _.isNumb(c)?d[c]:d},_empty:function(){this._nodes.length=0;return this},get:function(c){return this._get(c)},_each:function(d){var e=this,h;for(var g=0,f=e._nodes,c=f.length;g<c;g++){if(h=f[g]){if(false===d.call(e,h,g)){break}}}h=null;return e},each:function(c){return this._each(c)},isEmpty:function(){return !this._nodes.length},merge:function(g){if(this==linb.win||this==linb.doc||this==linb("body")){return this}var d=this,j=d.constructor,g=g._nodes,f=0,e,h=d._nodes;if(g.length){for(;e=g[f++];){h[h.length]=e}d._nodes=j._unique(h)}return d},reBoxing:function(f,c){var d=this,e=linb.absBox.$type[f||"Dom"];if(!e){return linb.UI.pack([])}if(e==d.KEY){return d}if(e=linb.SC(e)){return e.pack(d._nodes,c)}}},Static:{$abstract:true,$type:{},pack:function(c,d){var e=new this(false);e._nodes=!c?[]:d===false?c.constructor==Array?c:[c]:typeof this._ensureValues=="function"?this._ensureValues(c):c.constructor==Array?c:[c];return e},_unique:function(c){var j={},d=[],g=0,f,e;for(;f=c[g++];){e=typeof f=="string"?f:f.$linbid;if(!j[e]){j[e]=1;d[d.length]=f}}return d},plugIn:function(d,c){this.prototype[d]=c;return this}}});Class("linb.Dom","linb.absBox",{Instance:{get:function(f){var e=linb.$cache.domPurgeData,h=this._nodes,j;if(_.isNumb(f)){return(j=h[f])&&(j=e[j])&&j.element}else{var d=[],c=h.length;for(var g=0;g<c;g++){d[d.length]=(j=e[h[g]])&&j.element}return d}},each:function(d){var h=this,e=linb.$cache.domPurgeData,k;for(var g=0,f=h._nodes,c=f.length;g<c;g++){if((k=e[f[g]])&&(k=k.element)){if(false===d.call(h,k,g)){break}}}k=null;return h},serialize:function(){var c=[];this.each(function(d){c[c.length]=d.id});return"linb(['"+c.join("','")+"'])"},linbid:function(){return linb.getId(this.get(0))},id:function(f,g){var e,d,c=linb.$cache.profileMap;if(typeof f=="string"){return this.each(function(h){if((d=h.id)!==f){if(!g&&(e=c[d])){c[f]=e;delete c[d]}h.id=f}})}else{return this.get(0).id}},$sum:function(d,e){var c=[],g,f;this.each(function(h){g=d.apply(h,e||[]);if(g){if(_.isArr(g)){for(f=0;h=g[f];f++){c[c.length]=h}}else{c[c.length]=g}}});return linb(c)},children:function(){return this.$sum(function(){return _.toArr(this.childNodes)})},clone:function(c){return this.$sum(function(){var h=this.cloneNode(c?true:false),e=h.getElementsByTagName("*"),g=linb.browser.ie,d=0,f;if(g){h.removeAttribute("$linbid")}else{delete h.$linbid}for(;f=e[d];d++){if(g){f.removeAttribute("$linbid")}else{delete f.$linbid}}return h},arguments)},$iterator:function(e,d,g,c,f){return this.$sum(function(q,j,u,r,s){var w=arguments.callee;if(typeof r!="function"){var k=r||0;r=function(x,m){return m==k}}var l=0,i,h=this,p=0,v;while(h){if(h.nodeType==1){if(r(h,l++)===true){break}}if(q=="x"){h=j?h.nextSibling:h.previousSibling}else{if(q=="y"){h=j?w.call(j===1?h.lastChild:h.firstChild,"x",(j!==1),true,0,s):h.parentNode}else{u=_.isBool(u)?u:true;i=null;h=j?(v=u&&h.firstChild)?v:(v=h.nextSibling)?v:(i=h.parentNode):(v=u&&h.lastChild)?v:(v=h.previousSibling)?v:(i=h.parentNode);if(i){while(!(i=j?h.nextSibling:h.previousSibling)){h=h.parentNode;if(!h){if(p){return null}else{p=true;i=j?document.body.firstChild:document.body.lastChild;break}}}h=i}u=true}}}return h},arguments)},query:function(d,m,l){d=d||"*";var j="getElementsByTagName",k=arguments.callee,i=k.f1||(k.f1=function(p,n,s){var r=this[j](p),f=[];if(s.test(this[n])){f[f.length]=this}for(var u,q=0;u=r[q];q++){if(s.test(u[n])){f[f.length]=u}}return f}),h=k.f2||(k.f2=function(p,n,s){var r=this[j](p),f=[];if(this[n]==s){f[f.length]=this}for(var u,q=0;u=r[q];q++){if(u[n]==s){f[f.length]=u}}return f}),g=k.f3||(k.f3=function(p,n,s){var r=this[j](p),f=[];if(this[n]){f[f.length]=this}for(var u,q=0;u=r[q];q++){if(u[n]){f[f.length]=u}}return f}),e=k.f4||(k.f4=function(f){return _.toArr(this[j](f))}),c=k.f5||(k.f5=function(p,n){var r=this[j](p),f=[];if(n(this)){f[f.length]=this}for(var s,q=0;s=r[q];q++){if(n(s)){f[f.length]=s}}return f});return this.$sum(m?typeof m=="function"?c:l?l.constructor==RegExp?i:h:g:e,[d,m,l])},$add:function(r,n,k){if(_.isHash(n)||_.isStr(n)){n=linb.create(n)}if(k){k=linb(n);n=this}else{n=linb(n);k=this}if(n._nodes.length){var m=k.get(0),s=n.get(),g=linb.Dom,c=linb.$cache.profileMap,q,w,d,h,e,f,u,w,l=[];n.each(function(i){w=(d=i.id)&&(d=c[d])&&d.LayoutTrigger&&g.getStyle(m,"display")!="none"&&d.LayoutTrigger;if(w){l.push([w,d])}});if(s.length==1){q=s[0]}else{q=document.createDocumentFragment();for(h=0;e=s[h];h++){q.appendChild(e)}}r.call(m,q);for(h=0;e=l[h];h++){for(f=0;u=e[0][f];f++){u.call(e[1])}if(e[1].onLayout){e[1].boxing().onLayout(e[1])}}l.length=0;m=e=q=null}return this},prepend:function(c,d){return this.$add(function(e){if(this.previousSibling!=e){if(this.firstChild){this.insertBefore(e,this.firstChild)}else{this.appendChild(e)}}},c,d)},append:function(c,d){return this.$add(function(e){if(this.lastChild!=e){this.appendChild(e)}},c,d)},addPrev:function(c,d){return this.$add(function(e){if(this.firstChild!=e){this.parentNode.insertBefore(e,this)}},c,d)},addNext:function(c,d){return this.$add(function(e){if(this.nextSibling!=e){if(this.nextSibling){this.parentNode.insertBefore(e,this.nextSibling)}else{this.parentNode.appendChild(e)}}},c,d)},replace:function(j,h){j=linb(j);var e,f,k=this.get(0),g=j.get(),d=g.length;if(d>0&&(e=g[d-1])){k.parentNode.replaceChild(e,k);for(f=0;f<d-1;f++){e.parentNode.insertBefore(g[f],e)}if(h){this.remove()}}k=e=null;return j},swap:function(e){var c=this,d=linb.Dom.getEmptyDiv().html("*",false);e=linb(e);c.replace(d,false);e.replace(c,false);d.replace(e,false);d.get(0).innerHTML="";document.body.insertBefore(d.get(0),document.body.firstChild);return c},remove:function(d){var e=linb.$getGhostDiv();if(d===false){this.each(function(f,c){if(f.parentNode){f.parentNode.removeChild(f)}})}else{this.each(function(c){e.appendChild(c)});linb.$purgeChildren(e);e.innerHTML="";e=null}return this},empty:function(c){return this.each(function(d){linb([d]).html("",c)})},html:function(f,e){var d="",c,g=this.get(0);e=e!==false;if(f!==undefined){if(g){if(g.nodeType==3){g.nodeValue=f}else{if(!g.firstChild&&f===""){return this}if(!e&&linb.browser.ie){while(c=g.firstChild){g.removeChild(c)}}if(e){linb.$purgeChildren(g)}g.innerHTML=f}g=null}return this}else{if(g){d=(g.nodeType==3)?g.nodeValue:g.innerHTML;g=null}return d}},outerHTML:function(h,c){var j=this,i,k="",e=j.get(0),d=e.id;if(h!==undefined){var f=j.replace(_.str.toDom(h),false);j._nodes[0]=f._nodes[0];linb([e]).remove(c);return j}else{if(linb.browser.gek){var g=linb.$getGhostDiv();g.appendChild(j.get(0).cloneNode(true));k=g.innerHTML;g.innerHTML="";g=null}else{k=e.outerHTML}e=null;return k}},text:function(e){if(e!==undefined){var d=this,c=[];d.each(function(g){var f=g.firstChild;if(f&&f.nodeType!=1){f.nodeValue=e}else{c[c.length]=g}});if(c.length){linb(c).empty().each(function(f){f.appendChild(document.createTextNode(e))})}return d}else{return(function(m){var h,g=m.childNodes,f=g.length,k="",j=arguments.callee;for(h=0;h<f;h++){if(g[h].nodeType!=8){k+=(g[h].nodeType!=1)?g[h].nodeValue:j(g[h])}}return k})(this.get(0))}},attr:function(d,l){var n=this,k=arguments.callee,h=k.map1||(k.map1={"class":"className",readonly:"readOnly",tabindex:"tabIndex","for":"htmlFor",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",value:"value"}),g=k.map2||(k.map2={href:1,src:1,style:1});if(typeof d=="object"){for(var f in d){k.call(n,f,d[f])}return n}var m=linb.browser.ie&&d=="style",j=!g[d=h[d]||d];if(l!==undefined){return n.each(function(p){if(l===null){if(m){p.style.cssText=""}else{if(j){try{p[d]=null;if(p.nodeType==1){p.removeAttribute(d)}}catch(i){}}}}else{if(m){p.style.cssText=""+l}else{if(j){p[d]=l;if(p.nodeType==1&&d!="value"&&typeof l=="string"){p.setAttribute(d,l)}}else{p.setAttribute(d,l)}}}})}else{var c,e=n.get(0);if(m){return e.style.cssText}if(d=="selected"&&linb.browser.kde){e.parentNode.selectedIndex}c=((d in e)&&j)?e[d]:e.getAttribute(d,linb.browser.ie&&!j?2:undefined);e=null;return c}},css:function(c,d){return(typeof c=="object"||d!==undefined)?this.each(function(e){linb.Dom.setStyle(e,c,d)}):linb.Dom.getStyle(this.get(0),c)},caret:function(g,k){var w=this.get(0),y=w.tagName.toLowerCase(),s=typeof g,f=linb.browser.ie,u;if(!/^(input|textarea)$/i.test(y)){return}if(y=="input"&&w.type.toLowerCase()!="text"&&w.type.toLowerCase()!="password"){return}w.focus();if(s=="number"){if(f){var c=w.createTextRange();c.collapse(true);c.moveEnd("character",k);c.moveStart("character",g);c.select()}else{w.setSelectionRange(g,k)}return this}else{if(s=="string"){var c=this.caret(),j=0,i=0,q,x=w.value,h=/\r/g;if(f){j=x.substr(0,c[0]).match(h);j=(j&&j.length)||0;i=g.match(h);i=(i&&i.length)||0}if(linb.browser.opr){j=g.match(/\n/g);j=(j&&j.length)||0;i=g.match(/\r\n/g);i=(i&&i.length)||0;i=j-i;j=0}w.value=x.substr(0,c[0])+g+x.substr(c[1],x.length);q=c[0]-j+i+g.length;this.caret(q,q);return q}else{if(f){var c=document.selection.createRange(),n=c.text,j=n.length,p,i;if(y.toLowerCase()=="input"){c.moveStart("character",-w.value.length);p=c.text.length;return[p-j,p]}else{var d=c.duplicate();d.moveToElementText(w);d.setEndPoint("EndToEnd",c);p=d.text.length;return[p-j,p]}}else{return[w.selectionStart,w.selectionEnd]}}}},show:function(h,g){var e,d,i="auto",c=linb.Dom.HIDE_VALUE,f;return this.each(function(j){if(j.nodeType!=1){return}e=j.style;f=linb.getNodeData(j);if(d=(g||(e.top==c&&(f._top||i)))){e.top=d}if(d=(h||(e.left==c&&(f._left||i)))){e.left=d}if(d=f._position){if(e.position!=d){e.position=d}}f._linbhide=0;if(e.visibility!="visible"){e.visibility="visible"}})},hide:function(){var d,c,e;return this.each(function(f){if(f.nodeType!=1){return}d=f.style;c=linb([f]);e=linb.getNodeData(f);if(e._linbhide!==1){e._position=d.position;e._top=d.top;e._left=d.left;e._linbhide=1}if(d.position!="absolute"){d.position="absolute"}d.top=d.left=linb.Dom.HIDE_VALUE})},cssRegion:function(r,s){var w=this;if(typeof r=="object"){var l,v,e,d=w.get(0),k=linb.Dom,n=k._setPxStyle,e={};for(var h=0,p=k._boxArr;l=p[h++];){e[l]=((l in r)&&r[l]!==null)?n(d,l,r[l]):false}if(s){var n=k.$hasEventHandler;if(n(d,"onsize")&&(e.width||e.height)){w.onSize(true,{width:e.width,height:e.height})}if(n(d,"onmove")&&(e.left||e.top)){w.onMove(true,{left:e.left,top:e.top})}}return w}else{var g=r,u=s,q=g?w.offset(null,u):w.cssPos(),x=w.cssSize();return{left:q.left,top:q.top,width:x.width,height:x.height}}},cssSize:function(m,i){var l=this,d=l.get(0),c,e=linb.Dom,g=e._setPxStyle,j,h;if(m){var k;j=m.width!==null?g(d,"width",m.width):false;h=m.height!==null?g(d,"height",m.height):false;if(i&&(j||h)&&e.$hasEventHandler(d,"onsize")){l.onSize(true,{width:j,height:h})}c=l}else{c={width:l._W(d,1)||0,height:l._H(d,1)}}return c},cssPos:function(h,j){var d=this.get(0),e=linb.Dom,g=e._setPxStyle,k,i,c;if(h){var l;k=h.left!=null?g(d,"left",h.left):false;i=h.top!==null?g(d,"top",h.top):false;if(j&&(k||i)&&e.$hasEventHandler(d,"onmove")){this.onMove(true,{left:k,top:i})}c=this}else{g=e.getStyle;c={left:parseInt(g(d,"left"))||0,top:parseInt(g(d,"top"))||0}}d=null;return c},offset:function(h,s){var m,k,y=linb.browser,C=this,p=C.get(0),v=p,j=p.parentNode,i=p.offsetParent,B=p.ownerDocument,x=B.documentElement,z=B.body,e=/^inline|table.*$/i,g=linb.Dom.getStyle,f=g(p,"position")=="fixed",A=arguments.callee,l=A.add||(A.add=function(D,d,r){D.left+=parseInt(d,10)||0;D.top+=parseInt(r,10)||0}),q=A.border||(A.border=function(d,r){l(r,g(d,"borderLeftWidth"),g(d,"borderTopWidth"))}),n=A.TTAG||(A.TTAG={TABLE:1,TD:1,TH:1}),u=A.HTAG||(A.HTAG={BODY:1,HTML:1}),c=A.posDiff||(A.posDiff=function(E,D){var r=E.cssPos(),d=E.offset(null,D);return{left:d.left-r.left,top:d.top-r.top}});s=s?linb(s).get(0):B;if(h){if(h.left===null&&h.top===null){return C}var w=c(C,s);C.cssPos({left:h.left===null?null:(h.left-w.left),top:h.top===null?null:(h.top-w.top)});m=C}else{if(!(linb.browser.gek&&p===document.body)&&p.getBoundingClientRect){k=p.getBoundingClientRect();h={left:k.left,top:k.top};if(s.nodeType==1&&s!==document.body){l(h,-(k=s.getBoundingClientRect()).left+s.scrollLeft,-k.top+s.scrollTop)}else{l(h,Math.max(x.scrollLeft,z.scrollLeft)-x.clientLeft,Math.max(x.scrollTop,z.scrollTop)-x.clientTop)}}else{h={left:0,top:0};l(h,p.offsetLeft,p.offsetTop);while(i&&i!=s&&i!=s.offsetParent){l(h,i.offsetLeft,i.offsetTop);if(y.kde||(y.gek&&!n[i.tagName])){q(i,h)}if(!f&&g(i,"position")=="fixed"){f=true}if(i.tagName!="BODY"){v=i.tagName=="BODY"?v:i}i=i.offsetParent}while(j&&j.tagName&&j!=s&&!u[j.tagName]){if(!e.test(g(j,"display"))){l(h,-j.scrollLeft,-j.scrollTop)}if(y.gek&&g(j,"overflow")!="visible"){q(j,h)}j=j.parentNode}if((y.gek&&g(v,"position")!="absolute")){l(h,-z.offsetLeft,-z.offsetTop)}if(f){l(h,Math.max(x.scrollLeft,z.scrollLeft),Math.max(x.scrollTop,z.scrollTop))}}m=h}return m},hasClass:function(d){var c=this.get(0).className.split(/\s+/);return _.arr.indexOf(c,d)!=-1},addClass:function(d){var c,e,g=arguments.callee,f=(g.reg||(g.reg=/\s+/));return this.each(function(h){c=(e=h.className).split(f);if(_.arr.indexOf(c,d)==-1){h.className=e+" "+d}})},removeClass:function(c){var g,f,e,j,m,k=typeof c=="string",h=arguments.callee,d=(h.reg||(h.reg=/\s+/));return this.each(function(i){g=i.className.split(d);e=g.length;j=[];for(f=0;m=g[f];f++){if(k?(m!=c):(!c.test(String(m)))){j[j.length]=m}}if(e!=j.length){i.className=j.join(" ")}})},replaceClass:function(e,c){var f,d;return this.each(function(g){d=(f=g.className).replace(e,c);if(f!=d){g.className=d}})},tagClass:function(c,g){var f=this,h=arguments.callee,e=h["_r1_"+c]||(h["_r1_"+c]=new RegExp("([-\\w]+"+c+"[-\\w]*)")),d=h._r2||(h._r2=/([-\w]+)/g);f.removeClass(e);return(false===g)?f:f.replaceClass(d,"$1 $1"+c)},$addEventHandler:function(c){var f=linb.Event,e,d=f.$eventhandler;return this.each(function(g){if(g.nodeType==3){return}linb.setNodeData(g,["eHandlers","on"+f._eventMap[c]],d);if(e=f._eventHandler[c]){g[e]=d;linb.setNodeData(g,["eHandlers",e],d)}})},$removeEventHandler:function(c){var e=linb.Event,d;return this.each(function(f){if(d=e._eventHandler[c]){f[d]=null}if(f=linb.getNodeData(f,"eHandlers")){delete f["on"+e._eventMap[c]]}})},$addEvent:function(e,k,l,i){var q=this,d=linb.Event,h=_.arr.removeValue,n=_.arr.insertAny,f,j,p,g;if(!i&&i!==0){i=-1}if(typeof l=="string"){l="$"+l}else{l=undefined}q.$addEventHandler(e).each(function(c){if(c.nodeType==3){return}if(!(f=d.getId(c))){f=c.id=linb.Dom._pickDomId()}if(!(j=linb.$cache.profileMap[f])){j=new linb.DomProfile(f)}p=j.events||(j.events={});g=p[e]||(p[e]=[]);if(l===undefined){g.length=0;g=p[e]=[];i=-1;l="_"}g[l]=k;h(g,l);if(i==-1){g[g.length]=l}else{n(g,l,i)}if(linb.Event&&(j=linb.Event._getProfile(f))&&j.clearCache){j.clearCache()}});return q},$removeEvent:function(e,p,g){var r=this,n,q,h,f,l,m,d=linb.Event,j=linb.$cache.profileMap,m=d._eventMap[e];r.each(function(c){if(!(f=d.getId(c))){return}if(!(n=j[f])){return}if(!(q=n.events)){return}if(g){_.arr.each(d._getEventName(m),function(i){delete q[i]})}else{if(typeof p=="string"){p="$"+p;if(h=q[e]){if(_.arr.indexOf(h,p)!=-1){_.arr.removeValue(h,p)}delete h[p]}}else{delete q[e]}}if(linb.Event&&(n=linb.Event._getProfile(f))&&n.clearCache){n.clearCache()}});return r},$getEvent:function(e,d){var g;if(!(g=linb.Event.getId(this.get(0)))){return}if(d){return _.get(linb.$cache.profileMap,[g,"events",e,"$"+d])}else{var f=[],c=_.get(linb.$cache.profileMap,[g,"events",e]);_.arr.each(c,function(j,h){f[f.length]={o:c[j]}});return f}},$clearEvent:function(){return this.each(function(c){if(!(c=linb.Event.getId(c))){return}if(!(c=linb.$cache.profileMap[c])){return}_.breakO(c.events,2);delete c.events;_.arr.each(linb.Event._events,function(d){c["on"+d]=null})})},$fireEvent:function(c,i){var k=linb.Event._eventMap[c],m,n="on"+k,l,g,j=arguments.callee,h=linb.Event.$eventhandler,e=j.f1||(j.f1=function(){this.returnValue=false}),d=j.f2||(j.f2=function(){this.cancelBubble=true});return this.each(function(p){if(!(l=linb.getNodeData(p,["eHandlers",n]))){return}if("blur"==k||"focus"==k){try{p[k]()}catch(f){}}else{g=_.copy(i);_.merge(g,{type:k,target:p,button:1,$e:true,$name:c,preventDefault:e,stopPropagation:d},"all");l.call(p,g)}})},$canFocus:function(){var f=arguments.callee,c=linb.Dom.getStyle,g=f.map||(f.map={a:1,input:1,select:1,textarea:1,button:1,object:1}),d,e;return !!((e=this.get(0))&&e.focus&&(((d=g[e.tagName.toLowerCase()])&&!(parseInt(e.tabIndex)<=-1))||(!d&&parseInt(e.tabIndex)>=(linb.browser.ie?1:0)))&&c(e,"display")!="none"&&c(e,"visibility")!="hidden"&&e.offsetWidth>0&&e.offsetHeight>0)},focus:function(d){var c=this;if(d||c.$canFocus()){try{c.get(0).focus()}catch(f){}}return c},setSelectable:function(d){var c=arguments.callee,e=c._f||(c._f=function(){return false});return this.each(function(f){if(linb.browser.gek){f.style.MozUserSelect=d?"text":"none"}else{f.unselectable=d?"off":"on";f.onselectstart=d?null:e}})},setInlineBlock:function(){var c=this;if(linb.browser.gek){if(parseFloat(linb.browser.ver)<3){c.css("display","-moz-inline-block").css("display","-moz-inline-box").css("display","inline-block")}else{c.css("display","inline-block")}}else{if(linb.browser.ie6){c.css("display","inline-block").css({display:"inline",zoom:"1"})}else{c.css("display","inline-block")}}return c},topZindex:function(c){var g=1000,e=0,d,h=this.get(0),l=h.offsetParent,f,m;if(h.nodeType!=1||!l){return 1}f=l.childNodes;for(d=0;m=f[d];d++){if(m==h||m.nodeType!=1||!m.$linbid||m.style.display=="none"||m.style.visibility=="hidden"||linb.getNodeData(m,"zIndexIgnore")){continue}e=parseInt(m.style&&m.style.zIndex)||0;g=g>e?g:e}g++;if(g>=linb.Dom.TOP_ZINDEX){linb.Dom.TOP_ZINDEX=g+1000}if(c){h.style.zIndex=g}else{e=parseInt(h.style.zIndex)||0;return g>e?g:e}return this},nextFocus:function(f,e,d){f=_.isBool(f)?f:true;var c=this.get(0),g=this.$iterator("",f,e,function(h){return h!==c&&linb([h]).$canFocus()});if(!g.isEmpty()&&d!==false){g.focus()}c=null;return g},animate:function(k,p,c,e,d,m,f,n){var l=arguments.callee,h=l.lib||(l.lib={linear:function(r,u){return r/u},expoIn:function(r,u){return(r/u==0)?0:Math.pow(2,10*(r/u-1))},expoOut:function(r,u){return(r/u==1)?1:-Math.pow(2,-10*r/u)+1},expoInOut:function(r,u){if(r==0){return 0}else{if(r==u){return 1}else{if((r/=u/2)<1){return 1/2*Math.pow(2,10*(r-1))}}}return 1/2*(-Math.pow(2,-10*--r)+2)},sineIn:function(r,u){return -1*Math.cos(r/u*(Math.PI/2))+1},sineOut:function(r,u){return Math.sin(r/u*(Math.PI/2))},sineInOut:function(r,u){return -1/2*(Math.cos(Math.PI*r/u)-1)},backIn:function(r,u){var v=1.70158;return(r/=u)*r*((v+1)*r-v)},backOut:function(r,u){var v=1.70158;return((r=r/u-1)*r*((v+1)*r+v)+1)},backInOut:function(r,u){var v=1.70158;if((r/=u/2)<1){return 1/2*(r*r*(((v*=(1.525))+1)*r-v))}return 1/2*((r-=2)*r*(((v*=(1.525))+1)*r+v)+2)},bounceOut:function(r,u){if((r/=u)<(1/2.75)){return 7.5625*r*r}else{if(r<(2/2.75)){return 7.5625*(r-=(1.5/2.75))*r+0.75}else{if(r<(2.5/2.75)){return 7.5625*(r-=(2.25/2.75))*r+0.9375}else{return 7.5625*(r-=(2.625/2.75))*r+0.984375}}}}}),g=l.color||(l.color=function(w,v,r,s){var u,x,A=0+(100-0)*h[w](s,r),z=v[0],y=v[1];if(typeof z!="string"||typeof y!="string"){return"#fff"}if(A<0){return z}else{if(A>100){return y}}u=function(B){return(B.charAt(0)!="#")?("#"+B):B};z=u(z);y=u(y);u=function(D,C,B){return parseInt(D.slice(C,B),16)||0};x=function(B){return{red:u(B,1,3),green:u(B,3,5),blue:u(B,5,7)}};z=x(z);y=x(y);u=function(F,E,C,D){var B=F[D]+Math.round((C/100)*(E[D]-F[D]));return(B<16?"0":"")+B.toString(16)};return"#"+u(z,y,A,"red")+u(z,y,A,"green")+u(z,y,A,"blue")});e=e||100;d=d||5;m=h[m]!==undefined?m:"expoIn";var q=this,j=0,i=[function(r){if(++j>d){linb.Thread(r).abort();return false}_.each(k,function(v,s){if(typeof v=="function"){v(h[m](j,d))}else{var u=String(_.str.endWith(s.toLowerCase(),"color")?g(m,v,d,j):(v[0]+(v[1]-v[0])*h[m](j,d)));(q[s])?(q[s](u+(n||""))):(q.css(s,u+(n||"")))}})}];return linb.Thread(f||_.id(),i,Math.max(e/d-9,0),null,p,c,true)},popToTop:function(k,j,n){var l,i=this,p;n=linb(n);if(n.isEmpty()){n=linb("body")}i.css({position:"absolute",left:linb.Dom.HIDE_VALUE,top:linb.Dom.HIDE_VALUE,display:"block",zIndex:linb.Dom.TOP_ZINDEX});if(k["linb.Dom"]||k.nodeType==1||typeof k=="string"){j=(j||1).toString();var e=linb(k),q=e.offset(null,n);l={left:q.left,top:q.top,width:e.offsetWidth(),height:e.offsetHeight()}}else{j=j?"3":"0";p=j=="0"?0:8;l=k.region||{left:k.left-p,top:k.top-p,width:p*2,height:p*2}}k={left:0,top:0};var p=(n.get(0)===document.body||n.get(0)===document||n.get(0)===window)?linb.win:n,g={};g.left=p.scrollLeft();g.top=p.scrollTop();g.width=p.width()+g.left;g.height=p.height()+g.top;var m=i.offsetWidth(),f=i.offsetHeight(),d,c;switch(j){case"1":d=false;c=true;break;case"2":d=true;c=false;break;case"3":d=false;c=false;break;case"4":d=c=true;break}if(d){if(l.top+f<g.height){k.top=l.top}else{k.top=l.top+l.height-f}}else{if(l.top+l.height+f<g.height){k.top=l.top+l.height}else{k.top=l.top-f}}if(c){if(l.left+m<g.width){k.left=l.left}else{k.left=l.left+l.width-m}}else{if(l.left+l.width+m<g.width){k.left=l.left+l.width}else{k.left=l.left-m}}if(k.left+m>g.width){k.left=g.width-m}if(k.left<g.left){k.left=g.left}if(k.top+f>g.height){k.top=g.height-f}if(k.top<g.top){k.top=g.top}i.cssPos(k).css({visibility:"visible",display:"block"});n.append(i);return this},setBlurTrigger:function(c,e,k){var i=this,j=document,d="$blur_triggers$",h=linb.Dom._blurTrigger||(linb.Dom._blurTrigger=function(l,q){var r=arguments.callee,l=linb.Event.getPos(q),n=r.arr,x=_.copy(n),u,s,y,m,z;_.arr.each(x,function(p){u=true;if(!(z=n[p].target)){u=false}else{z.each(function(v){if(!linb.Dom.byId(v.id)){return u=false}})}if(!u){_.arr.removeValue(n,p);delete n[p]}});x=_.copy(n);_.arr.each(x,function(p){z=n[p];u=true;z.target.each(function(v){if(v.parentNode&&(y=v.offsetWidth)&&(m=v.offsetHeight)){s=linb([v]).offset();if(l.left>=s.left&&l.top>=s.top&&l.left<=(s.left+y)&&l.top<=(s.top+m)){return u=false}}});if(u){_.tryF(z.trigger,[],z.target);_.arr.removeValue(n,p);delete n[p]}else{return false}},null,true);x.length=0}),f=h.arr||(h.arr=[]),g;if(k){if(k["linb.Dom"]){g=k}else{if(_.isArr(k)){g=linb();g._nodes=k}}}else{g=i}if(!j.onmousedown){j.onmousedown=linb.Event.$eventhandler}g.each(function(l){if(!l.id){l.id=linb.Dom._pickDomId()}});if(!e){_.arr.removeValue(f,c);delete f[c]}else{if(f[c]){_.arr.removeValue(f,c);delete f[c]}}f[c]={trigger:e,target:g};f.push(c);return this},$firfox2:function(){if(!linb.browser.gek2){return this}var c=this;c.css("overflow","hidden");_.asyRun(function(){c.css("overflow","auto")});return c},ieRemedy:function(){if(linb.browser.ie){var e=this.get(),c=[],d=e.length;_.asyRun(function(){for(var f=0;f<d;f++){if((c[f]=e[f].style.WordWrap)=="break-word"){e[f].style.WordWrap="normal"}else{e[f].style.WordWrap="break-word"}}});_.asyRun(function(){for(var f=0;f<d;f++){e[f].style.WordWrap=c[f]}e.length=c.length=0})}return this},fixPng:function(c){if(linb.browser.ie6){c=c||"crop";return this.each(function(f){if(f.tagName=="IMG"&&/\.png$/i.test(f.src)){f.style.height=f.height;f.style.width=f.width;f.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+f.src+", sizingMethod="+c+")";f.src=linb.ini.file_bg}var e=f.currentStyle.backgroundImage||f.style.backgroundImage,d=e.match(/^url[("']+(.*\.png[^\)"']*)[\)"']+[^\)]*$/i);if(d){f.style.backgroundImage="url("+linb.ini.file_bg+")";f.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+d[1]+", sizingMethod="+c+")"}})}}},Static:{HIDE_VALUE:"-10000px",TOP_ZINDEX:10000,_boxArr:_.toArr("width,height,left,top,right,bottom"),_cursor:{},_pickDomId:function(){var c;do{c="linb_"+_.id()}while(document.getElementById(c));return c},_map:{html:1,head:1,body:1},_getTag:function(c){return c?c.$linbid?c.$linbid:c.nodeType==1?linb.$registerNode(c).$linbid:0:0},_ensureValues:function(h){var f,e,g=this._map,d=[],c=h===window?["!window"]:h===document?["!document"]:h.constructor==Array?h:h["linb.Dom"]?h._nodes:h._toDomElems?h._toDomElems():typeof h=="function"?h():[h];for(e=0;e<c.length;e++){if(f=!(f=c[e])?0:f===window?"!window":f===document?"!document":(typeof f=="string"||(f["linb.DomProfile"]&&(f=f.domId)))?f.charAt(0)=="!"?f:this._getTag(g[f]?document.getElementsByTagName(f)[0]:document.getElementById(f)):((f=c[e])["linb.UIProfile"]||f["linb.Template"])?f.renderId?f.renderId:(f.boxing().render()&&f.renderId):this._getTag(f)){d[d.length]=f}}return d.length<=1?d:this._unique(d)},_scrollBarSize:0,getScrollBarSize:function(d){var c=this;if(d||!c._scrollBarSize){var e;linb("body").append(e=linb.create('<div style="width:50px;height:50px;visibility:hidden;position:absolute;margin:0;padding:0;left:-10000px;overflow:scroll;"></div>'));c._scrollBarSize=50-e.get(0).clientWidth+2;e.remove()}return c._scrollBarSize},getStyle:function(e,d){if(!e||e.nodeType!=1){return""}var k,j;if(d=="opacity"&&linb.browser.ie){j=d="filter"}k=e.style[d];if(!k){var i=arguments.callee,l,c=i.map||(i.map={"float":1,cssFloat:1,styleFloat:1}),g=i._c1||(i._c1={}),f=i._c2||(i._c2={}),d=g[d]||(g[d]=d.replace(/\-(\w)/g,function(n,m){return m.toUpperCase()})),h=f[d]||(f[d]=d.replace(/([A-Z])/g,"-$1").toLowerCase());if(c[d]){d=linb.browser.ie?"styleFloat":"cssFloat"}k=((l=document.defaultView)&&l.getComputedStyle)?(l=l.getComputedStyle(e,null))?l.getPropertyValue(h):"":(e.currentStyle&&(e.currentStyle[d]||e.currentStyle[h]))}return j?k?(parseFloat(k.match(/alpha\(opacity=(.*)\)/)[1])||0)/100:1:(k||"")},setStyle:function(h,d,j){if(h.nodeType!=1){return}if(typeof d=="string"){var g=this.getStyle,f=g._c1||(g._c1={}),c=g._r1||(g._r1=/alpha\([^\)]*\)/ig);d=f[d]||(f[d]=d.replace(/\-(\w)/g,function(k,i){return i.toUpperCase()}));if(d=="opacity"){j=parseFloat(j)||0;j=j>0.9999?"":linb.browser.ie?"alpha(opacity="+100*j+")":j;if(linb.browser.ie){h.zoom=1;d="filter";j=h.style.filter.replace(c,"")+j}}h.style[d]=j}else{for(var e in d){arguments.callee.call(this,h,e,d[e])}}},_setPxStyle:function(e,c,f){if(e.nodeType!=1){return false}var d=e.style;if(f||f===0){f=((""+parseFloat(f))==(""+f))?(parseInt(f)||0)+"px":f+"";if((c=="width"||c=="height")&&f.charAt(0)=="-"){f="0"}if(d[c]!=f){d[c]=f;return true}}return false},_emptyDivId:"linb.empty::",getEmptyDiv:function(g){var h=1,d,f,c,e,m,k=0,l=document,j=l.body,n=function(i){i.id=d;linb([i]).attr("style","position:absolute;visibility:hidden;overflow:visible;left:"+linb.Dom.HIDE_VALUE+";top:"+linb.Dom.HIDE_VALUE+";")};g=g||1;while(1){d=this._emptyDivId+h;if(e=linb.Dom.byId(d)){if(!e.firstChild&&++k==g){return linb([e])}}else{e=l.createElement("div");n(e,d);if(j.firstChild){j.insertBefore(e,j.firstChild)}else{j.appendChild(e)}f=linb([e]);j=e=null;return f}h++}j=e=null},setCover:function(e,i){var h=arguments.callee,c="linb.temp:cover:",j="linb.temp:message:",g=typeof e=="string"?e:"",f,d;if((f=linb(c)).isEmpty()){linb("body").prepend(f=linb.create('<div id="'+c+'" style="position:absolute;display:none;left:0;top:0;background-image:url('+linb.ini.file_bg+')"><div id="'+j+'" style="position:absolute;font-size:12px"></div></div>'));linb.setNodeData(f.get(0),"zIndexIgnore",1)}d=linb(j);if(!e){if(typeof h._label=="string"&&h._label!==i){return}if(h._showed){d.empty(false);f.css({zIndex:0,cursor:"",display:"none"});h._showed=false}delete h._label}else{if(typeof i=="string"){h._label=i}var k=linb.win;if(!h._showed){f.css({zIndex:linb.Dom.TOP_ZINDEX*2,display:"",width:k.scrollWidth()+"px",height:k.scrollHeight()+"px",cursor:"progress"});h._showed=true}if(g){d.css({left:k.scrollLeft()+k.width()/2+"px",top:k.scrollTop()+k.height()/2+"px"});d.html(g+"",false)}}},byId:function(c){return document.getElementById(c||"")},$hasEventHandler:function(d,c){return linb.getNodeData(d,["eHandlers",c])},submit:function(g,f,j,h,e){f=_.isHash(f)?f:{};f=_.clone(f,function(d){return d!==undefined});j=j||"get";g=g||"";h=h||"_blank";var c=[];_.each(f,function(k,d){if(_.isDefined(k)){c.push('<textarea name="'+d+'">'+(typeof k=="object"?_.serialize(k):k)+"</textarea>")}});if(!_.isEmpty(f)){c.push('<input type="hidden" name="rnd" value="'+_()+'">')}var i=_.str.toDom('<form target="'+h+'" action="'+g+'" method="'+j+(e?'" enctype="'+e:"")+'">'+c.join("")+"</form>");linb.Dom.getEmptyDiv().append(i);i.get(0).submit();i.remove()},busy:function(c){linb.Dom.setCover(true,c)},free:function(c){linb.Dom.setCover(false,c)},animate:function(h,i,l,c,f,d,j,g,k){var e=document.createElement("div");_.merge(h,{position:"absolute",left:this.HIDE_VALUE,zIndex:this.TOP_ZINDEX+10});linb.Dom.setStyle(e,h);document.body.appendChild(e);return linb([e]).animate(i,l,function(){_.tryF(c);if(e.parentNode){e.parentNode.removeChild(e)}e=null},f,d,j,g,k)},$enableEvents:function(d){if(!_.isArr(d)){d=[d]}var c=this,e;_.arr.each(d,function(f){e=function(h,j,g){if(typeof h=="function"){return this.$addEvent(f,h,j,g)}else{if(h===null){return this.$removeEvent(f,j,g)}}var i=arguments[1]||{};i.$all=(arguments[0]===true);return this.$fireEvent(f,i)};e.$event$=1;c.plugIn(f,e)})}},After:function(C){var u=this;_.each({parent:["y",false],prev:["x",false],next:["x",true],first:["y",true],last:["y",1]},function(d,c){u.plugIn(c,function(h){return this.$iterator(d[0],d[1],true,h||1)})});_.arr.each(_.toArr("offsetLeft,offsetTop,scrollWidth,scrollHeight"),function(c){u.plugIn(c,function(){var p=this.get(0),m=window,r=document;if(p==m||p==r){if("scrollWidth"==c||"scrollHeight"==c){var l=r.documentElement,h=r.body;return Math.max(l[c],h[c])}else{p=linb.browser.contentBox?r.documentElement:r.body}}return p[c]})});var v="padding",y="margin",E="border",D="inner",x="offset",q="outer",k="width",A="height",e="Width",j="Height",f="Top",i="Left",n="top",z="left",g="Right",s="Bottom";_.arr.each([["_"+v+"H",v+f,v+s],["_"+v+"W",v+i,v+g],["_"+E+"H",E+f+e,E+s+e],["_"+E+"W",E+i+e,E+g+e],["_"+y+"W",y+i,y+g],["_"+y+"H",y+f,y+s]],function(h){var d,c=linb.Dom.getStyle;u.plugIn(h[0],function(){d=this.get(0);return(parseInt(c(d,h[1]))+parseInt(c(d,h[2])))||0})});_.arr.each([["_W",k,"_"+v+"W","_"+E+"W","_"+y+"W",D+e,x+e],["_H",A,"_"+v+"H","_"+E+"H","_"+y+"H",D+j,x+j]],function(c){u.plugIn(c[0],function(L,w,K){var J,H,F,N=L.style,S=arguments.callee,G=linb.browser.contentBox,M=S.r1||(S.r1=/%$/),m=linb.Dom.getStyle,O=linb.Dom._setPxStyle,l=typeof K,B;if(l=="undefined"||l=="boolean"){if(K===true){J=(m(L,"display")=="none");if(J){var Q=linb.Dom.getEmptyDiv().html("*",false);linb([L]).swap(Q);var R,I,P;R=N.visibility,I=N.position,P=N.display;I=I||"";R=R||"";P=P||"";N.visibility="hidden";N.position="absolute";N.display="block"}}F=linb([L]);switch(w){case 1:H=m(L,c[1]);if(isNaN(parseInt(H))||M.test(H)){H=S(L,2)-(G?F[c[2]]():0)}H=parseInt(H)||0;break;case 2:H=L[c[6]]-F[c[3]]();break;case 3:H=L[c[6]];if(!H){H=S(L,1)+(G?F[c[2]]():0)+F[c[3]]()}break;case 4:H=S(L,3);H+=F[c[4]]();break}if(J){N.display=P;N.position=I;N.visibility=R;F.swap(Q);Q.empty(false)}return parseInt(H)||0}else{switch(w){case 1:if(O(L,c[1],K)){if(linb.Dom.$hasEventHandler(L,"onsize")){var h={};h[c[1]]=1;linb([L]).onSize(true,h)}}break;case 2:S(L,1,K-(G?linb([L])[c[2]]():0));break;case 3:S(L,1,K-(F=linb([L]))[c[3]]()-(G?F[c[2]]():0));break;case 4:S(L,1,K-(F=linb([L]))[c[4]]()-F[c[3]]()-(G?F[c[2]]():0));break}}})});_.arr.each([[D+e,"_W",2],[x+e,"_W",3],[q+e,"_W",4],[D+j,"_H",2],[x+j,"_H",3],[q+j,"_H",4]],function(c){u.plugIn(c[0],function(h){var d=typeof h;if(d=="undefined"||d=="boolean"){return this[c[1]](this.get(0),c[2])}else{return this.each(function(l){this[c[1]](l,c[2],h)})}})});_.arr.each([[z+"By",z],[n+"By",n],[k+"By",k],[A+"By",A]],function(c){u.plugIn(c[0],function(w,r){if(w===0){return this}var d,p,l=c[1],h=linb.Dom.getStyle;return this.each(function(m){d=h(m,l);d=(parseInt(d)||0)+w;if(l=="width"||l=="height"){d=d>0?d:0}m.style[l]=d+"px";if(r){p={};p[l]=1;var B=linb.Dom.$hasEventHandler;if((l=="left"||l=="top")&&B(m,"onmove")){linb([m]).onMove(true,p)}if((l=="width"||l=="height")&&B(m,"onsize")){linb([m]).onSize(true,p)}}},this)})});_.arr.each(["scrollLeft","scrollTop"],function(c){u.plugIn(c,function(m){if(m!==undefined){return this.each(function(p){p[c]=m})}else{var l=this.get(0);if(l===window||l===document){var h=document.documentElement,d=document.body;if("scrollTop"==c){return window.pageYOffset||Math.max(h[c],d[c])}if("scrollLeft"==c){return window.pageXOffset||Math.max(h[c],d[c])}}return l[c]}})});_.arr.each("width,height,left,top".split(","),function(c){u.plugIn(c,function(w){var F=this,d=F.get(0),m=linb.browser,l=typeof w,r=document,B;if(!d||d.nodeType==3){return}if(l=="undefined"||l=="boolean"){if((c=="width"&&(B="Width"))||(c=="height"&&(B="Height"))){if(r===d){return Math.max(r.body["scroll"+B],r.body["offset"+B],r.documentElement["scroll"+B],r.documentElement["offset"+B])}if(window===d){return m.opr?Math.max(r.body["client"+B],window["inner"+B]):m.kde?window["inner"+B]:(linb.browser.contentBox&&r.documentElement["client"+B])||r.body["client"+B]}}if(c=="width"){w=parseInt(d.style.width)||F._W(d,1,w)}else{if(c=="height"){w=parseInt(d.style.height)||F._H(d,1,w)}else{w=linb.Dom.getStyle(d,c)}}return w=="auto"?w:(parseInt(w)||0)}else{var h=linb.Dom._setPxStyle,B,p;return F.each(function(G){if(G.nodeType!=1){return}if(G.style[c]!==w){if(c=="width"){F._W(G,1,w)}else{if(c=="height"){F._H(G,1,w)}else{if(h(G,c,w)){if((c=="top"||c=="left")&&linb.Dom.$hasEventHandler(d,"onmove")){p={};p[c]=1;linb([G]).onMove(true,p)}}}}}})}})});_.arr.each(linb.Event._events,function(c){_.arr.each(linb.Event._getEventName(c),function(d){u.$enableEvents(d)})})},Initialize:function(){_.set(linb.$cache.domPurgeData,"!window",{$linbid:"!window",element:window});_.set(linb.$cache.domPurgeData,"!document",{$linbid:"!document",element:document});linb.win=linb(["!window"],false);linb.doc=linb(["!document"],false);linb.$inlineBlock=linb.browser.gek?parseFloat(linb.browser.ver)<3?["-moz-inline-block","-moz-inline-box","inline-block"]:"inline-block":linb.browser.ie6?["inline-block","inline"]:"inline-block",linb.doc.onKeydown(function(f,d){var c=linb.Event,h,g=c.$keyboard=c.getKey(d);if(g){if(g[0].length==1){g[0]=g[0].toLowerCase()}h=linb.$cache.hookKey[g.join(":")];if(h){if(_.tryF(h[0],h[1],h[2])===false){c.stopBubble(d);return false}}}return true},"document").onKeyup(function(d,c){delete linb.Event.$keyboard},"document");linb.doc.onClick(function(j,h,l){if(!linb.History){return}var g=location.href.split("#")[0],f=linb.Event,k=f.getSrc(h),c,d=0,c;do{if(k.tagName=="A"){c=true;break}if(++d>8){break}}while(k=k.parentNode);if(c){if(k.href.indexOf("javascript:")==0){return false}if(!f.getKey(h)[2]&&f.getBtn(h)=="left"&&(k.href.indexOf(g+"#")==0||k.href.indexOf("#")==0)){linb.History.setFI(k.href.replace(g,""));return false}}},"hookA",0);if(linb.browser.ie||linb.browser.kde){document.onselectstart=function(){try{var d=event.srcElement;if(d.tagName=="INPUT"||d.tagName=="TEXTAREA"||d.tagName=="PRE"||d.tagName=="CODE"){return event.srcElement.unselectable!="on"}return false}catch(c){return false}}}linb.win.afterUnload(function(){window.onresize=null;if(window.removeEventListener){window.removeEventListener("DOMMouseScroll",linb.Event.$eventhandler3,false)}document.onmousewheel=window.onmousewheel=null;if(linb.browser.ie||linb.browser.kde){document.onselectstart=null}linb.SC.__gc();linb.Thread.__gc();linb([window,document]).$clearEvent();linb("body").empty();_.breakO(linb.$cache,2);_.breakO([linb,Class,_],3);window.Class=window.Namespace=window.linb=window._=undefined},"window",-1)}});Class("linb.DragDrop",null,{Static:{_eh:"_dd",_id:"linb.dd:proxy:",_idi:"linb.dd:td:",_type:{blank:1,move:1,shape:1,deep_copy:1,copy:1,icon:1,none:1},_Icons:{none:"0 0",move:"0 -16px",link:"0 -32px",add:"0 -48px"},_profile:{},_left:function(value){with(this._profile){if(magneticDistance>0&&xMagneticLines.length){var l=xMagneticLines.length;while(l--){if(Math.abs(value-xMagneticLines[l])<=magneticDistance){return xMagneticLines[l]}}}if(widthIncrement>1){return Math.floor(value/widthIncrement)*widthIncrement}return value}},_top:function(value){with(this._profile){if(magneticDistance>0&&yMagneticLines.length){var l=yMagneticLines.length;while(l--){if(Math.abs(value-yMagneticLines[l])<=magneticDistance){return yMagneticLines[l]}}}if(heightIncrement>1){return Math.floor(value/heightIncrement)*heightIncrement}return value}},_ini:function(g){var f=this,e=f._profile,c=linb.win;f._box={width:c.width()+c.scrollLeft(),height:c.height()+c.scrollTop()};e.ox=e.x;e.oy=e.y;if(f._proxy=g){f._proxystyle=g.get(0).style;f._profile.curPos=f._cssPos=f._proxy.cssPos();f._cssPos_x=e.x-f._cssPos.left;f._cssPos_y=e.y-f._cssPos.top;e.restrictedLeft=e.x-(e.maxLeftOffset||0);e.restrictedRight=e.x+(e.maxRightOffset||0);e.restrictedTop=e.y-(e.maxTopOffset||0);e.restrictedBottom=e.y+(e.maxBottomOffset||0);f._proxyLeft=f._pre.left=f._cssPos.left;f._proxyTop=f._pre.top=f._cssPos.top;if("move"!==e.dragType){f._proxy.css("zIndex",linb.Dom.TOP_ZINDEX*10);linb.setNodeData(f._proxy.get(0),"zIndexIgnore",1)}}},_reset:function(){var f=this,e=null,c=false;_.tryF(f.$reset);f.setDropFace();f._resetProxy();f.$proxySize=50;f.$mousemove=f.$mouseup=f.$onselectstart=f.$ondragstart="*";f._cursor="";f._pre={};f._proxyLeft=f._proxyTop=f._cssPos_x=f._cssPos_y=0;f._stop=c;if(f._onDrag&&f._onDrag.tasks){f._onDrag.tasks.length=0;delete f._onDrag.tasks}if(f._onDragover&&f._onDragover.tasks){f._onDragover.tasks.length=0;delete f._onDragover.tasks}f._cssPos=f._box=f._dropElement=f._source=f._proxy=f._proxystyle=f._onDrag=f._onDragover=e;f._profile={$id:_()+"",dragType:"shape",dragCursor:"move",targetReposition:true,dragIcon:linb.ini.path+"ondrag.gif",magneticDistance:0,xMagneticLines:[],yMagneticLines:[],widthIncrement:0,heightIncrement:0,dragDefer:0,horizontalOnly:c,verticalOnly:c,maxBottomOffset:e,maxLeftOffset:e,maxRightOffset:e,maxTopOffset:e,targetNode:e,targetCSS:e,dragKey:e,dragData:e,targetLeft:e,targetTop:e,targetWidth:e,targetHeight:e,targetOffsetParent:e,shadowFrom:e,proxyNode:e,x:0,y:0,ox:0,oy:0,curPos:{},offset:{},isWorking:c,restrictedLeft:e,restrictedRight:e,restrictedTop:e,restrictedBottom:e,dropElement:e};return f},abort:function(){this._stop=true},_end:function(){var e=this,c=document;if(e._proxy){e._unpack()}if(e.$onselectstart!="*"){c.body.onselectstart=e.$onselectstart}if(e.$ondragstart!="*"){c.ondragstart=e.$ondragstart}if(e.$mousemove!="*"){c.onmousemove=e.$mousemove}if(e.$mouseup!="*"){c.onmouseup=e.$mouseup}return e},startDrag:function(h,i,f,l,g){var j=this,p;if(j._profile.isWorking){return false}j._end()._reset();j._profile.isWorking=true;f=_.isHash(f)?f:{};h=h||window.event;if(linb.Event.getBtn(h)!=="left"){return true}j._source=f.targetNode=linb(i);j._cursor=j._source.css("cursor");if((p=f.targetNode.get(0))&&!p.id){p.id=linb.Dom._pickDomId();p=null}j._defer=f.dragDefer=_.isNumb(f.dragDefer)?f.dragDefer:0;if(true===f.dragCursor){f.dragCursor=j._cursor}if(typeof f.dragIcon=="string"){f.dragType="icon"}var m=document,n=linb.Event.getPos(h);f.x=n.left;f.y=n.top;f.dragKey=l||f.dragKey||null;f.dragData=g||f.dragData||null;var c=linb.Event.getSrc(h);j._start=function(q){var d=j._profile;_.merge(d,f,"with");j._source.beforeDragbegin();if(j._stop){j._end()._reset();return false}if(linb.Event&&(p=j._source.get(0))){linb.Event._preDropable=p.id;p=null}if(d.dragType=="icon"){d.targetReposition=false}j._ini(d.dragType=="none"?null:j._pack(n,d.targetNode));if(f.x>=j._box.width||f.y>=j._box.height){j._end()._reset();return true}j._source.onDragbegin();if(d.dragDefer<1){j.$mousemove=m.onmousemove;j.$mouseup=m.onmouseup}if(linb.browser.ie){setTimeout(function(){c.releaseCapture()})}m.onmousemove=j.$onDrag;m.onmouseup=j.$onDrop;j._source.afterDragbegin();if(d.dragDefer>0){j.$onDrag.call(j,q)}};if(linb.browser.ie){j.$ondragstart=m.ondragstart;j.$onselectstart=m.body.onselectstart;m.ondragstart=m.body.onselectstart=null;if(m.selection){_.tryF(m.selection.empty)}}linb.Event.stopBubble(h);if(f.targetNode.get(0)!==m){linb(m).onMousedown(true,linb.Event.getEventPara(h,n))}if(f.dragDefer<1){_.tryF(j._start,[h],j);return false}else{j.$mouseup=m.onmouseup;m.onmouseup=function(d){linb.DragDrop._end()._reset();return _.tryF(document.onmouseup,[d],null,true)};j.$mousemove=m.onmousemove;var k={};m.onmousemove=function(q){var d=linb.Event.getPos(q);if(d.left===k.left&&d.top===k.top){return}k=d;if(--j._defer<=0){linb.DragDrop._start(q)}return false}}},$onDrag:function(g){var h=linb.DragDrop,f=h._profile;g=g||window.event;if(!f.isWorking||h._stop){h.$onDrop(g);return true}var c=linb.Event.getPos(g);f.x=c.left;f.y=c.top;if(!f.isWorking){return false}if(h._proxy){if(!f.verticalOnly){h._proxyLeft=Math.floor(h._left(((f.maxLeftOffset!==null&&f.x<=f.restrictedLeft)?f.restrictedLeft:(f.maxRightOffset!==null&&f.x>=f.restrictedRight)?f.restrictedRight:f.x)-h._cssPos_x));if(h._proxyLeft-h._pre.left){h._proxystyle.left=h._proxyLeft+"px"}h._pre.left=h._proxyLeft;f.curPos.left=h._proxyLeft+h.$proxySize}if(!f.horizontalOnly){h._proxyTop=Math.floor(h._top(((f.maxTopOffset!==null&&f.y<=f.restrictedTop)?f.restrictedTop:(f.maxBottomOffset!==null&&f.y>=f.restrictedBottom)?f.restrictedBottom:f.y)-h._cssPos_y));if(h._proxyTop-h._pre.top){h._proxystyle.top=h._proxyTop+"px"}h._pre.top=h._proxyTop;f.curPos.top=h._proxyTop+h.$proxySize}}else{f.curPos.left=f.x;f.curPos.top=f.y}if(h._onDrag!=1){if(h._onDrag){h._onDrag(g,h._source._get(0))}else{h._onDrag=1;h._source.onDrag(true,linb.Event.getEventPara(g,c))}}return false},$onDrop:function(h){var i=linb.DragDrop,g=i._profile,c=linb.Event;h=h||window.event;i._end();if(g.isWorking){i.setDropFace();var f=i._source.onDragstop(true,c.getEventPara(h));if(i._dropElement){linb.use(i._dropElement).onDrop(true,c.getEventPara(h))}}i._reset();c.stopBubble(h);_.tryF(document.onmouseup,[h]);return !!f},setDropElement:function(c){this._profile.dropElement=this._dropElement=c;return this},getProfile:function(){var e=this,c=e._profile;c.offset=e._proxy?{x:e._proxyLeft-c.ox+e._cssPos_x,y:e._proxyTop-c.oy+e._cssPos_y}:{x:c.x-c.ox,y:c.y-c.oy};return c},setDropFace:function(j,h){var k=this,g='<div style="position:absolute;z-index:'+linb.Dom.TOP_ZINDEX+";font-size:0;line-height:0;border-",e=":dashed 1px #ff6600;",i=k._Region,c=k._rh,f="backgroundColor";if(i&&i.parent()){i.remove(false)}if(k._R){k._R.css(f,k._RB);delete k._R;delete k._RB}if(j){if(!i||!i.get(0)){i=k._Region=linb.create(g+"top"+e+'left:0;top:0;width:100%;height:0;"></div>'+g+"right"+e+'right:0;top:0;height:100%;width:0;"></div>'+g+"bottom"+e+'bottom:0;left:0;width:100%;height:0;"></div>'+g+'left:solid 2px #ff6600;width:0;left:0;top:0;height:100%;"></div>');c=k._rh=linb([i.get(1),i.get(3)])}j=linb(j);if(linb.browser.ie6){c.height("100%")}if(j.css("display")=="block"){linb.setNodeData(i.get(0),"zIndexIgnore",1);j.append(i);if(linb.browser.ie6&&!c.get(0).offsetHeight){c.height(j.get(0).offsetHeight)}}else{k._RB=j.get(0).style[f];k._R=j;j.css(f,"#FA8072")}k.setDragIcon(h||"move")}else{k.setDragIcon("none")}return k},setDragIcon:function(f){_.resetRun("setDropFace",null);var h=this,g=h._profile,e=g.proxyNode,c=h._Icons;if(e&&g.dragType=="icon"){e.first(4).css(typeof f=="object"?f:{backgroundPosition:(c[f]||f)})}return h},_setProxy:function(j,i){var e,c,h=this,f=h._profile,g=linb.Dom;if(!g.byId(h._id)){linb("body").prepend(linb.create('<div id="'+h._id+'" style="left:0;top:0;border:0;font-size:0;line-height:0;padding:'+h.$proxySize+"px;position:absolute;background:url("+linb.ini.file_bg+') repeat;"><div style="font-size:0;line-height:0;" id="'+h._idi+'">'+(linb.browser.ie6?"&nbsp;":"")+"</div></div>"))}e=linb(h._id);if(f.dragKey){h.$proxySize=0;e.css("padding",0)}else{i.left-=h.$proxySize;i.top-=h.$proxySize;if(!f.targetOffsetParent){g.setCover(true)}}if(c=f.targetOffsetParent){linb(c).append(e)}if(j){linb(h._idi).empty(false).append(j);f.proxyNode=j}else{f.proxyNode=linb(h._idi)}e.css({display:"",zIndex:g.TOP_ZINDEX*10,cursor:f.dragCursor}).offset(i,c);linb.setNodeData(e.get(0),"zIndexIgnore",1);return e},_resetProxy:function(){var l=this,h=l._profile,j=linb.Dom,g=l._id,f=l._idi;if(j.byId(g)){var e,c,i=linb(f),e=linb(g);if(linb.browser.ie6){i.html("&nbsp;",false)}else{i.empty(false)}i.attr("style","font-size:0;line-height:0;");linb("body").prepend(e.css({zIndex:0,cursor:"",display:"none",padding:l.$proxySize+"px"}));h.proxyNode=l._proxystyle=null;j.setCover(false)}},_pack:function(j,f){var g,i={},l={},h=this,c=h._profile,k;if(c.targetLeft===null||null===c.targetTop){k=f.offset(null,c.targetOffsetParent)}i.left=null!==c.targetLeft?c.targetLeft:k.left;i.top=null!==c.targetTop?c.targetTop:k.top;switch(c.dragType){case"deep_copy":case"copy":var k;l.width=_.isNumb(c.targetWidth)?c.targetWidth:(f.cssSize().width||0);l.height=_.isNumb(c.targetHeight)?c.targetHeight:(f.cssSize().height||0);var e=f.clone(c.dragType=="deep_copy").css({position:"relative",cursor:c.dragCursor,margin:0,cssFloat:"none"}).cssSize(l).id("",true).css("opacity",0.8);e.query("*").id("",true);if(c.targetCSS){e.css(c.targetCSS)}e.cssPos({margin:"0",left:"0",top:"0"}).query().id("",true);g=h._setProxy(e,i);break;case"shape":l.width=null!==c.targetWidth?c.targetWidth:f.offsetWidth();l.height=null!==c.targetHeight?c.targetHeight:f.offsetHeight();l.width-=2;l.height-=2;g=h._setProxy(linb.create("div").css({border:"dashed 1px",fontSize:"0",lineHeight:"0"}).cssSize(l),i);break;case"blank":g=h._setProxy(null,i);break;case"icon":i.left=_.isNumb(c.targetLeft)?c.targetLeft:(j.left-linb.win.scrollLeft()+16);i.top=_.isNumb(c.targetTop)?c.targetTop:(j.top-linb.win.scrollTop()+16);k='<table border="0"><tr><td valign="top"><span style="background:url('+c.dragIcon+") no-repeat left top;width:"+(_.isNumb(c.targetWidth)?c.targetWidth:16)+"px;height:"+(_.isNumb(c.targetHeight)?c.targetHeight:16)+'px;" ></span></td><td id="linb:dd:shadow" '+(c.shadowFrom?'style="border:solid 1px #e5e5e5;background:#fff;font-size:12px;line-height:14px;"':"")+">"+(c.shadowFrom?linb(c.shadowFrom).clone(true).css({left:"auto",top:"auto",position:"relative"}).outerHTML().replace(/\s*id\=[^\s\>]*/g,""):"")+"</td></tr></table>";g=h._setProxy(linb.create(k).css("opacity",0.8),i);break;case"move":h.$proxySize=0;g=f;if(g.css("position")!="absolute"){g.css("position","absolute").offset(i)}g.css("cursor",c.dragCursor)}return g},_unpack:function(){var h=this,g=h._profile,c,e;if(g.targetReposition&&("move"!=g.dragType)){if((c=linb(h._source))){if(!c.isEmpty()){if(c.css("position")!="absolute"){c.css("position","absolute").cssPos(c.offset(null,c.get(0).offsetParent))}if(linb.browser.ie){c.cssRegion({right:"auto",bottom:"auto"})}c.offset(g.curPos,g.targetOffsetParent||document.body)}}}if("move"==g.dragType){h._source.css("cursor",h._cursor)}},_unRegister:function(d,c){var e=this._eh;linb([d]).$removeEvent("beforeMouseover",e).$removeEvent("beforeMouseout",e).$removeEvent("beforeMousemove",e);linb.setNodeData(d.$linbid,["_dropKeys",c])},_register:function(d,c){var e=this._eh;linb(d).beforeMouseover(function(j,h,g){var f=linb.DragDrop,j=f._profile;if(j.dragKey&&linb.getNodeData(g,["_dropKeys",j.dragKey])){f.setDropElement(g);f._onDragover=null;linb.use(g).onDragenter(true);if(f._dropElement){_.resetRun("setDropFace",f.setDropFace,0,[g],f)}}},e).beforeMouseout(function(j,h,g){var f=linb.DragDrop,j=f._profile;if(j.dragKey&&linb.getNodeData(g,["_dropKeys",j.dragKey])){linb.use(g).onDragleave(true);f.setDropElement(f._onDragover=null);_.resetRun("setDropFace",f.setDropFace,0,[null],f)}},e).beforeMousemove(function(f,m,j){var g=linb.DragDrop,k=g._onDragover,l=g._profile;if(k==1){return}if(g._dropElement==j&&l.dragKey&&linb.getNodeData(j,["_dropKeys",l.dragKey])){if(k){k(m,j)}else{g._onDragover=1;linb.use(j).onDragover(true,linb.Event.getEventPara(m))}}},e);linb.setNodeData(d.$linbid,["_dropKeys",c],true)}},After:function(){this._reset();_.each({startDrag:function(g,d,c,f){linb.DragDrop.startDrag(g,this.get(0),d,c||"",f||null);return this},dragable:function(d,g,f,h){var e=this,c=linb.DragDrop;if(d===undefined){d=true}else{if(typeof d=="object"){g=d;d=true}}if(!!d){e.$addEvent("onMousedown",function(j,i,k){if(linb.getId(linb.Event.getSrc(i))!=k){return true}linb.use(k).startDrag(i,g,f,h)},c._eh,-1)}else{e.$removeEvent("onMousedown",c._eh)}return e},dropable:function(c,e){if(c===undefined){c=true}e=e||"default";var f=linb.DragDrop;return this.each(function(d){if(!!c){f._register(d,e)}else{f._unRegister(d,e)}})}},function(d,c){linb.Dom.plugIn(c,d)})}});Class("linb.Com",null,{Constructor:function(e,d,f){var c=this;c._nodes=[];c.host=f||c;c.$linbid=c.constructor._ctrlId.next();c.properties=e||(c.properties?_.clone(c.properties):{});c.events=_.copy(c.events)||{};if(d){_.merge(c.events,d,"all")}c._ctrlpool={};c._innerCall("initialize")},Instance:{autoDestroy:true,_toDomElems:function(){var c=this;if(!c.created){c.create(null,false)}c.render();return c.getUIComponents()._toDomElems()},setAlias:function(g){var d=this,c=d.alias;if(c&&d.host&&d.host!==d){try{delete d.host[c]}catch(f){d.host[c]=undefined}}if(d.host&&d.host!==d){d.host[g]=d}return d},getAlias:function(){return this.alias},setHost:function(e,d){var c=this;c.host=e;if(d){c.setAlias(d)}return c},getHost:function(){return this.host},setProperties:function(d,e){var c=this;if(!d){c.properties={}}else{if(typeof d=="string"){c.properties[d]=e}else{_.merge(c.properties,d,"all")}}return c},getProperties:function(c){return c?this.properties[c]:this.properties},setEvents:function(d,e){var c=this;if(!d){c.events={}}else{if(typeof d=="string"){c.events[d]=e}else{_.merge(c.events,d,"all")}}return c},getEvents:function(c){return c?this.events[c]:this.events},fireEvent:function(e,d,g){var f,c=this;if(c.events&&(f=c.events[e])){if(typeof f=="string"){f=c[f]}if(typeof f=="function"){return f.apply(g||c.host||c,d||[])}}},_fireEvent:function(e,d){var f,c=this;if(c.events&&(f=c.events[e])){if(typeof f=="string"){f=c[f]}c.$lastEvent=e;if(typeof f=="function"){d=d||[];d.splice(0,0,c,c.threadid);return f.apply(c.host||c,d)}}},_innerCall:function(d){var c=this;return _.tryF(c[d],[c,c.threadid],c)},customAppend:function(d,c,g,f,e){return false},show:function(e,g,d,k,j,i){var c=this,h=function(){if(g&&g["linb.UI"]&&!g.get(0).renderId){}else{if(false===_.tryF(c.customAppend,[g,d,j,i,k],c)){(g||linb("body")).append(c.getUIComponents(),d)}c.render();_.tryF(e,[c,k],c.host)}};c.threadid=k;if(c.created){h()}else{c.create(h,k)}return c},render:function(d){var c=this;if(c.renderId!="ok"){c.getUIComponents().render(d);c._fireEvent("onRender");c.renderId="ok"}return c},create:function(e,g){var d=this;if(d.created){_.tryF(e,[d,g],d.host);return}var f,c=[];d.threadid=g;if(false===d._fireEvent("beforeCreated")){return}c.push(function(h){if(h){d.threadid=h}d._fireEvent("onCreated")});if((f=d.base)&&f.length){c.push(function(h){linb.SC.groupCall(d.base,function(i){d._fireEvent("onLoadBaseClass",[i])},null,h)})}if((f=d.required)&&f.length){c.push(function(h){linb.SC.groupCall(d.required,function(i){d._fireEvent("onLoadReqiredClass",[i])},null,h)})}if(d.iniComponents){c.push(function(){d._createInnerComs()})}if(d.iniResource){c.push(function(){d._fireEvent("onIniResource");d._innerCall("iniResource")})}if(d.iniExComs){c.push(function(){d._innerCall("iniExComs")})}c.push(function(h){if(d.background){linb.SC.runInBG(d.background)}d._fireEvent("onReady")});c.push(function(h){d.created=true;_.tryF(e,[d,h],d.host)});if(g===false){_.arr.each(c,function(h){h.call()})}else{linb.Thread.observableRun(c,null,g)}return d},_createInnerComs:function(){var c=this;if(c._innerComsCreated){return}if(false===c._fireEvent("beforeIniComponents")){return}Array.prototype.push.apply(c._nodes,c._innerCall("iniComponents")||[]);if(c.autoDestroy){_.arr.each(c._nodes,function(d){if(d.box&&d.box["linb.UI"]&&!d.box.$noDomRoot){d.$afterdestory=function(){if(!c.$destroyed){c.destroy()}c=null};return false}})}c._fireEvent("afterIniComponents");c._innerComsCreated=true},iniComponents:function(){},getAllComponents:function(){if(!this._innerComsCreated){this._createInnerComs()}var c=[];_.each(this._ctrlpool,function(d){c.push(d)});return linb.absObj.pack(c,false)},getUIComponents:function(){if(!this._innerComsCreated){this._createInnerComs()}var d=_.copy(this._nodes),e,c="linb.UI";_.filter(d,function(f){return !!(f.box[c])});return linb.UI.pack(d,false)},getComponents:function(){if(!this._innerComsCreated){this._createInnerComs()}return linb.absObj.pack(_.copy(this._nodes),false)},setComponents:function(e){var c=this,d;_.arr.each(c._nodes,function(f){if((d=c[f.alias])&&d.get(0)==f){delete c[f.alias]}});_.arr.each(c._nodes=e.get(),function(f){f.boxing().setHost(c,f.alias)});return c},AddComponents:function(e){var c=this,d=c._nodes;_.arr.each(e.get(),function(f){f.boxing().setHost(c,f.alias);c._nodes.push(f)});return c},destroy:function(e){var c=this,d=c._nodes;c.threadid=e;c._fireEvent("onDestroy");c.$destroyed=true;if(d&&d.length){_.arr.each(d,function(f){if(f&&f.box){f.boxing().destroy()}},null,true)}if(d&&d.length){c._nodes.length=0}c._ctrlpool=null;_.breakO(c);c.$destroyed=true}},Static:{_ctrlId:new _.id(),load:function(d,e,g,f){var c=function(){linb.SC(d,function(j){if(j){var h=this,i=function(){var k=new h();if(f!==false){k.show(e)}else{_.tryF(e,[k],k)}};if(g){linb.setLang(g,i)}else{i()}}else{throw new Error(d+" doesnt exists!")}},true)};if(linb.isDomReady){c()}else{linb.main(c)}},$EventHandlers:{beforeCreated:function(c,d){},onLoadBaseClass:function(c,e,d){},onIniResource:function(c,d){},beforeIniComponents:function(c,d){},afterIniComponents:function(c,d){},onLoadRequiredClass:function(c,e,d){},onReady:function(c,d){},onRender:function(c,d){},onDestroy:function(c){}}}});Class("linb.ComFactory",null,{Static:{_pro:{},_cache:{},_domId:"linb:ComFactory:",getProfile:function(c){return c?this._pro[c]:this._pro},setProfile:function(c,d){if(typeof c=="string"){this._pro[c]=d}else{this._pro=c}return this},destroyAll:function(){_.each(this._cache,function(c){_.tryF(c.destroy,[],c)});this._cache={}},broadcast:function(d){if(typeof d=="function"){var e,f=this._cache;for(e in f){d.call(f[e],e)}}},setCom:function(d,c){this._cache[d]=c;if(c){c.comRefId=d}return this},getComFromCache:function(c){return this._cache[c]||null},getCom:function(e,d,j,k,l,r){k=k!==false;var n=this._cache,f=this._pro,i,h;if(k&&n[e]){_.tryF(d,[j,n[e]],n[e]);return n[e]}else{if(!(i=f[e])){i={cls:e,singleton:k,properties:l,events:r};h=e}else{h=i.cls||i}var q=arguments.callee,m=this,g=function(c,s,u){var v=new c();if(s.properties){_.merge(v.properties,s.properties,"all")}if(s.events){_.merge(v.events,s.events,"all")}if(s.singleton!==false){linb.ComFactory.setCom(e,v)}var p=[function(y){var w=y.getUIComponents().get(),x=function(z,C,A){var B=arguments.callee;_.arr.each(z,function(F,G){if(F.key=="linb.UI.Tag"){var D=F,H=D.properties.tagKey;if(H&&C&&C[H]){q.apply(m,[C[H],function(){y[H]=this;this.parent=y;var J=this.getUIComponents(),I;if(!(I=J.get(0))){return}linb.UI.Tag.replace(D,I,A?y:null)},u])}}if(F.children){var E=[];_.arr.each(F.children,function(I){E[E.length]=I[0]});B(E,C)}})};x(w,s.children,1)}];p.push(u||null);if(d){linb.Thread(u).insert({task:d,args:[u,v],scope:v})}_.tryF(v[s.iniMethod||"create"],p,v)};linb.Thread.observableRun(function(p){var c=function(v,s,w){var u;if(u=linb.SC.get(h)){linb.Thread(w).insert({task:g,args:[u,i,w]})}};linb.SC(h,function(s){if(s){c(0,0,p)}else{throw new Error(h+" doesnt exists!")}},true,p)},null,j)}},newCom:function(c,d,g,f,e){return this.getCom(c,d,g,false,f,e)},storeCom:function(h){var d,e,g=this._cache,f=this._domId;if(e=g[h]){if(!(d=linb.Dom.byId(f))){linb("body").prepend(linb.create('<div id="'+f+'" style="display:none;"></div>'))}d=linb(f);e=e.getUIComponents();if(!e.isEmpty()){e.get(0).unlinkParent();d.append(e)}}},prepareComs:function(c){var e=this,d=[];_.arr.each(c,function(f){d.push(function(){e.getCom(f)})});linb.Thread(null,d,500).start();return this}}});Class("linb.Profile","linb.absProfile",{Constructor:function(j,h,g,i,f,e,d){arguments.callee.upper.apply(this,arguments);var c=this;_.merge(c,d);c.key=h||c.key||"";c.alias=g||c.alias||"",c.properties=f?_.copy(f):(c.properties||{});c.events=e?_.copy(e):(c.events||{});c.host=j||c.host||c;c.box=i||c.box||c.constructor;if(c.events){c.setEvents(c.events);delete c.events}c._links={}},Instance:{setEvents:function(d){var c=this.box.$EventHandlers;return _.merge(this,d,"all",function(f,e){return c[e]})},getEvents:function(){var c=this,d,e={};_.each(c.box.$EventHandlers,function(g,f){if(c[f]){e[f]=c[f]}});return e},getProperties:function(c){var d=this.properties;return c?d[c]:_.copy(d)},setProperties:function(c,d){if(_.isHash(c)){this.properties=c}else{this.properties[c]=d}},_applySetAction:function(c,d){return c.call(this,d)},__gc:function(){var c=this;c.unLinkAll();_.tryF(c.clearCache,[],c);var d=_.get(c,["box","_namePool"]);if(d){delete d[self.alias]}_.breakO([c.properties,c.events,c],2)},boxing:function(){var c=this,d;if(!c.box){return null}if(!((d=c.object)&&d.get(0)==c&&d._nodes.length==1)){d=c.object=c.box.pack([c],false)}return d},serialize:function(j,m){var k,l=this,g=(k=l.box._beforeSerialized)?k(l):l,d={alias:g.alias,key:g.key,host:g.host};if(d.host===l){delete d.host}else{if(g.host&&!m){if(j!==false){d.host="@this"}else{delete d.host}}}if(typeof g.theme=="string"){d.theme=g.theme}var i={},f=g.box.$DataStruct,e=linb.absObj.$specialChars;_.merge(i,g.properties,function(n,c){return(c in f)&&f[c]!==n&&!e[c.charAt(0)]});if(!_.isEmpty(i)){d.properties=i}if(!_.isEmpty(k=this.getEvents())){d.events=k}var h=g.box.$EventHandlers;_.filter(d.events,function(n,c){return n!=h[c]});if(_.isEmpty(d.events)){delete d.events}return j===false?d:_.serialize(d)}}});Class("linb.absObj","linb.absBox",{Constructor:function(){arguments.callee.upper.apply(this,arguments);if(arguments[0]!==false&&typeof this._ini=="function"){return this._ini.apply(this,arguments)}},Before:function(d,c,e){linb.absBox.$type[d]=d;return true},After:function(){var y=this,p=arguments.callee,w,x,f,s,d,h,g,e,r,c,q;y._nameId=0;y._namePool={};y._nameTag=y.$nameTag||("ctl_"+(x=y.KEY.split("."))[x.length-1].toLowerCase());y._cache=[];if(y===linb.absObj||y===linb.absObj){return}d=p.a1||(p.a1=_.toArr("$Keys,$DataStruct,$EventHandlers,$DataModel"));for(g=0;r=d[g++];){f={};if((x=y.$parent)&&(h=x.length)){while(h--){_.merge(f,x[h][r])}}y[r]=f}y.setDataModel(y.DataModel);delete y.DataModel;y.setEventHandlers(y.EventHandlers);delete y.EventHandlers;d=p.a5||(p.a5=_.toArr("RenderTrigger,LayoutTrigger"));for(g=0;r=d[g++];){w=[];if((x=y.$parent)&&(e=x.length)){for(h=0;h<e;h++){s=x[h];if(s=s["$"+r]){w.push.apply(w,s)}}}if(y[r]){w.push(y[r])}y["$"+r]=w;delete y[r]}},Static:{$abstract:true,$specialChars:{_:1,$:1},getAll:function(){return this.pack(this._cache)},pickAlias:function(){var d,e=this._namePool,c=this._nameTag;while(e[d=(c+(++this._nameId))]){}return d},setDataModel:function(l){var v=this,s=linb.absObj.$specialChars,g=v.$DataStruct,q=v.$DataModel,d=v.prototype,p,k,u,e,f,h,c;for(p in l){if(!q[p]){q[p]={}}e=l[p];if(null===e||undefined===e){c=_.str.initial(p);delete g[p];delete q[p];delete d["get"+c];delete d["set"+c]}else{u=typeof e;if(u!="object"||e.constructor!=Object){e={ini:e}}g[p]=("ini" in e)?e.ini:(p in g)?g[p]:"";u=q[p];for(k in u){if(!(k in e)){e[k]=u[k]}}q[p]=e}}_.each(l,function(r,m){if(null===r||undefined===r||s[m.charAt(0)]){return}c=_.str.initial(m);f="set"+c;if(!(r&&(r.readonly||r.inner))){var j=r.set;h=d[f];d[f]=(typeof j!="function"&&typeof h=="function")?h:Class._fun(function(w,i){return this.each(function(y){if(!y.properties){return}if(y.properties[m]===w&&!i){return}var z=y.properties[m];if(y.beforePropertyChanged&&false===y.boxing().beforePropertyChanged(y,m,w,z)){return}if(typeof j=="function"){j.call(y,w,z)}else{var x=_.get(y.box.$DataModel,[m,"action"]);y.properties[m]=w;if(typeof x=="function"&&y._applySetAction(x,w,z)===false){y.properties[m]=z}}if(y.afterPropertyChanged){y.boxing().afterPropertyChanged(y,m,w,z)}})},f,v.KEY,null,"instance");delete r.set;if(d[f]!==h){d[f].$auto$=1}}else{delete d[f]}f="get"+c;if(!(r&&r.inner)){var n=r.get;h=d[f];d[f]=(typeof n!="function"&&typeof h=="function")?h:Class._fun(function(){if(typeof n=="function"){return n.call(this.get(0))}else{return this.get(0).properties[m]}},f,v.KEY,null,"instance");delete r.get;if(d[f]!==h){d[f].$auto$=1}}else{delete d[f]}});return v},setEventHandlers:function(d){var c=this;_.each(d,function(h,e){if(null===h){delete c.$EventHandlers[e];delete c.prototype[e]}else{c.$EventHandlers[e]=h;var g=function(i){var f=arguments.length;if(f==1&&(typeof i=="function"||typeof i=="string")){return this.each(function(j){if(j.renderId){j.clearCache()}j[e]=i})}else{if(f==1&&null===i){return this.each(function(j){j.clearCache();delete j[e]})}else{var q=[],n=this.get(0),r=n[e],m=n.host||n,p;if(n.$inDesign){return}if(arguments[0]!=n){q[0]=n}for(p=0;p<f;p++){q[q.length]=arguments[p]}n.$lastEvent=e;if(typeof r=="string"){r=m[r]}if(typeof r=="function"){return _.tryF(r,q,m)}}}};g.$event$=1;g.$original$=h.$original$||c.KEY;g.$name$=e;g.$type$="event";c.plugIn(e,g)}});return c}},Instance:{setAlias:function(h){var d=this,f=this.get(0),c;if(c=f.alias){if(f.host&&f.host!==f){try{delete f.host[c]}catch(g){f.host[c]=undefined}if(f.host._ctrlpool){delete f.host._ctrlpool[c]}}delete d.constructor._namePool[c]}d.constructor._namePool[f.alias=h]=1;if(f.host&&f.host!==f){f.host[h]=d;if(f.host._ctrlpool){f.host._ctrlpool[h]=d.get(0)}}return d},getAlias:function(){return this.get(0).alias},alias:function(c){return c?this.setAlias(value):this.getAlias()},host:function(d,c){return d?this.setHost(d,c):this.getHost()},setHost:function(e,d){var c=this;c.get(0).host=e;if(d){c.setAlias(d)}return c},getHost:function(){return this.get(0).host}}});Class("linb.DataBinder","linb.absObj",{Instance:{_ini:function(f,j,i){var k=this,g=k.constructor,d,l,h=g._namePool,e;if(f&&f["linb.Profile"]){d=f;e=d.alias||g.pickAlias()}else{if(f&&f.key&&linb.absBox.$type[f.key]){l=f;f=null;e=l.alias;e=(e&&!h[e])?e:g.pickAlias()}else{e=g.pickAlias()}d=new linb.Profile(i,k.$key,e,g,f,j,l)}h[e]=1;d._n=d._n||[];d._valuesMap=d._valuesMap||{};d.link(g._cache,"self").link(linb._pool,"linb");if(!d.name){d.boxing().setName(e)}k._nodes.push(d);return k},destroy:function(){this.each(function(d){var e=d.box,c=d.properties.name;_.arr.each(d._n,function(f){if(f){e._unBind(c,f)}});delete e._pool[c];d.__gc()})},updateValue:function(){return this.each(function(e,c){var d=e._valuesMap;_.arr.each(e._n,function(f){f.boxing().updateValue();d[f.properties.dataField]=f.properties.value})})},resetValue:function(i,g){var f,h,e,j,d;g=g!==false;return this.each(function(k,c){if(!i){i={}}var l=g?i:k._valuesMap;_.arr.each(k._n,function(m){h=m.properties;f=h.dataField;if(g||f in i){e=(i&&f in i)?i[f]:"";l[f]=e;j="";d=m.boxing();if(_.isHash(e)){j=_.isSet(e.caption)?e.caption:null;e=e.value}d.resetValue(e);if(!_.isSet(h.caption)&&d.setCaption&&j!==null){_.tryF(d.setCaption,[j,true],d)}}});k._valuesMap=l})},getUI:function(c){var d;if(!c){d=linb.UI.pack(this.get(0)._n,false)}else{_.arr.each(this.get(0)._n,function(e){if(e.properties.dataField==c){d=e.boxing();return false}})}return d},checkValid:function(){return linb.absValue.pack(this.get(0)._n,false).checkValid()},getValue:function(c,f,i){var e=this,h=e.get(0),d=false;_.arr.each(h._n,function(j){var k=j.properties;if(k.value!==k.$UIvalue){d=true;return false}});if(d&&!e.checkValid()){return null}var g={};_.arr.each(h._n,function(m){var n=m.properties,j=m.boxing(),k=j.getValue(),l=j.getUIValue();if(!c||(c&&(l+" ")!==(k+" "))){if(i&&j.getCaption){g[n.dataField]={value:l,caption:j.getCaption()}}else{g[n.dataField]=l}if(f!==false&&m.renderId){j.updateValue()}}});if(!c){_.merge(g,h._valuesMap,"without")}if(f!==false){_.merge(h._valuesMap,g,"all")}return g},host:function(e,d){var c=this;if(e&&d){c.setName(d)}return arguments.callee.upper.apply(c,arguments)}},Static:{$nameTag:"databinder_",_pool:{},destroyAll:function(){this.pack(this._pool,false).destroy();this._pool={}},getFromName:function(c){var d=this._pool[c];return d&&d.boxing()},_bind:function(e,h){var l,k,g=this._pool[e];if(!g){g=new linb.DataBinder();g.setName(e);g=g.get(0)}var d=g._valuesMap;if(h){if(_.arr.indexOf(g._n,h)==-1){h.link(g._n,"databinder."+e)}var f=h.properties,i,j;if(l=f.dataField){k=(d&&l in d)?d[l]:"";d[l]=k;i="";j=h.boxing();if(_.isHash(k)){i=_.isSet(k.caption)?k.caption:null;k=k.value}j.resetValue(k);if(!_.isSet(f.caption)&&j.setCaption&&i!==null){_.tryF(j.setCaption,[i,true],j)}}}},_unBind:function(c,d){if(d&&d.box&&this._pool[c]){d.unLink("databinder."+c)}},DataModel:{name:{set:function(g,h){var i=this,k=linb.DataBinder,d=k._pool,j=d[h],e=d[g],f;d[i.properties.name=g]=i;if(j&&!e&&i._n.length){f=linb.absValue.pack(_.copy(i._n));_.arr.each(i._n,function(c){k._unBind(h,c)});f.setDataBinder(g)}if(e&&!j){i._n=e._n}if(j){delete d[h]}}}}}});Class("linb.UIProfile","linb.Profile",{Instance:{renderId:null,_render:function(){var h=this,g,k=linb.$cache.profileMap;if(!h.renderId){var j=linb.Dom.byId(h.$domId);if(!j){return}if(h.domId!=h.$domId){j.id=h.domId}k[h.domId]=k[h.$domId]=h;if(!j.$linbid){linb.UI.$addEventsHanlder(j,true)}h.renderId=j.$linbid;j=null}if(g=h.RenderTrigger){for(var f=0,d=g.length;f<d;f++){g[f].call(h)}delete h.RenderTrigger;if(h.onRender){h.boxing().onRender(h)}_.tryF(h.$onrender,[],h)}if(arguments[0]===true&&(g=h.LayoutTrigger)){for(var f=0,d=g.length;f<d;f++){g[f].call(h)}if(h.onLayout){h.boxing().onLayout(h)}}if(!h.properties.lazyAppend){if(h.children){for(var f=0,e;e=h.children[f++];){if(e[0]._render){e[0]._render(true)}}}if(h.$attached){for(var f=0,e;e=h.$attached[f++];){if(e._render){e._render(true)}}delete h.$attached}if(h.exchildren){var c=[];for(var f=0,e;e=h.exchildren[f++];){h.boxing().append(e[0],e[1])}delete h.exchildren}if(h.excoms){var c=[];for(var f=0,e;e=h.excoms[f++];){e[0].show(null,h.boxing(),e[1],false)}delete h.excoms}}},__gc:function(){var e=this,d;if(e.$destroyed){return}if(e.$beforeDestroy){_.tryF(e.$beforeDestroy,[],e);delete e.$beforeDestroy}_.tryF(e.$ondestory,[],e);if(e.onDestroy){e.boxing().onDestroy()}if(e.destroyTrigger){e.destroyTrigger()}if(!e.serialId){return}if(d=e._$composed){_.each(d,function(f){f.__gc()})}e.clearCache();if(d=e.$dockParent){if(d=e.constructor.getFromDom(d)){_.tryF(d.clearCache,[],d)}}if(!e.$noReclaim){d=linb.$cache.reclaimId;(d[e.key]||(d[e.key]=[])).push(e.serialId)}else{delete e.$noReclaim}delete linb.$cache.profileMap[e.domId];delete linb.$cache.profileMap[e.$domId];if(e.box){delete e.box._namePool[e.alias]}e.unLinkAll();if(e.LayoutTrigger){e.LayoutTrigger.length=0}if(e.RenderTrigger){e.RenderTrigger.length=0}if((d=e.children).length){d=_.copy(d);for(var c=0;c<d.length;c++){d[c][0].__gc();d[c].length=0}d.length=0}e.$destroyed=true;_.tryF(e.$afterdestory,[],e);_.breakO([e.properties,e.events,e.CF,e.CB,e.CC,e.CS,e],2);e.$destroyed=true},unlinkParent:function(){var c=this;delete c.parent;delete c.childrenId;c.unLink("$parent");return c},getRootNode:function(){return linb.getNodeData(this.renderId,"element")},getRoot:function(){return linb([this.renderId],false)},linkParent:function(c,e){var d=this;d.unlinkParent();d.parent=c;d.childrenId=e;d.link(c.children,"$parent",[d,e]);return d},_cacheR1:/^\w[\w_-]*$/,setDomId:function(f){var d=this,e=linb.$cache.profileMap;if(typeof f=="string"&&(d._cacheR1.test(f)||f==d.$domId)&&!linb.Dom.byId(f)){if(d.domId!=d.$domId){delete e[d.domId]}d.domId=f;if(d.renderId){d.getRootNode().id=f}if(e[d.$domId]){e[f]=d}}return d},getDomId:function(){return this.domId},clearCache:function(){var e=this,d=e.$_egetter;for(var c in d){d[c].length=0;delete d[c]}d=e.$_domid;for(var c in d){d[c].__gc();delete d[c]}return e},_getEV:function(m,e,d){var r=this,n=e+"+"+d,k=r.$_egetter||(r.$_egetter={}),c;if(k[n]){Array.prototype.push.apply(m,k[n]);return}else{c=k[n]=[]}var h=linb.$cache.profileMap,q,p;if((q=h[e])&&(q=q.events)&&(q=q[d])){for(var j=0,f=q.length;j<f;j++){if(typeof q[q[j]]=="function"){c.push(m[m.length]=q[q[j]])}}}p=e.split(":")[0].split("-")[1];if(typeof(((q=r._CB)&&(p?(q=q[p]):1))&&(q=q[d]))=="function"){c.push(m[m.length]=q)}else{if(typeof(((q=r.CB)&&(p?(q=q[p]):1))&&(q=q[d]))=="function"){c.push(m[m.length]=q)}else{if(typeof(((q=r.behavior)&&(p?(q=q[p]):1))&&(q=q[d]))=="function"){c.push(m[m.length]=q)}}}},_cacheR2:/<!--\x03([^>^\s]*)\x04-->/g,toHtml:function(e){var v=this,q=v.box,l={},r,p="linb.UIProfile",n="linb.Profile",d,k,f,g,u,s,j;j=q._prepareData(v);if(q._dynamicTemplate){q._dynamicTemplate(v)}r=q._build(v,j);if((!v.properties.lazyAppend||e)&&(g=v.children)){for(k=0;f=g[k++];){if(f[0][p]){d=f[1]||"";u=l[d]||(l[d]=[]);u[u.length]=f[0].toHtml(e)}else{if(!f[0][n]){s.ini.call(s,f[0]);f[0]=s.get(0)}}}}return r.replace(v._cacheR2,function(h,c){return l[c]?l[c].join(""):""})},_buildItems:function(e,d,g){var c=this,f=c.box,h=f._rpt(c,linb.UI.$doTemplate(c,_.get(linb.$cache.template,[f.KEY,c._hash]),d,e));return linb.UI.$toDom(h.replace(c._cacheR2,""),g)},serialize:function(k,q){var l,h,n=this,g=(l=n.box._beforeSerialized)?l(n):n,d={alias:g.alias,key:g.key,host:g.host};if(d.host===n){delete d.host}else{if(g.host&&!q){if(k!==false){d.host="@this"}else{delete d.host}}}if(typeof g.theme=="string"){d.theme=g.theme}if(g.$domId!=g.domId){d.domId=g.domId}var j={},f=g.box.$DataStruct,e=linb.absObj.$specialChars;_.merge(j,g.properties,function(m,c){return(c in f)&&f[c]!==m&&!e[c.charAt(0)]});if(!_.isEmpty(j)){d.properties=j}if(!_.isEmpty(l=this.getEvents())){d.events=l}var i=g.box.$EventHandlers;_.filter(d.events,function(m,c){return m!=i[c]});if(_.isEmpty(d.events)){delete d.events}if(!_.isEmpty(g.CB)){d.CB=_.copy(g.CB)}if(!_.isEmpty(g.CC)){d.CC=_.copy(g.CC)}if(!_.isEmpty(g.CF)){d.CF=_.copy(g.CF)}if(!_.isEmpty(g.CS)){d.CS=_.copy(g.CS)}if(typeof g.theme=="string"){d.theme=g.theme}if(g.children&&g.children.length){g.children.sort(function(c,m){c=parseInt(c[0].properties.tabindex);m=parseInt(m[0].properties.tabindex);return c>m?1:c==m?0:-1});l=d.children=[];_.arr.each(g.children,function(c){h=[c[0].serialize(false,q)];if(c[1]){h[1]=c[1]}l[l.length]=h})}if(g.exchildren&&g.exchildren.length){d.exchildren=g.exchildren}return k===false?d:_.serialize(d)},_applySetAction:function(c,d,e){if(this.renderId){return c.call(this,d,e)}},getKey:function(d){var c;if(d.charAt(0)=="!"){d=linb.use(d).id()}if(d.indexOf(":")==-1){d=(c=linb.$cache.profileMap[d])&&(c.$domId)}return d?d.split(":")[0]:""},getSubId:function(d){var c;if(d.charAt(0)=="!"){d=linb.use(d).id()}if(d.indexOf(":")==-1){d=(c=linb.$cache.profileMap[d])&&(c.$domId)}return d?d.split(":")[2]:""},pickSubId:function(d){var c=this,e,f=c.cache_subid||(c.cache_subid={});if((f[d]||(f[d]=[]))[0]){return f[d].shift()}f=c.subId||(c.subId={});e=(f[d]||(f[d]=new _.id)).next();return e},reclaimSubId:function(e,c){var d=this.cache_subid||(this.cache_subid={});(d[c]||(d[c]=[])).push(e)},_cacheR3:/\./g,_cacheH1:{},getClass:function(e,c){e=this.keys[e]||e;var d=this,f=e+":"+(c||"");return d._cacheH1[f]||(d._cacheH1[f]=e.replace(d._cacheR3,"-").toLowerCase().replace("linb-ui","linb")+(c||""))},_getSubNodeId:function(e,d){var c=this.$domId.split(":");c[0]=e;c[2]=_.isSet(d)?(d+""):"";e=c.join(":");return e==this.$domId?linb.$cache.profileMap[e].domId:e},getSubNode:function(f,d){var c=this;if(!c.renderId){return linb()}var f=c.keys[f]||f,j,e,i,g=c.$_domid||(c.$_domid={});if(d===true){j=linb([c.renderId]).query("*","id",f==c.keys.KEY?c.domId:new RegExp("^"+f+":"+c.serialId))}else{if(!_.isSet(d)&&g[f]&&g[f]._nodes.length==1){return g[f]}j=(e=linb.Dom.byId(i=c._getSubNodeId(f,d)))?linb([e]):((e=c.renderId)&&linb.use(e).query("*","id",i));if(!_.isSet(d)){g[f]=j}}return j},getSubNodes:function(c,e){var f=0,d=[],g;for(;g=c[f++];){Array.prototype.push.apply(d,this.getSubNode(g,e).get())}return linb(d)},getSubNodeByItemId:function(c,d){return(d=this.getSubIdByItemId(d))?this.getSubNode(c,d):linb()},getItemByItemId:function(d){var c;if((c=this.ItemIdMapSubSerialId)&&(c=c[d])){return this.SubSerialIdMapItem[c]}},getItemByDom:function(c){return this.SubSerialIdMapItem&&this.SubSerialIdMapItem[this.getSubId(typeof c=="string"?c.charAt(0)=="!"?((c=linb.use(c).get(0))&&c.id):c:c.id)]},getItemIdByDom:function(d){var c;return(c=this.getItemByDom(d))&&c.id},getSubIdByItemId:function(d){var c;return(c=this.ItemIdMapSubSerialId)&&c[d]},queryItems:function(g,e,d,k,c){var i=[],h=arguments.callee,j=h.f||(h.f=function(n,m,l,q,f,p){_.arr.each(n,function(s,r){if(m===true||m.call(null,s,r,n)){p.push(f?[s,r,n]:s);if(q){return false}}if(l&&s.sub&&s.sub.length){j(s.sub,m,l,q,f,p)}})});j(g,e,d,k,c,i);return i}},Static:{getFromDom:function(c){if((c=typeof c=="string"?c.charAt(0)=="!"?((c=linb.use(c).get(0))&&c.id):c:(c&&c.id))&&(c=linb.Event._getProfile(c))&&c["linb.UIProfile"]){return c}}}});Class("linb.UI","linb.absObj",{Before:function(d,c,e){linb.absBox.$type[d.replace("linb.UI.","").replace("linb.","")]=linb.absBox.$type[d]=d;return true},After:function(){linb.absObj.After.apply(this,arguments);var A=this,p=arguments.callee,y,z,f,x,n,h,g,l,r,s,q,m;A._ctrlId=new _.id();A._idCache=[];A.$cssKeys={};z=A.$Keys;z.KEY=z.$key=A.KEY;A.addTemplateKeys(_.toArr(z,true));s="$Behaviors";f={};if((z=A.$parent)&&(l=z.length)){while(l--){q=z[l][s];for(h in q){if(typeof q[h]=="object"){if(_.isArr(q[h])){x=f[h]||(f[h]=[]);x.push.apply(x,q[h])}else{x=f[h]||(f[h]={});_.merge(x,q[h])}}else{f[h]=q[h]}}}}A[s]=f;s="$Templates";f={};if((z=A.$parent)&&(l=z[0])){for(h in l[s]){if(h.charAt(0)!="$"){f[h]=l[s][h]}}}A[s]=_.clone(f);s="$Appearances";f={};if((z=A.$parent)&&(l=z.length)){while(l--){q=z[l];for(h in q[s]){z=q[s][h];x=f[h]||(f[h]={});_.merge(x,z)}}}A[s]=f;A.setTemplate(A.Templates);delete A.Templates;A.setBehavior(A.Behaviors||{});delete A.Behaviors;A.setAppearance(A.Appearances);delete A.Appearances;if(z=A.PublicAppearance){linb.UI.$cache_css+=A.buildCSSText(z);delete A.PublicAppearance}},Instance:{setTheme:function(e){if(typeof e!="string"||!e){e=null}var d,c=[];this.each(function(f){if(e!=f.theme){if(e===null){delete f.theme}else{f.theme=e}c.push(f)}});linb.UI.pack(c,false).refresh();return this},getTheme:function(){return this.get(0)&&this.get(0).theme},destroy:function(){this.each(function(c){if(c.$destroyed){return}if(c.$beforeDestroy){_.tryF(c.$beforeDestroy,[],c);delete c.$beforeDestroy}if(c.beforeDestroy&&false===c.boxing().beforeDestroy()){return}if(c.renderId){c.getRoot().remove()}else{c.__gc()}});this._nodes.length=0},serialize:function(d,e){var c=[];this.each(function(f){c[c.length]=f.serialize(false,e)});return d===false?c:c.length==1?" new "+c[0].key+"("+_.serialize(c[0])+")":"linb.UI.unserialize("+_.serialize(c)+")"},getProperties:function(e){var d={},g=this.get(0),i=g.properties,f;if(e){return _.copy(i)}else{for(var c in i){f="get"+_.str.initial(c);if(typeof this[f]=="function"){d[c]=this[f].call(this)}}return d}},setProperties:function(c,e){if(typeof c=="string"){var d={};d[c]=e;c=d}return this.each(function(f){_.each(c,function(h,g){var j="set"+_.str.initial(g),i=f.boxing();if(typeof i[j]=="function"){i[j].call(i,h)}})})},setEvents:function(c,e){if(typeof c=="string"){var d={};d[c]=e;c=d}return this.each(function(g){var f=g.boxing();_.each(c,function(i,h){if(typeof f[h]=="function"){f[h].call(f,i)}})})},_toDomElems:function(){var c=[];_.arr.each(this._nodes,function(d){if(!d.renderId){c.push(d)}});if(c.length){linb.UI.pack(c,false).render()}c.length=0;_.arr.each(this._nodes,function(d){c.push(d.renderId)});return c},_ini:function(k,f,q,y,d,l,m,j){var r=this,x=r.constructor,g,p="default",h,e=x._namePool,s,w;if(k&&k["linb.Profile"]){g=k;s=g.alias||x.pickAlias();linb.UIProfile.apply(g,[q,r.$key,s,x,null,f])}else{if(k&&k.key&&linb.absBox.$type[k.key]){h=k;k=null;s=h.alias;s=(s&&!e[s])?s:x.pickAlias()}else{s=x.pickAlias()}g=new linb.UIProfile(q,r.$key,s,x,k,f,h)}e[s]=1;for(var u in (w=x.$DataStruct)){if(!(u in g.properties)){g.properties[u]=typeof w[u]=="object"?_.copy(w[u]):w[u]}}g.keys=x.$Keys;g.CS=d?_.copy(d):(g.CS||{});g.CB=m?_.copy(m):(g.CB||{});g.CC=l?_.copy(l):(g.CC||{});g.CF=j?_.copy(j):(g.CF||{});if(typeof y=="string"){g.theme=y}g.template=x.getTemplate();g.behavior=x.$Behaviors;if(!g.serialId){g.serialId=x._pickSerialId()}g.$domId=g.key+":"+g.serialId+":";g.domId=g.domId||g.$domId;g.RenderTrigger=_.copy(x.$RenderTrigger);g.LayoutTrigger=_.copy(x.$LayoutTrigger);g.link(linb.UI._cache,"UI").link(x._cache,"self").link(linb._pool,"linb");w=g.children;g.children=[];if(w&&w.length){for(var u=0,n;n=w[u++];){if(!n[0]["linb.UIProfile"]){n[0]=new (linb.SC(n[0].key))(n[0]).get(0)}n[0].linkParent(g,n[1])}}r._nodes.push(g);return r},busy:function(e,d,c){e=typeof e=="string"?e:"Loading...";d=typeof d=="string"?d:'<span style="background:'+linb.UI.$bg("busy.gif","no-repeat left center")("linb.UI.Public")+';padding-left:16px;">'+e+"</span>";return this.each(function(f){_.resetRun(f.$linbid+":busy",function(){var j=f.keys;c=j[c]||j.BORDER||j.PANEL||j.KEY;var g=f.getSubNode(c),h=g.cssSize(),i;if(!(i=f.$busy)){i=f.$busy=linb.create('<div style="left:0;top:0;z-index:10;position:absolute;background-color:#DDD;"></div><div style="left:0;top:0;z-index:20;text-align:center;position:absolute;"><div>'+d+"</div></div>");linb([i.get(0)]).css({opacity:0.5});linb(g).append(i)}i.css({display:"",width:h.width+"px",height:h.height+"px"});linb([i.get(1).firstChild]).html(d,false).css("paddingTop",h.height/2+"px")},50)})},free:function(){return this.each(function(c){_.resetRun(c.$linbid+":busy");if(c.$busy){c.$busy.css("display","none")}})},reLayout:function(c){return this.each(function(e){if(!e.renderId){return}var d=e.properties;if((!e.$noB)&&d.border&&e.boxing()._border){e.boxing()._border(null,false)}if(d.dock&&d.dock!="none"){e.boxing().adjustDock(c)}else{if(c){e._resize_h=-1;e._resize_w=-1}linb.UI.$tryResize(e,d.width,d.height,c)}})},toHtml:function(d){var c=[];_.arr.each(this._nodes,function(e){c[c.length]=e.toHtml(d)});return c.join("")},render:function(d){var j=this,h=[],g,f,c,e=j._nodes,m,k=[],p=linb.Dom.byId;linb.UI.$applyCSS();for(g=0;c=e[g++];){if(!c.renderId&&!linb.Dom.byId(c.domId)&&!linb.Dom.byId(c.$domId)){h[h.length]=c}}if(f=h.length){for(g=0;g<f;g++){k[k.length]=h[g].toHtml()}linb.UI.$toDom(k.join(""))}for(g=0;c=e[g++];){c._render(d)}k.length=h.length=0;return j},renderOnto:function(g,f){g=linb(g);if(g.isEmpty()){return this}var d=this,h=d.get(0),e=arguments.callee,c=e.para||(e.para=function(k){var j=k.cssRegion();j.tabindex=k.attr("tabIndex");if(j.tabindex<=0){delete j.tabindex}j.zIndex=k.css("zIndex");j.position=k.css("position");return j}),i=g.id();_.merge(h.properties,c(g),"all");h.properties.dock="none";if(!h.alias&&i){h.alias=i}if(h.alias){d.setHost(f||window,h.alias)}d.render(true);g.replace(d.getRoot());if(i){d.setDomId(i)}return d},setDomId:function(c){this.get(0).setDomId(c);return this},hide:function(){return this.each(function(c){if(c.renderId){c.getRoot().hide();c.properties.top=c.properties.left=-10000;c.properties.dockIgnore=true}})},show:function(d,c,f,e){return this.each(function(j){var h=j.properties,g;f=(f||f===0)?(parseInt(f)||0):null;e=(e||e===0)?(parseInt(e)||0):null;if(f!==null){h.left=f}if(e!==null){h.top=e}if(linb.getNodeData(j.renderId,"_linbhide")){g=1;h.dockIgnore=false;j.getRoot().show(f&&(f+"px"),e&&(e+"px"));if(h.dock&&h.dock!="none"){linb.UI.$dock(j,false,true)}}else{if(!d&&(!j.renderId||(j.getRootNode().id||"").indexOf(linb.Dom._emptyDivId)===0)){d=linb("body")}}var i=d,k;if(i){if(i["linb.UIProfile"]){k=i.renderId;i=i.boxing()}else{if(i["linb.UI"]){k=(k=i.get(0))&&k.renderId}else{k=(i=linb(i))&&i._nodes[0]}}if(k){i.append(j.boxing(),c);if(!g){j.getRoot().show(f&&(f+"px"),e&&(e+"px"))}}}})},clone:function(){var c=[],d=function(f){delete f.alias;delete f.domId;if(f.children){for(var e=0,g;g=f.children[e];e++){d(g)}}};this.each(function(e){e=e.serialize(false,true);d(e);c.push(e)});return this.constructor.unserialize(c)},refresh:function(){var m,e,j,c,l,f,g,i,h,d,k;return this.each(function(p){if(!p.renderId){return}h=p.box;f=p.$linbid;g=p.serialId;if(typeof p.boxing().getUIValue=="function"){k=p.boxing().getUIValue();if(p.boxing().getValue()===k){k=null}}if(j=!!p.parent){c=p.parent.boxing();m=p.childrenId}else{c=p.getRoot().parent()}e=linb.$getGhostDiv();p.boxing().getChildren().reBoxing().each(function(q){e.appendChild(q)});e=null;d=_.copy(p.children);p.boxing().removeChildren();l=p.serialize(false,true);i=p.$refreshTrigger;var n=linb.create("span");p.getRoot().replace(n);p.$noReclaim=1;p.boxing().destroy();_.merge(p,l,"all");delete p.$destroyed;p.$linbid=f;p.serialId=g;p=new h(p).render();if(i){i.call(i.target,p.get(0))}if(j){c.append(p,m)}else{c.append(p)}_.arr.each(d,function(q){delete q[0].$dockParent;p.append.apply(p,q)});n.replace(p.get(0).getRoot());n.remove();n=null;if(k){p.setUIValue(k,true)}})},append:function(e,d){if(_.isHash(e)||_.isStr(e)){e=linb.create(e)}if(e["linb.UIProfile"]){e=e.boxing()}var f=this.get(0),c;if(f.beforeAppend&&false===this.beforeAppend(f,e)){return}if(e["linb.Com"]){if(f.renderId){if(d=typeof d=="string"?d:null){d=f.getSubIdByItemId(d)}c=f.keys.PANEL?f.getSubNode(f.keys.PANEL,d):f.getRoot();if(!c.isEmpty()){c.append(e)}}else{(f.excoms||(f.excoms=[])).push([e,d])}}else{if(d!==false){if(e["linb.UI"]){e.each(function(g){g.linkParent(f,d)})}}if(f.renderId){if(d=typeof d=="string"?d:null){d=f.getSubIdByItemId(d)}c=f.keys.PANEL?f.getSubNode(f.keys.PANEL,d):f.getRoot();if(!c.isEmpty()){c.append(e)}}else{if(!e["linb.UI"]){if(!f.exchildren){f.exchildren=[]}f.exchildren.push([e,d])}}}if(f.afterAppend){this.afterAppend(f,e)}return this},getChildren:function(d){var c=[];_.arr.each(this.get(0).children,function(e){if(d?e[1]==d:1){c.push(e[0])}});return linb.UI.pack(c)},removeChildren:function(c,d){return this.each(function(e){var f=_.copy(e.children);_.arr.each(f,function(g){if(c===true?1:c?typeof c=="string"?(g[1]==c):(g[0]==(c["linb.UI"]?c.get(0):c)):1){if(e.beforeRemove&&false===e.boxing().beforeRemove(e,g[0],g[1],d)){return}g[0].unlinkParent();if(e.afterRemove){e.boxing().afterRemove(e,g[0],g[1],d)}if(d){g[0].boxing().destroy()}}})})},dragable:function(d,f,e,c){return this.each(function(g){g.getSubNode(g.keys[e]||"KEY",true).beforeMousedown(d?function(j,h,i){if(linb.Event.getBtn(h)!="left"){return}if(j.properties.disabled){return}c=c||{};c.dragKey=d;c.dragData=typeof f=="function"?f():f;_.merge(c,{dragCursor:"pointer",dragType:"icon",dragDefer:1});linb.use(i).startDrag(h,c)}:null,"_d",-1).beforeDragbegin(d?function(h,i,j){linb.use(j).onMouseout(true,{$force:true}).onMouseup(true)}:null,"_d",-1);if(!d){g.clearCache()}})},setCustomFunction:function(c,d){return this.each(function(e){if(typeof c=="string"){if(d){e.CF[c]=d}else{delete e.CF[c]}}else{e.CF=c||{}}})},setCustomClass:function(d,f){var e=arguments.callee,c=(e.fun||(e.fun=function(n,k,l,j){if(!l[k]){return}var m=n.getSubNode(k,true),g;if(!m.isEmpty()){_.arr.each(l[k].split(/\s+/),function(h){m[j?"removeClass":"addClass"](h)})}}));return this.each(function(j){var g=_.copy(j.CC);if(typeof d=="string"){if(j.renderId){if(d in g){c(j,d,g,true)}}if(!f){delete j.CC[d]}else{j.CC[d]=f;if(j.renderId){c(j,d,j.CC)}}}else{if(!!d&&typeof d=="object"){if(j.renderId){for(var h in d){c(j,h,g,true)}for(var h in d){c(j,h,d)}}j.CC=d}else{if(j.renderId){for(var h in g){c(j,h,g,true)}}j.CC={}}}})},setCustomStyle:function(d,f){var e=arguments.callee,c=(e.fun||(e.fun=function(n,k,l,j){if(!l[k]){return}var m=n.getSubNode(k,true),g;if(!m.isEmpty()){_.arr.each(l[k].split(";"),function(q,h){if((g=q.split(":")).length==2){g[0]=g[0].replace(/\-(\w)/g,function(r,i){return i.toUpperCase()});try{m.css(g[0],j?"":g[1])}catch(p){}}})}}));return this.each(function(j){var g=_.copy(j.CS);if(typeof d=="string"){if(j.renderId){if(d in g){c(j,d,g,true)}}if(!f){delete j.CS[d]}else{j.CS[d]=f;if(j.renderId){c(j,d,j.CS)}}}else{if(!!d&&typeof d=="object"){if(j.renderId){for(var h in d){c(j,h,g,true)}for(var h in d){c(j,h,d)}}j.CS=d}else{if(j.renderId){for(var h in g){c(j,h,g,true)}}j.CS={}}}})},setCustomBehavior:function(c,d){return this.each(function(e){if(typeof c=="string"){if(e.keys[c]){e.CB[c]=d||{}}}else{e.CB=c||{}}if(e.CB.KEY){_.merge(e.CB,e.CB.KEY,"all");delete e.CB.KEY}e.clearCache()})},adjustDock:function(c){return this.each(function(d){if(d.properties.dock&&d.properties.dock!="none"){if(c){d.getRootNode().style.width=0;d.getRootNode().style.height=0;d._resize_h=-1;d._resize_w=-1}linb.UI.$dock(d,true,true)}})}},Initialize:function(){var d=this.prototype;_.arr.each("getSubNode,getDomId,getRootNode,getRoot".split(","),function(f){if(!d[f]){d[f]=function(){var g=this.get(0);return g[f].apply(g,arguments)}}d[f].$original$="linb.UI";d[f].$type$="instance";d[f].$name$=f});var c=this,e={};_.each(linb.UI.$ps,function(f,g){e[g]={ini:"auto",action:function(k){var i=this,l=i.properties,h=false,j;i.getRoot()[g]?i.getRoot()[g](k):linb.Dom._setPxStyle(i.getRootNode(),g,k);if(g=="width"||g=="height"){if(!i.box._onresize&&i.onResize){i.boxing().onResize(i,g=="width"?k:null,g=="height"?k:null)}}else{if(i.onMove){i.boxing().onMove(i,g=="left"?k:null,g=="top"?k:null,g=="right"?k:null,g=="bottom"?k:null)}}if(l.dock!="none"){j={$type:l.dock,$dockid:_.arr.indexOf(["width","height","fill","cover"],l.dock)!=-1?i.$linbid:null};switch(l.dock){case"top":if(g!="height"&&g!="top"){return}j.width=j.height=1;break;case"bottom":if(g!="height"&&g!="bottom"){return}j.width=j.height=1;break;case"left":if(g!="width"&&g!="left"){return}j.width=j.height=1;break;case"right":if(g!="width"&&g!="right"){return}j.width=j.height=1;break;case"width":if("width"==g){return}j.width=1;break;case"height":if("height"==g){return}j.height=1;break;case"fill":case"cover":if(g=="width"&&g=="height"){return}j.width=j.height=1;break}_.tryF(i.$dockFun,[j],i)}}}});_.merge(e,{renderer:{ini:null},zIndex:{ini:1,action:function(f){this.getRoot().css("zIndex",f)}},tabindex:{ini:1,action:function(h){var g=this,f=new RegExp("^"+g.key+"[-\\w]*:"+g.serialId+":");g.getRoot().query("*",function(i){return i.id&&f.test(i.id)&&i.getAttribute("tabIndex")}).attr("tabIndex",h)}},position:{ini:"absolute",listbox:["","static","relative","absolute"],action:function(f){this.getRoot().css("position",f)}},visibility:{listbox:["","visible","hidden"],action:function(f){this.getRoot().css("visibility",f);linb.setNodeData(this.getRootNode(),"_setVisibility",1)}},display:{listbox:["","none","block","inline","inline-block"],action:function(f){if(f=="inline-block"){this.getRoot().setInlineBlock()}else{this.getRoot().css("display",f)}}}});c.setDataModel(e);linb.UI.$cache_css+=linb.UI.buildCSSText({".linbcss-noscroll, .linbcss-noscroll BODY, .linbcss-viewport, .linbcss-viewport BODY":{overflow:"hidden",height:"100%",border:"0 none",margin:"0",padding:"0"},".ui-ctr":{},".ui-dragable":{},".ui-btn, .ui-btni, .ui-btnc":{height:"22px",background:linb.UI.$bg("button.gif","no-repeat",true)},".ui-btn":{$order:1,"white-space":"nowrap","vertical-align":"top",overflow:"hidden","background-position":"right top","padding-right":"4px","font-size":"12px"},".ui-btn *":{cursor:"pointer"},".ui-btnc button, .ui-btnc a":{display:linb.$inlineBlock,zoom:linb.browser.ie?1:null,background:"transparent",border:0,margin:0,padding:0},".ui-btnc a":{padding:"0 4px"},".ui-btni":{$order:1,"background-position":"left -60px","padding-left":"4px","vertical-align":"top"},".ui-btnc":{$order:1,"background-position":"left -30px","background-repeat":"repeat-x","padding-top":"3px","vertical-align":"top"},".ui-btn-mouseover, .ui-btn-focus":{$order:2,"background-position":"right -90px"},".ui-btn-mouseover .ui-btni, .ui-btn-focus .ui-btni":{$order:2,"background-position":"left -150px"},".ui-btn-mouseover .ui-btnc, .ui-btn-focus .ui-btnc":{$order:2,"background-position":"left -120px"},".ui-btn-mousedown, .ui-btn-checked":{$order:3,"background-position":"right -180px"},".ui-btn-mousedown .ui-btni, .ui-btn-checked .ui-btni":{$order:3,"background-position":"left -240px"},".ui-btn-mousedown .ui-btnc, .ui-btn-checked .ui-btnc":{$order:3,"background-position":"left -210px"},".ui-icon":{"vertical-align":"middle",width:"16px",height:"16px","background-repeat":"no-repeat",margin:"0 4px 0 2px"},".uicmd-close, .uicmd-opt, .uicmd-pop, .uicmd-land, .uicmd-refresh, .uicmd-toggle, .uicmd-toggle2, .uicmd-min, .uicmd-max,.uicmd-restore,.uicmd-pin, .uicmd-check, .uicmd-radio, .uicmd-add":{background:linb.UI.$bg("icons.gif","no-repeat 0 0",true),width:"16px",height:"16px","margin-right":"2px",cursor:"default","vertical-align":"middle"},".uicmd-empty":{width:"16px",height:"16px","margin-right":"2px",cursor:"default","vertical-align":"middle"},".uicmd-opt":{$order:1,"background-position":"0 0"},".uicmd-opt-mouseover":{$order:2,"background-position":"0 -20px"},".uicmd-opt-mousedown":{$order:3,"background-position":"0 -40px"},".uicmd-pop, .uicmd-land":{$order:1,"background-position":"-40px 0"},".uicmd-pop-mouseover, .uicmd-land-mouseover":{$order:2,"background-position":"-40px -20px"},".uicmd-pop-mousedown, .uicmd-land-mousedown":{$order:3,"background-position":"-40px -40px"},".uicmd-refresh":{$order:1,"background-position":"-280px 0"},".uicmd-refresh-mouseover":{$order:2,"background-position":"-280px -20px"},".uicmd-refresh-mousedown":{$order:3,"background-position":"-280px -40px"},".uicmd-pin":{$order:1,"background-position":"-80px 0"},".uicmd-pin-mouseover":{$order:2,"background-position":"-80px -20px"},".uicmd-pin-mousedown":{$order:3,"background-position":"-80px -40px"},".uicmd-pin-checked, .uicmd-pin-checked-mouseover, .uicmd-pin-checked-mousedown":{$order:4,"background-position":"-80px -40px"},".uicmd-min":{$order:1,"background-position":"-120px 0"},".uicmd-min-mouseover":{$order:2,"background-position":" -120px -20px"},".uicmd-min-mousedown":{$order:3,"background-position":"-120px -40px"},".uicmd-restore":{$order:1,"background-position":"-160px 0"},".uicmd-restore-mouseover":{$order:2,"background-position":"-160px -20px"},".uicmd-restore-mousedown":{$order:3,"background-position":"-160px -40px"},".uicmd-max":{$order:1,"background-position":"-200px 0"},".uicmd-max-mouseover":{$order:2,"background-position":"-200px -20px"},".uicmd-max-mousedown":{$order:3,"background-position":"-200px -40px"},".uicmd-close":{$order:1,"background-position":"-240px 0"},".uicmd-close-mouseover":{$order:2,"background-position":"-240px -20px"},".uicmd-close-mousedown":{$order:3,"background-position":"-240px -40px"},".uicmd-check":{$order:1,margin:"0 4px 0 2px","background-position":"-20px -70px"},".uicmd-check-mouseover":{$order:2,"background-position":"-20px -90px"},".uicmd-check-mousedown":{$order:3,"background-position":"-20px -110px"},".uicmd-check-checked":{$order:4,"background-position":"0 -70px"},".uicmd-check-checked-mouseover":{$order:5,"background-position":"0 -90px"},".uicmd-check-checked-mousedown":{$order:6,"background-position":"0 -110px"},".uicmd-radio":{$order:1,margin:"0 4px 0 2px","background-position":"-60px -70px"},".uicmd-radio-mouseover":{$order:2,"background-position":"-60px -90px"},".uicmd-radio-mousedown":{$order:3,"background-position":"-60px -110px"},".uicmd-radio-checked":{$order:4,"background-position":"-40px -70px"},".uicmd-radio-checked-mouseover":{$order:5,"background-position":"-40px -90px"},".uicmd-radio-checked-mousedown":{$order:6,"background-position":"-40px -110px"},".uicmd-add":{$order:1,"background-position":"-56px -222px"},".uicmd-add-mouseover":{$order:2,"background-position":"-56px -222px"},".uicmd-add-mousedown":{$order:3,"background-position":"-56px -222px"},".uicmd-toggle":{$order:1,"margin-left":"3px","background-position":"-160px -70px"},".uicmd-toggle-mouseover":{$order:2,"background-position":"-160px -90px"},".uicmd-toggle-mousedown":{$order:3,"background-position":"-160px -110px"},".uicmd-toggle-checked":{$order:4,"background-position":"-180px -70px"},".uicmd-toggle-checked-mouseover":{$order:5,"background-position":"-180px -90px"},".uicmd-toggle-checked-mousedown":{$order:6,"background-position":"-180px -110px"},".uicmd-toggle-busy":{$order:7,background:linb.UI.$bg("busy.gif","no-repeat center center",true)},".uicmd-toggle2":{$order:1,"background-position":"-200px -70px"},".uicmd-toggle2-mouseover":{$order:2,"background-position":"-200px -90px"},".uicmd-toggle2-mousedown":{$order:3,"background-position":"-200px -110px"},".uicmd-toggle2-checked":{$order:4,"background-position":"-220px -70px"},".uicmd-toggle2-checked-mouseover":{$order:5,"background-position":"-220px -90px"},".uicmd-toggle2-checked-mousedown":{$order:6,"background-position":"-220px -110px"},".uibar-top, .uibar-bottom, .uibar-top-s, .uibar-bottom-s":{position:"relative","vertical-align":"baseline","font-size":0,"line-height":0},".uibar-top td, .uibar-top-s td, .uibar-bottom td, .uibar-bottom-s td":{$order:1,background:linb.UI.$bg("bar_vertical.gif","no-repeat 0 0",true)},".uibar-top, .uibar-top .uibar-t":{height:"29px"},".uibar-top .uibar-tdl":{$order:1,"padding-left":"4px",height:"100%","background-position":"0 0"},".uibar-top .uibar-tdm":{$order:1,"background-position":"0 -30px","background-repeat":"repeat-x"},".uibar-top .uibar-tdr":{$order:1,"padding-left":"4px","background-position":"right -60px"},".uibar-top-focus .uibar-tdl":{$order:2,"padding-left":"4px",height:"100%","background-position":"left -90px"},".uibar-top-focus .uibar-tdm":{$order:2,"background-position":"left -120px","background-repeat":"repeat-x"},".uibar-top-focus .uibar-tdr":{$order:2,"padding-left":"4px","background-position":"right -150px"},".uibar-top .uibar-cmdl":{overflow:"hidden",position:"absolute",left:0,top:"6px",width:"92%",height:"22px","padding-left":"8px","white-space":"nowrap"},".uibar-top .uibar-cmdr":{position:"absolute",top:"6px",right:"8px","text-align":"right"},".uicon-main":{position:"relative","padding-left":"5px","font-size":0,"line-height":0,"z-index":1,overflow:"visible",background:linb.UI.$bg("bar_horizontal.gif","repeat-y -595px top",true)},".uicon-maini":{"padding-right":"5px","font-size":0,"line-height":0,background:linb.UI.$bg("container_right.gif","#AAD2FA repeat-y right top",true)},".uibar-bottom, .uibar-bottom .uibar-t":{height:"12px"},".uibar-bottom .uibar-tdl":{$order:1,"padding-left":"5px",height:"100%","background-position":"left -189px"},".uibar-bottom .uibar-tdm":{$order:1,"background-position":"left -211px","background-repeat":"repeat-x"},".uibar-bottom .uibar-tdr":{$order:1,"padding-left":"5px","background-position":"right -233px"},".uibar-top-s, .uibar-top-s .uibar-t":{$order:3,height:"7px"},".uibar-top-s .uibar-tdl":{$order:3,height:"100%","padding-left":"5px","background-position":"left -261px"},".uibar-top-s .uibar-tdm":{$order:3,"background-position":"left -283px","background-repeat":"repeat-x"},".uibar-top-s .uibar-tdr":{$order:3,"padding-left":"5px","background-position":"right -305px"},".uibar-top-s .uibar-cmdl":{$order:3,display:"none"},".uibar-top-s .uibar-cmdr":{$order:3,display:"none"},".uibar-bottom-s, .uibar-bottom-s .uibar-t":{$order:3,height:"6px"},".uibar-bottom-s .uibar-tdl":{$order:3,height:"100%","padding-left":"5px","background-position":"left -327px"},".uibar-bottom-s .uibar-tdm":{$order:3,"background-position":"left -349px","background-repeat":"repeat-x"},".uibar-bottom-s .uibar-tdr":{$order:3,"padding-left":"5px","background-position":"right -371px"}})+linb.UI.buildCSSText({".ui-ctrl":{"-moz-user-select":linb.browser.gek?"-moz-none":null,"vertical-align":"middle"},".uiw-shell":{background:"transparent",display:linb.$inlineBlock,zoom:linb.browser.ie6?1:null,border:0,padding:0,margin:0},".uiw-frame":{$order:1,display:"block",position:"relative",border:0,padding:0,margin:0,width:"100%",height:"100%","-moz-box-flex":"1"},".uiw-border":{$order:2,display:"block",position:"absolute",border:0,padding:0,margin:0,left:0,top:0,width:"100%",height:"100%"}})+linb.UI.buildCSSText({".uibg-base":{"background-color":"#fff"},".uibg-bar":{"background-color":"#aad2fa"},".uiborder-flat":{border:"solid 1px #648cb4"},".uiborder-inset":{border:"solid 1px","border-color":"#648cb4 #c8e1fa #c8e1fa #648cb4"},".uiborder-outset":{border:"solid 1px","border-color":"#c8e1fa #648cb4 #648cb4 #c8e1fa"}});linb.UI.$cache_css2+=linb.UI.buildCSSText({".ui-dirty":{$order:1,"background-image":linb.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-390px -290px"},".ui-inputdisabled":{color:"#808080"},".ui-itemreadonly":{$order:2,color:"#808080"},".ui-readonly, .ui-readonly *":{$order:2,color:"#808080"},".ui-itemdisabled":{$order:2,cursor:"not-allowed",color:"#808080"},".ui-disabled, .ui-disabled *":{$order:2,color:"#808080"},".ui-invalid, .ui-invalid *":{$order:1,"background-color":"#FFEBCD"},"#linblangkey":{"vertical-align":"baseline"}})},$End:function(){linb.UI.$cache_css+=this.buildCSSText(this.$Appearances)},Static:{$cache_css:"",$cache_css2:"",$css_tag_dirty:"ui-dirty",$css_tag_invalid:"ui-invalid",$tag_left:"{",$tag_right:"}",$tag_subId:"_serialId",$x01:/\x01/img,$x01r:/ \x01 /img,$tag_special:"\x01",$ID:"\x01id\x01",$DOMID:"\x01domid\x01",$CLS:"\x01cls\x01",$childTag:"<!--\x03{id}\x04-->",$onSize:function(d,f){var c=d.getRootNode().style;if(f.width||f.height){linb.UI.$tryResize(d,c.width,c.height)}c=null},$theme:"default",$ps:{left:1,top:1,width:1,height:1,right:1,bottom:1},$toDom:function(j,h){if(h===false){return _.str.toDom(j)}var d=linb.Dom.getEmptyDiv().get(0),g=[];d.innerHTML=j;this.$addEventsHanlder(d);for(var f=0,e=d.childNodes,c=e.length;f<c;f++){linb.$registerNode(e[f]);g[g.length]=e[f].$linbid}d=null;return linb(g,false)},$addEventsHanlder:function(f,r){var c=linb.$cache.UIKeyMapEvents,m=linb.Event._eventHandler,e=_.toArr(f.getElementsByTagName("*")),p,g,n,h,d,s,q;if(r){e.push(f)}if(g=e.length){for(p=0;p<g;p++){if((f=e[p]).nodeType!=1){continue}if(d=f.id){if(s=c[d]||c[d.substr(0,d.indexOf(":"))]){q=linb.$registerNode(f);q=q.eHandlers||(q.eHandlers={});for(n in s){q[n]=s[n];if(h=m[n]){q[h]=f[h]=s[n]}}}}}}e.length=0;f=null},getFromDom:function(c){if(c=linb.UIProfile.getFromDom(c)){return c.boxing()}},unserialize:function(e,g){if(typeof e=="string"){e=_.unserialize(str)}var d=function(f){if(_.isArr(f)){f=f[0]}delete f.serialId;if(f.children){_.arr.each(f.children,d)}},c=[];_.arr.each(e,function(f){if(!g){d(f)}c.push((new (linb.SC(f.key))(f)).get(0))});return this.pack(c,false)},_ensureValues:function(d){var e=[],j=0,g=0,l,h=this.KEY,f=linb.$cache.profileMap,c=linb.getNodeData;if(d["linb.absBox"]){d=d._nodes}for(;l=d[j++];){if((l.box&&l.box[h])||((l=f[c(l.renderId?l.renderId:l,["element","id"])])&&l.box&&l.box[h])){e[g++]=l}}return e.length<=1?e:this._unique(e)},__gc:function(){var e=this,d=e.$key,c=linb.$cache;_.breakO([c.template[d],c.reclaimId[d],e._cache,e._idCache,e.$DataModel,e.$Templates,e.$Behaviors,e],2);delete linb.absBox.$type[d.replace("linb.UI.","")];delete linb.absBox.$type[d];_.filter(linb.$cache.UIKeyMapEvents,function(g,f){return !(f==d||f.indexOf(d+"-")==0)});Class.__gc(d)},_pickSerialId:function(){var c=linb.$cache.reclaimId[this.$key];if(c&&c[0]){return c.pop()}return this._ctrlId.next()},$bg:function(e,c,d){return function(f){var g=linb.ini.path+"appearance/default/"+(typeof d=="string"?d:d?"Public":(g=f.split("."))[g.length-1])+"/"+e;return"url("+g+") "+(c||"")}},$ieBg:function(d,c){return function(e){var f=linb.ini.path+"appearance/default/"+(typeof c=="string"?c:c?"Public":(f=e.split("."))[f.length-1])+"/"+d;return'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+f+'",sizingMethod="crop")'}},$doTemplate:function(c,y,d,A,e){var j=arguments.callee,g,f,k,p=linb.UI.$x01,q=" \x01 ",m="",w=d.constructor==Array,x=y[A||""],h=!e,e=e||[];if(w){if(typeof x!="function"){x=j}for(var v=0;f=d[v++];){x(c,y,f,A,e)}}else{if(f=d.object){e[e.length]=f.toHtml()}else{if(typeof x=="function"){x(c,y,d,A,e)}else{A=A?A+".":"";var B=x[0],z=x[1];for(var v=0,u=B.length;v<u;v++){if(k=z[v]){if(k in d){f=d[k];if(y[g=A+k]&&f){j(c,y,f,g,e)}else{e[e.length]=(f===undefined||f===null||f===NaN)?m:typeof f=="string"?f.replace(p,q):f}}}else{e[e.length]=(B[v]===undefined||B[v]===null||B[v]===NaN)?m:B[v]}}}}}if(h){return e.join("")}},$buildTemplate:function(g,D,I,k,d){if(D&&String(D.tagName).toLowerCase()=="text"){d[d.length]=D.text;return}var q=arguments.callee,p=g.behavior?I?g.behavior[I]:g.behavior:null,G=q.map1||(q.map1={tagName:1,text:1}),E=q.map2||(q.map2={image:1,input:1,br:1,meta:1,hr:1,abbr:1,embed:1}),B=q.map3||(q.map3={input:1,textarea:1,pre:1,code:1}),x=q.r2||(q.r2=/[a-z]/),w=q.r3||(q.r3=/^(on|before|after)/),r=q.r7||(q.r7=/([^{}]*)\{([\w]+)\}([^{}]*)/g),h=false,j=linb.UI,n,s,C,e;if(!D){D=g.template}e=I?g.keys[I]:g.key;if(!D.tagName){D.tagName="span"}if(D.id!==null){D.id=I?e+":"+j.$ID+":"+j.$tag_left+j.$tag_subId+j.$tag_right:j.$DOMID}else{delete D.id}if(D.className!==null){n=j.$CLS+(I?"-"+I.toLowerCase():"");C=D.className||"";D["class"]=n+" "+C+" "+(e==g.key?"ui-ctrl ":"")+j.$tag_special+(I||"KEY")+"_CT"+j.$tag_special+" "+j.$tag_special+(I||"KEY")+"_CC"+j.$tag_special}delete D.className;D.style=(D.style||"")+";"+j.$tag_special+(I||"KEY")+"_CS"+j.$tag_special;var A=[],z={},f=D.tagName.toLowerCase(),m=D.text,c=linb.absObj.$specialChars;for(var y in D){if(!D[y]){continue}if(!c[y.charAt(0)]&&!G[y]){s=D[y];if(!x.test(y)){if(typeof s=="object"){if(!s.$order){s.$order=0}s.$key=y;A[A.length]=s}}else{z[y]=s}}}A.sort(function(i,l){i=i.$order;l=l.$order;return i>l?1:i==l?0:-1});if(!d){h=true;d=[]}d[d.length]="<"+f+" ";if(!z.unselectable&&!B[f]){z.unselectable="on"}for(var y in z){if(z[y]){d[d.length]=y+'="'+z[y]+'" '}}if(D.className!==null){D.className=C}delete D["class"];d[d.length]=" {attributes}>";if(!E[f]&&m){d[d.length]=m}for(var y=0,v=A.length;y<v;){s=A[y++];q(g,s,s.$key,k,d)}if(!E[f]){d[d.length]="</"+f+">"}if(h){var H=k[0],F=k[1];d.join("").replace(r,function(l,i,J,u){if(i){H[H.length]=i}F[H.length]=H[H.length]=J;if(u){H[H.length]=u}return""})}},_rpt:function(g,d){var i=arguments.callee,j=linb.UI,c=j.$tag_special,h=i._r||(i._r=new RegExp(c+"([0-9A-Z_]+)_C([SCT])"+c+"|"+c+"([\\w_\\-\\.]*)"+c,"img")),f={id:g.serialId,cls:g.getClass("KEY"),domid:g.$domId},e={S:g.CS,C:g.CC,T:g._CT};return d.replace(h,function(l,k,n,m){return f[m]||(e[n]?(e[n][k]||""):"")}).replace(j.$x01r,"\x01")},_build:function(d,n){var r,w,e,s=linb.UI,v=[[],[]],x=this,q=x.KEY,c=linb.$cache.template,l=d._hash="b:"+(d.template._subid||"")+";!"+(d._exhash||"");if(typeof d.theme=="string"){var p=d._CT={},f=d.key.replace(/\./g,"-").toLowerCase().replace("linb-ui","linb")+"-";_.each(d.keys,function(j,h){if(h.charAt(0)!="$"){p[h]=f+d.theme+"-"+h.toLowerCase()}})}if(!(r=_.get(c,[q,l]))){s.$buildTemplate(d,null,null,v);_.set(c,[q,l,""],v);if(w=d.template.$submap){for(var k in w){if(typeof(e=w[k])!="function"){var v=[[],[]];for(var g in e){if(typeof e[g]=="object"){s.$buildTemplate(d,e[g],g,v)}}e=v}_.set(c,[q,l,k],e)}}r=_.get(c,[q,l])}if(!r){return""}return x._rpt(d,s.$doTemplate(d,r,n))},_setDefaultBehavior:function(j){var c=this,g=arguments.callee,i=g._m||(g._m={"":1,KEY:1,$key:1}),h=g._f1||(g._f1=function(f,m,n){var l=function(v,A,p){var D,s=linb.use(p).id(),C,B=v.getSubId(s),r=v.properties,q,z,y;if(r.disabled||r.readonly){return}C=v.SubSerialIdMapItem&&v.SubSerialIdMapItem[B];if(C&&C.disabled){return}if(C&&C.readonly){return}switch(typeof f){case"string":q=v.getSubNode(f,B)._get();break;case"function":z=[f];break;case"object":q=[];z=[];for(var u,x=0,w=f.length;x<w;x++){u=f[x];if(typeof u=="string"){q.push.apply(q,v.getSubNode(u,B)._get())}else{z.push(u)}}}if(q&&q.length){q=linb(q);y=v.boxing();if(n==1){if(m=="mouseover"){if(r.disableHover){return}if(v.beforeHoverEffect){if(false==y.beforeHoverEffect(v,C,A,p,"mouseover")){return}}}if(m=="mousedown"&&v.beforeClickEffect){if(false==y.beforeClickEffect(v,C,A,p,"mousedown")){return}}q.tagClass("-"+m)}else{if(m=="mouseup"){if(v.beforeClickEffect&&false==y.beforeClickEffect(v,C,A,p,"mouseup")){return}q.tagClass("-mousedown",false)}else{if(r.disableHover){return}if(v.beforeHoverEffect&&false==y.beforeHoverEffect(v,C,A,p,"mouseout")){return}q.tagClass("(-mouseover|-mousedown)",false)}}}if(z&&z.length){_.arr.each(z,function(E){_.tryF(E,[v],v)});z.length=0}};return l}),d={},e;if(!linb.SC.get("linb.absComposed")){Class("linb.absComposed","linb.absObj",{Instance:{addPanel:function(l,n,p){var q=_.copy(linb.UI.Panel.$DataStruct);_.merge(q,l,"with");_.merge(q,{dock:"fill",tag:l.tag||l.id},"all");var m=new linb.UI.Panel(q),f=[];this.append(m,p&&p.id);_.arr.each(n,function(r){f.push(r[0])});m.append(linb.UI.pack(f,false));return this},removePanel:function(){this.destroy()},getPanelPara:function(){return _.copy(this.get(0).properties)},getPanelChildren:function(){return this.get(0).children},_e1:function(l,m,n,p,f){},_e2:function(m,l,q,f,p,n,r){},_e3:function(l,m,f,n){},_e4:function(l,p,q,f,n,m){},_e5:function(f,l,m){}},Static:{DataModel:{dragKey:"",dropKeys:""},$abstract:true}})}var k=linb.absComposed.prototype;if(j.HoverEffected){_.each(j.HoverEffected,function(l,f){e=i[f]?j:(j[f]||(j[f]={}));if(!l){e.afterMouseover=e.afterMouseout=null}else{e.afterMouseover=h(l,"mouseover",1);e.afterMouseout=h(l,"mouseout",2)}});d.beforeHoverEffect=k._e1}if(j.ClickEffected){_.each(j.ClickEffected,function(l,f){e=i[f]?j:(j[f]||(j[f]={}));if(!l){e.afterMousedown=e.afterMouseup=null}else{e.afterMousedown=h(l,"mousedown",1);e.afterMouseup=h(l,"mouseup",2)}});d.beforeClickEffect=k._e1}if(j.KeyHook){_.merge(j,{afterKeydown:function(l,m,n){var f=linb.Event.getKey(m);if(f[0].length>1){l.$keyD=f[0]}if(l.onHotKeydown){return false!==l.boxing().onHotKeydown(l,f[0],!!f[1],!!f[2],!!f[3],m,n)}},afterKeypress:function(l,m,n){var f=linb.Event.getKey(m);if(l.$keyD){f[0].length=l.$keyD}if(l.onHotKeypress){return false!==l.boxing().onHotKeypress(l,f[0],!!f[1],!!f[2],!!f[3],m,n)}},afterKeyup:function(l,m,n){if(l.onHotKeyup){var f=linb.Event.getKey(m);return false!==l.boxing().onHotKeyup(l,f[0],!!f[1],!!f[2],!!f[3],m,n)}}},"all");d.onHotKeydown=d.onHotKeypress=d.onHotKeyup=k._e2}if(j.NavKeys){_.each(j.NavKeys,function(l,n){var f=arguments.callee,m,u=f.m1||(f.m1={KEY:1,$key:1});if(u[n]){return}var r=f.m2||(f.m2={input:1,textarea:1}),q=f.m3||(f.m3={tab:1,enter:1,up:1,down:1,left:1,right:1}),p=f.m4||(f.m4={tab:1,up:1,down:1,left:1,right:1}),s=j[n]||(j[n]={});var s=j[n]||(j[n]={});if(null===l){s.afterKeydown=null}else{s.afterKeydown=function(B,F,w){var C=linb.Event.getKey(F),H=C[0],x=C[1],z=C[2],E=C[3],G=false,v=B.properties.tag=="smartnav";if(v){var A=linb.use(w).get(0);if(r[C=A.tagName.toLowerCase()]){if(H&&C=="input"&&A.type.toLowerCase()!="text"&&A.type.toLowerCase()!="password"){G=true}else{if(q[H]){var y=linb.use(w).caret(),D=linb.use(w).get(0).value;switch(H){case"up":if(!/[\n\r]/.test(D.substr(0,y[0]))){G=true}break;case"left":if((x&&!z)||(y[0]===0&&(y[1]!==D.length||y[1]===0))){G=true}break;case"down":if(!/[\n\r]/.test(D.substr(y[1],D.length))){G=true}break;case"right":if((x&&!z)||(y[1]===D.length&&(y[0]!==0||y[1]===0))){G=true}break;case"enter":if(C=="input"||E){G=true}break;case"tab":G=true;break}}}}else{if(p[H]){G=true}}A=null}else{G=H==="tab"}if(G){if(B.beforeNextFocus&&false===B.boxing().beforeNextFocus(B,F,!!C[2],w)){return false}if(v){if(H!="tab"){linb.use(w).nextFocus(("up"==H||"left"==H)?false:true)}}}}}});d.beforeNextFocus=k._e3}if((e=j.DropableKeys)&&e.length){_.arr.each(e,function(f){c._dropable(f)});e=c.prototype;_.arr.each("addPanel,removePanel,getPanelPara,getPanelChildren,getDropKeys,setDropKeys".split(","),function(f){if(!e[f]){e[f]=k[f]}});c.$DataModel.dropKeys=c.$DataStruct.dropKeys="";d.onDragEnter=d.onDragLeave=d.onDrop=d.onDropTest=d.onDropMarkShow=d.onDropMarkClear=k._e4}if((e=j.DragableKeys)&&e.length){_.arr.each(e,function(f){c._dragable(f)});e=c.prototype;_.arr.each("getDragKey,setDragKey".split(","),function(f){if(!e[f]){e[f]=k[f]}});c.$DataModel.dragKey=c.$DataStruct.dragKey="";d.onGetDragData=d.onStartDrag=d.onDragStop=k._e5}if((e=j.NoDragableKeys)&&e.length){c.NoDragableKeys=e}if((e=j.NoDropableKeys)&&e.length){c.NoDropableKeys=e}c.setEventHandlers(d)},addTemplateKeys:function(c){var d=this,e=d.KEY,g=arguments.callee,f=g._reg||(g._reg=/\./g);_.arr.each(c,function(h){d.$cssKeys[h]=(d.$Keys[h]=h=="KEY"?e:e+"-"+h).replace(f,"-").toLowerCase().replace("linb-ui","linb")});return d},$CSSCACHE:{},$getCSSValue:function(d,g){var f=this.$CSSCACHE,e=d+"->"+g,i=arguments.callee;if(e in f){return f[e]}var j=linb.Dom.getEmptyDiv().get(0),h;j.className=d;h=f[e]=parseInt(linb.Dom.getStyle(j,g))||0;j.className="";return h},getTheme:function(){return this.$theme},setTheme:function(c,e){c=c||"default";var d=this;if(c!=d.$theme){if(e!==false){if(c!="default"){linb.CSS.includeLink(linb.getPath("linb.appearance."+c,"/theme.css"),"theme:"+c)}var g=linb.CSS.get("id","theme:"+d.$theme);if(g){g.disabled=true;linb(g).remove(false)}}d.$theme=c;if(e!==false){d.$CSSCACHE={};var f=0;_.asyRun(function(){if(f>10){throw new Error("errLoadTheme:"+c)}f++;var h;try{h=linb.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(i){}finally{if(h==c||c=="default"){linb.UI.getAll().reLayout(true);f=null}else{_.asyRun(arguments.callee,200*f)}}},200)}}return this},setAppearance:function(c){_.merge(this.$Appearances,c,"all");return this},getAppearance:function(){return this.$Appearances},setTemplate:function(f,p){if(f){var n=this,k=arguments.callee,c=k.r2||(k.r2=/[a-z]/),h=linb.absObj.$specialChars,g=["KEY"],l=k._fun||(k._fun=function(r,j){var s,q;for(q in r){if(!h[q.charAt(0)]){if(!c.test(q)){j[j.length]=q;s=r[q];if(typeof s=="object"){arguments.callee(s,j)}}}}}),m;l(f,g);n.addTemplateKeys(g);m=n.$Templates;if(typeof p=="string"){f._subid=p;m[p]=f}else{m._=f}if(m=f.$submap){for(var e in m){for(var d in m[e]){k.call(n,m[e],d)}}}}return this},getTemplate:function(c){return this.$Templates[c||"_"]},setBehavior:function(d){if(d){var p=this,l=linb.$cache.UIKeyMapEvents,e=p.$key,z=linb.absObj.$specialChars,c=linb.Event.$eventhandler,g=linb.Event._eventMap,A=arguments.callee,y=A.r1||(A.r1=/[a-z]/),w=A.r2||(A.r2=/^(on|before|after)/),n=p.$Behaviors,r,x,u,s,q,h,f;p._setDefaultBehavior(d);if(d.KEY){_.merge(d,d.KEY,"all");delete d.KEY}for(x in d){q=d[x];if(!z[x.charAt(0)]){if(!y.test(x)){r=n[x]||(n[x]={});for(u in q){h=q[u];if(!z[u.charAt(0)]){if(h){r[u]=h}else{delete r[u]}}}}else{if(w.test(x)){if(q){n[x]=q}else{delete n[x]}}else{n[x]=q}}}}_.filter(l,function(k,j){return !(j==e||j.indexOf(e+"-")==0)});for(x in n){q=n[x];if(!z[x.charAt(0)]){if(!y.test(x)){for(u in q){if(!z[u.charAt(0)]&&q[u]){s=e+"-"+x;(l[s]||(l[s]={}))["on"+g[u]]=c}}}else{if(w.test(x)&&q){s=e;(l[s]||(l[s]={}))["on"+g[x]]=c}}}}}return p},getBehavior:function(){return this.$Behaviors},$applyCSS:function(){var f=linb.UI,e=f.$cache_css,d=f.$cache_css2;if(!f.$cssNo){f.$cssNo=1;var c=linb.browser;linb("body").addClass((c.ie?("linbcss-ie linbcss-ie"+c.ver+" "):c.gek?("linbcss-gek linbcss-gek"+c.ver+" "):c.kde?("linbcss-kde linbcss-kde"+c.ver+" "):c.opr?("linbcss-opr linbcss-opr"+c.ver+" "):"")+(c.isSafari?"linbcss-safari ":c.isChrome?"linbcss-chrome ":"")+(c.isMac?"linbcss-mac":c.isLinux?"linbcss-linux ":""));linb("html").addClass(c.isStrict?"linbcss-base linbcss-strict":"linbcss-base ")}if(e){linb.CSS.addStyleSheet(e,"linb.UI-CSS"+(f.$cssNo++));linb.UI.$cache_css=""}if(d){linb.CSS.addStyleSheet(d,"linb.UI-CSS"+(f.$cssNo++),true);linb.UI.$cache_css2=""}},buildCSSText:function(p){var A=this,w=arguments.callee,f=w._r1||(w._r1=/(^|\s|,)([0-9A-Z_]+)/g),q=[],c=[],s=linb.browser,k=s.ie6,d=s.ie,u=s.gek,x=A.$cssKeys,z,y,e;for(var n in p){e=p[n];z=n.replace(f,function(i,h,j){return h+"."+(x[j]||j)}).toLowerCase();e.$order=parseInt(e.$order)||0;e.$=z;q[q.length]=e}q.sort(function(h,i){h=h.$order;i=i.$order;return h>i?1:h==i?0:-1});for(var n=0,g=q.length;n<g;){e=q[n++];c[c.length]=e.$+"{";if(z=e.$before){c[c.length]=z}if(z=e.$text){c[c.length]=z}for(var m in e){switch(m.charAt(0)){case"$":continue;break;case"_":if(!k){continue}break;case"*":if(!d){continue}break;case"-":if(!u){continue}break}if((y=e[m])||e[m]===0){switch(typeof y){case"string":case"number":c[c.length]=m+":"+y+";";break;case"function":c[c.length]=m+":"+y(A.KEY)+";";break;default:_.arr.each(y,function(h){if(h){c[c.length]=m+":"+h+";"}})}}}if(y=e.$after){c[c.length]=y}c[c.length]="}"}return c.join("")},_dropable:function(f){var d=this,e=linb.Event.$eventhandler2,j=d.$Behaviors,c=f=="KEY"?j:(j[f]||(j[f]={})),h=linb.$cache.UIKeyMapEvents,i=f=="KEY"?d.KEY:(d.KEY+"-"+f),g=h[i]||(h[i]={});_.merge(c,{beforeMouseover:function(m,r,k){if(m.properties.disabled||m.properties.readonly){return}if(m.box.NoDropableKeys){var n=m.getKey(linb.Event.getSrc(r).id||"").split("-")[1];if(n&&_.arr.indexOf(m.box.NoDropableKeys,n)!=-1){return}}var u=k,w=linb.DragDrop,l=w.getProfile(),v=l.dragKey,p=l.dragData,y,q,x,s;if(!v||!p||!(new RegExp("\\b"+v+"\\b")).test(m.box.getDropKeys(m,u))){return}q=m.boxing();if(q.getItemByDom){y=q.getItemByDom(k)}s=[m,r,u,v,p,y];if((x=m.onDropTest)&&(false===q.onDropTest.apply(q,s))){return}if((x=m.box._onDropTest)&&(false===x.apply(m.host||m,s))){return}w.setDropElement(k);if(m.onDropMarkShow&&(false===q.onDropMarkShow.apply(q,s))){}else{if((x=m.box._onDropMarkShow)&&(false===x.apply(m.host||m,s))){}else{_.resetRun("setDropFace",w.setDropFace,0,[u],w)}}if(x=m.box._onDragEnter){x.apply(m.host||m,s)}if(m.onDragEnter){q.onDragEnter.apply(q,s)}},beforeMouseout:function(m,q,k){if(m.properties.disabled||m.properties.readonly){return}var u=linb.DragDrop,l=u.getProfile(),s=l.dragKey,n=l.dragData,v,p,r;if(l.dropElement==k){p=m.boxing();if(p.getItemByDom){v=p.getItemByDom(k)}r=[m,q,k,s,n,v];if(m.onDropMarkClear&&(false===p.onDropMarkClear.apply(p,r))){}else{if((t=m.box._onDropMarkClear)&&(false===t.apply(m.host||m,r))){}else{_.resetRun("setDropFace",u.setDropFace,0,[null],linb.DragDrop)}}if(t=m.box._onDragLeave){t.apply(m.host||m,r)}if(m.onDragLeave){p.onDragLeave.apply(p,r)}u.setDropElement(null)}},beforeDrop:function(m,q,k){var u=linb.DragDrop,l=u.getProfile(),s=l.dragKey,n=l.dragData,w,v,r,p=m.boxing();if(p.getItemByDom){w=p.getItemByDom(k)}r=[m,q,k,s,n,w];if(m.onDropMarkClear&&(false===p.onDropMarkClear.apply(p,r))){}else{if((v=m.box._onDropMarkClear)&&(false===v.apply(m.host||m,r))){}}if(m.onDrop&&(false===p.onDrop.apply(p,r))){}else{if((v=m.box._onDrop)&&(false===v.apply(m.host||m,r))){}}}},"all");_.merge(g,{onmouseover:e,onmouseout:e,ondrop:e});return d},_dragable:function(f){var d=this,e=linb.Event.$eventhandler2,j=d.$Behaviors,c=f=="KEY"?j:(j[f]||(j[f]={})),h=linb.$cache.UIKeyMapEvents,i=f=="KEY"?d.KEY:(d.KEY+"-"+f),g=h[i]||(h[i]={});_.merge(c,{beforeMousedown:function(m,q,k){if(linb.Event.getBtn(q)!="left"){return}if(m.properties.disabled){return}if(!m.properties.dragKey){return}if(m.box.NoDragableKeys){var n=m.getKey(linb.Event.getSrc(q).id||"").split("-")[1];if(n&&_.arr.indexOf(m.box.NoDragableKeys,n)!=-1){return}}var s=linb.Event.getPos(q),p=m.boxing(),r=[m,q,k],u;if(m.onStartDrag&&(false===p.onStartDrag.apply(p,r))){}else{if((u=m.box._onStartDrag)&&(false===u.apply(m.host||m,r))){}else{var l=m.box;linb.use(k).startDrag(q,{dragType:"icon",targetLeft:s.left+12,targetTop:s.top+12,dragCursor:"pointer",dragDefer:1,dragKey:l.getDragKey(m,k),dragData:l.getDragData(m,q,k)})}}},beforeDragbegin:function(k,l,m){linb.use(m).onMouseout(true,{$force:true}).onMouseup(true)},beforeDragstop:function(l,m,n){var k;if(l.onDragStop){l.boxing().onDragStop(l.e,n)}if(k=l.box._onDragStop){k.apply(l.host||l,arguments)}}},"all");_.merge(g,{onmousedown:e,ondragbegin:e});return d},adjustData:function(f,m,j){if(!j){j={}}var h=f.box.$DataModel,d=f.properties;var g,e,l=linb.wrapRes,k=arguments.callee,c=k._r||(k._r=/\B\$([\w]+[\.][\w\.]+[\w])/g);for(g in m){if(g.charAt(0)=="$"){continue}if(m.hasOwnProperty(g)&&!j.hasOwnProperty(g)){j[g]=typeof(e=m[g])=="string"?(((e.indexOf("$")!=-1)?(e=e.replace(c,function(n,i){return l(i)})):e)&&((e.charAt(0)=="@")?(linb.SC.get(e.substr(1,e.length))||e):e)):e}}if("disabled" in h){j.disabled=((_.isSet(j.disabled)&&j.disabled)||(_.isSet(d.disabled)&&d.disabled))?"ui-itemdisabled":""}if("readonly" in h){j.readonly=((_.isSet(j.readonly)&&j.readonly)||(_.isSet(d.readonly)&&d.readonly))?"ui-itemreadonly":""}j.imageDisplay=(j.imageClass||j.image)?"":"display:none";if(j.image){j.backgroundImage="background-image:url("+j.image+");"}if(j.imagePos){j.backgroundPosition="background-position:"+j.imagePos+";"}if(j.imageRepeat){j.backgroundRepeat="background-repeat:"+j.imageRepeat+";"}if((typeof(e=j.renderer)=="function")||(typeof(e=m.renderer)=="function")){j.caption=e.call(f,m,j)}return j},cacheData:function(c,d){_.set(linb.$cache,["UIDATA",c],d);return this},getCachedData:function(c){var d=_.get(linb.$cache,["UIDATA",c]);if(typeof d=="function"){d=d()}return _.clone(d)},Behaviors:{onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f)!==false}}},DataModel:{tag:"",tagVar:{ini:{}},disableHover:false,disableTips:false,disabled:{ini:false,action:function(c){var d=this.getRoot();if(c){d.addClass("ui-disabled")}else{d.removeClass("ui-disabled")}}},dock:{ini:"none",listbox:["none","top","bottom","left","right","center","middle","origin","width","height","fill","cover"],action:function(c){linb.UI.$dock(this,true,true)}},dockIgnore:{ini:false,action:function(d){var c=this;if(c.properties.dock!="none"){linb.UI.$dock(c,true,true)}}},dockOrder:{ini:1,action:function(d){var c=this;if(c.properties.dock!="none"){linb.UI.$dock(c,true,true)}}},dockMargin:{ini:{left:0,top:0,right:0,bottom:0},action:function(d){var c=this;if(c.properties.dock!="none"){linb.UI.$dock(c,true,true)}}},dockFloat:{ini:false,action:function(d){var c=this;if(c.properties.dock!="none"){linb.UI.$dock(c,true,true)}}},dockMinW:0,dockMinH:0,tips:""},EventHandlers:{onRender:function(c){},onLayout:function(c){},onResize:function(e,d,c){},onMove:function(e,g,f,d,c){},onDock:function(c,d){},beforePropertyChanged:function(d,c,e,f){},afterPropertyChanged:function(d,c,e,f){},beforeAppend:function(c,d){},afterAppend:function(c,d){},beforeRemove:function(e,f,d,c){},afterRemove:function(e,f,d,c){},onDestroy:function(c){},beforeDestroy:function(c){},onShowTips:function(c,d,e){},onContextmenu:function(c,f,d){}},RenderTrigger:function(){var d=this,c=d.boxing(),g=d.properties;if(d.box._onresize){var f=d.getRootNode().style,e;if((e=f.visibility)!="hidden"){d._$visibility=e;f.visibility="hidden"}linb.UI.$tryResize(d,g.width,g.height);f=null}if(g.disabled){c.setDisabled(true,true)}d.inValid=1},$doResize:function(g,c,f,j,d){if(j||((c||f)&&(g._resize_w!=c||g._resize_h!=f))){if(!g.getRootNode()){return false}g._resize_w=c;g._resize_h=f;_.tryF(g.box._onresize,[g,c,f,j,d],g.box);if(g.onResize){g.boxing().onResize(g,c,f)}}if("_$visibility" in g){var i=g.getRootNode(),e=i.style;if(e.visibility!="visible"&&!linb.getNodeData(i,"_setVisibility")){e.visibility=g._$visibility}i=e=null;clearTimeout(g._$rs_timer);delete g._$rs_timer;delete g._$rs_args;delete g._$visibility}},$tryResize:function(j,c,i,k,f){var g=j.box,e=g._onresize;if(e&&(k||c||i)){c=parseInt(c)||null;i=((i===""||i=="auto")?"auto":parseInt(i))||null;if("_$visibility" in j){var d=j._$rs_args;if(!d){d=j._$rs_args=[j,null,null];j._$rs_timer=_.asyRun(function(){if(j&&j._$rs_args){linb.UI.$doResize.apply(null,j._$rs_args)}})}d[1]=c;d[2]=i;d[3]=k;d[4]=f}else{linb.UI.$doResize(j,c,i,k,f)}}},LayoutTrigger:function(){var d=this,c=d.boxing(),f=d.properties;if(f.dock&&f.dock!="none"){if(!d.$laidout){d.$laidout=1;var e=d.getRootNode().style;switch(f.dock){case"top":case"bottom":case"width":e.width=0;break;case"left":case"right":case"height":e.height=0;break;default:e.width=e.height=0}}linb.UI.$dock(this,false,true)}},$dock_args:["top","bottom","left","right","center","middle","width","height"],$dock_map:{middle:1,center:1},$dock:function(j,e,g){var i=j.getRoot(),d=linb((i.get(0)&&i.get(0).parentNode)||j.$dockParent);if(!d.get(0)){return}var c=j.properties,l=c.dockMargin,w="auto",u=c.dock||"none",n=linb.Event.getId(d.get(0)),h=function(f,p){f=parseInt(f.properties.dockOrder)||0;p=parseInt(p.properties.dockOrder)||0;return f>p?1:f==p?0:-1},s,r="$inMatrix",q,v,m,k=function(f){return linb.browser.ie6?f-f%2:f};if(d.get(0)===document.body||d.get(0)===document||d.get(0)===window){n="!document";m=true}if(n&&(n==linb.Dom._ghostDivId||_.str.startWith(n,linb.Dom._emptyDivId))){return}if(j.$dockParent!=n||j.$dockType!=u||e){j.$dockParent=n;j.$dockType=u;j.unLink("$dockall");j.unLink("$dock");j.unLink("$dock1");j.unLink("$dock2");switch(u){case"middle":s={right:w,bottom:w,left:c.left||"",width:c.width||"",height:c.height||""};break;case"center":s={right:w,bottom:w,top:c.top||"",width:c.width||"",height:c.height||""};break;case"origin":s={right:w,bottom:w,width:c.width||"",height:c.height||""};break;case"top":s={left:l.left,right:l.right,bottom:w,height:c.height||""};break;case"bottom":s={left:l.left,right:l.right,top:w,height:c.height||""};break;case"left":s={right:w,width:c.width||""};break;case"right":s={left:w,width:c.width||""};break;case"width":s={bottom:w,height:c.height||"",top:c.top||""};break;case"height":s={right:w,width:c.width||"",left:c.left||""};break;case"fill":case"cover":s={right:w,bottom:w};break;case"none":s={left:c.left,top:c.top,width:c.width||"",height:c.height||""};break}if(i.get(0)){i.cssRegion(s,true)}if(m){d=linb.win;if(!linb.$cache._resizeTime){linb.$cache._resizeTime=1}}if(u!="none"){q=d.$getEvent("onSize","dock");if(!q){q=function(I){var G=arguments.callee,f=linb.UI.$dock_map,C=linb.UI.$dock_args,D=G.rePos,E=G.pid=="!window"||G.pid=="!document",y=E?linb.win:linb(G.pid);if(!y.get(0)){return}var p=y.get(0).style,B,A,z,x,H,F;if(I.$dockid||!E||(_()-linb.$cache._resizeTime>100)){B={left:0,top:0,right:0,bottom:0,width:parseInt(p&&p.width)||y.width(),height:parseInt(p&&p.height)||y.height()};for(z=0;H=C[z++];){F=G[H];if(F.length){if(!f[H]){I.width=I.height=1}for(A=0;x=F[A++];){if(!x.properties.dockIgnore){D(x,B,H,I.$dockid,E||I.width,E||I.height)}}}}if(B.later){_.each(B.later,function(L){var J;try{L.node.cssRegion(L,true);if(J=linb.UIProfile.getFromDom(L.node.get(0))){delete L.node;if(!J.box._onresize&&J.onResize&&(L.width!==null||L.height!==null)){J.boxing().onResize(J,L.width,L.height)}if(J.onDock){J.boxing().onDock(J,L)}}}catch(K){_.asyRun(function(){L.width+=1;L.height+=1;L.node.cssRegion(L);L.width-=1;L.height-=1;L.node.cssRegion(L,true);if(J=linb.UIProfile.getFromDom(L.node.get(0))){delete L.node;if(!J.box._onresize&&J.onResize&&(L.width!==null||L.height!==null)){J.boxing().onResize(J,L.width,L.height)}if(J.onDock){J.boxing().onDock(J,L)}}})}})}if(E){linb.$cache._resizeTime=_()}}G=y=p=null};q.pid=n;_.arr.each(linb.UI.$dock_args,function(f){q[f]=[]});q.dockall=[];q.rePos=function(p,G,K,J,F,O){var N=false;if(J&&p.$linbid!=J){N=true}var f=p.properties,M=f.dockFloat,I=f.dockMargin,L=p.getRoot(),P=p.getRootNode().style,A,H,R,C,Q,B,E=parseInt(f._dockBorderWidth)||0,D=parseInt(f._dockBorderHeight)||0,z={};if(P.display=="none"){return}switch(K){case"middle":L.top((G.height-L.height())/2);break;case"center":L.left((G.width-L.width())/2);break;case"top":if(!N){A=I.left;R=I.right;H=(M?0:G.top)+I.top;if(parseFloat(P.top)!=H){z.top=H}Q=G.width-A-R-E;Q=k(f.dockMinW?Math.max(f.dockMinW,Q):Q);if(parseFloat(P.width)!=Q){z.width=k(Q)}if(!_.isEmpty(z)){L.cssRegion(z,true)}}if(!M){G.top+=(L.offsetHeight()+I.top+I.bottom)}break;case"bottom":if(!N){A=I.left;R=I.right;C=(M?0:G.bottom)+I.bottom;if(parseFloat(P.bottom)!=C){z.bottom=C}Q=G.width-A-R-E;Q=k(f.dockMinW?Math.max(f.dockMinW,Q):Q);if(parseFloat(P.width)!=Q){z.width=k(Q)}if(!_.isEmpty(z)){L.cssRegion(z,true)}}if(!M){G.bottom+=(L.offsetHeight()+I.top+I.bottom)}break;case"left":if(!N){A=(M?0:G.left)+I.left;H=(M?0:G.top)+I.top;C=(M?0:G.bottom)+I.bottom;if(parseFloat(P.left)!=A){z.left=A}if(parseFloat(P.top)!=H){z.top=H}Q=G.height-H-C-D;Q=k(f.dockMinH?Math.max(f.dockMinH,Q):Q);if(parseFloat(P.height)!=Q){z.height=k(Q)}if(!_.isEmpty(z)){L.cssRegion(z,true)}}if(!M){G.left+=(L.offsetWidth()+I.left+I.right)}break;case"right":if(!N){R=(M?0:G.right)+I.right;H=(M?0:G.top)+I.top;C=(M?0:G.bottom)+I.bottom;if(parseFloat(P.right)!=R){z.right=R}if(parseFloat(P.top)!=H){z.top=H}Q=G.height-H-C-D;Q=k(f.dockMinH?Math.max(f.dockMinH,Q):Q);if(parseFloat(P.height)!=Q){z.height=k(Q)}if(!_.isEmpty(z)){L.cssRegion(z,true)}}if(!M){G.right+=(L.offsetWidth()+I.left+I.right)}break;case"width":if(!F){return}A=(f.dock=="cover"?0:(M?0:G.left))+I.left;R=(f.dock=="cover"?0:(M?0:G.right))+I.right;H=f.dock=="width"?(parseInt(f.top)||0):((f.dock=="cover"?0:(M?0:G.top))+I.top);Q=G.width-A-R-E;G.later=G.later||{};G.later[p.$linbid]=G.later[p.$linbid]||{};_.merge(G.later[p.$linbid],{node:L,width:k(f.dockMinW?Math.max(f.dockMinW,Q):Q),left:A,top:H},"all");break;case"height":if(!O){return}H=(f.dock=="cover"?0:(M?0:G.top))+I.top;C=(f.dock=="cover"?0:(M?0:G.bottom))+I.bottom;A=f.dock=="height"?(parseInt(f.left)||0):((f.dock=="cover"?0:(M?0:G.left))+I.left);Q=G.height-H-C-D;G.later=G.later||{};G.later[p.$linbid]=G.later[p.$linbid]||{};_.merge(G.later[p.$linbid],{node:L,height:k(f.dockMinH?Math.max(f.dockMinH,Q):Q),left:A,top:H},"all");break}};d.onSize(q,"dock")}if(u=="fill"||u=="cover"){j.link(q.height,"$dock1");j.link(q.width,"$dock2");q.height.sort(h);q.width.sort(h)}else{if(u=="origin"){j.link(q.center,"$dock1");j.link(q.middle,"$dock2")}else{j.link(q[u],"$dock");q[u].sort(h)}}j.link(q.dockall,"$dockall");linb.$cache._resizeTime=1;j.$dockFun=q}if(m){var q=linb.win.$getEvent("onSize","dock");if(q&&q.dockall&&q.dockall.length){linb("html").addClass("linbcss-viewport");if(v=linb("body").get(0)){v.scroll="no"}}else{linb("html").removeClass("linbcss-viewport");if(v=linb("body").get(0)){v.scroll=""}}}}if(u!="none"&&g){j.$dockFun({width:1,height:1,$dockid:_.arr.indexOf(["width","height","fill","cover"],u)!=-1?j.$linbid:null,$type:u})}},_beforeSerialized:function(f){var g=f.boxing(),c,e,j={};_.merge(j,f,"all");var h=j.properties=_.copy(f.properties);switch(h.dock){case"top":case"bottom":delete h.width;delete h.left;delete h.top;delete h.right;delete h.bottom;break;case"left":case"right":delete h.height;delete h.left;delete h.top;delete h.right;delete h.bottom;break;case"width":delete h.width;delete h.left;delete h.right;break;case"height":delete h.height;delete h.top;delete h.bottom;break;case"fill":case"cover":delete h.width;delete h.height;delete h.left;delete h.top;delete h.right;delete h.bottom;break}for(var d in linb.UI.$ps){if((d in h)&&typeof h[d]!="number"&&h[d]!=""&&h[d]!="auto"){h[d]=isNaN(h[d]=parseFloat(h[d]))?"auto":h[d]}}if(h.items&&h.items.length){e=linb.absObj.$specialChars;h.items=_.clone(h.items,function(l,k){return !e[(k+"").charAt(0)]&&l!=undefined})}if(_.isEmpty(h.tagVar)){delete h.tagVar}if((e=h.dockMargin)&&!e.left&&!e.top&&!e.right&&!e.bottom){delete h.dockMargin}if(h.items&&(h.items.length==0||h.listKey)){delete h.items}return j},getDropKeys:function(c,d){return c.properties.dropKeys},getDragKey:function(c,d){return c.properties.dragKey},getDragData:function(c,e,d){return{profile:c,domId:linb.use(d).id(),data:c.onGetDragData?c.boxing().onGetDragData(c,e,d):null}},_prepareData:function(e,h){var c=e.properties,k=this.$DataModel,l=arguments.callee,d=l.map||(l.map=_.toArr("left,top,bottom,right,width,height")),m=[],n=e.box.adjustData,p;h=h||{};if(c.id){delete c.id}if("caption" in k&&c.caption!==null){c.caption=c.caption===undefined?e.alias:c.caption}if("$hborder" in k){h.bWidth=c.width-(c.$hborder||0)*2}if("$vborder" in k){h.bHeight=c.height-(c.$vborder||0)*2}for(var f=0,g;g=d[f];f++){if(c[g]||c[g]===0){if(String(parseFloat(c[g]))==String(c[g])){m[m.length]=g+":"+(parseInt(c[g])||0)+"px"}else{if(c[g]!="auto"&&c[g]){m[m.length]=g+":"+c[g]}}}}if(c.position){m[m.length]="position:"+c.position}if(c.visibility){m[m.length]="visibility:"+c.visibility}if(c.zIndex){m[m.length]="z-index:"+c.zIndex}if(c.display){m[m.length]="display:"+(c.display=="inline-block"?linb.browser.gek?"-moz-inline-block;display:-moz-inline-box;display:inline-block;":"inline-block":c.display)}h._style=";"+m.join(";")+";";if("readonly" in k){h.readonly=c.readonly?"ui-readonly":""}if("href" in k){h.href=c.href||linb.DEFAULTHREF}if("tabindex" in k){h.tabindex=c.tabindex||"-1"}if("items" in k){e.ItemIdMapSubSerialId={};e.SubSerialIdMapItem={};c.items=e.box._adjustItems(c.items);h.items=this._prepareItems(e,c.items)}h=n(e,c,h);e.prepared=true;return h},_prepareItems:function(f,p,n,h,k){var u=[],s,c,r,e=linb.UI.$tag_subId,d,j=f.properties.tabindex,q=f.box.adjustData;for(var m=0,g=p.length;m<g;m++){if(typeof p[m]!="object"){p[m]={id:p[m]}}s=p[m];if(!s.hasOwnProperty("caption")){s.caption=s.id}c={id:s.id};if(n){c._pid=n}d=c[e]=typeof k=="string"?k:f.pickSubId("items");if(false!==h){f.ItemIdMapSubSerialId[s.id]=d;f.SubSerialIdMapItem[d]=s}if(r=s.object){r=c.object=r["linb.absBox"]?r.get(0):r;if(r["linb.UIProfile"]){r.properties.position="relative"}s.$linbid=r.$linbid;r.$item=s;r.$holder=f;if(!f.$attached){f.$attached=[]}f.$attached.push(r)}else{c._tabindex=j;if(s.hidden){s.itemDisplay="display:none;"}q(f,s,c);if(this._prepareItem){this._prepareItem(f,c,s,n,h,k)}}u.push(c)}return u},_showTips:function(c,d,e){if(c.properties.disableTips){return}if(c.onShowTips){return c.boxing().onShowTips(c,d,e)}}}});Class("linb.absList","linb.absObj",{Instance:{activate:function(){var d=this.get(0),c=d.getSubNode("ITEM",true);if(!c.isEmpty()){c.focus()}return this},insertItems:function(h,d,m){var e,j,k,i,c,f,g,l=this._afterInsertItems;return this.each(function(q){g=q.box;j=g._adjustItems(h);k=q.properties.items;i=_.arr.subIndexOf(k,"id",d);if(q.renderId){f=g._prepareItems(q,j,d);c=q._buildItems("items",f);if(q.$attached){for(var p=0,n;n=q.$attached[p++];){if(n._render){n._render(true)}}delete q.$attached}if(i==-1){e=q.getSubNode(g._ITEMSKEY||q.keys.ITEMS||q.keys.KEY);if(m){e.prepend(c)}else{e.append(c)}}else{e=q.getSubNodeByItemId(g._ITEMKEY||"ITEM",d);if(m){e.addPrev(c)}else{e.addNext(c)}}}if(i==-1){_.arr.insertAny(k,j,m?0:-1)}else{_.arr.insertAny(k,j,m?i:i+1)}if(l){q.boxing()._afterInsertItems(q,f,d,m)}})},removeItems:function(d,f){if(!(d instanceof Array)){d=[d]}var g,e,c=this._afterRemoveItems;remove=function(k,h,m,j,l){var i=arguments.callee;if(!j){j=linb()}_.filter(h,function(r){var q,n;if(l||(n=(_.arr.indexOf(m,r.id)!=-1))){if(k.renderId){if(q=k.ItemIdMapSubSerialId[r.id]){delete k.SubSerialIdMapItem[q];delete k.ItemIdMapSubSerialId[r.id];k.reclaimSubId(q,"items");if(!l){if(!(g=k.getSubNode(k.keys[f]?f:(k.box._ITEMKEY||"ITEM"),q)).isEmpty()){j.merge(g)}if(r.$linbid){j.get().push(linb.getObject(r.$linbid).getRootNode())}}}}}if(r.sub){i(k,r.sub,m,j,l||n)}if(n){for(var p in r){r[p]=null}return false}});j.remove()};return this.each(function(h){var i=h.properties;remove(h,i.items,d);if(e=i.$UIvalue){if((e=e.split(";")).length>1){_.filter(e,function(j){return _.arr.indexOf(d,j)==-1});i.$UIvalue=e.join(";")}else{if(_.arr.indexOf(d,i.$UIvalue)!=-1){i.$UIvalue=null}}}if(c&&h.renderId){h.boxing()._afterRemoveItems(h,d)}})},clearItems:function(c){return this.each(function(d){if(!d.SubSerialIdMapItem){return}d.getSubNode(d.keys[d.box._ITEMKEY||"ITEM"],true).remove();_.each(d.SubSerialIdMapItem,function(f,e){d.reclaimSubId(e,"items")});d.properties.items.length=0;d.SubSerialIdMapItem={};d.ItemIdMapSubSerialId={}})},updateItem:function(d,p){var n=this,f=n.get(0),i=f.box,j=f.properties.items,k=f.queryItems(j,function(q){return typeof q=="object"?q.id===d:q==d},true,true,true),m,g,h,e,c,l;if(!_.isHash(p)){p={caption:p+""}}delete p.id;if(k.length){k=k[0];if(typeof k[0]!="object"){m=k[2][k[1]]={id:k[0]}}else{m=k[0]}_.merge(m,p,"all");e=f.getSubNodeByItemId("ITEM",d);if(!e.isEmpty()){g=_.get(f,["ItemIdMapSubSerialId",d]);h=i._prepareItems(f,[m],m._pid,false,g);if(p.sub){delete m._created;delete m._checked}else{if(m.sub){c=f.getSubNodeByItemId("SUB",d)}}e.replace(f._buildItems(arguments[2]||"items",h),false);if(c&&!c.isEmpty()){if(!(l=f.getSubNodeByItemId("SUB",d)).isEmpty()){l.replace(c)}}}}return n},getItems:function(f){var e=this.get(0).properties.items;if(f=="data"){return _.clone(e,true)}else{if(f=="min"){var d=_.clone(e,true),c;_.arr.each(d,function(h,g){d[g]=h.id});return d}else{return e}}},fireItemClickEvent:function(c){this.getSubNodeByItemId("ITEM",c).onClick();return this}},Initialize:function(){var c=this.prototype;_.arr.each(_.toArr("getItemByItemId,getItemByDom,getSubIdByItemId,getSubNodeByItemId"),function(d){c[d]=function(){var e=this.get(0);return e[d].apply(e,arguments)};Class._fun(c[d],d,c.KEY,null,"instance")})},Static:{$abstract:true,DataModel:{listKey:{set:function(d){var e=this,c=e.box.getCachedData(d);if(c){e.boxing().setItems(c)}else{e.boxing().setItems(e.properties.items)}e.properties.listKey=d}},items:{ini:[],set:function(c){var d=this;if(d.renderId){d.boxing().clearItems().insertItems(c)}else{d.properties.items=_.copy(c)}}}},RenderTrigger:function(){this.destroyTrigger=function(){_.each(this.SubSerialIdMapItem,function(c){_.breakO(c)});this.properties.items.length=0}},_adjustItems:function(d){if(!d){d=[]}if(_.isStr(d)){d=[d]}var e=_.copy(d),c;_.arr.each(e,function(g,f){if(typeof g!="object"){e[f]={id:g+""}}else{e[f]=_.copy(g);e[f].id=_.isSet(e[f].id)?(e[f].id+""):_.id()}});return e},_showTips:function(e,g,j){if(e.properties.disableTips){return}if(e.onShowTips){return e.boxing().onShowTips(e,g,j)}if(!linb.Tips){return}var d=e.properties,i=g.id,c=e.getSubId(i),h=e.SubSerialIdMapItem,f=h&&h[c];if(f&&f.tips){linb.Tips.show(j,f);return true}else{return false}}}});Class("linb.absValue","linb.absObj",{Instance:{_getCtrlValue:function(){return this.get(0).properties.$UIvalue},_setCtrlValue:function(c){return this},_setDirtyMark:function(c){return this.each(function(g){if(!g.properties.dirtyMark){return}if(!g.renderId){return}var f=g.properties,e=f.value!==f.$UIvalue,i=g.getSubNode(c||"KEY"),h=linb.UI.$css_tag_dirty;if(g._dirtyFlag!==e){if(g.beforeDirtyMark&&false===g.boxing().beforeDirtyMark(g,e)){}else{if(g._dirtyFlag=e){i.addClass(h)}else{i.removeClass(h)}}}})},getValue:function(){return this.get(0).properties.value},getUIValue:function(){return this.get(0).properties.$UIvalue=this._getCtrlValue()},resetValue:function(d){var c=this;c.each(function(e){var f,g=e.properties;if(typeof(f=e.box._ensureValue)=="function"){d=f.call(e.box,e,d)}if(g.value!==d||g.$UIvalue!==d){if(e.box._beforeResetValue){e.box._beforeResetValue(e)}e.boxing()._setCtrlValue(g.value=d);g.$UIvalue=d;if(typeof(f=e.$onValueSet)=="function"){f.call(e,d)}}e.inValid=1});c._setDirtyMark();return c},setUIValue:function(e,d){var c=this;this.each(function(f){var j=f.properties,h,i=j.$UIvalue,g=f.boxing();if(i!==e||d){if(false===f.box._checkValid(f,e)||(f.beforeUIValueSet&&false===(h=g.beforeUIValueSet(f,i,e)))){return}if(h!==undefined&&typeof h!=="boolean"){e=h}if(typeof(h=f.box._ensureValue)=="function"){e=h.call(f.box,f,e)}if(typeof(h=f.$onValueUpdated)=="function"){h.call(f,e)}if(f.renderId){g._setCtrlValue(e)}j.$UIvalue=e;if(f.renderId){g._setDirtyMark()}if(f.afterUIValueSet){g.afterUIValueSet(f,i,e)}if(f.onChange){g.onChange(f,i,e)}}});return this},updateValue:function(){return this.each(function(d){var e=d.properties;if(e.value!==e.$UIvalue){var c=d.boxing();if(c.checkValid()){c.setValue(c.getUIValue(),true);c._setDirtyMark()}}})},isDirtied:function(){var c=false;this.each(function(d){var e=d.properties;c=(e.value+" ")!==(e.$UIvalue+" ");if(c){return false}});return c},checkValid:function(){var c=true;this.each(function(d){var e=d.properties;c=d.box._checkValid(d,e.$UIvalue)&&c;if(d.renderId){d.boxing()._setDirtyMark()}});return c}},Static:{$abstract:true,DataModel:{dataBinder:{combobox:function(){return _.toArr(linb.DataBinder._pool,true)},set:function(d,f){var c=this,e=c.properties;if(f){linb.DataBinder._unBind(f,c)}e.dataBinder=d;linb.DataBinder._bind(d,c)}},dataField:{ini:"",set:function(f,h){var e=this,d,g=e.properties;g.dataField=f;if(!g.dataBinder){return}var c=linb.DataBinder.getFromName(g.dataBinder);if(c&&(d=c.get(0))&&(d=d._valuesMap)&&_.isSet(d=d[f])){e.boxing().setValue(d,true)}}},readonly:{ini:false,action:function(c){var d=this.getRoot();if(c){d.addClass("ui-readonly")}else{d.removeClass("ui-readonly")}}},value:{ini:null,set:function(g){var d=this,i=d.properties,f,h=i.value,e=d.boxing(),c=g;if(d.box._checkValid(d,c)===false){return}if(d.beforeValueSet&&false===(f=e.beforeValueSet(d,h,c))){return}if(f!==undefined){c=f}if(typeof(f=d.box._ensureValue)=="function"){c=f.call(d.box,d,c)}if(typeof(f=d.$onValueSet)=="function"){f.call(d,c)}if(d.renderId){e._setCtrlValue(c)}i.value=i.$UIvalue=c;d.inValid=1;if(d.renderId){e._setDirtyMark()}if(d.afterValueSet){e.afterValueSet(d,h,c)}}},dirtyMark:true},EventHandlers:{beforeValueSet:function(d,c,e){},afterValueSet:function(d,c,e){},beforeUIValueSet:function(d,c,e){},afterUIValueSet:function(d,c,e){},onChange:function(d,c,e){},beforeDirtyMark:function(d,c){}},RenderTrigger:function(){var d=this,c=d.boxing(),f=d.properties,e;if(e=f.dataBinder){c.setDataBinder(e,true)}if(e=f.dataField){c.setDataField(e)}if(f.value!==undefined){if(typeof(e=d.box._ensureValue)=="function"){f.value=e.call(d.box,d,f.value);if(f.$UIvalue){f.$UIvalue=e.call(d.box,d,f.$UIvalue)}}if(!f.$UIvalue){f.$UIvalue=f.value}c._setCtrlValue(f.$UIvalue)}},_checkValid:function(c,d){return true}}});new function(){var c="linb.UI";Class(c+".Widget",c,{Static:{Appearances:{KEY:{"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null}},Templates:{className:"uiw-shell ",style:"{_style}",FRAME:{className:"uiw-frame ",BORDER:{style:"width:{bWidth}px;height:{bHeight}px;",className:"uiw-border"}}},Behaviors:{KeyHook:true,onSize:linb.UI.$onSize},DataModel:{width:100,height:100,$hborder:0,$vborder:0},RenderTrigger:function(){var d=this,e=d.properties,f=d.boxing();if(d.renderId){if((!d.$noB)&&e.border&&f._border){f._border()}}if((!d.$noR)&&e.resizer&&f.setResizer){f.setResizer(e.resizer,true)}if((!d.$noS)&&e.shadow&&f._shadow){f._shadow()}},_onresize:function(g,d,l){var m=g.properties,e=g.getSubNode("BORDER"),k,i=d,h=l,f=Math.max(0,(m.$b_lw||0)-(m.$hborder||0)),j=Math.max(0,(m.$b_tw||0)-(m.$vborder||0));if(i&&"auto"!==i){i-=Math.max((m.$hborder||0)*2,(m.$b_lw||0)+(m.$b_rw||0));if(linb.browser.ie6){i=(parseInt(i/2))*2}}if(h&&"auto"!==h){h-=Math.max((m.$vborder||0)*2,(m.$b_lw||0)+(m.$b_rw||0));if(linb.browser.ie6){h=(parseInt(h/2))*2}if(linb.browser.ie6&&null===d){e.ieRemedy()}}k={left:f,top:j,width:i,height:h};e.cssRegion(k);if((g.$border||g.$shadow||g.$resizer)&&linb.browser.ie){e.ieRemedy()}return k}}});Class(c+".Link",c,{Static:{Appearances:{KEY:{"font-size":linb.browser.ie?"12px":null,"line-height":linb.browser.ie?"14px":null}},Templates:{tagName:"a",style:"{_style}",href:"{href}",target:"{target}",tabindex:"{tabindex}",text:"{caption}"},Behaviors:{HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},onClick:function(f,h,i){var g;if(!f.properties.disabled&&f.onClick){g=f.boxing().onClick(f,h,i)}var d=linb.use(i).attr("href");return typeof g=="boolean"?g:(d.indexOf("javascript:")===0||d.indexOf("#")===0)?false:true}},DataModel:{caption:{ini:undefined,action:function(d){this.getRoot().html(d)}},href:{ini:linb.DEFAULTHREF,action:function(d){this.getRoot().attr("href",d)}},target:{action:function(d){this.getRoot().attr("target",d)}}},EventHandlers:{onClick:function(d,f){}}}});Class(c+".SLabel",c,{Static:{Templates:{style:"{_style}text-align:{hAlign}",text:"{caption}"},Appearances:{KEY:{"padding-right":"6px"}},DataModel:{caption:{ini:undefined,action:function(d){this.getRoot().html(d)}},hAlign:{ini:"right",listbox:["left","center","right"],action:function(d){this.getRoot().css("textAlign",d)}}}}});Class(c+".SButton",c,{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this}},Static:{Templates:{className:"{_clsName}",style:"{_style}",BTN:{className:"ui-btn",BTNI:{className:"ui-btni",BTNC:{className:"ui-btnc",FOCUS:{tabindex:"{tabindex}",style:"{_align}",text:"{caption}"}}}}},Appearances:{BTN:{overflow:"hidden"},"KEY-auto BTN, KEY-auto BTNI, KEY-auto BTNC, KEY-auto FOCUS":{$order:1,display:linb.$inlineBlock},"BTN,BTNI,BTNC":{display:"block"},"KEY FOCUS":{cursor:"pointer","font-size":"12px","line-height":"14px","text-align":"center",display:"block"}},Behaviors:{HoverEffected:{BTN:["BTN"]},ClickEffected:{BTN:["BTN"]},NavKeys:{FOCUS:1},onClick:function(d,g,h){var f=d.properties;if(f.disabled){return false}d.getSubNode("FOCUS").focus();if(d.onClick){d.boxing().onClick(d,g,h)}}},DataModel:{caption:{ini:undefined,action:function(d){this.getSubNode("FOCUS").html(d)}},hAlign:{ini:"center",listbox:["left","center","right"],action:function(d){this.getSubNode("FOCUS").css("textAlign",d)}},width:{ini:"auto",action:function(d){if(d=="auto"){this.getRoot().width("auto").tagClass("-auto")}else{this.getRoot().width(d).tagClass("-auto",false)}}},height:{readonly:true}},EventHandlers:{onClick:function(d,g,h,f){}},_prepareData:function(d){var e=arguments.callee.upper.call(this,d);e._align="text-align:"+e.hAlign+";";e._clsName=parseInt(e.width)?"":d.getClass("KEY","-auto");return e}}});Class(c+".SCheckBox",[c,"linb.absValue"],{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this},_setCtrlValue:function(d){return this.each(function(e){e.getSubNode("MARK").tagClass("-checked",!!d)})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["CAPTION"])}},Static:{Templates:{className:"{_clsName}",style:"{_style}",FOCUS:{tabindex:"{tabindex}",MARK:{className:"uicmd-check"},CAPTION:{$order:1,text:"{caption}"}}},Appearances:{KEY:{overflow:"visible"},FOCUS:{cursor:"default","vertical-align":"middle",padding:"2px 0","font-size":"12px","line-height":"14px"},CAPTION:{"vertical-align":linb.browser.ie6?"baseline":"middle"}},Behaviors:{HoverEffected:{KEY:"MARK"},ClickEffected:{KEY:"MARK"},NavKeys:{FOCUS:1},onClick:function(f,h,i){var g=f.properties,d=f.boxing();if(g.disabled){return false}if(g.readonly){return false}d.setUIValue(!g.$UIvalue);if(f.onChecked){d.onChecked(f,h,g.$UIvalue)}f.getSubNode("FOCUS").focus()},FOCUS:{onKeydown:function(f,g,h){var d=linb.Event.getKey(g)[0];if(d==" "||d=="enter"){f.getRoot().onClick(true);return false}}}},DataModel:{value:false,caption:{ini:undefined,action:function(d){this.getSubNode("CAPTION").html(d)}}},EventHandlers:{onChecked:function(d,g,f){}},_ensureValue:function(d,e){return !!e}}});Class(c+".Div",c,{Static:{Appearances:{KEY:{outline:linb.browser.gek?"none":null,zoom:linb.browser.ie6?"1":null,background:linb.browser.ie?"url("+linb.ini.file_bg+") no-repeat left top":null}},Templates:{tagName:"div",style:"{_style}",tabindex:"-1",text:"{html}"+linb.UI.$childTag},DataModel:{width:"100",height:"100",html:{action:function(d){this.getRoot().html(d)}}}}});Class(c+".Tag",c+".Div",{Static:{Templates:{tagName:"div",style:"overflow:auto;border:dashed blue 1px;text-align:center;background:#EBEADB;{_style}",text:"{tagKey}"+linb.UI.$childTag},DataModel:{html:null,tagKey:{action:function(d){this.getRoot().html(d)}}},_l:_.toArr("left,top,bottom,right,width,height,zIndex,tabindex,position,dock,dockFloat,dockMinW,dockMinH,dockOrder,dockMargin"),replace:function(f,g,d){_.arr.each(this._l,function(j){if(j in f.properties){g.properties[j]=f.properties[j]}});_.merge(g.CS,f.CS,"all");_.merge(g.CC,f.CC,"all");if(typeof f.theme=="string"){g.theme=f.theme}if(f.parent){var h=f.parent.children,i=h["$"+f.$linbid],e=_.arr.indexOf(h,i);f.parent.boxing().append(g,i[1]);h[e]=h.pop();f.unLink("$parent");delete f.parent}else{if(d){_.arr.each(d._nodes,function(k,j){if(k===f){d._nodes[j]=g;return false}})}}if(f.renderId){g.boxing().renderOnto(f.getRootNode())}}}});Class(c+".Pane",c+".Div",{Static:{Behaviors:{DropableKeys:["KEY"]}}})};Class("linb.UI.Border","linb.UI",{Instance:{_attachTo:function(h,f){var e=this,d=e.get(0),g;h.append(e);d.$edgeId=linb(h).id();d.$tieId=f;d.$attached=true;if(g=d.properties){if(d.properties.borderActive){var c="tag",i=d.domId;if(linb(f).get(0)){linb(f).afterMouseover(function(l,k){if(l.properties.disabled){return}var j=linb.$cache.profileMap[i];_.tryF(j.behavior.TAG.afterMouseover,[j,k,j.getRootNode()],this)},c).afterMouseout(function(l,k){if(l.properties.disabled){return}var j=linb.$cache.profileMap[i];_.tryF(j.behavior.TAG.afterMouseout,[j,k,j.getRootNode()],this)},c).afterMousedown(function(l,k){if(l.properties.disabled){return}var j=linb.$cache.profileMap[i];_.tryF(j.behavior.TAG.afterMousedown,[j,k,j.getRootNode()],this)},c).afterMouseup(function(l,k){if(l.properties.disabled){return}var j=linb.$cache.profileMap[i];_.tryF(j.behavior.TAG.afterMouseup,[j,k,j.getRootNode()],this)},c)}}}return h},_detach:function(){var f=this,e=f.get(0),h,g,d=null,c="tag";delete e.$attached;if(h=e.$tieId){if(h=linb.Dom.byId(h)){linb(h).afterMouseover(d,c).afterMouseout(d,c).afterMousedown(d,c).afterMouseup(d,c)}}return f}},Initialize:function(){_.each({addBorder:function(d){var e=linb([this.get(0)]),c=arguments[1]||e.id();return new linb.UI.Border(d)._attachTo(e,c)},$getBorder:function(){var d=this.id(),c;_.arr.each(linb.UI.Border._cache,function(e){if(e.$edgeId==d){c=e;return false}});return c&&c.boxing()},removeBorder:function(){var c=this.id();_.arr.each(linb.UI.Border._cache,function(d){if(d.$edgeId==c){d.boxing()._detach().destroy()}});return this}},function(d,c){linb.Dom.plugIn(c,d)});_.each({_border:function(d,c){return this.each(function(j){var h=j.properties,i=j.getSubNode(h._customBorder||"BORDER"),f;if(!d){d={}}if(h._customBorder){f=(d._bkey=j.getClass("KEY"))}else{f="linb-border"}var g="setting-"+f,e;e="borderLeftWidth";h.$b_lw=linb.UI.$getCSSValue(g,e);e="borderRightWidth";h.$b_rw=linb.UI.$getCSSValue(g,e);e="borderTopWidth";h.$b_tw=linb.UI.$getCSSValue(g,e);e="borderBottomWidth";h.$b_bw=linb.UI.$getCSSValue(g,e);if(c!==false){if(i.$getBorder()){return}j.$border=i.addBorder(d);j.clearCache().boxing().reLayout()}})},_unBorder:function(){return this.each(function(e){var d=e.getSubNode("BORDER"),c=e.properties;if(!d.$getBorder()){return}d.removeBorder();delete e.$border;delete c.$b_lw;delete c.$b_rw;delete c.$b_tw;delete c.$b_bw;e.clearCache().boxing().reLayout()})}},function(d,c){linb.UI.Widget.plugIn(c,d)});linb.UI.Widget.setDataModel({border:{ini:false,action:function(d){var c=this.boxing();if(d){c._border()}else{c._unBorder()}}}})},Static:{Templates:{tagName:"div",TAG:{},T:{className:"{cls_t}"},RT:{className:"{cls_rt}",$order:1},R:{className:"{cls_r}"},RB:{className:"{cls_rb}",$order:1},B:{className:"{cls_b}"},LB:{className:"{cls_lb}",$order:1},L:{className:"{cls_l}"},LT:{className:"{cls_lt}",$order:1}},Appearances:{KEY:{width:0,height:0,_display:"inline","font-size":0,"line-height":0},"TAG,T, RT, R, RB, B, LB, L, LT":{position:"absolute",display:"block","font-size":0,"line-height":0},".setting-linb-border":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},T:{width:"100%",left:0,top:"-1px",height:"3px",background:linb.UI.$bg("vertical.gif","repeat-x left top")},B:{width:"100%",left:0,bottom:"-1px",height:"3px",background:linb.UI.$bg("vertical.gif","repeat-x left bottom")},L:{height:"100%",top:0,left:"-1px",width:"3px",background:linb.UI.$bg("horizontal.gif","repeat-y left top")},R:{height:"100%",top:0,right:"-1px",width:"3px",background:linb.UI.$bg("horizontal.gif","repeat-y right top")},LT:{top:"-1px",left:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat left top")},RT:{top:"-1px",right:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat right top")},RB:{right:"-1px",bottom:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat right bottom")},LB:{left:"-1px",bottom:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat left bottom")}},Behaviors:{HoverEffected:{TAG:"KEY"},ClickEffected:{TAG:"KEY"}},DataModel:{_bkey:"",borderActive:false},_prepareData:function(c){var e=arguments.callee.upper.call(this,c),d=c.properties._bkey;e.cls_t=d?d+"-b-t":"";e.cls_rt=d?d+"-b-rt":"";e.cls_r=d?d+"-b-r":"";e.cls_rb=d?d+"-b-rb":"";e.cls_b=d?d+"-b-b":"";e.cls_lb=d?d+"-b-lb":"";e.cls_l=d?d+"-b-l":"";e.cls_lt=d?d+"-b-lt":"";return e}}});Class("linb.UI.Image","linb.UI",{Instance:{getRate:function(){return parseFloat(this.get(0)._rate)||1}},Static:{Templates:{tagName:"image",style:"{_style}",border:"0",width:"{width}",height:"{height}",alt:"{alt}"},Behaviors:{HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},DragableKeys:["KEY"],onError:function(c,d,f){c.boxing().onError(c)},onLoad:function(f,h,j){var d=new Image(),g=d.src=linb.use(j).get(0).src,c=f.box._adjust(f,d.width,d.height);f.boxing().afterLoad(f,g,c[0],c[1])},onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClick){c.boxing().onClick(c,f,g)}},onDblclick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onDblclick){c.boxing().onDblclick(c,f,g)}}},RenderTrigger:function(){var d=this,e=d.properties,c=e.src;if(c){e.value=e.$UIvalue="";d.boxing().setSrc(c,true)}},EventHandlers:{onClick:function(c,d,f){},onDblclick:function(c,d,f){},onError:function(c){},beforeLoad:function(c){},afterLoad:function(e,f,d,c){}},_adjust:function(g,f,c){var j=g.properties,i=g.getRootNode();if(f>0&&c>0){var e=j.maxWidth/f,d=j.maxHeight/c,h=e<d?e:d;if(h>=1){h=1}g._rate=h;i.width=f*h;i.height=c*h;return[f*h,c*h]}return[0,0]},DataModel:{maxWidth:{ini:800,action:function(c){var d=this.getRootNode();this.box._adjust(this,d.width,d.height)}},maxHeight:{ini:600,action:function(c){var d=this.getRootNode();this.box._adjust(this,d.width,d.height)}},width:{ini:"",action:function(c){var d=this.getRootNode();d.width=c}},height:{ini:"",action:function(c){var d=this.getRootNode();d.height=c}},src:{ini:linb.ini.file_bg,action:function(d){var c=this;if(false!==c.boxing().beforeLoad(this)){_.asyRun(function(){c.getRoot().attr({width:"0",height:"0",src:d})})}}},alt:{action:function(c){this.getRoot().attr("alt",c)}}}}});Class("linb.UI.Button",["linb.UI.Widget","linb.absValue"],{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this},_setCtrlValue:function(c){if(_.isNull(c)||!_.isDefined(c)){c=false}return this.each(function(f){var e=f.properties;if(e.type!="status"){return}f.getSubNode("BORDER").tagClass("-checked",c);if(e.border){var d=f.getSubNode("BORDER").$getBorder();if(d){d.get(0).getRoot().tagClass("-checked",c)}}})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["FOCUS"])},resetValue:function(c){this.each(function(d){if(d.properties.type=="drop"){d.boxing().setCaption("",true)}});return arguments.callee.upper.apply(this,arguments)},setUIValue:function(d,c){this.each(function(e){var f=e.properties;if(f.$UIvalue!==d&&f.type=="drop"){e.boxing().setCaption("",true)}});return arguments.callee.upper.apply(this,arguments)}},Initialize:function(){this.addTemplateKeys(["DROP"]);var c=this.getTemplate();_.merge(c.FRAME,{FOCUS:{$order:2,tabindex:"{tabindex}",TB:{cellpadding:"0",cellspacing:"0",width:"100%",height:"100%",border:"0",tagName:"table",TR:{tagName:"tr",TDL:{tagName:"td"},TD:{$order:1,align:"{hAlign}",valign:"{vAlign}",tagName:"td",width:"100%",height:"100%",BOX:{ICON:{$order:1,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{$order:2,text:"{caption}"}}},TDR:{$order:2,tagName:"td",className:"{dropCls}",TDRI:{}}}}}},"all");this.setTemplate(c)},Static:{Appearances:{KEY:{"font-size":"12px","line-height":"14px"},BORDER:{"font-size":0,"line-height":0,"background-color":"#D2D7DF"},"BORDER-mouseover":{$order:2,"background-color":"#F7D928"},"BORDER-mousedown, BORDER-checked":{$order:2,"background-color":"#F9E56A"},DROP:{$order:10,background:linb.UI.$bg("drop.gif","no-repeat left bottom","Button"),"padding-left":"16px"},"DROP-mouseover":{$order:11,"background-position":"-16px bottom"},"DROP-mousedown":{$order:12,"background-position":"right bottom"},"TDR,TDL":{"padding-left":"6px"},".setting-linb-button":{"border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},"KEY-b-t":{top:"-1px",height:"10px",background:linb.UI.$bg("vertical.gif","repeat-x left top","Button")},"KEY-b-b":{bottom:"-1px",height:"10px",background:linb.UI.$bg("vertical.gif","repeat-x left bottom","Button")},"BORDER-mouseover KEY-b-t, BORDER-mouseover KEY-b-b":{$order:1,"background-image":linb.UI.$bg("vertical_mouseover.gif","","Button")},"BORDER-checked KEY-b-t, BORDER-checked KEY-b-b, BORDER-mousedown KEY-b-t, BORDER-mousedown KEY-b-b":{$order:2,"background-image":linb.UI.$bg("vertical_mousedown.gif","","Button")},"KEY-b-l":{left:"-1px",width:"4px",background:linb.UI.$bg("horizontal.gif","repeat-y left top","Button")},"KEY-b-r":{right:"-1px",width:"4px",background:linb.UI.$bg("horizontal.gif","repeat-y right top","Button")},"BORDER-mouseover KEY-b-l, BORDER-mouseover KEY-b-r":{$order:1,"background-image":linb.UI.$bg("horizontal_mouseover.gif","","Button")},"BORDER-checked KEY-b-l, BORDER-checked KEY-b-r, BORDER-mousedown KEY-b-l, BORDER-mousedown KEY-b-r":{$order:2,"background-image":linb.UI.$bg("horizontal_mousedown.gif","","Button")},"KEY-b-lt":{top:"-1px",left:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat left top","Button")},"KEY-b-rt":{top:"-1px",right:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat right top","Button")},"KEY-b-rb":{right:"-1px",bottom:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat right bottom","Button")},"KEY-b-lb":{left:"-1px",bottom:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat left bottom","Button")},"BORDER-mouseover KEY-b-lt, BORDER-mouseover KEY-b-rt, BORDER-mouseover KEY-b-rb, BORDER-mouseover KEY-b-lb":{$order:1,"background-image":linb.UI.$bg("corner_mouseover.gif","","Button")},"BORDER-checked KEY-b-lt, BORDER-checked KEY-b-rt, BORDER-checked KEY-b-rb, BORDER-checked KEY-b-lb, BORDER-mousedown KEY-b-lt, BORDER-mousedown KEY-b-rt, BORDER-mousedown KEY-b-rb, BORDER-mousedown KEY-b-lb":{$order:2,"background-image":linb.UI.$bg("corner_mousedown.gif","","Button")},FOCUS:{overflow:"hidden",display:"block",left:0,top:0,"z-index":"20",width:"100%",height:"100%",position:"absolute","outline-offset":"-1px","-moz-outline-offset":"-1px !important"},BOX:{display:"inline","white-space":"nowrap"},CAPTION:{cursor:"pointer","vertical-align":linb.browser.ie6?"baseline":"middle",display:"inline","font-size":"12px","line-height":"14px"}},Behaviors:{HoverEffected:{KEY:["BORDER"]},ClickEffected:{KEY:["BORDER"]},NavKeys:{FOCUS:1},onClick:function(d,g,h){var f=d.properties;if(f.disabled){return false}d.getSubNode("FOCUS").focus();var c=d.boxing();if(f.type=="status"){if(f.readonly){return false}c.setUIValue(!f.$UIvalue);if(d.onChecked){c.onChecked(d,g,f.$UIvalue)}}if(d.onClick){c.onClick(d,g,h,f.$UIvalue)}},TDR:{onMousedown:function(c,d,f){if(c.properties.type!="drop"){return}linb.use(f).addClass(c.getClass("DROP","-mousedown"));return false},onMouseup:function(c,d,f){if(c.properties.type!="drop"){return}linb.use(f).removeClass(c.getClass("DROP","-mousedown"));return false},onMouseover:function(c,d,f){if(c.properties.type!="drop"){return}linb.use(f).addClass(c.getClass("DROP","-mouseover"))},onMouseout:function(c,d,f){if(c.properties.type!="drop"){return}linb.use(f).removeClass(c.getClass("DROP","-mouseover")).removeClass(c.getClass("DROP","-mousedown"))},onClick:function(c,d,f){if(c.properties.type!="drop"){return}c.boxing().onClickDrop(c,d,f);return false}}},DataModel:{caption:{ini:undefined,action:function(c){this.getSubNode("CAPTION").get(0).innerHTML=c}},image:{action:function(c){this.getSubNode("ICON").css("display",c?"":"none").css("backgroundImage","url("+(c||"")+")")}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c)}},hAlign:{ini:"center",listbox:["left","center","right"],action:function(c){this.getSubNode("TD").attr("align",c)}},vAlign:{ini:"middle",listbox:["top","middle","bottom"],action:function(c){this.getSubNode("TD").attr("valign",c)}},value:false,type:{ini:"normal",listbox:["normal","status","drop"],action:function(g){var e=this,c=e.getRoot(),f=e.getSubNode("TDR"),d=e.getClass("DROP");if(g=="drop"){f.addClass(d)}else{f.removeClass(d)}e.box._onresize(e)}},width:120,height:22,_customBorder:"BORDER",border:true},_ensureValue:function(c,d){if(c.properties.type=="status"){return !!d}else{return d}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.dropCls=d.type=="drop"?c.getClass("DROP"):"";return d},RenderTrigger:function(){var c=this,d=c.properties,e=c.boxing();if(d.type=="status"&&d.value){e.setValue(true,true)}},EventHandlers:{onClick:function(c,f,g,d){},onClickDrop:function(c,d,f){},onChecked:function(c,f,d){}}}});Class("linb.UI.Input",["linb.UI.Widget","linb.absValue"],{Instance:{_setTB:function(e){var d=this.get(0),f=d.properties,g,c;if(!d.host||!f.tipsBinder){return}c=d.tips=d.tips||f.tips||"";g=linb.getObject(f.tipsBinder)||((g=d.host[f.tipsBinder])&&g.get(0));if(g&&(g.key=="linb.UI.Div"||g.key=="linb.UI.SLabel")){if(g.renderId){g.getRootNode().innerHTML=c.charAt(0)=="$"?linb.wrapRes(c):c;g.getRoot().css("color",e==1?"gray":e==2?"red":"#000")}}},activate:function(){var c=this.get(0);if(c.renderId){var d=c.getSubNode("INPUT").get(0);d.focus();if(!d.readOnly&&d.select){try{d.select()}catch(f){}}}return this},_setCtrlValue:function(c){if(_.isNull(c)||!_.isDefined(c)){c=""}return this.each(function(d){d.getSubNode("INPUT").attr("value",c+"")})},_getCtrlValue:function(){return this.getSubNode("INPUT").attr("value")},_setDirtyMark:function(){return this.each(function(e){if(!e.properties.dirtyMark){return}var i=e.properties,c=e.getSubNode("INPUT"),l=e.box,g=e.boxing(),h=linb.UI.$css_tag_dirty,k=linb.UI.$css_tag_invalid,j=i.value!==i.$UIvalue;if(e.inValid==2){e.tips=i.tipsErr||i.tips;if(i.mask){_.asyRun(function(){g.setUIValue(c.get(0).value=e.$Mask)});e.inValid=1;j=false}}else{if(e.inValid==1){e.tips=i.tips}else{e.tips=i.tipsOK||i.tips}}if(e._dirtyFlag!==j){if(e.beforeDirtyMark&&false===g.beforeDirtyMark(e,j)){}else{if(e._dirtyFlag=j){c.addClass(h)}else{c.removeClass(h)}}}if(e.beforeFormatMark&&false===g.beforeFormatMark(e,e.inValid==2)){}else{var f=e.getSubNode("ERROR");if(e.inValid==2){c.addClass(k);f.css("display","block")}else{c.removeClass(k);f.css("display","none")}}g._setTB(e.inValid)})}},Initialize:function(){var c=this.getTemplate();_.merge(c.FRAME.BORDER,{style:"",BOX:{WRAP:{tagName:"div",INPUT:{tagName:"input",type:"{_type}",maxlength:"{maxlength}",tabindex:"{tabindex}",cursor:"{cursor}",style:"{_css}"}}}},"all");c.FRAME.ERROR={};this.setTemplate(c)},Static:{_maskMap:{"~":"[+-]","1":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},_maskSpace:"_",Appearances:{KEY:{"font-family":'"Verdana", "Helvetica", "sans-serif"',position:"relative"},BORDER:{"line-height":"0px","font-size":"0px"},WRAP:{left:0,position:"absolute",overflow:linb.browser.gek?"auto":"hidden"},BOX:{left:0,top:0,position:"absolute",background:linb.UI.$bg("inputbg.gif","#fff repeat-x","Input"),border:"solid 1px #B5B8C8","z-index":10},"KEY-readonly input":{$order:2,color:"#909090"},"KEY-readonly BOX, KEY-inputreadonly BOX":{$order:2,background:"#eee"},"BOX-focus, BOX-mouseover":{"border-color":"#7EADD9"},INPUT:{"padding-top":"2px","padding-left":"2px","background-color":"transparent","background-image":linb.browser.ie?"url(.)":null,border:0,margin:0,"margin-top":linb.browser.ie?"-1px":null,"font-size":"12px",position:"relative",width:"102px",overflow:"auto","overflow-y":"auto","overflow-x":"hidden"},ERROR:{width:"16px",height:"16px",position:"absolute",right:"2px",top:"2px",display:"none","font-size":0,background:linb.UI.$bg("icons.gif","no-repeat left -244px",true),"z-index":"50"},".setting-linb-input":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},"KEY-b-t":{height:"2px",top:"-1px",background:linb.UI.$bg("vertical.gif","repeat-x left top","Input")},"KEY-b-b":{height:"2px",bottom:"-1px",background:linb.UI.$bg("vertical.gif","repeat-x left bottom","Input")},"BOX-focus KEY-b-t, BOX-focus KEY-b-b, BOX-mouseover KEY-b-t, BOX-mouseover KEY-b-b":{$order:1,"background-image":linb.UI.$bg("vertical_mouseover.gif","","Input")},"KEY-b-l":{width:"2px",left:"-1px",background:linb.UI.$bg("horizontal.gif","repeat-y left top","Input")},"KEY-b-r":{width:"2px",right:"-1px",background:linb.UI.$bg("horizontal.gif","repeat-y right top","Input")},"BOX-focus KEY-b-l, BOX-focus KEY-b-r, BOX-mouseover KEY-b-l, BOX-mouseover KEY-b-r":{$order:1,"background-image":linb.UI.$bg("horizontal_mouseover.gif","","Input")},"KEY-b-lt":{width:"2px",height:"2px",left:"-1px",top:"-1px",background:linb.UI.$bg("corner.gif","no-repeat left top","Input")},"KEY-b-rt":{width:"2px",height:"2px",right:"-1px",top:"-1px",background:linb.UI.$bg("corner.gif","no-repeat right top","Input")},"KEY-b-rb":{width:"2px",height:"2px",right:"-1px",bottom:"-1px",background:linb.UI.$bg("corner.gif","no-repeat right bottom","Input")},"KEY-b-lb":{width:"2px",height:"2px",left:"-1px",bottom:"-1px",background:linb.UI.$bg("corner.gif","no-repeat left bottom","Input")},"BOX-focus KEY-b-lt, BOX-focus KEY-b-rt, BOX-focus KEY-b-rb, BOX-focus KEY-b-lb, BOX-mouseover KEY-b-lt, BOX-mouseover KEY-b-rt, BOX-mouseover KEY-b-rb, BOX-mouseover KEY-b-lb":{$order:1,"background-image":linb.UI.$bg("corner_mouseover.gif","","Input")}},Behaviors:{HoverEffected:{BOX:["BOX"]},NavKeys:{INPUT:1},INPUT:{onChange:function(d,h,j){var g=d.properties,c=d.box,i=d.inValid,f=linb.use(j).get(0).value;d.boxing().setUIValue(f);g.$UIvalue=f;if(i!==d.inValid){if(d.renderId){d.boxing()._setDirtyMark()}}c._asyCheck(d)},onKeydown:function(h,j,l){var i=h.properties,d=h.box,c=i.multiLines,f=linb.Event,g=f.getKey(j);if(i.disabled||i.readonly){return}if(g[0]=="enter"&&(!c||g[3])){linb.use(l).onChange()}if(g[0].length>1){h.$keyD=g[0]}else{delete h.$keyD}d._asyCheck(h);if(i.mask){if(g[0].length>1){h.$ignore=true}else{delete h.$ignore}switch(g[0]){case"backspace":d._changeMask(h,linb.use(l).get(0),"",false);return false;case"delete":d._changeMask(h,linb.use(l).get(0),"");return false}}},onKeypress:function(g,i,c){var f=g.properties,l=g.box,n=g.box,d=n._maskMap,h=linb.Event.getKey(i),m,j=linb.use(c).caret();if(g.$keyD){h[0]=g.$keyD}delete g.$keyD;if(g.beforeKeypress&&false===g.boxing().beforeKeypress(g,j,h[0],h[1],h[2],h[3],i,c)){return false}m=g.CF.beforeKeypress||g.$beforeKeypress;if(m&&false===m(g,j,h[0],h[1],h[2],h[3],i,c)){return false}l._asyCheck(g);if(f.mask){if(g.$ignore){delete g.$ignore;return true}if(h[1]||h[3]){return true}n._changeMask(g,linb.use(c).get(0),h[0],true);return false}},onKeyup:function(d,h,i){var g=d.properties,c=d.box;if(d.$keyD){delete d.$keyD}if(g.dynCheck){var f=linb.use(i).get(0).value;d.box._checkValid(d,f);d.boxing()._setDirtyMark()}c._asyCheck(d)},onFocus:function(d,h,i){var g=d.properties,c=d.box;if(g.disabled){return false}if(d.onFocus){d.boxing().onFocus(d)}d.getSubNode("BORDER").tagClass("-focus");if(g.mask){var f=linb.use(i).get(0).value;if(!f){_.asyRun(function(){d.boxing().setUIValue(f=d.$Mask);c._setCaret(d,linb.use(i).get(0))})}}d.boxing()._setTB(3);c._asyCheck(d)},onBlur:function(d,h,i){var g=d.properties,c=d.box;if(g.disabled){return false}if(d.onBlur){d.boxing().onBlur(d)}d.getSubNode("BORDER").tagClass("-focus",false);var f=linb.use(i).get(0).value;if(g.$UIvalue==f){d.box._checkValid(d,f)}d.boxing()._setDirtyMark();c._asyCheck(d)}}},DataModel:{_customBorder:"BOX",border:false,tipsErr:"",tipsOK:"",dynCheck:false,valueFormat:{helpinput:[{caption:"required",id:"[^.*]"},{caption:"email",id:"^[\\w\\.=-]+@[\\w\\.-]+\\.[\\w\\.-]{2,4}$"},{caption:"charOnly",id:"^[a-zA-Z]*$"},{caption:"words",id:"^[\\w ]*$"},{caption:"integer",id:"^-?\\d\\d*$"},{caption:"positiveInteger",id:"^\\d\\d*$"},{caption:"number",id:"^-?(\\d\\d*\\.\\d*$)|(^-?\\d\\d*$)|(^-?\\.\\d\\d*$)"},{caption:"filepath",id:"([\\/]?[\\w_]+)+\\.\\w{1,9}$"},{caption:"URL",id:"^(http|https|ftp)\\:\\/\\/[\\w\\-\\_\\.]+[\\w\\-\\_](:[\\w]*)?\\/?([\\w\\-\\._\\?\\,\\'\\/\\\\\\+&amp;%\\$#\\=~])*$"},{caption:"color",id:"^\\#[0-9A-Fa-f]{6}$"},{caption:"HH:MM",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])$"},{caption:"HH:MM:SS",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])\\:([0-5][0-9])$"},{caption:"YYYY-MM-DD",id:"^([0-9]{4})\\-(([0][0-9])|([1][0-2]))\\-([0-3][0-9])$"},{caption:"DD/MM/YYYY",id:"^(([0-2][0-9])|([3][0-1]))/(([0][0-9])|([1][0-2]))/([0-9]{4})$"}]},mask:{action:function(e){var d=this,c=d.box;if(e){d.$MaskFormat=function(i,h){var f=i._maskMap,g=[],j=/[A-Za-z0-9]/;_.arr.each(h.split(""),function(l,k){g.push(f[l]||(j.test(l)?"":"\\")+l)});return"^"+g.join("")+"$"}(c,e);d.$Mask=function(j,h){var f=j._maskMap,g=[],i=j._maskSpace;_.arr.each(h.split(""),function(l,k){g.push(f[l]?i:l)});return g.join("")}(c,e);d.boxing()._setCtrlValue(d.$Mask)}else{delete d.$MaskFormat;delete d.$Mask}}},value:"",width:120,height:22,disabled:{ini:false,action:function(c){var d=this.getSubNode("INPUT");if(c){d.addClass("ui-inputdisabled")}else{d.removeClass("ui-inputdisabled")}if((""+d.get(0).type).toLowerCase()!="button"){d.attr("disabled",c)}}},readonly:{ini:false,action:function(d){var e=this.getSubNode("INPUT"),c=this.getClass("KEY","-readonly");e.attr("readonly",d).css("cursor",d?"pointer":"");if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}}},type:{ini:"text",listbox:["text","password"],action:function(c){this.getSubNode("INPUT").attr("type",c)}},maxlength:{ini:"",action:function(c){this.getSubNode("INPUT").attr("maxlength",c)}},multiLines:{ini:false,action:function(c){this.boxing().refresh()}},tipsBinder:{ini:"",set:function(c){if(c["linb.UIProfile"]){c=c.$linbid}if(c["linb.UI"]&&(c=c.get(0))){c=c.$linbid}this.properties.tipsBinder=c+""}}},EventHandlers:{onFocus:function(c){},onBlur:function(c){},beforeFormatCheck:function(c,d){},beforeFormatMark:function(c,d){},beforeKeypress:function(f,k,d,g,c,i,h,j){}},_prepareData:function(c){var e=arguments.callee.upper.call(this,c);e.cursor=e.readonly?"pointer":"";e._type=e.type||"";if(linb.browser.kde){e._css="resize:none;"}return e},_dynamicTemplate:function(f){var d=f.properties,c,g=f._exhash="$multiLines:"+d.multiLines,e=f.box.getTemplate(g);d.$UIvalue=d.value;if(!e){e=_.clone(f.box.getTemplate());if(d.multiLines){c=e.FRAME.BORDER.BOX.WRAP.INPUT;c.tagName="textarea";delete c.type}f.box.setTemplate(e,g)}f.template=e},_ensureValue:function(c,d){return""+(_.isSet(d)?d:"")},RenderTrigger:function(){var d=this,g=d.properties;_.asyRun(function(){d.boxing()._setTB(1)});d.getSubNode("WRAP").$firfox2();if(g.readonly){d.boxing().setReadonly(true,true)}if(g.tipsBinder){d.boxing().setTipsBinder(g.tipsBinder,true)}var i=linb.browser.ie,h=d.getSubNode("INPUT").get(0),c=d.box,e=function(f){if(i&&("propertyName" in f)&&f.propertyName!="value"){return}c._asyCheck(d)};if(i){h.attachEvent("onpropertychange",e);h.attachEvent("ondrop",e);d.$ondestory=function(){var f=this,j=f.getSubNode("INPUT").get(0);j.detachEvent("onpropertychange",e);j.detachEvent("ondrop",e);j=null}}else{h.addEventListener("input",e,false);h.addEventListener("drop",e,false);if(linb.browser.gek){h.addEventListener("dragdrop",e,false)}d.$ondestory=function(){var f=this,j=f.getSubNode("INPUT").get(0);j.removeEventListener("input",e,false);j.removeEventListener("drop",e,false);if(linb.browser.gek){j.removeEventListener("dragdrop",e,false)}j=null}}h=null},LayoutTrigger:function(){var c=this.properties;if(c.mask){this.boxing().setMask(c.mask,true)}},_changeMask:function(e,g,h,n){var y=this,m=e.properties,x=y._maskMap,q=y._maskSpace,c=m.mask,d=e.$Mask,j=linb(g),k=j.caret();if(n===false&&k[0]==k[1]&&k[0]>0){j.caret(k[0]-1,k[0])}if(n===undefined&&k[0]==k[1]){j.caret(k[0],k[0]+1)}if(n===true){if(d.charAt(k[0])!=q){var s=k[0]+d.substr(k[0],d.length).indexOf(q);j.caret(s,Math.max(k[1],s))}}var k=j.caret(),r=g.value,f=y._maskMap[m.mask.charAt(k[0])],u,l;if(f&&new RegExp("^"+f+"$").test(h)||h==""){l=r;if(k[0]!=k[1]){l=l.substr(0,k[0])+d.substr(k[0],k[1]-k[0])+l.substr(k[1],l.length-k[1])}if(h){l=l.substr(0,k[0])+h+l.substr(k[0]+1,l.length-k[0]-1)}var w=[];_.arr.each(c.split(""),function(v,p){w.push((new RegExp("^"+(x[v]?x[v]:"\\"+v)+"$").test(l.charAt(p)))?l.charAt(p):d.charAt(p))});if(n===true){h=d.substr(k[0]+1,r.length-k[0]-1);u=h.indexOf(q);u=k[0]+(u==-1?0:u)+1}else{u=k[0]}if(linb.browser.opr){if(n===undefined){_.arr.insertAny(w,q,u)}if(n===false){_.arr.insertAny(w,q,u++)}}e.boxing().setUIValue(g.value=w.join(""));y._setCaret(e,g,u)}},_setCaret:function(c,d,e){if(c.properties.mask){if(typeof e!="number"){e=d.value.indexOf(this._maskSpace)}linb(d).caret(e,e)}},_checkValid:function(e,f){var g=e.properties,d=(g.mask&&e.$MaskFormat),c=g.valueFormat||e.$valueFormat;if((e.beforeFormatCheck&&(e.boxing().beforeFormatCheck(e,f)===false))||(d&&typeof d=="string"&&!(new RegExp(d)).test((f===0?"0":f)||""))||(c&&typeof c=="string"&&!(new RegExp(c)).test((f===0?"0":f)||""))){e.inValid=2;return false}e.inValid=3;return true},_asyCheck:function(c){_.resetRun(c.$linbid+":asycheck",function(){if(!c.renderId){return}var d=c.getSubNode("INPUT"),e=d.get(0);if(!e){return}if(c.properties.dynCheck){c.boxing().setUIValue(e.value)}if(c.properties.mask){if(e.value.length!=c.$Mask.length){c.box._changeMask(c,e,"",true)}}})},_onresize:function(h,d,p){var g=1,n=1,r=linb.UI.$getCSSValue("linb-input-input","paddingTop"),c=linb.UI.$getCSSValue("linb-input-input","paddingTop");var q=h.properties,e=h.getSubNode("BOX"),m=h.getSubNode("INPUT"),l,j=d,i=p,f=Math.max(0,(q.$b_lw||0)-g),k=Math.max(0,(q.$b_tw||0)-n);if(null!==j){j-=Math.max(g*2,(q.$b_lw||0)+(q.$b_rw||0));if(linb.browser.ie6){j=(parseInt(j/2))*2}}if(null!==i){i-=Math.max(n*2,(q.$b_lw||0)+(q.$b_rw||0));if(linb.browser.ie6){i=(parseInt(i/2))*2}if(linb.browser.ie6&&null===d){e.ieRemedy()}}l={left:f,top:k,width:j,height:i};e.cssRegion(l);if(j||i){m.cssSize({width:j?(j-c):null,height:i?(i-r):null})}if((h.$border||h.$shadow||h.$resizer)&&linb.browser.ie){e.ieRemedy()}}}});Class("linb.UI.ComboInput","linb.UI.Input",{Instance:{getValue:function(){var e=this.get(0),d=e.properties,c=arguments.callee.upper.apply(this,arguments);if(e.$isNumber){c=_.isNumb(parseFloat(c))?parseFloat(c):null}else{if(d.type=="datepicker"){c=c?new Date(parseInt(c)):null}}return c},getUIValue:function(){var e=this.get(0),d=e.properties,c=arguments.callee.upper.apply(this,arguments);if(e.$isNumber){c=_.isNumb(parseFloat(c))?parseFloat(c):null}else{if(d.type=="datepicker"){c=c?new Date(parseInt(c)):null}}return c},_getCtrlValue:function(){return this.get(0).properties.$UIvalue},_setCtrlValue:function(g,d){var f=arguments.callee,e=f._r1||(f._r1=/\</),c=f._r2||(f._r2=/\<\/?[^>]+\>/g);return this.each(function(i){if(!i.$typeOK){i.box._iniType(i)}var j=i.getSubNode("INPUT"),h=i.properties.type;g=d?g:i.boxing().getShowValue(g);if(h!=="none"&&!i.properties.multiLines&&typeof g=="string"&&e.test(g)){g=g.replace(c,"")}j.attr("value",g||"");if(h=="colorpicker"){j.css({backgroundColor:g,color:linb.UI.ColorPicker.getTextColor(g)})}})},_compareValue:function(f,e){var d=this.get(0),c;if(c=d.CF.compareValue||d.$compareValue){return c(d,f,e)}return f===e},getShowValue:function(g){var e=this.get(0),h=e.properties,c,d;if(!_.isDefined(g)){g=h.$UIvalue}if(d=e.CF.getShowValue||e.$getShowValue){c=d(e,g)}else{if("listbox"==h.type){var f=(h.listKey)?linb.UI.getCachedData(h.listKey):h.items;if(f&&(d=_.arr.subIndexOf(f,"id",g))!=-1){c=f[d].caption;if(c.length>0){c=c.charAt(0)=="$"?linb.getRes(c.slice(1)):c}}else{c=null}}else{c=e.$showValue}}if(!_.isSet(c)&&(e.$inputReadonly||h.inputReadonly)){c=_.isSet(h.caption)?h.caption:null}return""+(_.isSet(c)?c:_.isSet(g)?g:"")},_toEditor:function(e){var d=this.get(0),f=d.properties,c;if(c=d.CF.toEditor||d.$toEditor){return c(d,e)}return e},_fromEditor:function(e){var d=this.get(0),f=d.properties,c;if(c=d.CF.fromEditor||d.$fromEditor){return c(d,e)}return e},_cache:function(){var e=this.get(0),c=e.$drop,d=e.properties.cachePopWnd;if(c){if(!d){c.boxing().destroy();delete e.$drop}else{if(linb.browser.opr){c.getRoot().css("display","none")}_.asyRun(function(){e.getSubNode("POOL").append(c.getRoot())})}}delete e.$poplink;return d},clearPopCache:function(){var c=this.get(0);if(c.renderId){c.getSubNode("POOL").empty()}delete c.$drop;return this},getUploadObj:function(){var d=this.get(0);if(d.renderId&&d.properties.type=="upload"){var e=d.getSubNode("FILE").get(0);if(!e.value){return null}var f=e.cloneNode(false);f.value="";linb.setNodeData(f.$linbid=e.$linbid,"element",f);f.onclick=e.onclick;f.onchange=e.onchange;if(linb.browser.ie){e.removeAttribute("$linbid")}else{delete e.$linbid}e.id=e.onclick=e.onchange=null;delete d.$_domid[d.keys.FILE];linb([e]).addPrev(f).remove(false);f=null;this.setUIValue(this.getValue());return e}},resetValue:function(c){this.each(function(d){if(d.properties.type=="upload"){d.getSubNode("FILE").attr("value","")}});return arguments.callee.upper.apply(this,arguments)},_drop:function(c,d){return this.each(function(g){var n=g.properties,k=n.type,m=n.cachePopWnd;if(n.disabled||n.readonly){return}if(k=="upload"||k=="none"||k=="spin"||k=="currency"||k=="number"){return}if(g.$poplink){return}var e,p,i=g.boxing(),h=g.getRoot(),l=h.offset(),r=h.cssSize();r.width+=2;l.top+=h.offsetHeight();if((g.beforeComboPop&&false===i.beforeComboPop(g,l,c,d))||k=="getter"||k=="cmdbox"||k=="popbox"){return}var j;if(m){switch(k){case"timepicker":case"datepicker":case"colorpicker":j=k;break;default:if(n.listKey){if(typeof _.get(linb.$cache,["UIDATA",n.listKey])=="function"){g.$drop=j=null}else{j="!"+n.listKey}}else{j="$"+g.$linbid}}if(j){_.filter(g.box.$drop,function(s){return !!s.renderId});g.$drop=g.box.$drop[j]}}if(!g.$drop){switch(k){case"combobox":case"listbox":case"helpinput":e=linb.create("List").render();e.setHost(g).setDirtyMark(false).setItems(_.copy(n.items)).setListKey(n.listKey||"");if(n.dropListHeight){e.setHeight(n.dropListHeight)}else{e.adjustSize()}e.beforeUIValueSet(function(x,w,v){var s=this.boxing();if(k=="combobox"){var u=x.queryItems(x.properties.items,function(y){return y.id==v},false,true);if(u.length){v=u[0].caption}}s.setUIValue(v).activate();return s._cache()});break;case"timepicker":e=linb.create("TimePicker").render();e.setHost(g);e.beforeClose(function(){this.boxing().activate()._cache();return false});e.beforeUIValueSet(function(w,x,u){var s=this.boxing();s.setUIValue(u).activate();return s._cache()});break;case"datepicker":e=linb.create("DatePicker").render();e.setHost(g);e.beforeClose(function(){this.boxing().activate()._cache();return false});e.beforeUIValueSet(function(w,x,u){var s=this.boxing();s.setUIValue(String(u.getTime())).activate();return s._cache()});break;case"colorpicker":e=linb.create("ColorPicker").render();e.setHost(g);e.beforeClose(function(){this.boxing().activate()._cache();return false});e.beforeUIValueSet(function(w,x,u){var s=this.boxing();s.setUIValue("#"+u).activate();return s._cache()});break}g.$drop=e.get(0);if(j){g.box.$drop[j]=g.$drop}}e=g.$drop.boxing();e.setHost(g);switch(k){case"combobox":case"listbox":case"helpinput":e.setWidth(g.properties.dropListWidth||g.getRoot().width());case"timepicker":e.setValue(g.properties.$UIvalue,true);break;case"datepicker":var q=g.$drop.properties;q.WEEK_FIRST=n.WEEK_FIRST;if(q=g.properties.$UIvalue){e.setValue(new Date(parseInt(q)),true)}break;case"colorpicker":e.setValue(g.properties.$UIvalue.replace("#",""),true);break}g.$poplink=e.get(0);var f=e.reBoxing();f.popToTop(g.getRoot());_.tryF(e.activate,[],e);f.setBlurTrigger(g.key+":"+g.$linbid,function(){i._cache()},null,g.$linbid);linb.Event.keyboardHook("esc",0,0,0,function(){i.activate();linb.Event.keyboardHook("esc");i._cache()})})},expand:function(){var c=this.get(0);if(c.renderId){c.boxing()._drop()}},collapse:function(){var c=this.get(0);if(c.renderId&&c.$poplink){c.boxing()._cache()}}},Initialize:function(){this.addTemplateKeys(["FILE","BTN","TOP","MID","RBTN","R1","R1T","R1B","R2","R2T","R2B"]);var c=this.getTemplate();_.merge(c.FRAME.BORDER,{SBTN:{$order:10,style:"{_saveDisplay}",STOP:{},SMID:{className:"{_commandCls}"}}},"all");c.FRAME.POOL={};c.className+=" {typecls}";this.setTemplate(c);this._adjustItems=linb.absList._adjustItems},Static:{_beforeResetValue:function(c){c.properties.caption=undefined},_iniType:function(f){var h=f.properties,g=h.type,i=f.box;delete f.$beforeKeypress;delete f.$inputReadonly;delete f.$isNumber;delete f.$compareValue;delete f.$getShowValue;delete f.$toEditor;delete f.$fromEditor;delete f.$typeOK;if(g=="listbox"||g=="upload"||g=="cmdbox"){f.$inputReadonly=true}if(g!="listbox"&&g!="combobox"&&g!="helpinput"){h.items=[]}if(g=="timepicker"){var e={a:1,c:1,v:1,x:1};_.merge(f,{$beforeKeypress:function(l,n,j,m){return j.length!=1||/[0-9:]/.test(j)||(!!m&&!!e[j])},$getShowValue:function(c,j){return j?linb.UI.TimePicker._ensureValue(c,j):""},$fromEditor:function(j,c){if(c){c=linb.UI.TimePicker._ensureValue(j,c);if(c=="00:00"){c=j.properties.$UIvalue}}return c}},"all")}else{if(g=="datepicker"){var d=linb.Date;var e={a:1,c:1,v:1,x:1};_.merge(f,{$beforeKeypress:function(l,n,j,m){return j.length!=1||/[0-9/\-_ ]/.test(j)||(!!m&&!!e[j])},$compareValue:function(k,j,c){return(!j&&!c)||(String(j)==String(c))},$getShowValue:function(c,j){return j?d.getText(new Date(parseInt(j)),"ymd"):""},$toEditor:function(k,l){var j=new Date(parseInt(l)),c=(d.get(j,"m")+1)+"",n=d.get(j,"d")+"";return l?(d.get(j,"y")+"-"+(c.length==1?"0":"")+c+"-"+(n.length==1?"0":"")+n):""},$fromEditor:function(j,c){if(c){c=linb.Date.parse(c);if(!c){c=j.properties.$UIvalue}c=linb.Date.getTimSpanStart(c,"d",1);if(c.getFullYear()<j.properties.min){c.setTime(j.properties.min)}if(c.getFullYear()>j.properties.max){c.setTime(j.properties.max)}}return c?String(c.getTime()):""}},"all")}else{if(g=="currency"){f.$isNumber=1;var e={a:1,c:1,v:1,x:1};_.merge(f,{$beforeKeypress:function(l,n,j,m){return j.length!=1||/[0-9,.]/.test(j)||(!!m&&!!e[j])},$compareValue:function(k,j,c){return((j===""&&c!=="")||(c===""&&j!==""))?false:k.box._currency(f,j)==k.box._currency(f,c)},$getShowValue:function(j,c){return(_.isSet(c)&&c!=="")?j.box._currency(f,c):""},$fromEditor:function(j,c){return(_.isSet(c)&&c!=="")?j.box._currency(f,c).replace(/,/g,""):""}},"all")}else{if(g=="number"||g=="spin"){f.$isNumber=1;var e={a:1,c:1,v:1,x:1};_.merge(f,{$beforeKeypress:function(l,n,j,m){return j.length!=1||/[-0-9.]/.test(j)||(!!m&&!!e[j])},$compareValue:function(k,j,c){return((j===""&&c!=="")||(c===""&&j!==""))?false:k.box._number(f,j)==k.box._number(f,c)},$getShowValue:function(j,c){return(_.isSet(c)&&c!=="")?j.box._number(f,c):""},$fromEditor:function(j,c){return(_.isSet(c)&&c!=="")?j.box._number(f,c):""}},"all")}}}}if(h.value){h.$UIvalue=h.value=i._ensureValue(f,h.value)}f.$typeOK=true},$drop:{},Appearances:{POOL:{position:"absolute",left:0,top:0,width:0,height:0,display:"none",visibility:"hidden"},FILE:{opacity:0,"*filter":"alpha(opacity=0)","z-index":"3",border:0,height:"100%",position:"absolute",top:0,right:0,cursor:"pointer","font-size":"12px",overflow:"hidden"},"KEY-number INPUT, KEY-spin INPUT, KEY-currency INPUT":{$order:4,"text-align":"right"},"KEY-upload INPUT, KEY-cmdbox INPUT, KEY-listbox INPUT":{$order:4,cursor:"pointer","text-align":"left",overflow:"hidden"},"KEY-upload BORDER, KEY-cmdbox BORDER, KEY-listbox BORDER":{$order:1,background:linb.UI.$bg("inputbgb.gif","#fff left bottom repeat-x","Input")},"KEY-upload BOX, KEY-cmdbox BOX, KEY-listbox BOX":{$order:4,background:"none"},"RBTN,SBTN,BTN":{display:"block","z-index":"1",cursor:"pointer",width:"16px",height:"20px","font-size":0,"line-height":0,position:"relative","float":"right"},"SBTN,BTN,R1,R2":{"margin-top":"2px"},"R1, R2, BTN, SBTN, STOP, TOP, R1T, R2T, R1B, R2B, SMID,MID":{background:linb.UI.$bg("bg.gif")},"SBTN, BTN":{$order:1,"background-position":"left bottom"},"R1,R2":{$order:1,display:"block","font-size":0,"line-height":0,cursor:"pointer",width:"16px",position:"absolute",height:"50%","background-position":"left bottom","margin-top":"2px"},R1:{top:0},R2:{bottom:"-2px"},"BTN-mouseover, SBTN-mouseover, R1-mouseover, R2-mouseover":{$order:2,"background-position":"-16px bottom"},"BTN-mousedown, SBTN-mousedown, R1-mousedown, R2-mousedown":{$order:3,"background-position":"-32px bottom"},"STOP, TOP, R1T, R2T":{$order:1,cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",top:"-2px",left:0,height:"4px","background-position":"left -104px"},"BTN-mouseover TOP,SBTN-mouseover STOP, R1-mouseover R1T, R2-mouseover R2T":{$order:2,"background-position":"-16px -104px"},"BTN-mousedown TOP,SBTN-mousedown STOP, R1-mousedown R1T, R2-mousedown R2T":{$order:3,"background-position":"-32px -104px"},"R1B,R2B":{cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",left:0,top:"50%","margin-top":"-4px",height:"6px","z-index":2},R1B:{$order:1,"background-position":"-14px -36px"},R2B:{$order:1,"background-position":"left -5px"},"SMID,MID":{$order:2,cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",bottom:"0",left:0,height:"16px"},SMID:{$order:3,"background-position":"-16px -16px"},"SMID-save":{$order:8,"background-position":"-32px 0"},"SMID-delete":{$order:8,"background-position":"-32px -16px"},"SMID-add":{$order:8,"background-position":"-32px -32px"},"SMID-remove":{$order:8,"background-position":"-32px -48px"},".setting-linb-comboinput":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"}},Behaviors:{HoverEffected:{BOX:"BOX",BTN:"BTN",SBTN:"SBTN",R1:"R1",R2:"R2"},ClickEffected:{BTN:"BTN",SBTN:"SBTN",R1:"R1",R2:"R2"},FILE:{onClick:function(c,d,f){var g=c.properties;if(g.disabled||g.readonly){return}if(c.onFileDlgOpen){c.boxing().onFileDlgOpen(c,f)}},onChange:function(c,d,f){c.boxing().setUIValue(linb.use(f).get(0).value+"")}},BTN:{onClick:function(c,d,f){var g=c.properties;if(g.type=="popbox"||g.type=="getter"){if(c.onClick){c.boxing().onClick(c,d,f,g.$UIvalue)}}if(g.disabled||g.readonly){return}c.boxing()._drop(d,f)}},SBTN:{onClick:function(c,d,f){var g=c.properties;if(g.disabled||g.readonly){return}if(c.onCommand){c.boxing().onCommand(c,f)}}},INPUT:{onChange:function(g,i,k){if(g.$_onedit||g.$_inner){return}var j=g.inValid,d=g.box,c=g.boxing(),f=c._fromEditor(linb.use(k).get(0).value),h=g.properties.$UIvalue;if(!c._compareValue(h,f)){g.$_inner=1;delete g.$_inner;if(f===null){c._setCtrlValue(h)}else{c.setUIValue(f);g.properties.$UIvalue=f;if(j!==g.inValid){if(g.renderId){c._setDirtyMark()}}}}d._asyCheck(g)},onKeyup:function(f,i,j){var h=f.properties,c=f.box;if(f.$keyD){delete f.$keyD}if(h.dynCheck){var g=linb.use(j).get(0).value;f.box._checkValid(f,g);f.boxing()._setDirtyMark()}c._asyCheck(f);var d=linb.Event.getKey(i);if(d[0]=="down"||d[0]=="up"){if(h.type=="spin"){linb.Thread.abort(f.$linbid+":spin");return false}}},onFocus:function(f,g,c){var d=f.properties,h=f.box;if(d.disabled||d.readonly){return false}if(f.onFocus){f.boxing().onFocus(f)}if(f.$inputReadonly||d.inputReadonly){return}f.getSubNode("BORDER").tagClass("-focus");var l=f.boxing(),i=d.$UIvalue,k=l._toEditor(i);if(k!==i){f.$_onedit=true;linb.use(c).get(0).value=k;delete f.$_onedit}if(d.mask){var j=linb.use(c).get(0).value;if(!j){_.asyRun(function(){f.boxing().setUIValue(j=f.$Mask);h._setCaret(f,linb.use(c).get(0))})}}f.boxing()._setTB(3)},onBlur:function(g,j,k){var i=g.properties;if(i.disabled||i.readonly){return false}if(g.onBlur){g.boxing().onBlur(g)}if(g.$inputReadonly||i.inputReadonly){return}var d=g.box,c=g.boxing(),h=i.$UIvalue,f=c._fromEditor(linb.use(k).get(0).value);g.getSubNode("BORDER").tagClass("-focus",false);if(c._compareValue(i.$UIvalue,f)){g.box._checkValid(g,f);c._setCtrlValue(h)}c._setDirtyMark();d._asyCheck(g)},onKeydown:function(h,j,l){var i=h.properties,d=h.box,c=i.multiLines,f=linb.Event,g=f.getKey(j);if(i.disabled||i.readonly){return}if(g[0]=="enter"&&(!c||g[3])&&!i.inputReadonly&&!h.$inputReadonly){linb.use(l).onChange()}if(g[0].length>1){h.$keyD=g[0]}else{delete h.$keyD}d._asyCheck(h);if(i.mask){if(g[0].length>1){h.$ignore=true}else{delete h.$ignore}switch(g[0]){case"backspace":d._changeMask(h,linb.use(l).get(0),"",false);return false;case"delete":d._changeMask(h,linb.use(l).get(0),"");return false}}if(g[0]=="down"||g[0]=="up"){if(i.type=="spin"){h.box._spin(h,g[0]=="up");return false}if(g[1]&&i.type){h.boxing()._drop(j,l);return false}}},onClick:function(c,d,f){var g=c.properties;if(g.type=="cmdbox"){if(c.onClick){c.boxing().onClick(c,d,f,g.$UIvalue)}}else{if(g.inputReadonly||c.$inputReadonly){if(g.disabled||g.readonly){return}c.boxing()._drop(d,f)}}}},R1:{onMousedown:function(c){var d=c.properties;if(d.disabled||d.readonly){return}c.box._spin(c,true)},onMouseout:function(c){linb.Thread.abort(c.$linbid+":spin")},onMouseup:function(c){linb.Thread.abort(c.$linbid+":spin")}},R2:{onMousedown:function(c){var d=c.properties;if(d.disabled||d.readonly){return}c.box._spin(c,false)},onMouseout:function(c){linb.Thread.abort(c.$linbid+":spin")},onMouseup:function(c){linb.Thread.abort(c.$linbid+":spin")}}},EventHandlers:{onFileDlgOpen:function(c,d){},onCommand:function(c,d){},beforeComboPop:function(c,g,d,f){},onClick:function(c,f,g,d){}},_posMap:{none:"",currency:"",number:"",combobox:"left top",listbox:"left top",upload:"-16px top",getter:"left -31px",helpinput:"-16px -46px",cmdbox:"left -16px",popbox:"left -46px",timepicker:"left -60px",datepicker:"left -75px",colorpicker:"-16px -60px"},DataModel:{cachePopWnd:true,listKey:{set:function(d){var c=linb.UI.getCachedData(d),e=this;e.boxing().setItems(c?c:e.properties.items);e.properties.listKey=d}},dropListWidth:0,dropListHeight:0,items:{ini:[],set:function(c){var d=this;c=d.properties.items=d.box._adjustItems(c);if(d.renderId){d.SubSerialIdMapItem={};d.ItemIdMapSubSerialId={};d.box._prepareItems(d,c);if(d.$poplink){d.$poplink.boxing().setItems(c).adjustSize()}else{d.boxing().clearPopCache()}}}},image:{action:function(c){this.getSubNode("MID").css("backgroundImage","url("+(c||"")+")")}},imagePos:{action:function(c){this.getSubNode("MID").css("backgroundPosition",c)}},type:{ini:"combobox",listbox:_.toArr("none,combobox,listbox,upload,getter,helpinput,cmdbox,popbox,timepicker,datepicker,colorpicker,spin,currency,number"),set:function(c){var d=this;d.properties.type=c;if(d.renderId){d.boxing().refresh()}}},precision:2,increment:0.01,min:-Math.pow(10,15),max:Math.pow(10,15),commandBtn:{ini:"none",listbox:_.toArr("none,save,delete,add,remove,custom"),action:function(c){this.boxing().refresh()}},inputReadonly:{ini:false,action:function(d){var e=this.getSubNode("INPUT"),c=this.getClass("KEY","-inputreadonly");if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}if(!d&&(this.properties.readonly||this.$inputReadonly)){d=true}e.attr("readonly",d).css("cursor",d?"pointer":"")}},readonly:{ini:false,action:function(d){var e=this.getSubNode("INPUT"),c=this.getClass("KEY","-readonly");if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}if(!d&&(this.properties.inputReadonly||this.$inputReadonly)){d=true}e.attr("readonly",d).css("cursor",d?"pointer":"")}},caption:{ini:null,set:function(c,d){var e=this.properties;e.caption=c;if(_.isSet(e.caption)&&this.renderId){if(this.$inputReadonly||e.inputReadonly){this.getSubNode("INPUT").attr("value",this.boxing().getShowValue())}}},get:function(){return this.boxing().getShowValue()}}},RenderTrigger:function(){var d=this,c=d.boxing(),e=d.properties;d.box._iniType(d);if(e.readonly){c.setReadonly(true,true)}else{if(e.inputReadonly){c.setInputReadonly(true,true)}}},_spin:function(f,d){var i=f.$linbid+":spin";if(linb.Thread.isAlive(i)){return}var h=f.properties,g=h.increment*(d?1:-1),e={delay:300},c=function(){f.boxing().setUIValue(String((+h.$UIvalue||0)+g));e.delay*=0.9};e.task=c;linb.Thread(i,[e],500,null,c,null,true).start()},_dynamicTemplate:function(f){var d=f.properties,g=f._exhash="$multiLines:"+d.multiLines+";type:"+d.type+";",e=f.box.getTemplate(g);d.$UIvalue=d.value;if(!e){e=_.clone(f.box.getTemplate());var c=e.FRAME.BORDER;if(d.multiLines){c.BOX.WRAP.INPUT.tagName="textarea";delete c.BOX.WRAP.INPUT.type}switch(d.type){case"none":case"currency":case"number":break;case"spin":c.RBTN={$order:20,style:"{rDisplay}",R1:{R1T:{},R1B:{}},R2:{R2T:{},R2B:{}}};break;case"upload":c.FILE={$order:20,tagName:"input",type:"file",hidefocus:linb.browser.ie?"hidefocus":null,size:"1"};case"listbox":case"cmdbox":c.BOX.WRAP.INPUT.tagName="input";c.BOX.WRAP.INPUT.type="button";default:c.BTN={$order:20,style:"{_popbtnDisplay}",TOP:{},MID:{style:"{_btnStyle}"}}}f.box.setTemplate(e,g)}f.template=e},_prepareData:function(c){var d=arguments.callee.upper.call(this,c),e=c.box._posMap;if(e[d.type]){d._btnStyle=d.image?("background: url("+d.image+")"+(d.imagePos||"")):("background-position:"+e[d.type])}d._type="text";d._saveDisplay=d.commandBtn!="none"?"":"display:none";d._commandCls=c.getClass("SMID","-"+d.commandBtn);d._popbtnDisplay=d.type!="none"?"":"display:none";d.typecls=c.getClass("KEY","-"+d.type);return d},_ensureValue:function(e,g){var f=arguments.callee,c=f._reg||(f._reg=/^#[\w]{6}$/),i=e.properties;if(!_.isSet(g)||g===""){return""}switch(e.properties.type){case"datepicker":var h;if(g){if(_.isDate(g)){h=g}else{if(isFinite(g)){h=new Date(parseInt(g))}}}return h?String(linb.Date.getTimSpanStart(h,"d",1).getTime()):"";case"colorpicker":return"#"+linb.UI.ColorPicker._ensureValue(null,g);case"timepicker":return linb.UI.TimePicker._ensureValue(null,g);case"currency":return this._currency(e,g);case"number":case"spin":return this._number(e,g);default:return typeof g=="string"?g:(g||g===0)?String(g):""}},_number:function(c,d){var e=c.properties;d=parseFloat(d+"")||0;d=d>e.max?e.max:d<e.min?e.min:d;return d.toFixed(e.precision)},_currency:function(d,e){var f=d.properties,c=Math.max(f.min,0);e=parseFloat((e+"").replace(/,/g,""))||0;e=e>f.max?f.max:e<c?c:e;return this.formatCurrency(e)},formatCurrency:function(c){c=c.toFixed(2);c=c.split(".");c[0]=c[0].split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1,").split("").reverse().join("");return c.join(".")},_onresize:function(g,r,p){var w=1,d=1,j=linb.UI.$getCSSValue("linb-comboinput-input","paddingTop"),c=linb.UI.$getCSSValue("linb-comboinput-input","paddingLeft");var l=g.properties,q=g.getSubNode("BOX"),n="px",u=function(f){return f?g.getSubNode(f).get(0):null},e=u("INPUT"),s=u(l.commandBtn!="none"?"SBTN":null),k=u(l.type=="spin"?"RBTN":l.type=="none"?null:"BTN"),v=r,h=p,i=Math.max(0,(l.$b_lw||0)-w),m=Math.max(0,(l.$b_tw||0)-d);if(null!==v){v-=Math.max(w*2,(l.$b_lw||0)+(l.$b_rw||0));v-=((s?s.offsetWidth:0)+(k?k.offsetWidth:0));if(linb.browser.ie6){v=(parseInt(v/2))*2}}if(null!==h){h-=Math.max(d*2,(l.$b_lw||0)+(l.$b_rw||0));if(linb.browser.ie6){h=(parseInt(h/2))*2}if(linb.browser.ie6&&null===r){q.ieRemedy()}}if(null!==v&&v-c>0){e.style.width=(v-c)+n}if(null!==h&&h-j>0){e.style.height=(h-j)+n}if(p-2>0){if(k){k.style.height=(p-2)+n}if(s){s.style.height=(p-2)+n}}if(l.type=="spin"){if(p/2-2>0){p=(p/2-2)+n;u("R1").style.height=p;u("R2").style.height=p}}q.cssRegion({left:i,top:m,width:v,height:h});if((g.$border||g.$shadow||g.$resizer)&&linb.browser.ie){q.ieRemedy()}}}});Class("linb.UI.ToolBar",["linb.UI","linb.absList"],{Instance:{updateItem:function(c,p){if(p.type){return arguments.callee.upper.apply(this,[c,p,"items.sub"])}else{var n=this,d=n.get(0),e=d.box,i=d.properties.items,k=d.queryItems(i,function(q){return typeof q=="object"?q.id===c:q==c},true,true,true),m,h,g,f,l;if(_.isStr(p)){p={caption:p}}delete p.id;delete p._pid;if(k.length){k=k[0];if(m=k[0]){h=d.getSubNodeByItemId("ICON",c);g=d.getSubNodeByItemId("CAPTION",c);f=d.getSubNodeByItemId("ITEM",c);if("value" in p&&p.value!=m.value){d.getSubNodeByItemId("BTN",c).tagClass("-checked",!!p.value)}if("caption" in p&&p.caption!=m.caption){g.html(p.caption);if(p.caption&&!m.caption){d.getSubNode("CAPTION").css("display","")}if(!p.caption&&m.caption){d.getSubNode("CAPTION").css("display","none")}}if("disabled" in p&&p.disabled!=m.disabled){if(p.disabled){g.addClass("ui-itemdisabled")}else{g.removeClass("ui-itemdisabled")}}if("image" in p&&p.image!=m.image){h.css("background-image",p.image)}if("imagePos" in p&&p.imagePos!=m.imagePos){h.css("background-position",p.imagePos)}if("imageClass" in p&&p.imageClass!=m.imageClass){if(m.imageClass){h.removeClass(m.imageClass)}if(p.imageClass){h.addClass(p.imageClass)}}if("hidden" in p){var j=!!p.hidden;if(j){if(m.hidden!==true){f.css("display","none")}}else{if(m.hidden===true){f.css("display","")}}}_.merge(m,p,"all")}}return n}},showItem:function(d,c){return this.each(function(e){var f=e.getItemByItemId(d);if(f){f.hidden=c===false;e.getSubNodeByItemId("ITEM",d).css("display",c===false?"none":"")}})},showGroup:function(c,d){return this.each(function(e){_.arr.each(e.properties.items,function(f){if(f.id==c){f.hidden=d===false;return false}});e.getSubNodeByItemId("GROUP",c).css("display",d===false?"none":"");if(e.renderId&&e.getRootNode().offsetWidth){linb.UI.$dock(e,true,true)}})},fireItemClickEvent:function(c){this.getSubNodeByItemId("BTN",c).onClick();return this}},Static:{_ITEMKEY:"GROUP",Templates:{tagName:"div",ITEMS:{className:"uibg-bar uiborder-outset",tagName:"div",style:"{mode}",text:"{items}"},$submap:{items:{GROUP:{className:"{groupClass}",style:"{grpDisplay} {groupStyle}",HANDLER:{style:"{mode2}"},LIST:{$order:1,tagName:"text",text:"{sub}"}}},"items.sub":{ITEM:{style:"{itemDisplay}",IBWRAP:{tagName:"div",SPLIT:{style:"{splitDisplay}"},LABEL:{className:" {disabled}",style:"{labelDisplay}",text:"{label}"},BTN:{className:"ui-btn {itemcls} {itemClass}",style:"{itemStyle} {boxDisplay}",BTNI:{className:"ui-btni",BTNC:{className:"ui-btnc",BOX:{tabindex:"{_tabindex}",BOXWRAP:{tagName:"div",ICON:{$order:1,className:"ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat}  {imageDisplay}"},CAPTION:{$order:2,text:"{caption}",className:" {disabled}",style:"{captionDisplay}"},DROP:{$order:3,style:"{dropDisplay}"}}}}}}}}}}},Appearances:{KEY:{"font-size":0,"line-height":0,position:"absolute",left:0,top:0},"ITEM-object":{"vertical-align":"middle","margin-left":"4px"},ICON:{margin:0,"vertical-align":"top"},ITEMS:{display:"block","padding-bottom":"1px","font-size":0,"line-height":0},HANDLER:{height:"22px",width:"7px",background:linb.UI.$bg("handler.gif"," left top",true),cursor:"move","vertical-align":"middle"},GROUP:{"font-size":0,"line-height":0,position:"relative",padding:"2px 4px 0px 2px","vertical-align":"middle"},ITEM:{"vertical-align":"middle",padding:"1px"},"BTNC a":{padding:0},SPLIT:{$order:1,width:"6px",height:"19px","vertical-align":"middle",background:linb.UI.$bg("split_vertical.gif","repeat-y left top",true)},BTN:{"padding-right":"3px"},BTNI:{"padding-left":"3px"},DROP:{width:"14px",height:"16px","vertical-align":"top",background:linb.UI.$bg("drop.gif","no-repeat left center","Button")},"BTN-mouseover DROP":{$order:2,"background-position":"-16px center"},"BTN-mousedown DROP, BTN-checked DROP":{$order:2,"background-position":"-32px center"},"LABEL, CAPTION":{height:"16px","vertical-align":"middle","margin-left":"2px","margin-right":"2px",cursor:"default","font-size":"12px"},LABEL:{"padding-top":"3px"}},Behaviors:{HoverEffected:{BTN:["BTN"]},ClickEffected:{BTN:["BTN"]},BTN:{onClick:function(f,h,i){if(f.properties.disabled){return}var d=linb.use(i).parent(3).id(),c=f.getItemByDom(d);if(c.disabled){return}var g=f.getItemByDom(i);if(g.disabled){return}linb.use(i).focus();if(g.statusButton){linb.use(i).tagClass("-checked",g.value=!g.value)}f.boxing().onClick(f,g,c,h,i);return false}}},DataModel:{listKey:null,height:{ini:"auto",readonly:true},width:"auto",left:0,top:0,handler:{ini:true,action:function(c){this.getSubNode("HANDLER",true).css("display",c?"":"none")}},position:"absolute",hAlign:{ini:"left",listbox:["left","center","right"],action:function(c){this.getSubNode("ITEMS",true).css("textAlign",c)}},dock:{ini:"top",listbox:["top","bottom"]}},EventHandlers:{onClick:function(c,d,g,f,h){}},_adjustItems:function(d){if(!d){d=[_()+""]}if(_.isStr(d)){d=[d]}var e=_.copy(d),c;_.arr.each(e,function(g,f){if(_.isArr(g)){g={id:_.id(),sub:g}}if(_.isHash(g)){e[f]=_.copy(g);e[f].sub=[];if(g.sub){_.arr.each(g.sub,function(h){e[f].sub.push(_.isHash(h)?_.copy(h):{id:h+""})})}}});return e},_prepareData:function(c){var f=arguments.callee.upper.call(this,c);var e=c.properties;f.mode=e.hAlign=="right"?"text-align:right;":"";return f},_prepareItem:function(d,e,m,j,f,g){var h="display:none",k=function(q,n,x,v,r,s){var p=n[linb.UI.$tag_subId]=typeof s=="string"?s:("a_"+q.pickSubId("aitem")),y;if(typeof x=="string"){x={caption:x}}if(false!==r){q.ItemIdMapSubSerialId[x.id]=p;q.SubSerialIdMapItem[p]=x}if(y=x.object){y=n.object=y["linb.absBox"]?y.get(0):y;if(y["linb.UIProfile"]){y.properties.position="relative";var w=q.getClass("ITEM","-object"),u=y.CC.KEY||(u=y.CC.KEY="");if(u.indexOf(w)===-1){y.CC.KEY=u+" "+w}}x.$linbid=y.$linbid;y.$item=x;y.$holder=q;if(!q.$attached){q.$attached=[]}q.$attached.push(y)}else{if(x.type=="split"){x.split=true}else{if(!x.caption){x.caption=""}}linb.UI.adjustData(q,x,n);if(x.statusButton&&!!x.value){n.itemcls=" ui-btn-checked "+q.getClass("BTN","-checked",!!x.value)}n.splitDisplay=n.split?"":h;n.labelDisplay=n.label?"":h;n.captionDisplay=n.caption?"":h;n.dropDisplay=x.dropButton?"":h;n.boxDisplay=(!n.split&&(n.caption||n.image||n.imageClass))?"":h}n.itemDisplay=x.hidden?h:"";x._pid=v};if(j){k(d,e,m,j,f,g)}else{var i=[],c,l=m.sub||[];j=m.id;e.mode2=d.properties.handler?"":h;e.grpDisplay=m.hidden?h:"";e.sub=i;_.arr.each(l,function(n){c={id:n.id};k(d,c,n,j,f,g);i.push(c)})}}}});Class("linb.UI.Layout",["linb.UI","linb.absList"],{Instance:{getPanel:function(c){return this.get(0).getSubNodeByItemId("PANEL",c)},append:function(d,c){var e=this.get(0);return arguments.callee.upper.call(this,d,c||"main")},insertItems:function(c,e,d){return this._insertItems(c,e,d)},_insertItems:function(h,d,n,p){var e,j,k,i,c,f,g,m="before",l=this._afterInsertItems;return this.each(function(r){g=r.box;k=r.properties.items;if(!p){i=_.arr.subIndexOf(k,"id",d);if(i==-1){m=n?"before":"after"}else{if(k[i].id=="main"){m=n?"before":"after"}else{m=k[i].pos}}j=g._adjustItems2(h,m)}else{j=h}if(i==-1){_.arr.insertAny(k,j,n?0:-1)}else{_.arr.insertAny(k,j,n?i:i+1)}if(r.renderId){f=g._prepareItems(r,j,d);c=r._buildItems("items",f);r.getRoot().prepend(c);var q=r.getRootNode().style;linb.UI.$tryResize(r,q.width,q.height,true);q=null}if(l){r.boxing()._afterInsertItems(r,f,d,n)}})},_afterRemoveItems:function(d){if(d.renderId){var c=d.getRootNode().style;linb.UI.$tryResize(d,c.width,c.height,true);c=null}},updateItem:function(d,q){var p=this,f=p.get(0),g=f.properties.type=="vertical",j=f.box,k=f.properties.items,l=f.queryItems(k,function(r){return typeof r=="object"?r.id===d:r==d},true,true,true),n,h,e,c,m;if(typeof q!="object"){return}delete q.id;if(l.length){l=l[0];if(typeof l[0]!="object"){n=l[2][l[1]]={id:l[0]}}else{n=l[0]}var i=false;e=f.getSubNodeByItemId("ITEM",d);if(!e.isEmpty()){if(q.hasOwnProperty("size")){q.size=parseInt(""+q.size);if(q.size!=n.size){n.size=q.size;if(g){e.height(q.size)}else{e.width(q.size)}i=true}}if(q.hasOwnProperty("hidden")){q.hidden=!!q.hidden;if(q.hidden!==n.hidden){f.getSubNodeByItemId("ITEM",d).css("display",q.hidden?"none":"");i=true}}if(q.hasOwnProperty("locked")){q.locked=!!q.locked;if(q.locked!==n.locked){f.getSubNodeByItemId("MOVE",d).css("display",q.locked?"none":"");i=true}}if(q.hasOwnProperty("folded")){q.folded=!!q.folded;if(q.folded!==n.folded){f.boxing().fireCmdClickEvent(d)}}if(q.hasOwnProperty("cmd")){q.cmd=!!q.cmd;if(q.cmd!==n.cmd){f.getSubNodeByItemId("CMD",d).css("display",q.cmd?"":"none")}}}_.merge(n,q,"all");if(i){var m=f.getRootNode().style;linb.UI.$tryResize(f,m.width,m.height,true);m=null}}return p},fireCmdClickEvent:function(c){this.getSubNodeByItemId("CMD",c).onMousedown();return this}},Static:{Templates:{tagName:"div",style:"{_style}",text:"{items}",$submap:{items:{ITEM:{tagName:"div",className:"{cls1} {itemClass}",style:"{size};{itemStyle};{display}",MOVE:{$order:0,tagName:"div",className:"uibg-bar {cls2} ",style:"{moveDisplay}"},CMD:{$order:1,tagName:"div",style:"{cmdDisplay}",className:"{cls3} "},PANEL:{tagName:"div",className:"uibg-base",style:"position:absolute;left:0;top:0;",text:linb.UI.$childTag}}}}},Appearances:{".setting-linb-layout":{width:"9px"},KEY:{position:"absolute",overflow:"hidden",left:0,top:0,"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},MOVE:{$order:0,position:"absolute","z-index":"10","font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},"MOVE-mouseover":{$order:1,"background-color":"#C8E1FA"},CMD:{position:"absolute",cursor:"pointer","z-index":"20","font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},ITEM:{position:"absolute","z-index":1,overflow:"hidden","border-width":linb.browser.opr?"0px":null,"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},PANEL:{position:"absolute",overflow:"hidden","border-width":linb.browser.opr?"0px":null,"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},"ITEM-MAIN":{left:0,right:0,top:0,bottom:0},"ITEM-TOP, ITEM-BOTTOM":{left:0,right:0},"ITEM-LEFT, ITEM-RIGHT":{top:0,bottom:0},"MOVE-TOP, MOVE-BOTTOM":{width:"100%",height:"7px",cursor:"n-resize","border-top":"solid 1px #c8e1fa","border-bottom":"solid 1px #648cb4"},"MOVE-LEFT, MOVE-RIGHT":{height:"100%",width:"7px",cursor:"w-resize","border-left":"solid 1px #c8e1fa","border-right":"solid 1px #648cb4"},"MOVE-TOP":{bottom:0},"MOVE-BOTTOM":{top:0},"MOVE-LEFT":{right:0},"MOVE-RIGHT":{left:0},"CMD-TOP, CMD-BOTTOM, CMD-LEFT, CMD-RIGHT":{background:linb.UI.$bg("icons.gif","no-repeat",true)},"CMD-TOP":{$order:1,left:"50%","margin-left":"-20px",bottom:0,width:"40px",height:"9px","background-position":"-360px -232px"},"CMD-BOTTOM":{$order:1,left:"50%","margin-left":"-20px",top:0,width:"40px",height:"9px","background-position":"-360px -258px"},"CMD-LEFT":{$order:1,top:"50%","margin-top":"-20px",right:0,height:"40px",width:"9px","background-position":"-310px -240px"},"CMD-RIGHT":{$order:1,top:"50%","margin-top":"-20px",left:0,height:"40px",width:"9px","background-position":"-336px -240px"},"CMD-TOP-mouseover":{$order:2,"background-position":"-360px -245px"},"CMD-BOTTOM-mouseover":{$order:2,"background-position":"-360px -271px"},"CMD-LEFT-mouseover":{$order:2,"background-position":"-323px -240px"},"CMD-RIGHT-mouseover":{$order:2,"background-position":"-349px -240px"},"MOVE-MAIN":{$order:5,display:"none"},"CMD-MAIN":{$order:5,display:"none"}},Behaviors:{DropableKeys:["PANEL"],HoverEffected:{MOVE:"MOVE",CMD:"CMD"},onSize:linb.UI.$onSize,MOVE:{onMousedown:function(i,p,c){var q=i.getSubId(c),x=i.getItemByDom(c);if(x.folded){return}var k=i.getItemByItemId("main"),g=i.getSubNode("ITEM",q),j=i.getSubNodeByItemId("ITEM","main"),u=linb.use(c).css("cursor"),v=i.properties,l,r,n,s,f,d;i.pos=x.pos;if(v.type=="vertical"){l=i._cur=g.height();n=j.height();if(x.pos=="before"){f=l-x.min;d=x.max?Math.min(parseInt(x.max)-l,(n-k.min)):(n-k.min)}else{f=x.max?Math.min(parseInt(x.max)-l,(n-k.min)):(n-k.min);d=l-x.min}linb.use(c).startDrag(p,{dragType:"copy",targetReposition:false,verticalOnly:true,maxTopOffset:f,maxBottomOffset:d,dragCursor:u})}else{r=i._cur=g.width();s=j.width();if(x.pos=="before"){f=r-x.min;d=x.max?Math.min(parseInt(x.max)-r,(s-k.min)):(s-k.min)}else{f=x.max?Math.min(parseInt(x.max)-r,(s-k.min)):(s-k.min);d=r-x.min}linb.use(c).startDrag(p,{dragType:"copy",targetReposition:false,horizontalOnly:true,maxLeftOffset:f,maxRightOffset:d,dragCursor:u})}i._limited=0},onDrag:function(g,i,k){var f=g.properties,j=linb.DragDrop,h=linb.DragDrop._profile,c=0;if(f.type=="vertical"){if((h.y<=h.restrictedTop)||(h.y>=h.restrictedBottom)){c=true}}else{if(h.x<=h.restrictedLeft||h.x>=h.restrictedRight){c=true}}if(c){if(!g._limited){g._bg=h.proxyNode.css("backgroundColor");h.proxyNode.css("backgroundColor","#ff6600");g._limited=true}}else{if(g._limited){h.proxyNode.css("backgroundColor",g._bg);g._limited=0}}},onDragstop:function(d,h,j){var c=d.properties,i=linb.use(j).parent(),g=d.getRoot(),f=d.getItemByDom(j);if(c.type=="vertical"){i.height(f.size=d._cur+(d.pos=="before"?1:-1)*linb.DragDrop.getProfile().offset.y);linb.UI.$tryResize(d,null,g.height(),true)}else{i.width(f.size=d._cur+(d.pos=="before"?1:-1)*linb.DragDrop.getProfile().offset.x);linb.UI.$tryResize(d,g.width(),null,true)}d._limited=0}},CMD:{onMousedown:function(j,n,d){var s=j.properties,p=j.getSubId(d),q=j.getItemByDom(d),f=j.getRoot(),k=j.getItemByItemId("main"),i=j.getSubNodeByItemId("ITEM","main"),g=j.getSubNode("ITEM",p),c=j.getSubNode("PANEL",p),h=j.getSubNode("MOVE",p),l=linb.UI.$getCSSValue("setting-linb-layout","width");if(s.type=="vertical"){if(q.folded){if(q.size<=i.height()-k.min+l){g.height(q.size);c.show();q.folded=false;if(q.pos=="before"){linb.use(d).replaceClass(/bottom/g,"top")}else{linb.use(d).replaceClass(/top/g,"bottom")}if(!q.locked){h.css("cursor","n-resize")}j.getSubNode("MOVE").tagClass("-checked",false)}else{linb.message("no enough space!")}}else{g.height(l);c.hide();q.folded=true;if(q.pos=="before"){linb.use(d).replaceClass(/top/g,"bottom")}else{linb.use(d).replaceClass(/bottom/g,"top")}if(!q.locked){h.css("cursor","default")}j.getSubNode("MOVE").tagClass("-checked")}linb.UI.$tryResize(j,null,f.height(),true)}else{if(q.folded){if(q.size<=i.width()-k.min+l){g.width(q.size);c.show();q.folded=false;if(q.pos=="before"){linb.use(d).replaceClass(/right/g,"left")}else{linb.use(d).replaceClass(/left/g,"right")}if(!q.locked){h.css("cursor","w-resize")}j.getSubNode("MOVE").tagClass("-checked",false)}else{linb.message("no enough space!")}}else{g.width(l);c.hide();q.folded=true;if(q.pos=="before"){linb.use(d).replaceClass(/left/g,"right")}else{linb.use(d).replaceClass(/right/g,"left")}if(!q.locked){h.css("cursor","default")}j.getSubNode("MOVE").tagClass("-checked")}linb.UI.$tryResize(j,f.width(),null,true)}return false}}},DataModel:{disabled:null,position:"absolute",type:{listbox:["vertical","horizontal"],ini:"vertical",action:function(g,h){if(g!=h){var e=this,j="auto",c=e.getSubNode("ITEM",true),d=e.getSubNode("MOVE",true),i=e.getSubNode("CMD",true);d.merge(c).merge(i);if(g=="vertical"){d.replaceClass(/(-left)(\b)/ig,"-top$2");d.replaceClass(/(-right)(\b)/ig,"-bottom$2");c.each(function(k){linb(k).height(linb(k).width())}).css({left:0,top:j,right:j,bottom:j})}else{d.replaceClass(/(-top)(\b)/ig,"-left$2");d.replaceClass(/(-bottom)(\b)/ig,"-right$2");c.each(function(k){linb(k).width(linb(k).height())}).css({left:j,top:0,right:j,bottom:j})}var f=e.getRoot().cssSize();linb.UI.$tryResize(e,f.width,f.height,true)}}},dock:"fill",listKey:null,width:200,height:200,items:{ini:[],set:function(h){var j=this;if(j.renderId){var f=j.boxing(),c=linb.$getGhostDiv(),e=_.copy(j.children),i,g;j.children.length=0;_.arr.each(e,function(k){delete k[0].$dockParent;c.appendChild(k[0].getRootNode())});f.clearItems();g=j.box._adjustItems(h);f._insertItems(g,null,null,true);_.arr.each(e,function(k){f.append.apply(f,k)});c.innerHTML="";var d=j.getRoot().cssSize();linb.UI.$tryResize(j,d.width,d.height,true)}else{j.properties.items=_.copy(h)}}}},_adjustItems2:function(d,e){var c=[];_.arr.each(d,function(f){if(f.id!="main"){c.push(f=_.isHash(f)?f:{id:""+f});f.pos=e}});_.arr.each(c,function(f){f.id=_.isStr(f.id)?f.id:_.id();f.min=f.min||10;f.size=parseInt(f.size)||80;f.locked=typeof f.locked=="boolean"?f.locked:false;f.folded=typeof f.folded=="boolean"?f.folded:false;f.hidden=typeof f.hidden=="boolean"?f.hidden:false;f.cmd=typeof f.cmd=="boolean"?f.cmd:true});return c},_adjustItems:function(d){var c,e=[],f=[];_.arr.each(d,function(g){if(g.id=="main"){c=g}else{if(g.pos=="before"){e.push(g)}else{g.pos="after";f.push(g)}}});c=c||{};c.id="main";c.min=c.min||10;d.length=0;_.arr.insertAny(d,this._adjustItems2(e,"before"));_.arr.insertAny(d,c);_.arr.insertAny(d,this._adjustItems2(f,"after"));return d},_prepareData:function(c){var d=c.properties;if(!d.items||d.items.constructor!=Array){d.items=_.clone([{id:"before",pos:"before",locked:false,size:60,min:50,max:200},{id:"after",pos:"after",locked:false,size:60,min:50,max:200}])}d.items=this._adjustItems(d.items);return arguments.callee.upper.call(this,c)},_prepareItems:function(d,c){var e=arguments.callee.upper.apply(this,arguments);_.arr.each(c,function(f){delete f.caption});return e},_prepareItem:function(d,e){var c=d.properties;if(e.id=="main"){e.cls1=d.getClass("ITEM","-main");e.cls2=d.getClass("MOVE","-main");e.cls3=d.getClass("CMD","-main");return}if(c.type=="vertical"){e.size="height:"+e.size+"px"}else{e.size="width:"+e.size+"px"}var f;if(c.type=="vertical"){if(e.pos=="before"){f="top"}else{f="bottom"}}else{if(e.pos=="before"){f="left"}else{f="right"}}e.cls1=d.getClass("ITEM","-"+f);e.cls2=d.getClass("MOVE","-"+f);e.cls3=d.getClass("CMD","-"+f);e.display=e.hidden?"display:none":"";e.moveDisplay=e.locked?"display:none":"";e.cmdDisplay=e.cmd?"":"display:none"},RenderTrigger:function(){var c,d=this;_.arr.each(d.properties.items,function(e){if(e.id!="main"){if(e.folded&&(c=d.getSubIdByItemId(e.id))){e.folded=false;d.getSubNode("CMD",c).onMousedown()}}})},_onresize:function(i,e,v){var u,w=i.properties,j,g,q,f,d,s,r=i.keys.ITEM,c=i.keys.PANEL,h=i.getSubNode("MOVE",true),l=linb.UI.$getCSSValue("setting-linb-layout","width");var p={},k={};_.arr.each(w.items,function(m){q=i.getSubIdByItemId(m.id);p[q]={};k[q]={}});if(w.type!="vertical"){if(!_.isNull(e)){s=f=d=0;_.arr.each(w.items,function(m){if(m.id=="main"){return}q=i.getSubIdByItemId(m.id);if(m.pos=="before"){g=i.getSubNode("ITEM",q);if(m.hidden){j=0;k[q].width=m.size}else{if(m.folded){j=k[q].width=l}else{j=g.width()}}k[q].left=f;f+=j;k[q].right="auto";p[q].right="auto";p[q].left=0;p[q].width=j-(m.locked?0:l)}});_.arr.each(w.items,function(m){if(m.id=="main"){return}q=i.getSubIdByItemId(m.id);if(m.pos=="after"){g=i.getSubNode("ITEM",q);if(m.hidden){j=0;k[q].width=m.size}else{if(m.folded){j=k[q].width=l}else{j=g.width()}}k[q].right=d;d+=j;k[q].left="auto";p[q].right=0;p[q].left="auto";p[q].width=j-(m.locked?0:l)}},null,true);s=f+d;if(e-s>=0){u=i.getSubIdByItemId("main");p[u].width=e-s;k[u].width=e-s;k[u].left=f}}if(!_.isNull(v)){_.each(p,function(m,n){m.height=v;k[n].height=v})}}else{if(!_.isNull(v)){s=f=d=0;_.arr.each(w.items,function(m){if(m.id=="main"){return}q=i.getSubIdByItemId(m.id);if(m.pos=="before"){g=i.getSubNode("ITEM",q);if(m.hidden){j=0;k[q].height=m.size}else{if(m.folded){j=k[q].height=l}else{j=g.height()}}k[q].top=f;f+=j;k[q].bottom="auto";p[q].top=0;p[q].bottom="auto";p[q].height=j-(m.locked?0:l)}});_.arr.each(w.items,function(m){if(m.id=="main"){return}q=i.getSubIdByItemId(m.id);if(m.pos=="after"){g=i.getSubNode("ITEM",q);if(m.hidden){j=0;k[q].height=m.size}else{if(m.folded){j=k[q].height=l}else{j=g.height()}}k[q].bottom=d;d+=j;k[q].top="auto";p[q].bottom=0;p[q].top="auto";p[q].height=j-(m.locked?0:l)}},null,true);s=f+d;if(v-s>=0){u=i.getSubIdByItemId("main");p[u].height=v-s;k[u].height=v-s;k[u].top=f}}if(!_.isNull(e)){_.each(p,function(m,n){m.width=e;k[n].width=e})}}_.each(k,function(m,n){i.getSubNode("PANEL",n).cssRegion(p[n],true);i.getSubNode("ITEM",n).cssRegion(k[n])})}}});Class("linb.UI.TreeGrid",["linb.UI","linb.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(f){if(!f.renderId){return}if(f.properties.activeMode=="none"){return}var l=f.boxing(),s=l.getUIValue(),d=f.properties,h=d.activeMode=="row"?"CELLS":"CELL",i=function(p,v){return f.getSubNode(p,v)},m=function(k){var v=f.rowMap2;if(d.activeMode=="row"){return v[k]}else{if(!k){return}var p=k.split("|");return _.get(f.rowMap,[v[p[0]],"_cells",p[1]])}};if(d.selMode=="single"){var r=m(s);if(s&&r){i(h,r).tagClass("-checked",false)}r=m(c);if(r){i(h,r).tagClass("-checked")}if(r){var e=i(h,r);if(e){var q=e.offsetTop(),n=i("SCROLL"),j=n.scrollHeight(),u=n.scrollTop(),g=n.height();if(j>g){if(q<u||q>u+g){n.scrollTop(q)}}}}}else{if(d.selMode=="multi"){s=s?s.split(";"):[];c=c?c.split(";"):[];_.arr.each(s,function(k){if(_.arr.indexOf(c,k)==-1){i(h,m(k)).tagClass("-checked",false)}});_.arr.each(c,function(k){if(_.arr.indexOf(s,k)==-1){i(h,m(k)).tagClass("-checked")}});if(c.length===0){i("HFMARK").tagClass("-checked",false);delete f._$checkAll}}}})},_insertRowsToDom:function(e,h,g,d,j){if(g){var k=e.rowMap[g];if(k&&!k._inited){return}}if(!h){h=[]}var f,i,i=e.getSubNode("HFCELL").width();_.arr.each(h,function(l){l._row0DfW=i?("width:"+i+"px"):"";_.arr.each(l.cells,function(m,n){m.width=m._col.width})});var c=e._buildItems("rows",h);if(!d){if(g){f=e.getSubNode("SUB",g)}else{f=e.getSubNode("BODY")}if(j){f.prepend(c)}else{f.append(c)}}else{f=e.getSubNode("ROW",d);if(j){f.addPrev(c)}else{f.addNext(c)}}_.arr.each(h,function(l){l.open=false});delete e.$allrowscache},_refreshHeader:function(f){var d=this.get(0),e=d.properties;_.breakO(d.colMap,2);if(!f){f=[]}f=d.box._adjustHeader(f);var c=d.box._prepareHeader(d,f);e.header=f;this.removeAllRows();d.getSubNode("HCELL",true).remove();if(c.length){d.getSubNode("HCELLS").append(d._buildItems("header",c))}d.box._ajdustBody(d);if(d.$col_pop){d.$col_pop.destroy();delete d.$col_pop}_.each(d.$cache_editor,function(g){g.destroy()});d.$cache_editor={}},_toggleRows:function(e,c){var d=this;if(e&&e.length){_.arr.each(e,function(f){d.toggleRow(f.id,c)})}},isDirtied:function(){var c=false;_.each(this.get(0).cellMap,function(d){if(d._value!==d.value){c=true;return false}});return c},getRows:function(f){var e=this.get(0).properties.rows;if(f=="data"){return _.clone(e,true)}else{if(f=="min"){var d=_.clone(e,true),c;_.arr.each(d,function(h,g){_.each(c=d[g]=d[g].cells,function(i,k){c[k]=i.value})});return d}else{return e}}},toggleRow:function(f,c){var d=this.get(0),e=d.rowMap[d.rowMap2[f]];if(e&&e.sub){d.box._setSub(d,e,typeof c=="boolean"?c:!e._checked)}return this},getRowbyRowId:function(e){var d=this.get(0),c=d.rowMap2[e];return c?d.rowMap[c]:null},getRowbyCell:function(c){return c._row},updateRow:function(f,n){var j=this,c=j.getRowbyRowId(f);if(c){var k=c._serialId,m,h;if(!c){return j}if(typeof n!="object"){n={caption:n}}else{_.filter(n,true)}n.id=f;if(("group" in n&&n.group!=c.group)||"cells" in n||("sub" in n&&!((n.sub===true&&!c.sub)||(!n.sub&&c.sub===true)))){var d="__special",e=j.get(0),g=c._pid?e.rowMap[c._pid].id:null;c.id=d;e.rowMap2[d]=e.rowMap2[f];delete e.rowMap2[f];_.each(e.colMap,function(p){if(p._cells){delete p._cells[f]}});c=_.clone(c,true);_.merge(c,n,"all");if("sub" in n&&!n.sub){delete c.sub}j.insertRows([c],g,d,true);j.removeRows([d])}else{if("sub" in n){m=j.getSubNode("FCELLCMD",k);if(n.sub){m.removeClass("uicmd-empty").addClass("uicmd-toggle2")}else{m.removeClass("uicmd-toggle2").addClass("uicmd-empty")}}if(m=n.height){j.getSubNode("CELLS",k).height(m)}if(m=n.rowStyle){(h=j.getSubNode("CELLS",k)).attr("style",h.attr("style")+";"+m)}if(m=n.rowClass){j.getSubNode("CELLS",k).addClass(m)}if(n.hasOwnProperty("disabled")){var l=e.getClass("CELLS","-disabled");if(n.disabled){j.getSubNode("CELLS",k).addClass(l)}else{j.getSubNode("CELLS",k).removeClass(l)}}if(n.hasOwnProperty("readonly")){var l=e.getClass("CELLS","-readonly");if(n.readonly){j.getSubNode("CELLS",k).addClass(l)}else{j.getSubNode("CELLS",k).removeClass(l)}}if(m=n.firstCellStyle){(h=j.getSubNode("FCELL",k)).attr("style",h.attr("style")+";"+m)}if(m=n.firstCellClass){j.getSubNode("FCELL",k).addClass(m)}if(n.hasOwnProperty("caption")){j.getSubNode("FCELLCAPTION",k).get(0).innerHTML=n.caption}if(n.hasOwnProperty("preview")){if(n.preview){j.getSubNode("PREVIEW",k).css("display","block").html(n.preview)}else{j.getSubNode("PREVIEW",k).css("display","none")}}if(n.hasOwnProperty("summary")){if(n.summary){j.getSubNode("SUMMARY",k).css("display","block").html(n.summary)}else{j.getSubNode("SUMMARY",k).css("display","none")}}if(n.hasOwnProperty("rowResizer")){m=!!n.rowResizer;j.getSubNode("FHANDLER",k).css("display",(n.rowResizer=m)?"block":"none")}_.merge(c,n,"all")}}else{var i=j.get(0).queryItems(j.getRows(),function(p){return typeof p=="object"?p.id===f:p==f},true,true,true);if(i.length){_.merge(i[0][0],n,"all")}}return j},insertRows:function(i,h,d,p){if(!i||!_.isArr(i)||i.length<1){return this}var m=this.constructor,f=this.get(0),q=f.properties,e=f.rowMap2,n=f.rowMap,j,r,g;h=e[h];d=e[d];if(d){r=f.rowMap[d];if(r){h=r._pid}}i=m._adjustRows(i);if(!h){j=(q.rows||(q.rows=[]))}else{g=n[h];j=_.isArr(g.sub)?g.sub:(g.sub=[])}var s;if(f.renderId){if(!h||g._inited){s=m._prepareItems(f,i,h);this._insertRowsToDom(f,s,h,d,p)}}if(!d){_.arr.insertAny(j,i,p?0:-1)}else{var l=_.arr.subIndexOf(j,"_serialId",d);_.arr.insertAny(j,i,p?l:(l+1))}if(f.renderId){if(!q.iniFold){f.boxing()._toggleRows(s,true)}f.box._asy(f)}return this},removeRows:function(h){var f=this,g=f.get(0),i=g.properties,c=g.cellMap,e=[],d;h=_.isArr(h)?h:[h];_.arr.each(h,function(p){if(!(p=g.rowMap2[p])){return}var n;if(n=g.rowMap[p]){var l=n._cells,m=n.id,k;if(n.sub&&_.isArr(n.sub)){var j=[];_.arr.each(n.sub,function(q){j.push(q.id)});f.removeRows(j)}_.each(l,function(r,q){delete c[r]._col._cells[m];_.breakO(c[r]);delete c[r];g.reclaimSubId(r.slice(2),"cell")});if(k=n._pid?(k=g.rowMap[n._pid])?k.sub:null:g.properties.rows){if(_.isArr(k)){_.filter(k,function(q){return q._serialId!=p})}}delete g.rowMap2[m];_.breakO(g.rowMap[p]);delete g.rowMap[p];e.push(g.getSubNode("ROW",p).get(0))}g.reclaimSubId(p.slice(2),"row")});if(d=i.value){if((d=d.split(";")).length>1){_.filter(d,function(j){return _.arr.indexOf(arr,j)==-1});i.value=d.join(";")}else{if(_.arr.indexOf(arr,i.value)!=-1){i.value=null}}}linb(e).remove();if(g.$activeCell&&!linb.Dom.byId(g.$activeCell)){delete g.$activeCell}if(g.$activeRow&&!linb.Dom.byId(g.$activeRow)){delete g.$activeRow}delete g.$allrowscache;g.box._asy(g);return f},removeAllRows:function(){var d=this.get(0);for(var c in d.cellMap){d.reclaimSubId(c.slice(2),"cell")}for(var c in d.rowMap){d.reclaimSubId(c.slice(2),"row")}_.each(d.colMap,function(e){e._cells={}});_.breakO([d.rowMap,d.cellMap],3);d.rowMap={};d.cellMap={};d.rowMap2={};delete d.$activeCell;delete d.$activeRow;d.properties.rows.length=0;if(d.renderId){d.getSubNode("BODY").empty();d.getSubNode("SCROLL").scrollTop(0).scrollLeft(0)}delete d.$allrowscache;return this},resetRowValue:function(e){var d=this.get(0),f=this.getRowbyRowId(e),c=[];_.arr.each(f.cells,function(g){if(g._value!==g.value){g._value=g.value;delete g.dirty;c.push(d.getSubNode("CELLA",g._serialId).get(0))}});linb(c).removeClass("ui-dirty")},getActiveRow:function(){var c,d=this.get(0);if(d.properties.activeMode!="row"){return}if(!(c=d.$activeRow)){return}return d.rowMap[d.getSubId(c)]},setActiveRow:function(e){var d,f,c=this.get(0);if(c.properties.activeMode!="row"){return}delete c.$activeRow;if(!(f=this.getRowbyRowId(e))){return}if(!(d=c.getSubNode("CELLS",f._serialId)).isEmpty()){c.box._activeRow(c,d.get(0).id)}return this},getHeader:function(f){var e=this.get(0).properties.header;if(f=="data"){return _.clone(e,true)}else{if(f=="min"){var d=_.clone(e,true),c;_.arr.each(d,function(h,g){d[g]=h.id});return d}else{return e}}},updateHeader:function(c,k){var h=this,e=h.getHeaderByColId(c);if(e){var i=e._serialId,j,f;if(typeof k!="object"){k={caption:k+""}}else{_.filter(k,true)}delete k.id;if(j=k.width){var d=[];d.push(h.getSubNode("HCELL",i).get(0));_.each(e._cells,function(l){d.push(h.getSubNode("CELL",l).get(0))});linb(d).width(j);h.constructor._ajdustBody(h.get(0))}if(j=k.headerStyle){(f=h.getSubNode("HCELL",i)).attr("style",f.attr("style")+";"+j)}if(j=k.headerClass){h.getSubNode("HCELL",i).addClass(j)}if(k.hasOwnProperty("caption")){h.getSubNode("HCELLCAPTION",i).get(0).innerHTML=k.caption}if("colResizer" in k){j=!!k.colResizer;h.getSubNode("HHANDLER",i).css("display",(k.colResizer=j)?"block":"none")}if(k.hasOwnProperty("visibility")&&!k.hasOwnProperty("hidden")){k.hidden=!k.visibility}if("hidden" in k){var g=!!k.hidden;if(g){if(e.hidden!==true){h.showColumn(c,false)}}else{if(e.hidden===true){h.showColumn(c,true)}}}_.merge(e,k,"all")}return h},getHeaderByColId:function(e){var c=this.get(0).properties.header,d=_.arr.subIndexOf(c,"id",e);return c[d]},getHeaderByCell:function(c){return c._col},showColumn:function(d,c){return this.each(function(h){var j=h.colMap2,i=h.colMap,g,e,f,k=[];if(g=i[e=j[d]]){k.push(h.getSubNode("HCELL",e).get(0));_.each(g._cells,function(l){k.push(h.getSubNode("CELL",l).get(0))});linb(k).css("display",(g.hidden=(c===false?true:false))?"none":"")}h.box._ajdustBody(h)})},getCellbyRowCol:function(f,e){var d=this.get(0),c;c=_.get(d.rowMap,[d.rowMap2[f],"_cells",e]);return c?d.cellMap[c]:null},updateCellByRowCol:function(j,g,e,i,h){var f,d=this,c=d.constructor;if(f=c._getCellId(d.get(0),j,g)){c._updCell(d.get(0),f,e,i,h)}return d},updateCell:function(f,d,h,g){var c=this,e=this.get(0);_.each(e.cellMap,function(i){if(i.id&&i.id===f){f=i._serialId;return false}});c.constructor._updCell(e,f,d,h,g);return c},editCellbyRowCol:function(f,e){var d=this.get(0),c=d.box;c._editCell(d,c._getCellId(d,f,e));return this},editCell:function(c){this.constructor._editCell(this.get(0),c);return this},focusCellbyRowCol:function(g,e){var d=this.get(0),c=d.box,f=c._getCellId(d,g,e);d.getSubNode("CELLA",f).focus(true);return this},focusCell:function(c){var d=c._serialId;this.get(0).getSubNode("CELLA",d).focus(true);return this},getActiveCell:function(){var c,d=this.get(0);if(d.properties.activeMode!="cell"){return}if(!(c=d.$activeCell)){return}return d.cellMap[d.getSubId(c)]},setActiveCell:function(g,e){var f,c,d=this.get(0);if(d.properties.activeMode!="cell"){return}delete d.$activeCell;if(typeof g=="object"){c=g}else{c=this.getCellbyRowCol(g,e)}if(!c){return}if(!(f=d.getSubNode("CELL",c._serialId)).isEmpty()){d.box._activeCell(d,f.get(0).id)}return this},resetGridValue:function(){return this.each(function(c){_.each(c.cellMap,function(d){d._value=d.value;delete d.dirty});c.getSubNode("CELLA",true).removeClass("ui-dirty")})},getSubNodeInGrid:function(d,g,f){var e=this,c=(g&&f)?e.getCellbyRowCol(g,f):f?e.getHeaderByColId(f):g?e.getRowbyRowId(g):null;return e.getSubNode(d,(c&&c._serialId)||true)}},Initialize:function(){this.addTemplateKeys(["ALT","PROGRESS"])},Static:{Templates:{tagName:"div",style:"{_style}",BORDER:{tagName:"div",BOX:{tagName:"div",HEADER:{$order:0,tagName:"div",style:"{showHeader}",HI:{tagName:"div",HCELLS:{tagName:"div",style:"{headerHeight};",HFCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};",className:"{cellCls}",HCELLA:{HHANDLER:{tagName:"div",style:"{colDDDisplay}"},FHANDLER:{tagName:"div",style:"{rowDDDisplay}"},HFMARK:{className:"uicmd-check",style:"{_rowMarkDisplay}"},GRIDCAPTION:{$order:2,text:"{gridHandlerCaption}"},SORT:{style:"{sortDisplay}"}}},OTHERHCELLS:{$order:1,tagName:"text",text:"{header}"}}}},SCROLL:{$order:1,tagName:"div",className:"uibg-base ",BODY:{tagName:"div",text:"{rows}"}},FOOTER:{$order:2},COLLIST:{tagName:"div"},ARROW:{}}},$submap:{header:{HCELL:{style:"width:{width}px;{colDisplay};",className:"{cellCls}",HCELLA:{className:"{headerClass}",style:"{headerStyle}",HCELLCAPTION:{text:"{caption}"},SORT:{style:"{sortDisplay}"},HHANDLER:{$order:2,tagName:"div",style:"{colDDDisplay}"}}}},rows:{ROW:{tagName:"div",PREVIEW:{$order:1,tagName:"div",style:"{previewDisplay}",text:"{preview}"},CELLS:{$order:2,tagName:"div",className:"{rowCls} {rowClass}",style:"height:{rowHeight}px;{rowStyle}",FCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};",className:"{cellCls}",CELLA:{tabindex:"{_tabindex}",style:"{cellStyle}{firstCellStyle}",className:"{cellClass}{firstCellClass}",FCELLRULER:{style:"width:{_rulerW}px"},FCELLCMD:{$order:2,className:"{subClass}"},FHANDLER:{tagName:"div",style:"{rowDDDisplay}"},FCELLINN:{$order:3,ROWNUM:{},FCELLCAPTION:{$order:1,text:"{caption}"}},MARK:{$order:1,style:"{_rowMarkDisplay}"}}},OTHERCELLS:{tagName:"text",$order:1,text:"{cells}"}},SUB:{$order:3,tagName:"div"},SUMMARY:{$order:4,tagName:"div",style:"{summaryDisplay}",text:"{summary}"}}},"rows.cells":function(g,f,e,d,c){var h=arguments.callee,i=h._m||(h._m={checkbox:".checkbox",button:".button",progress:".progress"});linb.UI.$doTemplate(g,f,e,d+(i[e.type]||".input"),c)},"rows.cells.input":{CELL:{style:"width:{width}px;{cellDisplay};",className:"{cellCls}",CELLA:{className:"{cellClass}",style:"{bgcolor};{color};{cellStyle}",tabindex:"{_tabindex}",text:"{caption}"}}},"rows.cells.button":{CELL:{style:"width:{width}px;{cellDisplay};",className:"{cellCls}",CELLA:{tagName:"button",className:"{cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",text:"{caption}"}}},"rows.cells.checkbox":{CELL:{style:"width:{width}px;{cellDisplay}",className:"{cellCls}",CELLA:{className:"{cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",CHECKBOX:{className:"{checkboxCls}"}}}},"rows.cells.progress":{CELL:{style:"width:{width}px;{cellDisplay}",className:"{cellCls}",CELLA:{className:"{cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",PROGRESS:{tagName:"div",style:"width:{progress};",text:"{caption}"}}}}}},Appearances:{KEY:{display:"block",position:"absolute",overflow:"hidden"},BOX:{display:"block",position:"relative",overflow:"hidden"},HEADER:{background:linb.UI.$bg("head.gif","#CAE3FF repeat-x left top"),position:"relative",overflow:"hidden"},HI:{position:"relative"},SCROLL:{overflow:"auto",position:"relative"},ARROW:{position:"absolute","z-index":"20",left:0,top:0,display:"none",width:"14px",height:"18px",background:linb.UI.$bg("icons.gif","no-repeat -72px -270px",true)},COLLIST:{position:"absolute","z-index":"10",left:0,top:0,cursor:"pointer",visibility:"hidden",background:linb.UI.$bg("collist.gif","#FFF1A0 no-repeat center bottom"),border:"1px solid","border-color":"#fff #ACA899 #ACA899 #fff"},BODY:{overflow:"visible",position:"absolute","background-color":"#fff",left:0,top:"0","font-size":0,"line-height":0},"SORT, SORT-checked":{width:"16px",height:"16px"},SORT:{background:linb.UI.$bg("icons.gif","no-repeat -110px -220px",true),position:"absolute",right:"2px",bottom:"2px"},"HCELL-mouseover SORT":{$order:1,"background-position":"-110px -240px"},"HCELL-mousedown SORT":{$order:2,"background-position":"-110px -260px"},"SORT-checked":{$order:3,"background-position":"-130px -220px"},"HCELL-mouseover SORT-checked":{$order:4,"background-position":"-130px -240px"},"HCELL-mousedown SORT-checked":{$order:5,"background-position":"-130px -260px"},HHANDLER:{position:"absolute",background:linb.browser.ie?"url("+linb.ini.file_bg+")":null,width:"4px",top:"0",right:"0",height:"100%",cursor:"e-resize","font-size":0,"line-height":0},"HCELLS, CELLS":{"overflow-y":linb.browser.ie?"hidden":"",position:"relative","white-space":"nowrap","font-size":"12px","line-height":"18px"},HCELLS:{"padding-bottom":"2px"},CELLS:{"border-bottom":"1px solid #A2BBD9"},"CELLS-group":{$order:1,"border-right":"1px solid #A2BBD9"},"CELLS-group FCELL":{"border-right":0,"padding-right":"1px",overflow:"visible"},"CELLS-group FCELLCAPTION, CELLS-group CELLA, CELLS-group FCELLIN":{"font-weight":"bold",color:"#3764A0",overflow:"visible"},"PREVIEW,SUMMARY":{position:"relative",display:"none","padding-left":"16px","border-right":"1px solid #A2BBD9"},PREVIEW:{$order:4,"border-bottom":"1px solid #A2BBD9"},SUMMARY:{$order:4,"border-bottom":"1px solid #A2BBD9"},"CELLS-mouseover":{$order:4,"background-color":"#DFE8F6"},"CELLS-readonly CELLA":{$order:5,color:"#808080"},"CELL-readonly CELLA":{$order:6,color:"#808080"},"CELLS-disabled":{$order:7,"background-color":"#EBEADB"},"CELLS-disabled CELLA":{$order:7,color:"#808080"},"CELL-disabled":{$order:8,"background-color":"#EBEADB"},"CELL-disabled CELLA":{$order:8,color:"#808080"},"CELLS-active, CELL-active":{$order:5,"background-color":"#A3BAE9"},"CELLS-checked, CELL-checked, CELLS-checked CELLA, CELL-checked CELLA":{$order:6,"background-color":"#7199E8",color:"#fff"},"FCELL CELLA":{"text-align":"left"},"HFCELL HCELLA":{"text-align":"center"},FHANDLER:{position:"absolute",height:"4px",left:"0px",width:"100%",bottom:"0px",cursor:"n-resize","z-index":10,"font-size":0,"line-height":0},"FCELLCAPTION, FCELLINN":{"vertical-align":"middle",overflow:"hidden"},"HFCELL, HCELL":{background:linb.UI.$bg("head.gif","#CAE3FF repeat-x left top"),height:"100%","border-left":"1px solid #fff","border-top":"1px solid #fff","border-right":"1px solid #A2BBD9","border-bottom":"1px solid #A2BBD9",padding:0,"vertical-align":"top","font-size":"12px","line-height":"14px"},"HFCELL-mouseover, HCELL-mouseover":{background:linb.UI.$bg("head-mouseover.gif","#FFF1A0 repeat-x left top")},ROW:{position:"relative",zoom:linb.browser.ie?1:null,width:linb.browser.ie?"100%":null,"font-size":0,"line-height":0},ROWNUM:{"padding-right":"6px",color:"#808080"},"FCELL, CELL":{"padding-left":"1px","border-right":"1px solid #A2BBD9",height:"100%",position:"relative",overflow:linb.browser.ie6?"hidden":"","font-size":"12px","line-height":"20px","vertical-align":"top"},ALT:{"background-color":"#EFF8FF"},"CELL-label a":{color:"#000"},"CELL-input":{},"CELL-number, CELL-spin, CELL-currency":{"text-align":"right"},"CELL-checkbox":{"text-align":"center"},"CELL-button CELLA":{width:"100%"},"CELL-mouseover":{$order:5,"background-color":"#DFE8F6"},"FCELL CELLA, HCELLA":{position:"relative"},HCELLA:{"text-align":"center"},"HCELLA, CELLA":{display:"block",overflow:"hidden","-moz-box-flex":"1","outline-offset":"-1px","-moz-outline-offset":"-1px !important",height:"100%",color:"#000",width:linb.browser.ie?"100%":"","line-height":"19px"},"CELLA-inline":{$order:5,display:"inline",width:"auto","-moz-box-flex":0},PROGRESS:{height:"100%","background-color":"#00ffff","text-align":"center",overflow:"visible",opacity:0.7,"*filter":"alpha(opacity=70)"},"CHECKBOX, MARK":{cursor:"pointer",width:"16px",height:"16px","vertical-align":"middle",background:linb.UI.$bg("icons.gif","no-repeat -20px -70px",true)},"CELL-mouseover CHECKBOX":{$order:1,"background-position":"-20px -90px"},"CELL-mousedown CHECKBOX":{$order:2,"background-position":"-20px -110px"},"CHECKBOX-checked, CELLS-checked MARK":{$order:3,"background-position":"0 -70px"},"CELL-mouseover CHECKBOX-checked":{$order:4,"background-position":"0 -90px"},"CELL-mousedown CHECKBOX-checked":{$order:5,"background-position":"0 -110px"},SUB:{"*zoom":1,height:0,position:"relative",overflow:"hidden","font-size":"1px","line-height":"1px"}},Behaviors:{HoverEffected:{FCELLCMD:"FCELLCMD",HCELL:"HCELL",HFCELL:"HFCELL"},ClickEffected:{FCELLCMD:"FCELLCMD",CELL:"CELL",HCELL:"HCELL"},DropableKeys:["SCROLL","CELLS","FCELLCMD"],DragableKeys:["FCELL"],onSize:linb.UI.$onSize,HFMARK:{onClick:function(c,f,g){if(c.properties.selMode!="multi"){return}var d=[];_.each(c.rowMap,function(e){d.push(e.id)});if(c._$checkAll){delete c._$checkAll;c.boxing().setUIValue("");linb.use(g).tagClass("-checked",false)}else{c._$checkAll=true;linb.use(g).tagClass("-checked");c.boxing().setUIValue(d.join(";"))}return false}},SCROLL:{onScroll:function(d,f,g){var c=linb.use(g).get(0).scrollLeft||0;if(d.$sl!=c){d.getSubNode("HEADER").get(0).scrollLeft=d.$sl=c}}},HHANDLER:{onMousedown:function(j,l,c){var g=j.properties,h=linb(c),k=h.parent(2).width()-g._minColW,m=j.getSubNode("SCROLL"),f=m.offset().left+m.width()-linb.Event.getPos(l).left-4,d=j.getSubId(c),i=j.colMap[d];if(g.disabled){return false}if(i&&i.disabled){return false}h.startDrag(l,{horizontalOnly:true,dragType:"blank",dragDefer:2,maxLeftOffset:k,maxRightOffset:f,targetReposition:false});linb.use(c).parent(2).onMouseout(true,{$force:true}).onMouseup(true)},onDragbegin:function(c,d,f){linb.DragDrop.getProfile().proxyNode.css({height:c.getRoot().height()+"px",width:"4px",backgroundColor:"#ddd",cursor:"e-resize"})},onDrag:function(f,h,j){var i=linb.DragDrop,g=i.getProfile(),c=0;if(g.x<=g.restrictedLeft||g.x>=g.restrictedRight){c=true}if(c){if(!f._limited){g.proxyNode.css("backgroundColor","#ff6600");f._limited=true}}else{if(f._limited){g.proxyNode.css("backgroundColor","#ddd");f._limited=0}}},onDragstop:function(h,i,c){var f=linb(c).parent(2),k=f.width()+linb.DragDrop.getProfile().offset.x,g=h.colMap[h.getSubId(c)];f.width(k);if(g){g.width=k}var d=[],j=[];if(h.getKey(linb.use(c).parent(2).id())==h.keys.HFCELL){h.box._setRowHanderW(h,k)}else{var l=h.colMap[h.getSubId(c)]._cells;_.each(l,function(e){d.push(h.getSubNode(h.keys.CELL,e).id())});linb(d).width(k)}h.getSubNode("SCROLL").onScroll();h.box._ajdustBody(h);h._limited=0},onClick:function(){return false},onDblclick:function(h,k,c){if(h.getKey(linb.use(c).parent(2).id())==h.keys.HFCELL){h.box._setRowHanderW(h,true);return}var d=h.properties,f=h.getSubId(c),i=h.colMap[f],q=i._cells,r=h.getClass("CELLA","-inline"),g,l=[],j=[],m;_.each(q,function(e){g=h.getSubNode("CELLA",e);if(g._nodes.length){l.push(g.get(0));j.push(g.addClass(r).width())}});j.push(d._minColW);m=parseInt(Math.max.apply(null,j));if(m>d._maxColW){m=d._maxColW}linb(l).parent().width(m);linb.use(c).parent(2).width(i.width=m);linb(l).removeClass(r);h.box._ajdustBody(h);return false}},FHANDLER:{onMousedown:function(g,h,c){var d=g.properties,k=g.rowMap[g.getSubId(c)],f=linb(c),l=f.parent(3).height()-d._minRowH,j=g.getSubNode("SCROLL"),i=j.offset().top+j.height()-linb.Event.getPos(h).top-4;if(d.disabled||(k&&k.disabled)){return false}f.startDrag(h,{verticalOnly:true,dragType:"blank",dragDefer:2,maxTopOffset:l,maxBottomOffset:i,targetReposition:false});linb.use(c).parent(2).onMouseout(true,{$force:true}).onMouseup(true)},onDragbegin:function(c,d,f){linb.DragDrop.getProfile().proxyNode.css({width:c.getRoot().width()+"px",height:"4px",backgroundColor:"#ddd",cursor:"n-resize"})},onDrag:function(f,h,j){var i=linb.DragDrop,g=i.getProfile(),c=0;if(g.y<=g.restrictedTop||g.y>=g.restrictedBottom){c=true}if(c){if(!f._limited){g.proxyNode.css("backgroundColor","#ff6600");f._limited=true}}else{if(f._limited){g.proxyNode.css("backgroundColor","#ddd");f._limited=0}}},onDragstop:function(d,f,j){var i=linb(j).parent(3),c=i.height()+linb.DragDrop.getProfile().offset.y,g=d.rowMap[d.getSubId(j)];if(linb.browser.ie&&c%2==1){c+=1}i.height(c);if(d.getKey(linb.use(j).parent(2).id())==d.keys.HFCELL){d.properties.headerHeight=c;linb.UI.$tryResize(d,null,d.getRoot().height(),true)}else{g.height=c}d._limited=0},onDblclick:function(f,h,j){var g=f.properties,c=f.getSubId(j),i,d;if(c){i=f.rowMap[c];d=f.getSubNode("CELLS",c);d.height(i.height=d.height("auto").height())}else{d=f.getSubNode("HCELLS");d.height(f.properties.headerHeight=d.height("auto").height());linb.UI.$tryResize(f,null,f.getRoot().height(),true)}return false},onClick:function(){return false}},FCELLCMD:{onClick:function(c,f,h){var d=c.properties,g=c.rowMap[c.getSubId(h)];if(d.disabled||g.disabled){return false}if(!g.sub){return}c.box._setSub(c,g,!g._checked);return false}},HCELLA:{onClick:function(i,l,c){var f=i.properties,d=i.getSubId(c),g=i.colMap[d];if(!g){if(i.onClickGridHandler){i.boxing().onClickGridHandler(i,l,c)}if(f.disabled){return false}if(!f.colSortable){return}}else{if(f.disabled||g.disabled){return false}if(!(g.hasOwnProperty("colSortable")?g.colSortable:f.colSortable)){return}}var j=(g?g._order:i._order)||false,q=(g?g.type:null)||"input",r=g?g.sortby:null,k=g?_.arr.indexOf(f.header,g):-1,n=arguments.callee,m=n.fun||(n.fun=function(p,B,u,s,y,C){var w,v,A=arguments.callee;if(B){w=B.sub;v=p.getSubNode("SUB",B._serialId).get(0)}else{B={_inited:true};w=p.properties.rows;v=p.getSubNode("BODY").get(0)}var J=[],I=[],G=[],x,z;_.arr.each(w,function(K){if(K.sub&&K.sub.length>1){A(p,K,u,s,y,C)}J[J.length]=u==-1?K.caption:(x=K.cells)?(x=x[u])?x.value:"":K[u];I[I.length]=I.length});if(typeof y!="function"){switch(s){case"number":case"spin":z=function(K){return parseFloat(K)||0};break;case"currency":z=function(K){return parseFloat(K.replace(/,/g,""))||0};break;case"date":z=function(K){return new Date(K).getTime()||0};break;default:z=function(K){return K||""}}y=function(K,L){K=z(J[K]);L=z(J[L]);return(K>L?1:K==L?0:-1)*(C?1:-1)}}I.sort(y);var F=B._inited,H=_.copy(w),E;if(F){J=v.childNodes}_.arr.each(I,function(L,K){w[K]=H[L];if(F){G[K]=J[L]}});if(F){var e=document.createDocumentFragment();for(var D=0;x=G[D];D++){e.appendChild(x)}v.appendChild(e)}});m(i,"",k,q,r,j);i.getSubNode("SORT",true).css("display","none");var h=(g?i.getSubNode("SORT",g._serialId):i.getSubNode("SORT")).css("display","");h.tagClass("-checked",g?(!(g._order=!g._order)):(!(i._order=!i._order)));i.box._asy(i);delete i.$allrowscache;return false},onMousedown:function(d,g,j){var f=d.properties;if(f.disabled){return}var c=d.colMap[d.getSubId(j)];if(!c){return}if(f.disabled||c.disabled){return false}if(!(c.hasOwnProperty("colMovable")?c.colMovable:f.colMovable)){return}if(false===d.boxing().beforeColDrag(d,c.id)){return}var k=linb.Event.getPos(g),i=linb(j),h=d.getSubId(j);i.startDrag(g,{dragType:"icon",shadowFrom:i.parent(),dragCursor:"pointer",targetLeft:k.left+12,targetTop:k.top+12,targetReposition:false,dragDefer:2,dragKey:d.$linbid+":col",dragData:i.parent().id()})},onDragbegin:function(c,d,f){linb(f).parent().onMouseout(true,{$force:true});linb(f).onMouseup(true)},beforeMouseover:function(f,h,i){var g=f.properties,j=f.getSubId(i),d=f.colMap[j];if(!d){return}if(g.disabled||d.disabled){return false}var c=linb.use(i).parent().linbid();if(false===f.box._colDragCheck(f,c)){return}linb.DragDrop.setDropElement(i).setDropFace(i,"move");f.getSubNode("ARROW").left(linb.use(c).get(0).offsetLeft-8).top(linb.use(c).get(0).offsetHeight).css("display","block")},beforeMouseout:function(f,h,i){var g=f.properties,j=f.getSubId(i),d=f.colMap[j];if(!d){return}if(g.disabled||d.disabled){return false}var c=linb.use(i).parent().linbid();linb.DragDrop.setDropElement(null).setDropFace(null,"none");if(false===f.box._colDragCheck(f,c)){return}f.getSubNode("ARROW").css("display","none")},onDrop:function(k,r,c){var i=k.properties,h=k.getSubId(c),j=k.colMap[h];if(!j){return}if(i.disabled||j.disabled){return false}var u=linb.use(c).parent().linbid();k.getSubNode("ARROW").css("display","none");if(false===k.box._colDragCheck(k,u)){return}var q=linb.DragDrop.getProfile().dragData,n=q&&k.getSubId(q),g=k.getSubId(u);var d=k.colMap,m=d[n],f=d[g];if(false===k.boxing().beforeColMoved(k,m.id,f.id)){return}linb.DragDrop.setDropFace(u,"none");var s=_.arr.subIndexOf(i.header,"_serialId",n),l=_.arr.subIndexOf(i.header,"_serialId",g);if(s===l||s===l-1){return}k.getSubNode("HCELL",g).addPrev(linb(linb.DragDrop.getProfile().dragData));_.each(f._cells,function(p,e){k.getSubNode("CELL",p).addPrev(k.getSubNode("CELL",m._cells[e]))});var w=i.header[s];_.arr.insertAny(i.header,w,l);_.arr.removeFrom(i.header,s+(s>l?1:0));var v=k.queryItems(i.rows,true,true);_.arr.each(v,function(e){e=e.cells?e.cells:e;if(!e||e.constructor!=Array){return}w=e[s];_.arr.removeFrom(e,s);_.arr.insertAny(e,w,l)});k.boxing().afterColMoved(k,m.id,f.id);delete k.$allrowscache},onMouseover:function(h,i,c){var f=h.properties,d=h.getSubId(c),g=h.colMap[d];if(g){if(f.disabled||g.disabled){return false}if(!(g.hasOwnProperty("colHidable")?g.colHidable:f.colHidable)){return}}else{if(f.disabled){return false}if(!f.colHidable){return}}_.resetRun(h.$linbid+":collist",null);var k={},j=linb.use(c).parent().offset(null,h.getSubNode("BOX")),l=linb.use(c).parent().cssSize();if(l.width<16){return}k.height=l.height;k.width=14;k.left=j.left;k.top=j.top;h.getSubNode("COLLIST").cssRegion(k).css("visibility","visible")},onMouseout:function(d,g,h){var f=d.properties,i=d.getSubId(h),c=d.colMap[i];if(c){if(f.disabled||c.disabled){return false}if(!(c.hasOwnProperty("colHidable")?c.colHidable:f.colHidable)){return}}else{if(f.disabled){return false}if(!f.colHidable){return}}_.resetRun(d.$linbid+":collist",function(){d.getSubNode("COLLIST").css({visibility:"hidden",left:0,top:0})})}},COLLIST:{onMouseover:function(c,d,f){_.resetRun(c.$linbid+":collist",null)},onMouseout:function(c,d,f){_.resetRun(c.$linbid+":collist",function(){linb.use(f).css("visibility","hidden")})},onClick:function(f,h,i){var g=f.properties;if(!f.$col_pop){var d=[],c;_.arr.each(f.properties.header,function(e){if(e.hasOwnProperty("colHidable")?e.colHidable:g.colHidable){d.push({id:e.id,caption:e.caption,type:"checkbox",value:e.hidden!==true})}});if(d.length){c=f.$col_pop=new linb.UI.PopMenu({hideAfterClick:false,items:d}).render(true);c.onMenuSelected(function(l,j,k){var e=1;_.arr.each(l.properties.items,function(m){if(m.value!==false){return e=false}});if(!e){f.boxing().showColumn(j.id,j.value)}else{l.getSubNodeByItemId("CHECKBOX",j.id).tagClass("-checked");j.value=true}})}}if(f.$col_pop){f.$col_pop.pop(i)}}},CELLS:{afterMouseover:function(c,f,g){var d=c.properties;if(d.disabled){return}if(d.disableHover){return}if(d.activeMode=="row"){linb.use(g).tagClass("-mouseover")}},afterMouseout:function(c,f,g){var d=c.properties;if(d.disabled){return}if(d.disableHover){return}if(d.activeMode=="row"){linb.use(g).tagClass("-mouseover",false)}},onDblclick:function(c,f,h){var d=c.properties,g=c.rowMap[c.getSubId(h)];if(d.disabled||g.disabled){return false}if(c.onDblclickRow){c.boxing().onDblclickRow(c,g,f,h)}return false},onClick:function(c,f,h){var d=c.properties,g=c.rowMap[c.getSubId(h)];if(g.group){c.getSubNode("FCELLCMD",g._serialId).onClick()}}},CELL:{afterMouseover:function(c,f,g){var d=c.properties;if(d.disabled){return}if(d.disableHover){return}if(d.activeMode=="cell"){linb.use(g).tagClass("-mouseover")}},afterMouseout:function(c,f,g){var d=c.properties;if(d.disabled){return}if(d.disableHover){return}if(d.activeMode=="cell"){linb.use(g).tagClass("-mouseover",false)}}},CELLA:{onDblclick:function(f,j,c){var l=f.cellMap[f.getSubId(c)];if(!l){return}if(f.properties.disabled){return}var i=f.box,h=i.getCellPro,k=h(f,l,"type"),g=h(f,l,"disabled"),d=h(f,l,"editable");if(!g&&(!d||(k=="button"||k=="label"))){f.boxing().onDblclickCell(f,l,j,c)}},onClick:function(i,q,c){var g=i.properties,m=i.box,l=m.getCellPro,s=i.cellMap[i.getSubId(c)],f;if(s){if(i.properties.disabled){return}var r=l(i,s,"type"),j=l(i,s,"disabled"),k=l(i,s,"readonly"),d=l(i,s,"event"),n=g.activeMode,h=l(i,s,"editable");if(!j&&(!h||(r=="button"||r=="label"))){if(typeof d=="function"&&false===d.call(i._host||i,i,s,null,null,q,c)){}else{i.boxing().onClickCell(i,s,q,c)}if(r=="button"){return false}}if(!j&&!k&&r=="checkbox"){if(h){m._updCell(i,s,!s.value,g.dirtyMark,true)}}if(!g.editable){if(n=="cell"){if(l(i,s,"disabled")){return false}f=linb(c).parent().id();m._sel(i,"cell",c,f,q)}else{if(n=="row"){if(g.disabled||s._row.disabled){return false}f=linb(c).parent(3).id();m._sel(i,"row",c,f,q)}}}}else{var u=i.rowMap[i.getSubId(c)];if(i.getKey(linb.Event.getSrc(q).id||"")==i.keys.MARK||!u.group){if(g.disabled||u.disabled){return false}if(g.activeMode=="row"){f=linb(c).parent(3).id();m._sel(i,"row",c,f,q)}}if(g.selMode=="none"){i.getSubNode("FCELLCMD",u._serialId).onClick()}}i.box._focuscell(i,q,c);i.$_focusbyclick=1;linb.use(c).focus();delete i.$_focusbyclick},onFocus:function(d,f,h){if(d.$_focusbyclick){delete d.$_focusbyclick}else{d.box._focuscell(d,f,h)}if(d.afterCellFocused){var c=d.cellMap[d.getSubId(h)],g;if(c){g=c._row}else{g=d.rowMap[d.getSubId(h)]}d.boxing().afterCellFocused(d,c,g)}},onKeydown:function(h,w,n){var r=linb.Event.getKey(w),z=r[0],v=r[2],g=linb(n),q=h.getSubNode("BODY"),m=q.nextFocus(true,true,false),p=q.nextFocus(false,true,false);switch(z){case"enter":linb(n).onClick();break;case"tab":if(v){if(n!=m.get(0)){m.focus();return false}}else{if(n!=p.get(0)){p.focus();return false}}break;case"left":if(g.get(0)==m.get(0)){p.focus()}else{g.nextFocus(false)}return false;break;case"right":if(g.get(0)==p.get(0)){m.focus()}else{g.nextFocus()}return false;break;case"up":if(g.get(0)==m.get(0)){p.focus();return}case"down":var k=1,x=g.parent().get(0),u=x.parentNode.childNodes.length;while(x=x.previousSibling){k++}x=g.parent(2).get(0);if(!h.$allrowscache){var f=h.getSubNode("CELLS",true).get();_.filter(f,function(e){return !!e.offsetWidth});h.$allrowscache=f}var l=_.arr.indexOf(h.$allrowscache,x),i=h.$allrowscache.length,y=0;if(z=="up"){l--;if(l==-1){l=i-1;k--;if(k==0){k=u}}}else{l++;if(l==i){y=1;l=0;k++;if(k==u+1){k=1}}}if(y&&h.onNewLineTriggerred){var d=h.cellMap[h.getSubId(n)],j;if(d){j=d._row}else{j=h.rowMap[h.getSubId(n)]}if(false===h.boxing().onNewLineTriggerred(h,d,j)){return false}}var s=linb(h.$allrowscache[l]).first(),c=s;if(k>1){c=c.next(k-1)}if(c.isEmpty()){c=s}if(c&&!c.isEmpty()){c=c.first()}if(!c.isEmpty()){c.focus()}return false;break}}}},DataModel:{directInput:true,listKey:null,selMode:{ini:"none",listbox:["single","none","multi"],action:function(c){this.getSubNodes(["HFMARK","MARK"],true).css("display",c=="multi"?"":"none")}},dock:"fill",altRowsBg:{ini:false,action:function(g){var f=this;var e=f.getClass("ALT"),c=f.getSubNode("CELLS",true),h,d;c.removeClass(e);if(g){h=[];d=0;c.each(function(k,j){if(k.offsetHeight){k=linb([k]);if((d++)%2==1){if(!k.hasClass(e)){k.addClass(e)}}else{if(k.hasClass(e)){k.removeClass(e)}}}});linb(h).addClass(e)}}},rowNumbered:{ini:false,action:function(p){var n=this,k=n.CF.getNumberedStr||function(f){return f},e=n.getSubNode("ROWNUM",true),j=0,d=n.rowMap,u,m=0,h=0,g=[],c=[],s="",q,r;if(p){e.each(function(f){if(f.parentNode.offsetWidth){u=d[n.getSubId(f.id)];h=u._layer;if(h>m){g.push(j);c.push(s);s=s+j+".";j=0}else{if(h<m){while(h<m--){j=g.pop();s=c.pop()}}}j++;m=h;q=k(s+j);if(r=f.firstChild){if(r.nodeValue!=q){r.nodeValue=q}}else{f.appendChild(document.createTextNode(q))}}})}else{e.text("")}}},editable:false,$subMargin:16,iniFold:true,animCollapse:false,position:"absolute",width:300,height:200,_minColW:5,_maxColW:300,_minRowH:20,gridHandlerCaption:{ini:"",action:function(c){this.getSubNode("GRIDCAPTION").get(0).innerHTML=c}},rowHandlerWidth:{ini:50,set:function(c){var d=this;if(d.renderId){d.box._setRowHanderW(d,c)}else{d.properties.rowHandlerWidth=c}}},showHeader:{ini:true,action:function(c){this.getSubNode("HEADER").css("display",c?"":"none")}},headerHeight:{ini:18,action:function(c){this.getSubNode("HCELLS").height(c);linb.UI.$tryResize(this,this.getRoot().width(),this.getRoot().height(),true)}},rowHeight:{ini:20,action:function(c){this.getSubNode("CELLS",true).height(c)}},_colDfWidth:80,rowHandler:{ini:true,action:function(c){this.getSubNode("HFCELL").css("display",c?"":"none");this.getSubNode("FCELL",true).css("display",c?"":"none");this.box._ajdustBody(this)}},rowResizer:{ini:false,action:function(c){this.getSubNode("FHANDLER",true).css("display",c?"":"none")}},colHidable:false,colResizer:{ini:true,action:function(c){this.getSubNode("HHANDLER",true).css("display",c?"":"none")}},colSortable:{ini:true,action:function(c){if(!c){this.getSubNode("SORT",true).css("display","none")}}},colMovable:false,header:{ini:{},set:function(c){var d=this;if(d.renderId){d.boxing()._refreshHeader(c)}else{d.properties.header=_.copy(c)}}},rows:{ini:{},set:function(c){var d=this;if(d.renderId){d.boxing().removeAllRows().insertRows(c)}else{d.properties.rows=_.copy(c)}}},activeMode:{ini:"row",listbox:["row","cell","none"],action:function(d){var c=this;if(d!="cell"&&c.$activeCell){linb(c.$activeCell).tagClass("-active",false);delete c.$activeCell}if(d!="row"&&c.$activeRow){linb(c.$activeRow).tagClass("-active",false);delete c.$activeRow}}},noCtrlKey:true},EventHandlers:{afterCellFocused:function(d,c,e){},onNewLineTriggerred:function(d,c,e){},onGetContent:function(c,d,e){},onRowSelected:function(c,e,d){},beforeColDrag:function(c,d){},beforeColMoved:function(d,e,c){},afterColMoved:function(d,e,c){},beforeRowActive:function(c,d){},afterRowActive:function(c,d){},beforeCellActive:function(d,c){},afterCellActive:function(d,c){},beforeIniEditor:function(e,c,d){},beforeCellUpdated:function(e,c,d){},afterCellUpdated:function(e,c,d){},onDblclickRow:function(c,g,d,f){},beforeComboPop:function(f,d,c,i,g,h){},onClickCell:function(d,c,f,g){},onDblclickCell:function(d,c,f,g){},onClickGridHandler:function(c,d,f){}},RenderTrigger:function(){var d=this,e=d.properties,c=d.boxing();d.destroyTrigger=function(){var f=this,g=f.properties;_.breakO([f.colMap,f.rowMap,f.cellMap],3);g.header.length=0;g.rows.length=0};d.$cache_editor={};if(!e.iniFold){c._toggleRows(e.rows,true)}d.box._asy(d);d.box._ajdustBody(d)},_asy:function(d){var e=d.properties,c=d.boxing(),f=d.$linbid;if(e.altRowsBg){_.resetRun(f+"1",function(){c.setAltRowsBg(true,true)})}if(e.rowNumbered){_.resetRun(f+"2",function(){c.setRowNumbered(true,true)})}},_setRowHanderW:function(e,h){var k=e.properties,f=k.$subMargin,c=e.rowMap,i=e.getSubNode("HFCELL"),d,j;if(typeof h=="number"){j=h}else{if(h===true){var g=[],l;e.getSubNode("FCELLINN",true).each(function(m){if((l=m.parentNode).parentNode.offsetWidth>0&&linb.Dom.getStyle(l,"overflow")!="visible"){if(d=c[e.getSubId(m.id)]){g.push(linb([m]).width()+d._layer*f)}}});g.push(k._minColW);j=parseInt(Math.max.apply(null,g))+f*2}else{j=i.width()}}if(j){if(j<k._minColW){j=k._minColW}if(k.rowHandlerWidth!=j){i.width(k.rowHandlerWidth=j);e.getSubNode("FCELL",true).width(j);e.getSubNode("FCELLRULER",true).each(function(m){d=c[e.getSubId(m.id)];m.style.width=(4+d._layer*f)+"px"});e.box._ajdustBody(e)}}},_onStartDrag:function(c,d,f){var g=linb.Event.getPos(d);c.$_ond=f;linb.use(f).startDrag(d,{dragType:"icon",shadowFrom:linb.use(f).parent()._get(0),targetLeft:g.left+12,targetTop:g.top+12,dragCursor:"pointer",dragDefer:2,dragKey:c.box.getDragKey(c,f),dragData:c.box.getDragData(c,d,f)});return false},_onDropTest:function(d,j,c,n,i,q){var f=i&&i.domId,h=c,l=i&&i.profile,p;if(h){var g=d.getKey(h),m=d.keys,r=d.rowMap[d.getSubId(h)];if(g==m.FCELLCMD&&!r.sub){return false}}if(l&&l.$linbid==d.$linbid){if(f&&d.getSubId(f)==d.getSubId(h)){return false}p=d.$_ond;c=linb(c).get(0);if(_.get(c,["parentNode","previousSibling"])==p){return false}do{if(c==p){c=p=null;return false}}while(c&&(c=c.parentNode)&&c!==document&&c!==window);c=p=null}},_onDragstop:function(d,h,i,c,g,f){delete d.$_ond},_onDrop:function(h,m,f,q,l,s){linb.DragDrop.setDragIcon("none");if(!l.profile||!l.profile[h.KEY]){return}var j=h.getKey(f),g=l.profile,d=l.domId,i,p=h.keys,r=linb.absObj.$specialChars,n=h.boxing(),c=g.rowMap[g.getSubId(d)],u=h.rowMap[h.getSubId(f)];c=_.clone(c,function(k,e){return !r[(e+"").charAt(0)]});g.boxing().removeRows([c.id]);if(j==p.SCROLL){n.insertRows([c],null,null,false)}else{if((j==p.FCELLCMD)&&u.sub){n.insertRows([c],u.id,null,false)}else{if(j==p.CELLS){n.insertRows([c],u._pid,u.id,true)}}}return false},_beforeSerialized:function(e){var g=arguments.callee.upper.call(this,e),c=e.properties,f=linb.absObj.$specialChars,d;g.properties.header=_.clone(c.header,function(j,h){return !f[(h+"").charAt(0)]});g.properties.rows=_.clone(c.rows,function(j,h){return !f[(h+"").charAt(0)]});if(g.properties.header.length===0){delete g.properties.header}if(g.properties.rows.length===0){delete g.properties.rows}return g},_clsCache:{},_colDragCheck:function(f,h){var c=linb.DragDrop.getProfile(),e=c.dragKey,g=c.dragData,d=f.colMap[f.getSubId(h)];if(!(d.hasOwnProperty("colMovable")?d.colMovable:f.properties.colMovable)){return}if(!e||!g||e!=(f.$linbid+":col")){return false}if(g==linb.use(h).id()||g==linb.use(h).prev().id()){return false}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c),f="display:none";c.rowMap2={};c.rowMap={};c.cellMap={};var e=c.properties;d.showHeader=e.showHeader?"":f;d.colDDDisplay=e.colResizer?"":f;d.rowDDDisplay=e.rowResizer?"":f;d.rowHandlerDisplay=e.rowHandler?"":f;d.sortDisplay=f;d.headerHeight=d.headerHeight?("height:"+d.headerHeight+"px;"):"";d._rowMarkDisplay=e.selMode=="multi"?"":"display:none;";if(e.header&&e.header.constructor!=Array){e.header=[]}if(e.rows&&e.rows.constructor!=Array){e.rows=[]}e.header=this._adjustHeader(e.header);d.header=this._prepareHeader(c,e.header);d._row0DfW=d.rowHandlerWidth?("width:"+d.rowHandlerWidth+"px"):"";arguments.callee.upper.call(this,c);e.rows=this._adjustRows(e.rows);d.rows=this._prepareItems(c,e.rows);return d},_prepareHeader:function(d,f){var i=d.colMap2={},h=d.colMap={},c=linb.UI.$tag_subId,j=d.properties,e=[],k,l,g="display:none";_.arr.each(f,function(n,m){k="h_"+d.pickSubId("header");if(typeof n=="string"){n=f[m]={id:n}}if(typeof n.id!="string"){n.id=n.caption||(_()+"")}n._cells={};n[c]=k;h[k]=n;n.width=n.width||j._colDfWidth;l={sortDisplay:g,rowHandlerDisplay:j.rowHandler?"":g};l[c]=k;l._tabindex=j.tabindex;l.colDDDisplay=(("colResizer" in n)?n.colResizer:j.colResizer)?"":"display:none";if(n.hasOwnProperty("visibility")&&!n.hasOwnProperty("hidden")){n.hidden=!n.visibility}l.colDisplay=n.hidden===true?"display:none":"";if(!n.type){n.type="label"}if(!n.caption){n.caption=n.id}linb.UI.adjustData(d,n,l);i[n.id]=k;e.push(l)});return e},_renderCell:function(f,d,r,g){var y=f.box.getCellPro,u=r["linb.Dom"],A=u?d:r,h=y(f,d,"type"),k="",j="",w,s=(!u)&&r.caption,x=/</g,z=arguments.callee,B=z._dcls||(z._dcls=f.getClass("CELL","-disabled")),c=z._rcls||(z._rcls=f.getClass("CELL","-readonly")),e=z._ren||(z._ren=function(E,C,v,D){return(typeof C._$caption=="string"?C._$caption:typeof v.caption=="string"?v.caption:typeof(C.renderer||C._renderer)=="function"?(C.renderer||C._renderer).call(E,C):typeof D=="function"?D(C.value):(_.isSet(C.value)?String(C.value):""))||""}),q=z._f1=(z._f1=function(C){return C?linb.Date.getText(new Date(parseInt(C)),"ymd"):""}),p=z._f2=(z._f2=function(C){return(C.split("\n")[0]||"").replace(/ /g,"&nbsp;").replace(x,"&lt;")}),n=z._f3=(z._f3=function(C){return C*1000/10+"%"}),m=z._f4=(z._f4=function(C){C=C.toFixed(2);C=C.split(".");C[0]=C[0].split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1,").split("").reverse().join("");return C.join(".")});switch(h){case"number":case"spin":var l=parseFloat(d.value);d.value=(l||l===0)?l:"";w=s||e(f,d,A);if(u){r.html(w,false)}break;case"currency":var l=parseFloat((d.value+"").replace(/,/,""));d.value=(l||l===0)?l:"";w=s||e(f,d,A,m);if(u){r.html(w,false)}break;case"datepicker":d.value=+linb.Date.parse(d.value)+"";w=s||e(f,d,A,q);if(u){r.html(w,false)}break;case"textarea":d.value=d.value||"";w=s||e(f,d,A,p);if(u){r.html(w,false)}break;case"colorpicker":d.value="#"+linb.UI.ColorPicker._ensureValue(0,d.value);w=s||e(f,d,A);k=linb.UI.ColorPicker.getTextColor(d.value);if(u){r.html(w,false);r.css("color",k).css("backgroundColor",d.value)}else{r.color="color:"+k+";";r.bgcolor="background-color:"+d.value+";"}break;case"checkbox":d.value=!!d.value;w=d.value+"";if(u){r.first().tagClass("-checked",d.value)}else{r.checkboxCls=f.getClass("CHECKBOX",d.value?"-checked":"")}break;case"progress":d.value=parseFloat(d.value)||0;d.value=Math.min(Math.max(d.value,0),1);w=s||e(f,d,A,n);if(u){r.first().html(w,false).width(w)}else{r.progress=w}break;default:d.value=d.hasOwnProperty("value")?d.value:"";w=s||e(f,d,A);if(u){r.html((w===null||w===undefined)?d.value:w,false)}}d._$tips=w;var j=d.disabled||d._row.disabled||d._col.disabled,i=d.readonly||d._row.readonly||d._col.readonly;if(!u){r.cellCls=f.getClass("CELL","-"+h)+(j?(" "+B):"")+(i?(" "+c):"");r.type=h;r.value=d.value;r.caption=w;r.cellStyle=y(f,d,"cellStyle");r.cellClass=y(f,d,"cellClass")}else{if(j){r.addClass(B)}else{r.removeClass(B)}if(j=g.cellStyle){r.attr("style",r.attr("style")+";"+j)}if(j=g.cellClass){r.addClass(j)}}},_prepareItems:function(e,c,u){var w=this,n=e.properties,A=n.$subMargin,G=e.rowMap2,E=e.rowMap,D=e.cellMap,s=u?E[u]?(E[u]._layer+1):0:0,h=linb.UI.$tag_subId,H=arguments.callee,F=H._id||(H._id=new _.id()),p=[],C,f,r,k,B,y,q,m="display:none";for(var z=0,x=c.length;z<x;z++){if(!c[z].id||G[c[z].id]){while(G[r=F.next()]){}c[z].id=r}k=c[z];C="r_"+e.pickSubId("row");k[h]=C;E[C]=k;k._pid=u;k._cells={};k._layer=s;k._tabindex=n.tabindex;k._rowMarkDisplay=n.selMode=="multi"?"":m;r={id:k.id};r.rowCls="";if(k.disabled){r.rowCls+=e.getClass("CELLS","-disabled")}if(k.readonly){r.rowCls+=e.getClass("CELLS","-readonly")}if(k.group){r.rowCls+=e.getClass("CELLS","-group")}if(k.summary){r.summaryDisplay="display:block;"}if(k.preview){r.previewDisplay="display:block;"}r._row0DfW=n.rowHandlerWidth?("width:"+n.rowHandlerWidth+"px"):"";r._rulerW=4+s*A;r.rowHeight=k.height||n.rowHeight;r.rowHandlerDisplay=n.rowHandler?"":m;r.rowDDDisplay=(("rowResizer" in k)?k.rowResizer:n.rowResizer)?"":m;f=r.cells=[];r[h]=C;r.subClass=k.sub?"uicmd-toggle2":"uicmd-empty";G[k.id]=C;if(k.group){k.cells=null}if(!k.hasOwnProperty("caption")&&k.hasOwnProperty("value")){k.caption=""+k.value}if(k.caption&&!k.tips){k._$tips=k.caption}if(q=k.cells){_.arr.each(n.header,function(d,g){B=q[g]||(q[g]={});var i={};B._row=k;B._col=d;B[h]="c_"+e.pickSubId("cell");B.id=B.id||B[h];w._adjustCell(e,B,i);f.push(i);D[i[h]]=B;k._cells[d.id]=i[h];d._cells[k.id]=i[h]})}linb.UI.adjustData(e,k,r);p.push(r)}return p},_adjustCell:function(f,c,i){var d=this,h=f.properties,e=c._col,g;if(g=d.getCellPro(f,c,"cellRenderer")){c._renderer=g}linb.UI.adjustData(f,c,i);c._value=c.value;if(!i.width){i.width=e.width}i._tabindex=h.tabindex;i.cellDisplay=e.hidden===true?"display:none;":"";d._renderCell(f,c,i)},_setSub:function(g,s,m){var e=g.domId,n=g.properties,i=g.rowMap2[s.id],j=g.getSubNode("FCELLCMD",i),l=g.getSubNode("SUB",i);if(linb.Thread.isAlive(g.key+g.id)){return}if(s._checked){if(!m){var k=l.height();if(n.animCollapse){l.animate({height:[k,0]},null,function(){l.css({display:"none"})},100,5,"expoIn",g.key+g.id).start()}else{l.css({display:"none",height:0})}j.tagClass("-checked",false);s._checked=false;g.box._asy(g)}}else{if(m){var f=function(w,B,u,x,z,r){var A=w.boxing(),v=w.properties;if(!B._inited){delete B.sub;B._inited=true;if(typeof r=="string"){z.html(B.sub=r,false)}else{if(_.isArr(r)){A.insertRows(r,B.id)}else{if(r["linb.Template"]||r["linb.UI"]){z.append(B.sub=r.render(true))}}}A._setCtrlValue(A.getUIValue(),true)}var y=z.height(true);if(v.animCollapse){z.animate({height:[0,y]},function(){z.css({display:""})},function(){z.css({height:"auto"})},100,5,"expoOut",w.key+w.id).start()}else{z.css({display:"",height:"auto"})}x.tagClass("-checked");B._checked=true;w.box._asy(w)};var d=s.sub,p=function(h){f(g,s,e,j,l,h)},q;if((q=typeof d)=="string"||q=="object"){p(d)}else{if(g.onGetContent){var c=g.boxing().onGetContent(g,s,p);if(c){if(c===true){s._inited=true}p(c)}}}}}delete g.$allrowscache},_getCellId:function(c,e,d){return _.get(c.rowMap,[c.rowMap2[e],"_cells",d])},_updCell:function(e,c,m,l,i){var f=e.box,j=e.properties.dirtyMark,h=linb.absObj.$specialChars,k,d;if(typeof c=="string"){k=e.cellMap[c]}else{k=c;c=k._serialId}if(!k){return}if(!_.isHash(m)){m={value:m}}m=_.filter(m,function(p,n){return !h[n.charAt(0)]||n=="_$caption"});if(i&&false===e.boxing().beforeCellUpdated(e,k,m)){return}delete k.caption;_.merge(k,m,"all");d=e.getSubNode("CELLA",c);if("type" in m){var g={};f._adjustCell(e,k,g);d.parent().replace(e._buildItems("rows.cells",[g]))}else{f._renderCell(e,k,d,m)}if("value" in m){if(!j||l===false){k._value=k.value}else{if(k.value===k._value){d.removeClass("ui-dirty");delete k.dirty}else{d.addClass("ui-dirty");k.dirty=true}}}if(i){e.boxing().afterCellUpdated(e,k,m)}},_ensureValue:function(d,e){if(d.properties.selMode=="multi"){var c=(e||"").split(";");c.sort();return c.join(";")}else{return e}},_sel:function(f,g,j,q,w){var k=f.properties;if(k.activeMode!=g){return}var d=f.getSubId(q),x=g=="cell"?f.cellMap:f.rowMap,m=f.boxing(),l=x[d],y=linb.Event.getKey(w),h=g=="cell"?(l._row.id+"|"+l._col.id):l.id,n=k.selMode;switch(n){case"none":m.onRowSelected(f,l,j);break;case"multi":var s=m.getUIValue(),c=s?s.split(";"):[];if(c.length&&(y[1]||y[2]||k.noCtrlKey)){if(y[2]&&g=="row"){if(f.$firstV._pid!=l._pid){return false}var p=k.rows;if(l._pid){var z=x[l._pid];if(z){p=z.sub}}var u=_.arr.subIndexOf(p,"id",f.$firstV.id),r=_.arr.subIndexOf(p,"id",l.id),v;c.length=0;for(v=Math.min(u,r);v<=Math.max(u,r);v++){c.push(p[v].id)}}else{if(_.arr.indexOf(c,h)!=-1){_.arr.removeValue(c,h)}else{c.push(h)}}c.sort();s=c.join(";");if(m.getUIValue()!=s){m.setUIValue(s);if(m.get(0)&&m.getUIValue()==s){m.onRowSelected(f,l,j)}}break}case"single":if(m.getUIValue()!=h){f.$firstV=l;m.setUIValue(h);if(m.get(0)&&m.getUIValue()==h){m.onRowSelected(f,l,j)}}break}},_activeCell:function(e,g){if(e.properties.activeMode!="cell"){return}if(e.$activeCell==g){return}if(g!==false){var d=e.getSubId(g),f=e.cellMap,c=f[d];if(e.beforeCellActive&&(false===e.boxing().beforeCellActive(e,c))){return}}if(e.$activeCell){linb(e.$activeCell).tagClass("-active",false)}linb(e.$activeCell=g).tagClass("-active");if(g!==false){e.boxing().afterCellActive(e,c)}},_activeRow:function(e,g){if(e.properties.activeMode!="row"){return}if(e.$activeRow==g){return}if(g!==false){var c=e.getSubId(g),f=e.rowMap,d=f[c];if(e.beforeRowActive&&(false===e.boxing().beforeRowActive(e,d))){return}}if(e.$activeRow){linb(e.$activeRow).tagClass("-active",false)}linb(e.$activeRow=g).tagClass("-active");if(g!==false){e.boxing().afterRowActive(e,d)}},getCellPro:function(f,c,e){var d=c;return(e in d)?d[e]:((d=c._row)&&(e in d))?d[e]:((d=c._col)&&(e in d))?d[e]:((d=f.properties)&&(e in d))?d[e]:null},_editCell:function(i,x){var f=typeof x=="string"?i.cellMap[x]:x;if(!f){return}x=f._serialId;if(i.box.getCellPro(i,f,"disabled")||i.box.getCellPro(i,f,"readonly")){return}var n=i.getSubNode("CELL",x),g=f._col.id,m=i.$curEditor;if(m){_.tryF(m.undo,[],m)}m=null;var e=this,d=i.getSubNode("SCROLL"),p=i.box,v=function(y){return p.getCellPro(i,f,y)},k=v("type"),q;if(k=="checkbox"){n.first().focus();return}else{if(k=="button"||k=="label"){return}}if(i.$cache_editor[k]){m=i.$cache_editor[k]}else{if(i.beforeIniEditor){m=i.boxing().beforeIniEditor(i,f,n);if(m===false){return}}if(!m||!m["linb.UI"]){m=new linb.UI.ComboInput({dirtyMark:false,cachePopWnd:false,left:-1000,top:-1000,position:"absolute",visibility:"hidden",zIndex:100})}switch(k){case"number":case"spin":case"currency":m.setType(k);break;case"progress":m.setType("spin").setMax(1).setMin(0).setPrecision(4).setIncrement(0.01);break;case"input":m.setType("none");break;case"textarea":m.setType("none").setMultiLines(true).setCommandBtn("save").onCommand(function(y){y.boxing().hide()});_.tryF(m.setResizer,[true],m);break;case"listbox":case"combobox":case"helpinput":case"timepicker":case"datepicker":case"colorpicker":case"getter":case"popbox":case"cmdbox":m.setType(k).beforeComboPop(function(C,D,A,B){var y=C.$cell,z=i.box.getCellPro(i,y,"event");if(i.box.getCellPro(i,y,"disabled")){return false}if(typeof z=="function"){return z.call(i._host||i,i,y,C,D,A,B)}else{return i.boxing().beforeComboPop(i,y,C,D,A,B)}});break}d.append(m);i.$cache_editor[k]=m}switch(k){case"listbox":case"combobox":case"helpinput":if(q=v("editorListItems")){m.setListKey(null);m.setItems(q)}else{if(q=v("editorListKey")){m.setItems(null);m.setListKey(q)}}break}m.setValue(f.$editorValue||f.value,true);delete f.$editorValue;var h=v("editorProperties"),l=v("editorFormat"),u=v("editorMask"),w=v("editorReadonly"),s=v("editorDropListWidth"),j=v("editorDropListHeight");if(f.$tag){if(m.setCaption){m.setCaption(f.$tag)}else{if(m.setValue){m.setValue(f.$tag)}}}if(m.setInputReadonly&&w){m.setInputReadonly(true)}if(m.setDropListWidth&&s){m.setDropListWidth(s)}if(m.setDropListHeight&&j){m.setDropListHeight(j)}if(l){if(typeof l=="function"&&m.beforeFormatCheck){m.beforeFormatCheck(l)}else{if(typeof l=="string"&&m.setValueFormat){m.setValueFormat(l)}}}if(u&&m.setMask){m.setMask(u)}if(h){m.setProperties(h)}m.get(0).$cell=f;m.setTag("smartnav");m.undo=function(){var y=this;y.getSubNode("INPUT").onBlur(true);i.$curEditor=null;y.getRoot().setBlurTrigger(i.$linbid);if(!i.properties.directInput){y.afterUIValueSet(null).beforeNextFocus(null);if(y.beforeFormatCheck){y.beforeFormatCheck(null)}if(y.setValueFormat){y.setValueFormat("")}if(y.setMask){y.setMask("")}y.setValue("",true)}delete y.get(0).$cell;y.reBoxing().hide()};m.afterUIValueSet(function(C,A,z){var B=v("type"),y;switch(B){case"number":case"spin":z=parseFloat(z)||0;break;case"currency":z=parseFloat(z.replace(/,/g,""))||0;break;case"cmdbox":case"popbox":case"combobox":case"listbox":case"helpinput":y=C.boxing().getShowValue();break}e._updCell(i,x,{value:z,_$caption:y},i.properties.dirtyMark,true)}).beforeNextFocus(function(A,z){if(m){_.tryF(m.undo,[],m);var y=linb.Event.getEventPara(z);if(y.keyCode=="enter"){y.keyCode="down"}i.getSubNode("CELLA",f._serialId).onKeydown(true,y)}return false}).getRoot().setBlurTrigger(i.$linbid,function(){if(m){_.tryF(m.undo,[],m)}return false});var c=n.offset(null,d),r=n.cssSize();if(k=="textarea"){m.setWidth(Math.max(200,r.width+3)).setHeight(Math.max(100,r.height+2)).reLayout(true,true).reBoxing().popToTop(n,4,d)}else{m.setWidth(r.width+3).setHeight(r.height+2).reLayout(true);m.reBoxing().show((c.left-1)+"px",(c.top-1)+"px")}i.$curEditor=m;_.asyRun(function(){_.tryF(m&&m.activate,[],m)})},_ajdustBody:function(c){_.resetRun(c.$linbid+"4",function(){var i=c.getSubNode("BODY"),h=c.getSubNode("HCELLS"),n,f,k,m=c.keys;if(i.get(0).offsetHeight){if(h.get(0).offsetHeight){if(n=h.get(0).childNodes){f=n.length;while(f){if(n[f-1].offsetHeight){k=n[f-1];break}--f}}h.parent().width(k?(k.offsetWidth+k.offsetLeft+100):0)}else{if(n=i.get(0).childNodes){f=n.length;while(f){if(n[f-1].offsetHeight){k=n[f-1];break}--f}if(k){var e=c.getSubId(k.id);n=c.getSubNode("CELLS",e);if(n=n.get(0).childNodes){f=n.length;while(f){if(n[f-1].offsetHeight){k=n[f-1];break}--f}}}}}}if(k){i.width(k.offsetWidth+k.offsetLeft)}else{var d=c.properties,g=d.header,p=d.rows,j=d.rowHandler?(d.rowHandlerWidth+2):0;_.each(g,function(l){if(l.hidden!==true){j+=l.width+2}});i.width(j)}n=k=null})},_adjustHeader:function(d){var e=_.copy(d),c;_.arr.each(e,function(g,f){e[f]=_.copy(g)});return e},_adjustRows:function(d){var e,c;if(_.isArr(d)&&d.length&&typeof d[0]!="object"){e=[d]}else{e=_.copy(d)}_.arr.each(e,function(g,f){if(_.isArr(g)){e[f]={cells:g}}else{e[f]=_.copy(g)}c=e[f].cells=_.copy(e[f].cells);_.arr.each(c,function(j,h){if(!!j&&typeof j=="object"&&j.constructor==Object){c[h]=_.copy(j)}else{c[h]={value:j}}})});return e},_focuscell:function(g,k,c){if(g.properties.disabled||g.properties.readonly){return}var f=g.properties,i=g.box,h=i.getCellPro,m=g.cellMap[g.getSubId(c)],j=f.activeMode,d;if(m){var l=false;if(h(g,m,"editable")){if(h(g,m,"disabled")||h(g,m,"readonly")){l=false}else{l=true;i._editCell(g,m._serialId);_.asyRun(function(){linb.use(c).parent().onMouseout(true,{$force:true}).parent().onMouseout(true,{$force:true})})}}if(!l){if(m&&j=="cell"){d=linb.use(c).parent().id();i._activeCell(g,d)}}else{if(m&&j=="cell"){i._activeCell(g,false)}}}if(j=="row"){d=linb.use(c).parent(2).id();i._activeRow(g,d)}},_showTips:function(f,e,h){if(f.properties.disableTips){return}if(f.onShowTips){return f.boxing().onShowTips(f,e,h)}if(!linb.Tips){return}var i=f.keys,k,j=i.HCELL+":",d,c,g;if(f.properties.disabled){return}c=e.id;g=e.parentNode.id;d=f.getSubId(c);if(c.indexOf(i.FCELL)==0||g.indexOf(i.FCELL)==0){k=f.rowMap[d]}else{if(c.indexOf(i.HCELL)==0||g.indexOf(i.HCELL)==0){k=f.colMap[d]}else{if(c.indexOf(i.CELL)==0||g.indexOf(i.CELL)==0){k=f.cellMap[d]}}}if(k){linb.Tips.show(h,("tips" in k)?k.tips:(k._$tips||k.caption))}else{linb.Tips.hide()}return true},_onresize:function(g,f,c){g.getSubNode("BORDER").cssSize({width:f,height:c});var h=g.getSubNode("HEADER"),e=g.getSubNode("SCROLL"),d=0;g.getSubNode("BOX").cssSize({width:f,height:c});if(f){h.width(f)}if(c){d=h.offsetHeight()}e.cssSize({width:f,height:c?(c-d):null});_.asyRun(function(){e.onScroll()})}}});Class("linb.UI.TextEditor",["linb.UI.Widget","linb.absValue"],{Instance:{activate:function(){var c=this.get(0);c.getSubNode("INPUT").focus();return this},_setCtrlValue:function(c){if(_.isNull(c)||!_.isDefined(c)){c=""}return this.each(function(e){var f=e.getSubNode("INPUT").get(0);if(f.value.replace(/(\r\n|\r)/g,"\n")!=c.replace(/(\r\n|\r)/g,"\n")){var d=f.scrollTop;f.value=c;f.scrollTop=d}})},_getCtrlValue:function(d){var c=this.get(0);return c.getSubNode("INPUT").attr("value").replace(/(\r\n|\r)/g,"\n").replace(/( +)(\n)/g,"$2").replace(/\t/g,"    ")}},Initialize:function(){var c=this.getTemplate();_.merge(c.FRAME.BORDER,{BOX:{tagName:"div",INPUT:{tagName:"textarea",tabindex:"{tabindex}",style:"{_css}"}},BAK1:{},BAK2:{tagName:"div"}},"all");this.setTemplate(c)},Static:{Appearances:{BOX:{width:"100%",height:"100%",left:0,top:0,position:"absolute",overflow:linb.browser.gek?"auto":"","z-index":"10"},INPUT:{"font-family":"Courier New, Courier, monospace","font-size":"12px","line-height":"14px",position:"absolute","background-color":"#fff",left:0,top:0,border:0,margin:0,padding:0,overflow:"auto","overflow-y":"auto","overflow-x":"hidden"},"BAK1, BAK2":{"font-family":"Courier New, Courier, monospace","font-size":"12px",position:"absolute",visibility:"hidden",left:"-10000px",top:"-10000px"}},Behaviors:{INPUT:{onFocus:function(c,d,f){c.box._onchange(c,linb.use(f).get(0))},onChange:function(c,d,f){c.boxing().setUIValue(linb.use(f).get(0).value);c.box._onchange(c,linb.use(f).get(0))},afterKeydown:function(h,l,d){var n=h.properties,m,q;if(n.disabled||n.readonly){return}if(h.$change){delete h.$change}var p=linb.Event.getKey(l),g=linb.use(d).get(0),i=p[0];switch(i){case"tab":var c=linb.use(d).caret(),f=g.value.slice(c[0],c[1]);if(/(\n|\r)/.test(f)){m=g.value.slice(0,c[0]);if(f.charAt(0)!="\n"&&f.charAt(0)!="\r"){f=m.slice(c[0]=m.lastIndexOf("\n"))+f}if(linb.browser.ie){q=(q=m.match(/\r/g))?q.length:0;c[0]-=q;q=(q=(g.value.slice(0,c[1])).match(/\r/g))?q.length:0;c[1]-=q}linb.use(d).caret(c[0],c[1]);if(p[2]){f=f.replace(/(\n|\n\r)    /g,"$1")}else{f=f.replace(/(\n|\n\r)/g,"$1    ")}h.box.insertAtCaret(h,f);c[1]=c[0]+f.length;if(linb.browser.ie){q=(q=f.match(/\r/g))?q.length:0;c[1]-=q}linb.use(d).caret(c[0],c[1])}else{if(p[2]){linb.use(d).caret(c[0]-4,c[0]-4);c[0]-=4;c[1]-=4}else{h.box.insertAtCaret(h,"    ");c[0]+=4;c[1]+=4}}h.$pos=c;return false;case"enter":var s=h.box.getParas(h);m=s[1];var j=m.length-_.str.ltrim(m).length;if(m.charAt(m.length-1)=="{"){j+=4}if(j){h.box.insertAtCaret(h,"\n"+_.str.repeat(" ",j));h.$enter=true;return false}break;default:if(h.tips){h.tips.destroy();h.tips=null}}g=null},afterKeypress:function(f,i,c){if(f.properties.disabled||f.properties.readonly){return}var p=linb.Event.getKey(i),g=p[0];var l=arguments.callee,d=l.map||(l.map={space:1,enter:1,backspace:1,tab:1,"delete":1});if(g.length==1||d[g]){f.$change=true}switch(g){case"tab":if(linb.browser.opr){_.asyRun(function(){linb.use(c).caret(f.$pos[0],f.$pos[1])})}return false;case"enter":if(f.$enter){delete f.$enter;return false}case"}":if(p[2]){var r=f.box.getParas(f);var h=r[0],j=r[1],m=r[2],n=r[3];if(/ {4}$/.test(j)){var q=linb(c).scrollTop();n.value=n.value.substr(0,h).replace(/ {4}$/,"}")+n.value.substr(h,n.value.length);linb(n).onChange();f.box.setCaretTo(n,h-4+1,q);return false}}break}},afterKeyup:function(f,i,j){var d=linb.Event.getKey(i),c=d[0];var g=arguments.callee,h=g.map||(g.map={space:1,enter:1,backspace:1,tab:1,"delete":1});if(c.length==1||h[c]){f.$change=true}if(f.$change){delete f.$change;f.box._onchange(f,linb.use(j).get(0))}}}},DataModel:{left:0,top:0,width:200,height:200,position:"absolute",disabled:{ini:false,action:function(c){b.boxing().setReadonly(c)}},readonly:{ini:false,action:function(c){this.getSubNode("INPUT").attr("readonly",c).css("background",c?"#EBEADB":"")}}},EventHandlers:{onChange:function(e,d,c){}},RenderTrigger:function(){var c=this;if(c.properties.readonly){c.boxing().setReadonly(true,true)}var g=linb.browser.ie,e=c.getSubNode("INPUT").get(0),d=function(h){if(g&&h.propertyName!="value"){return true}var f=g?h.srcElement:this;c.box._onchange(c,f)};if(g){e.attachEvent("onpropertychange",d);e.attachEvent("ondrop",d);c.$ondestory=function(){e.detachEvent("onpropertychange",d);e.detachEvent("ondrop",d)}}else{e.addEventListener("input",d,false);e.addEventListener("dragdrop",d,false);c.$ondestory=function(){e.removeEventListener("input",d,false);e.addEventListener("dragdrop",d,false)};c.getSubNode("BOX").$firfox2()}},_onchange:function(d,e){if(d.onChange){var c=e.id;_.resetRun(d.$linbid+"_drop",function(){c=linb.Dom.byId(c).value||"";d.$prevV=d.$prevV||"";if(c!=d.$prevV){d.boxing().onChange(d,d.$prevV,c);d.$prevV=c}})}},_prepareData:function(c){var e=arguments.callee.upper.call(this,c);if(linb.browser.kde){e._css="resize:none;"}return e},_onresize:function(f,e,c){var d=arguments.callee.upper.apply(this,arguments);f.getSubNode("BOX").cssSize(d);f.getSubNode("INPUT").cssSize(d)},insertAtCaret:function(e,g){var c=e.getSubNode("INPUT"),f=c.scrollTop()||null,d;c.onChange();d=c.caret(g);this.setCaretTo(c.get(0),d||0,f)},setCaretTo:function(d,k,g){d.focus();var f,j,e,i=linb([d]);if(_.isNumb(g)){i.scrollTop(g)}if(g===true){if(i.get(0).tagName.toLowerCase()=="textarea"&&i.scrollHeight()!==i.offsetHeight()){f=i.attr("value").substr(0,k);j=i.clone().id("").css({visibility:"hidden",position:"absolute",left:5000+"px"}).attr("value",f);linb("body").append(j);e=Math.max((j.scrollHeight()>j.offsetHeight())?j.scrollHeight()-30:0,0);i.scrollTop(e);j.remove()}}i.caret(k,k)},getParas:function(e){var u=e.getSubNode("INPUT"),C=arguments.callee,f=C.reg||(C.reg=/\r\n/g),p=u.get(0).value,i=u.caret();if(i[0]<0){i[0]=0}var B=0,A=p.substr(0,i[0]).match(f);if(A){B=A.length}p=p.replace(f,"\n");var r=p.substr(0,i[0]-B);var q=r.lastIndexOf("\n"),k=r.substr(q+1,i[0]-q),n=u.innerWidth(),z=e.getSubNode("BAK1"),s=e.getSubNode("BAK2");if(r.charAt(r.length-1)=="\n"){r+="*"}s.width(n);var j=z.html(k.replace(/ /g,"&nbsp;"),false).width(),h=s.html(r.replace(/\n/g,"<br />"),false).height()-u.scrollTop();if(j>n){s.html(k,false);var c=k;var d=s.height();while(c){c=c.replace(/ [^ ]*$/,"");s.html(c,false);if(s.height()!=d){break}}c=k.substr(c.length,k.length-c.length);j=z.html(c,true).width()}z.html("",false);s.html("",false);var g=e.getRoot().offset();g.left+=j;g.top+=h;return[i[0],k,g,u.get(0),r]}}});Class("linb.Coder",null,{Initialize:function(){linb.CSS.addStyleSheet('.sh {font-family: "Courier New" , Courier, mono;font-size: 12px;border: 1px solid #92D1E4;background:#fff;}.sh .sh-con{padding-bottom:3px;background-color: #fff;}.sh .sh-cmd{padding: 3px 8px 3px 8px;font: 9px Verdana, Geneva, Arial, Helvetica, sans-serif;color: silver;border-bottom: 1px solid #EBEADB;}.sh .sh-cmd a{font-size: 12px;color: blue;text-decoration: none;margin-right: 10px;}.sh .sh-cmd a:hover{color: red;}.sh .cmd-ruler{width:25px;}.sh .sh-toggle{width:16px;cursor:pointer;font-size:14px;color:blue;vertical-align:baseline;}.sh ol{color: #FF97A9; margin: 0px 0px 0px 45px; padding: 0; border-bottom: 1px solid #EBEADB; }.sh ol li{color: #000157;border-left: 3px solid #6CE26C;padding-left: 10px;line-height: 14px;list-style: decimal none;margin:0;border-bottom: 1px dashed #E2E2E2;}.sh-con span{vertical-align:inherit;'+(linb.browser.ie?"zoom:0;":"")+"}.sh .js .comment, .sh .php .comment{ color: green; }.sh .js .string, .sh .php .string{ color: #ff1493; }.sh .js .reg, .sh .php .reg{ color: #ff1493; }.sh .js .number,.sh .php .number { color: darkred; }.sh .js .keyword, .sh .php .keyword{ color: blue; }.sh .js .keyword2, .sh .php .keyword2 { font-weight: bold; color: red; }.sh .js .special, .sh .php .special{ font-weight: bold; color: navy; }.sh .php .vars{color:#079BFA}.sh .css .comment { color: green; }.sh .css .string { color: red; }.sh .css .colors { color: darkred; }.sh .css .vars { color: #d00; }.sh .css .number { color: blue; }.sh .css .keyword {color:teal;}.sh .css .selector {font-weight: bold; color: navy;}.sh .html .comment { color: green; }.sh .html .string{ color: #ff1493; }.sh .html .script{ color: #ff1493; }.sh .html .attr { color: blue; }.sh .html .speical{color:#079BFA}.sh .html .tag { font-weight: bold; color: navy; }",this.KEY);this._profiles={js:{multicomment:this.$COM_REG.BLOCK_COMMENT,comment:this.$COM_REG.LINE_COMMENT,reg:this.$COM_REG.REG,string1:this.$COM_REG.DQ_STRING,string2:this.$COM_REG.SQ_STRING,number:this.$COM_REG.NUMBER,keyword:"try|throw|catch|finally|arguments|break|case|continue|default|delete|do|else|false|for|function|if|in|instanceof|new|null|return|switch|this|true|typeof|var|void|while|with|toString|valueOf|window|prototype|document|escape|unescape|parseInt|parseFloat|setTimeout|clearTimeout|setInterval|clearInterval|NaN|isNaN|Infinity|Error",keyword2:"exists|isNull|isObj|isEmpty|isArr|isBool|isDate|isFun|isHash|isNumb|isStr|_.arr|_.bool|_.cls|_.date|_.fun|_.hash|_.numb|_.str|_.id|_|alias|host|append|toArr|breakO|tryF|each|copy|clone|filter|asyRun|resetRun|merge|each|swap|removeFrom|filter|indexOf|clean|insertAny|serialize|unserialize|Class|Instance|Initialize|Before|After|Static|Constructor|reBoxing|copy|clone|left|top|right|bottom|startWith|endWith|initial|trim|ltrim|rtrim|blen|toDom|create",special:/linb[\w\.]*|(\bon|before|after|set|get)[A-Z]\w*/},css:{multicomment:this.$COM_REG.BLOCK_COMMENT,string:[this.$COM_REG.DQ_STRING,this.$COM_REG.SQ_STRING],IGNORE:/\([^'")]*\)/,keyword:[/@\w[\w.\s]*/,/attr|rect|rgb|url/],selector:/[\w-:\[.#][^{};]*\{/,colors:/\#[a-zA-Z0-9]{3,6}/,number:[/(\d*\.?\d+|\d+\.?\d*)(cm|em|ex|pt|px|%|\:)?/],vars:[/(-[\w-]+)\s*[ ]*:/,/([\w-]+)\s*[ ]*:/]},php:{multicomment:this.$COM_REG.BLOCK_COMMENT,comment:this.$COM_REG.LINE_COMMENT,reg:this.$COM_REG.REG,string:[this.$COM_REG.DQ_STRING,this.$COM_REG.SQ_STRING],number:this.$COM_REG.NUMBER,keyword:"abs|acos|acosh|addcslashes|addslashes|array_change_key_case|array_chunk|array_combine|array_count_values|array_diff|array_diff_assoc|array_diff_key|array_diff_uassoc|array_diff_ukey|array_fill|array_filter|array_flip|array_intersect|array_intersect_assoc|array_intersect_key|array_intersect_uassoc|array_intersect_ukey|array_key_exists|array_keys|array_map|array_merge|array_merge_recursive|array_multisort|array_pad|array_pop|array_product|array_push|array_rand|array_reduce|array_reverse|array_search|array_shift|array_slice|array_splice|array_sum|array_udiff|array_udiff_assoc|array_udiff_uassoc|array_uintersect|array_uintersect_assoc|array_uintersect_uassoc|array_unique|array_unshift|array_values|array_walk|array_walk_recursive|atan|atan2|atanh|base64_decode|base64_encode|base_convert|basename|bcadd|bccomp|bcdiv|bcmod|bcmul|bindec|bindtextdomain|bzclose|bzcompress|bzdecompress|bzerrno|bzerror|bzerrstr|bzflush|bzopen|bzread|bzwrite|ceil|chdir|checkdate|checkdnsrr|chgrp|chmod|chop|chown|chr|chroot|chunk_split|class_exists|closedir|closelog|copy|cos|cosh|count|count_chars|date|decbin|dechex|decoct|deg2rad|delete|ebcdic2ascii|echo|empty|end|ereg|ereg_replace|eregi|eregi_replace|error_log|error_reporting|escapeshellarg|escapeshellcmd|eval|exec|exit|exp|explode|extension_loaded|feof|fflush|fgetc|fgetcsv|fgets|fgetss|file_exists|file_get_contents|file_put_contents|fileatime|filectime|filegroup|fileinode|filemtime|fileowner|fileperms|filesize|filetype|floatval|flock|floor|flush|fmod|fnmatch|fopen|fpassthru|fprintf|fputcsv|fputs|fread|fscanf|fseek|fsockopen|fstat|ftell|ftok|getallheaders|getcwd|getdate|getenv|gethostbyaddr|gethostbyname|gethostbynamel|getimagesize|getlastmod|getmxrr|getmygid|getmyinode|getmypid|getmyuid|getopt|getprotobyname|getprotobynumber|getrandmax|getrusage|getservbyname|getservbyport|gettext|gettimeofday|gettype|glob|gmdate|gmmktime|ini_alter|ini_get|ini_get_all|ini_restore|ini_set|interface_exists|intval|ip2long|is_a|is_array|is_bool|is_callable|is_dir|is_double|is_executable|is_file|is_finite|is_float|is_infinite|is_int|is_integer|is_link|is_long|is_nan|is_null|is_numeric|is_object|is_readable|is_real|is_resource|is_scalar|is_soap_fault|is_string|is_subclass_of|is_uploaded_file|is_writable|is_writeable|mkdir|mktime|nl2br|parse_ini_file|parse_str|parse_url|passthru|pathinfo|readlink|realpath|rewind|rewinddir|rmdir|round|str_ireplace|str_pad|str_repeat|str_replace|str_rot13|str_shuffle|str_split|str_word_count|strcasecmp|strchr|strcmp|strcoll|strcspn|strftime|strip_tags|stripcslashes|stripos|stripslashes|stristr|strlen|strnatcasecmp|strnatcmp|strncasecmp|strncmp|strpbrk|strpos|strptime|strrchr|strrev|strripos|strrpos|strspn|strstr|strtok|strtolower|strtotime|strtoupper|strtr|strval|substr|substr_compare",keyword2:"and|or|xor|__FILE__|__LINE__|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|old_function|return|static|switch|use|require|require_once|var|while|__FUNCTION__|__CLASS__|__METHOD__|abstract|interface|public|implements|extends|private|protected|throw",vars:/\$\w+/},html:{multicomment:this.$COM_REG.HTML_COMMENT,tag:/\x02\/?\w+/,attr:/\w+=/,script:/(>([^<][^\/]*<+)*\/)(script|style)>/,special:/<!DOCTYPE[^>]+>/,string:[this.$COM_REG.DQ_STRING,this.$COM_REG.SQ_STRING]}}},Static:{$COM_REG:{HTML_COMMENT:/<!\s*(--([^-]|[\r\n]|-[^-])*--\s*)>/,BLOCK_COMMENT:/\/\*[^*]*\*+([^\/][^*]*\*+)*\//,LINE_COMMENT:/\/\/[^\n]*/,REG:/\/(\\[\/\\]|[^*\/])(\\.|[^\/\n\\])*\/[gim]*/,DQ_STRING:/"(\\.|[^"\\])*"/,SQ_STRING:/'(\\.|[^'\\])*'/,NUMBER:/-?(\d*\.?\d+|\d+\.?\d*)([eE][+-]?\d+|%)?\b/},isSafeJSON:function(c){return""===this.replace(c,[[this.$COM_REG.BLOCK_COMMENT,""],[/\\["\\\/bfnrtu]/,""],[this.$COM_REG.LINE_COMMENT,""],[this.$COM_REG.DQ_STRING,""],[this.$COM_REG.SQ_STRING,""],[this.$COM_REG.REG,""],[this.$COM_REG.NUMBER,""],[/true|false|null|undefined/,""],[/[\s\u2028\u2029]/,""],[/[^{,]+:/,""],[/[\[\]\{\}\,]/,""]])},replace:function(f,d,w,c){var k,p,u,g,e,j,z=[],y=[],x=arguments.callee,v=x.reg1||(x.reg1=/\\./g),s=x.reg2||(x.reg2=/\(/g),r=x.reg3||(x.reg3=/\$\d/),q=x.reg4||(x.reg4=/^\$\d+$/),l=x.reg5||(x.reg5=/'/),h=x.reg6||(x.reg6=/\\./g),A=x.reg11||(x.reg11=/(['"])\1\+(.*)\+\1\1$/);if(!_.isArr(d)){d=[d,w]}else{c=w}if(!_.isArr(d[0])){d=[d]}_.arr.each(d,function(i){g=typeof i[0]=="string"?i[0]:i[0].source;e=i[1]||"";p=((g).replace(v,"").match(s)||"").length;if(typeof e!="function"){if(r.test(e)){if(q.test(e)){u=parseInt(e.slice(1));if(u<=p){e=u}}else{j=l.test(e.replace(h,""))?'"':"'";k=p;while(k+1){e=e.split("$"+k).join(j+"+a[o+"+k--+"]+"+j)}e=new Function("a,o","return"+j+e.replace(A,"$1")+j)}}}z.push(g||"^$");y.push([e,p,typeof e])});return f.replace(new RegExp("("+z.join(")|(")+")",c?"gim":"gm"),function(){var C=1,n=0,m=arguments,D,B;if(!m[0]){return""}while(D=y[n++]){if(B=m[C]){switch(D[2]){case"function":return D[0](m,C,n-1);case"number":return m[D[0]+C];default:return D[0]}}else{C+=D[1]+1}}})},formatText:function(d,g,r){var m,q,x,c=[];var v=0,w,u=20,z=function(l){var A="";while(l--){A+=" "}return A},y=[""];for(w=1;w<u;w++){y.push(z(w*4))}d=d.replace(/(\r\n|\r)/g,"\n");if(g=="html"){c.push([/[\s]*(<[\w]+[^>]+>)[\s]*/,"$1"]);c.push([/[\s]*(<\/[\w]+>)[\s]*/,"$1"]);d=this.replace(d,c);c.length=0;c.push([this.$COM_REG.HTML_COMMENT,"$0\\n"]);c.push([/<!\[CDATA\[(([^\]])|(\][^\]])|(\]\][^>]))*\]\]>/,function(l,A){return y[v]+l[A]+"\n"}]);c.push([/<input[^>]+>/,function(l,A){return y[v]+l[A]+"\n"}]);c.push([/<img[^>]+>/,function(l,A){return y[v]+l[A]+"\n"}]);c.push([/<[\w]+[^>]*\/>/,function(l,A){return y[v]+l[A]+"\n"}]);c.push([/[^<]+/,function(l,A){return y[v]+l[A]+"\n"}]);c.push([/<[\w]+[^>]*>/,function(l,A){return y[v++]+l[A]+"\n"}]);c.push([/<\/[\w]+>/,function(l,A){return y[--v]+l[A]+"\n"}]);d=this.replace(d,c,true)}else{var c=[],p=1,n=1,k=1,j=1,h=1,f=1,e=1,s={a:{},b:{},c:{},d:{},e:{},f:{},g:{}};m=this.$COM_REG;d=d.replace(/\\\r?\n/g,"");d=d.replace(/([\x01\x02\x03\x04])/g,"$1-");d=linb.Coder.replace(d,[[m.BLOCK_COMMENT.source,r?"":function(B,A){var l="\x01d"+j+++"\x02";s.d[l]=B[A];return l}],[m.LINE_COMMENT.source,r?"":function(B,A){var l="\x01e"+h+++"\x02";s.e[l]=B[A];return l}],[/\/\*@|@\*\/|\/\/@[^\n]*\n/.source,function(B,A){var l="\x01c"+k+++"\x02";s.c[l]=B[A];return l}],[m.SQ_STRING.source,function(B,A){var l="\x03a"+p+++"\x04";s.a[l]=B[A];return l}],[m.DQ_STRING.source,function(B,A){var l="\x03b"+n+++"\x04";s.b[l]=B[A];return l}],[m.REG.source,function(B,A){var l="\x03f"+f+++"\x04";s.f[l]=B[A];return l}],[/function\s*\([^)]*\)/.source,function(B,A){var l="\x03g"+e+++"\x04";s.g[l]=B[A];return l}]]);c=[["([+-])\\s+([+-])","$1 $2"],["\\b[\\s]+\\b"," "],["[\\s]+",""]];if(g=="css"){_.arr.insertAny(c,[/\s+(\.)/.source," $1"],2,true);_.arr.insertAny(c,[/(\d*\.?\d+|\d+\.?\d*)(cm|em|ex|pt|px|%|\:)?/," $0 "],-1,true)}d=linb.Coder.replace(d,c);if(!r){c=[[/[\{]/.source,function(l,A){return l[A]+"\n"+y[++v]}],[/[\x02\;]/.source,function(l,A){return l[A]+"\n"+y[v]}],[/(\,)([\x03\x04\w_\-]+\:)/.source,function(l,A){return l[A+1]+"\n"+y[v]+l[A+2]}],[/\x01/.source,function(l,A){return"\n"+y[v]+l[A]}],[/[\}]\s*[\,\;]*/.source,function(l,A){return"\n"+y[--v]+l[A]+"\n"+y[v]}]];if(g!="css"){c.push([/for\s*\([\w ]+\sin\s/.source,"$0"],[/for\s*\(([^;]*);([^;]*);([^)]*)\)/.source,"for($1; $2; $3)"],[/(,)(("[^"\n\r]*"|'[^'\n\r]*'|\w+)?(:|=>))/.source,function(l,A){return l[A+1]+"\n"+y[v]+l[A+2]}],[/\b(case|default)\b[^:]+:/.source,function(l,A){return l[A]+"\n"+y[v]}])}d=linb.Coder.replace(d,c);d=linb.Coder.replace(d,[[/ *[\n\r]/.source,"\n"],[/\{\s+\}/.source,"{}"],[/\}\n *(else|catch|finnally)/.source,"}$1"],[m.NUMBER,"$0"],[/(\/\/)|(\/\*)|(\*\/)/.source,"$0"],[/\s*((\+\+|\-\-|\&\&|\|\||!!)|([=!]==)|((<<|>>>|>>)=?)|([\+\-\*\/\%\&|^<>!=~]=?)|([?:]))\s*/.source," $1 "]])}d=linb.Coder.replace(d,[[/[\n\r]+/.source,"\n"],[/( *)(\x01[d]\d+\x02)/.source,function(A,l){A[l+1]=A[l+1]||"";return A[l+1]+s.d[A[l+2]].replace(/(\n)(\s*)/g,"$1"+A[l+1])}],[/\x03[g]\d+\x04/.source,function(A,l){return s.g[A[l]].replace(/\s*,\s*/g,","+(r?"":" "))}],[/[\x01\x03]([\w])\d+[\x02\x04]/.source,function(A,l){return s[A[l+1]][A[l]]}],[/\}\s*([\)\]])/.source,"}$1"]]);d=d.replace(/([\x01\x02\x03\x04])-/g,"$1")}return d},$linbid:1,formatHTML:function(d,g,w,h,k,j){if(!k){k=""+this.$linbid++}var e=this.$key,p=d,n=this,l=function(f){return f.replace(/\x02|\x03/g,function(x){return x=="\x02"?"&lt;":"&amp;"})},v=function(f){return f.replace(/<|\&/g,function(x){return x=="<"?"\x02":"\x03"})};d=d.replace(/^\s*(.*)\s*$/g,"$1");d=v(d);var s,r;if(!this._profiles[g]){g="js"}s=_.copy(this._profiles[g]);d=this.replace(d,[[/(\r\n|\r)/g,"\n"],[/( +)(\n)/g,"$2"],[/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"],[/ /g,"&nbsp;"]]);var c=[];var q=function(y,f,x){if(y){if(!_.isArr(y)){y=[y]}_.arr.each(y,function(z){if(typeof z=="string"){z="\\b("+z+")\\b"}c.push([z,x?x:"<span class='"+f+"'>$0</span>"])})}};if(r=s.multicomment){q(r,"multicomment",function(f,x){return"<span class='comment'>"+f[x].split("\n").join("</span>\n<span class='comment'>")+"</span>"});delete s.multicomment}if(r=s.comment){q(r,"comment",function(f,x){return"<span class='comment'>"+f[x].replace("\n","")+"</span>"});delete s.comment}if(r=s.IGNORE){q(r,"IGNORE","$0");delete s.IGNORE}if(s.reg){(function(x,f){if(x){if(!_.isArr(x)){x=[x]}_.arr.each(x,function(y){if(typeof y=="string"){y="\\b("+y+")\\b"}c.push([y,"<span class='"+f+"'>$0</span>"])})}})(s.reg,"reg");delete s.reg}_.arr.each(["string1","string2","number"],function(f){if(s[f]){q(s[f],f);delete s[f]}});_.each(s,function(x,f){q(x,f)});d=this.replace(d,c);d=l(d);var i="";var m=d.split("\n");if(m[0]==""){m.shift()}if(m[m.length-1]==""){m.pop()}var u=[];u.push("<div id='"+e+":"+k+":' class='sh'>");if(w&&w[0]){u.push("<div id='"+e+"-sh-cmd:"+k+":' class='sh-cmd'>");u.push("<span class='sh-toggle' href='javascript:;' onclick='linb.Coder._toggle(this);'>"+(h?" + ":" - ")+"</span> <span class='cmd-ruler'></span>");_.arr.each(w,function(f){u.push("<a id='"+e+"-"+f+":"+k+":' href='javascript:;' onclick='linb.Coder._action(this,\""+f+"\",arguments[0]);'>"+f+"</a>")});u.push("<span>"+g+" source code viewer, powered by <a href='http://www.linb.net' target='_blank' style='font-size:9px;color:#000157;'>LINB</a></span>");u.push("</div>")}u.push("<pre style='display:none'>");u.push(p.replace(/<([\w\/])/g,"&lt;$1"));u.push("</pre>");u.push("<div id='"+e+"-sh-con:"+k+":'class='sh-con' style='"+(j?"overflow:auto;height:"+j+"px;'":"")+(h?"display:none;":"")+";'><ol id='"+e+"-ol:"+k+":' start='1' class='"+g+"'><li>");u.push(m.join("&nbsp;</li><li>"));u.push("</li></ol></div>");u.push("</div>");l=v=null;_.asyRun(function(){linb.Coder._remedy(k)});return u.join("")},formatAll:function(g,f,h,e,i,d){var c=_.toArr(arguments);c[0]=this.formatText.call(this,g,f);return this.formatHTML.apply(this,c)},applyById:function(g,f){var e=0,d=this,c=function(){if(linb.Dom.byId(g)){var i,j,h;e++;i=linb(g);h=(i.get(0).className||"").split(/\s+/g);j=_.str.toDom(linb.Coder[f?"formatAll":"formatHTML"](i.text(),h[0],h[1]&&h[1].split("-"),h[2],g+":"+e));j.setSelectable(true);i.replace(j)}else{return false}};linb.Thread.repeat(c)},_remedy:function(g){var e=this.$key+":"+g+":";if(!(e=linb(e)).isEmpty()){var f=e.parent(),d=f.scrollWidth(),c=f.width();f.css("positoin","relative");if(d>c){e.width(d)}}},$action:{run:function(g,f){var d=linb(g).parent().next().text(),c=new Function([],d);c.call(linb(g).parent(2),f)},plain:function(e){var d=linb(e).parent().next().text();var d=d.replace(/</g,"&lt;");var c=window.open("","_blank","width=750, height=400, location=0, resizable=1, menubar=0, scrollbars=1");c.document.write('<pre style="width:100%;height:100%;border:none;">'+d+"</pre>");c.document.close();c=null}},_action:function(f,c,d){if(this.$action[c]){this.$action[c](f,d||window.event)}},_toggle:function(d){var c=d.parentNode.nextSibling.nextSibling.style;if(c.display=="none"){c.display="";d.innerHTML="-"}else{c.display="none";d.innerHTML="+"}c=d=null}}});Class("App","linb.Com",{Instance:{events:{beforeCreated:"_beforeCreated",afterIniComponents:"_afterinicomponents"},sampleCode:'{"name":"JSON Editor","powered by":"jsLinb","version":"1.0","test data":{"int":23,"float":23.23,"string":"This\'s a string.","html":"<div>a<span>c</span>b</div>","hash":{"a":1,"b":"2"},"array":[1,"2",3],"regexp":/^{[w]*}$/gim,"NULL":null,"Date":new Date(1998,10,20,4,23,14,120),"function":function (a,b,c){return a+b+c;}}}',iniComponents:function(){var e=this,d=[],c=function(f){d.push(f.get(0))};c((new linb.UI.Image).setHost(e,"image2").setTop("2").setRight("18").setZIndex("100").setSrc("img/logo.gif"));c((new linb.UI.ToolBar).setHost(e,"toolbar").setItems([{id:"group1",sub:[{id:"sample",caption:"Insert Sample Code"},{id:"format",caption:"Format Code"},{id:"compress",caption:"Compress Code"},{id:"totreegrid",caption:"goto TreeView"}],caption:"group1"}]).onClick("_toolbar_onclick"));return d},_beforeCreated:function(){SPA=this},_onrender:function(){},getType:function(c){return c===null?null:_.isStr(c)?"string":_.isNumb(c)?"number":_.isHash(c)?"hash":_.isArr(c)?"array":_.isBool(c)?"boolean":_.isDate(c)?"date":_.isReg(c)?"regexp":_.isFun(c)?"function":"undefined"},toTreeView:function(){var h=SPA.$cvhost.getCode();if(!SPA.eval2(h)){return}var e=SPA.$cv.getRoot(),d=SPA.$tv.getRoot(),f=e.cssRegion(),g=_.copy(f),c=f.width;g.left=-c;d.css("display","").cssRegion(g);e.animate({move:function(i){e.left(i*c);d.left((i-1)*c)}},_.fun(),function(){d.cssRegion(f);e.css("display","none");SPA.toolbar.showGroup("group2",true);SPA.toolbar.showGroup("group1",false);SPA.$tvhost.setCode(linb.Coder.formatText(h))},200,20,"expoOut").start()},_afterinicomponents:function(){var c=linb.ComFactory;c.setProfile({codeview:{cls:"App.CodeView"},treeview:{cls:"App.TreeView"}});c.getCom("codeview",function(){if(!SPA.$cv){SPA.$cvhost=this;SPA.$cv=this.getUIComponents();SPA.$cv.setZIndex(2);linb(document.body).append(SPA.$cv)}});c.getCom("treeview",function(){if(!SPA.$tv){SPA.$tvhost=this;SPA.$tv=this.getUIComponents();SPA.$tv.setZIndex(1);linb(document.body).append(SPA.$tv)}})},_toolbar_onclick:function(c,d,g,f,i){if(g.id=="group1"){var h=SPA.$cvhost.getCode();switch(d.id){case"sample":SPA.$cvhost.setCode(SPA.sampleCode,true);break;case"format":if(SPA.eval2(h)){SPA.$cvhost.setCode(linb.Coder.formatText(h),true)}break;case"compress":if(SPA.eval2(h)){SPA.$cvhost.setCode(linb.Coder.formatText(h,"js",true),true)}break;case"totreegrid":SPA.toTreeView();break}}},eval2:function(txt){if(typeof txt!="string"||!txt){alert("No conent!");return false}var r=true,iframe=document.createElement("iframe");iframe.style.display="none";document.body.appendChild(iframe);frames[frames.length-1].document.write("<script>var MSIE/*@cc_on =1@*/;parent.sandbox=MSIE?this:{eval:function(s){return eval(s)}}<\/script>");txt=_.str.trim(txt);try{var reg=new RegExp("^(\\s*\\/\\*[^*@]*\\*+([^\\/][^*]*\\*+)*\\/\\s*)|^(\\s*\\/\\/[^\\n]*\\s*)");var str=txt;while(reg.test(str)){str=str.replace(reg,"")}var isjson=/^\s*(\{|\[|function)/.test(str);sandbox.eval(isjson?("("+txt+")"):txt)}catch(e){var line=e.line||e.lineNumber;alert((e.name?e.name+" : ":"")+(e.description||e.message||"")+(line?"\n line : "+line:""));r=false}finally{document.body.removeChild(iframe)}return r},onCmdClick:function(c){SPA.$tvhost.onCmdClick(c)}}});Class("App.CodeView","linb.Com",{Instance:{events:{onReady:"_onready"},_onready:function(){this.texteditor.setValue(linb.Coder.formatText(SPA.sampleCode),true)},iniComponents:function(){var e=this,d=[],c=function(f){d.push(f.get(0))};c((new linb.UI.Layout).setHost(e,"layout6").setItems([{id:"main",min:10,caption:"main"},{id:"after",pos:"after",size:30,locked:true,min:10,folded:false,cmd:false,caption:"after"}]).setLeft(0).setTop(0).setType("horizontal"));e.layout6.append((new linb.UI.TextEditor).setHost(e,"texteditor").setDock("fill").setLeft(380).setTop(190),"main");e.layout6.append((new linb.UI.Button).setHost(e,"button25").setDock("fill").setLeft(20).setTop(110).setCaption(">").setVAlign("middle").onClick("_button25_onclick").setCustomStyle({KEY:"background:#eee;"}),"after");return d},_button25_onclick:function(c,f,g,d){SPA.toTreeView()},setCode:function(d){var c=this;c.$code=d;c.texteditor.setValue(d,true)},getCode:function(){return this.texteditor.getUIValue()}}});Class("App.TreeView","linb.Com",{Instance:{events:{onReady:"_onready"},iniComponents:function(){var e=this,d=[],c=function(f){d.push(f.get(0))};c((new linb.UI.Layout).setHost(e,"layout7").setItems([{id:"before",pos:"before",size:30,locked:true,min:10,folded:false,cmd:false,caption:"after"},{id:"main",min:10,caption:"main"}]).setType("horizontal"));e.layout7.append((new linb.UI.TreeGrid).setHost(e,"tg").setEditable(true).setColSortable(false).setColMovable(false).setRowNumbered(true).setHeader([{id:"key",width:100,type:"input",caption:"key"},{id:"value",width:400,type:"textarea",caption:"value"},{id:"action",width:90,type:"label",cellRenderer:function(f){f.tips="";return"<button onclick='javascript:SPA.onCmdClick(this)' class=\"c-cmd1\"></button><button onclick='javascript:SPA.onCmdClick(this)' class=\"c-cmd2\"></button><button onclick='javascript:SPA.onCmdClick(this)' class=\"c-cmd3\"></button>"},caption:"action"}]).beforeIniEditor("_tg_beforeIniEditor").beforeCellUpdated("_tg_beforecellupdated"),"main");e.layout7.append((new linb.UI.Button).setHost(e,"button26").setDock("fill").setLeft(20).setTop(110).setCaption("<").setVAlign("middle").onClick("_button26_onclick").setCustomStyle({KEY:"background:#eee;"}),"before");return d},_button26_onclick:function(c,f,g,d){SPA.toCodeView()},_onready:function(){linb.CSS.addStyleSheet(".c-cmd1{border:0;width:36px;height:18px;background:url(img/pre.gif) center;}.c-cmd2{border:0;width:36px;height:18px;background:url(img/next.gif) center;}.c-cmd3{border:0;width:18px;height:18px;background:url(img/del.gif) center;}")},onCmdClick:function(e){var j=e.parentNode.id,g=linb.UIProfile.getFromDom(j),c=g.cellMap[g.getSubId(j)],d=e.className,h=c._row,f;if(d=="c-cmd1"){var i=_();if(h._pid){f=_.get(g.rowMap,[g.rowMap2[h._pid],"_type"])}g.boxing().insertRows([{id:i,caption:"",cells:[{value:f=="array"?"[index]":"new",disabled:f=="array"},"null",""]}],null,h.id,true);_.asyRun(function(){g.getSubNode("FIRSTCELL",g.rowMap2[i]).onClick()})}else{if(d=="c-cmd2"){var i=_();if(h._pid){f=_.get(g.rowMap,[g.rowMap2[h._pid],"_type"])}g.boxing().insertRows([{id:i,caption:"",cells:[{value:f=="array"?"[index]":"new",disabled:f=="array"},"null",""]}],null,h.id,false);_.asyRun(function(){g.getSubNode("FIRSTCELL",g.rowMap2[i]).onClick()})}else{if(d=="c-cmd3"){if(confirm("Do you want to delete this row?")){g.boxing().removeRows([h.id])}}}}},getCellValue:function(f){try{var c=_.str.trim(f);if(/^"(\\.|[^"\\\n])*"$/.test(c)||/^'(\\.|[^'\\\n])*'$/.test(c)){c=["string",_.unserialize(c)]}else{c=c.replace(/^\s*/,"").replace(/\s*$/,"");c=c=="null"?["null","null"]:String(parseFloat(c))==c?["number",c]:/^\/(\\[\/\\]|[^*\/])(\\.|[^\/\n\\])*\/[gim]*$/.test(c)?["regexp",c]:/^(true|false)$/.test(c)?["boolean",c.toLowerCase()]:/^new Date\([0-9 \,]*\)$/i.test(c)?["date",_.serialize(_.unserialize(c))]:/^((function\s*([\w$]+\s*)?\(\s*([\w$\s,]*)\s*\)\s*)(\{([^\{\}]*)\}))$/i.test(c)?["function",c]:/^\{[\s\S]*\}$/.test(c)?["hash",_.serialize(_.unserialize(c))]:/^\[[\s\S]*\]$/.test(c)?["array",_.serialize(_.unserialize(c))]:["string",f]}}catch(d){c=null}if(c[0]=="string"){if(c[1]===false){return null}c[1]=_.serialize(c[1])}if(c[1]==="false"&&c[0]!="string"){c[0]="boolean"}return c},_json2rows:function(e,f,d){var c=arguments.callee;if(!d){d=[]}_.each(e,function(k,g){var j={},h=SPA.getType(k);g={value:f?"[index]":g,disabled:f};if(h=="hash"){j.sub=[];j.cells=[g,{value:"{...}"},""];c(k,false,j.sub)}else{if(h=="array"){j.sub=[];j.cells=[g,{value:"[...]"},""];c(k,true,j.sub)}else{SPA.getType(k);j.cells=[g,_.serialize(k),""]}}j._type=h;j.caption="";d.push(j)});return d},setCode:function(d){var c=this;c.$code=d;c.tg.removeAllRows().busy();_.asyRun(function(){var f=_.unserialize(d),e=c._json2rows(f);c.tg.insertRows(e).free()})},_rows2json:function(c,h){var f=arguments.callee,d=[],e,g;_.arr.each(c,function(i){e=((typeof i.cells[0]=="object")?i.cells[0].value:i.cells[0]);if(i._type=="hash"){g=f(i.sub)}else{if(i._type=="array"){g=f(i.sub,true)}else{g=(typeof i.cells[1]=="object")?i.cells[1].value:i.cells[1]}}if(h){d.push(g)}else{d.push('"'+e+'":'+g)}});return h?"["+d.join(",")+"]":"{"+d.join(",")+"}"},getCode:function(){var c=this.tg.getRows();return this._rows2json(c)},_tg_beforeIniEditor:function(e,c){if(c._col.id!="value"){return}var d=c._row._type;if(d=="hash"||d=="array"){c.$editorValue=linb.Coder.formatText(this._rows2json(c._row.sub,d=="array"))}},_tg_beforecellupdated:function(g,c,d){var i={hash:1,array:2},j=c._row;if(c._col.id=="value"){var f=j._type,h=this.getCellValue(d.value);if(!h){alert("Text format is not valid!");return false}else{j._type=h[0];d.value=h[1];var e={};if(i[h[0]]){e.sub=this._json2rows(_.unserialize(h[1]),h[0]=="array");d.caption=h[0]=="hash"?"{...}":"[...]"}else{e.sub=null}_.asyRun(function(){g.boxing().updateRow(j.id,e)})}}else{if(!/^"(\\.|[^"\\])*"$/.test('"'+d.value+'"')){alert("Text format is not valid!");return false}}}}});