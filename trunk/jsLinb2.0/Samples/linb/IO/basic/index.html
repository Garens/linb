<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="keywords" content="javascript framework, RIA, SPA, client SOA, linb, jsLinb, RAD, IDE, Web IDE, widgets, javascript OOP, opensource, open-source, Ajax, cross-browser, prototype, web2.0, platform-independent, language-independent" />
    <meta name="description" content="Web application powered by LINB framework" />
    <meta name="copyright" content="copyright@www.linb.net" />
    <meta http-equiv="imagetoolbar" content="no" />
    <title>jsLinb IO sample -- basic</title>
</head>
    <body>
        <div id='loading'><img src="../../../../runtime/loading.gif" alt="Loading..." /></div>
        <div style='height:20px;'></div>
        <div id='layout' style="margin:0 auto;width:680px;border:solid 1px;padding:4px;">
            <table border="1" align=center width="500" id="table1" cellspacing="0" cellpadding="0" style="border-collapse: collapse">
                <caption><b>how to use linb.absIO to interact with service</b></caption>
            	<tbody>
            		<tr>
            			<td width="14%" rowspan="2" bgcolor="#FFFF00"></td>
            			<td rowspan="2" width="7%" align="center" bgcolor="#FFFF00"><b>get</b></td>
            			<td width="9%" rowspan="2" align="center" bgcolor="#FFFF00"><b>post</b></td>
            			<td width="16%" rowspan="2" align="center" bgcolor="#FFFF00"><b>post 
            			file</b></td>
            			<td colspan="2" align="center" bgcolor="#FFFF00"><b>cross domain</b></td>
            		</tr>
            		<tr>
            			<td width="202" align="center" bgcolor="#FFFF00"><b>get</b></td>
            			<td width="8%" align="center" bgcolor="#FFFF00"><b>post</b></td>
            		</tr>
            		<tr>
            			<td width="14%" bgcolor="#FFFF00"><b>linb.Ajax</b></td>
            			<td width="7%" align="center">yes</td>
            			<td width="9%" align="center">yes</td>
            			<td width="16%" align="center" bgcolor="#808080">no</td>
            			<td width="202" align="center" bgcolor="#808080">no</td>
            			<td width="8%" align="center" bgcolor="#808080">no</td>
            		</tr>
            		<tr>
            			<td width="14%" bgcolor="#FFFF00"><b>linb.SAjax</b></td>
            			<td width="7%" align="center">yes</td>
            			<td width="9%" align="center" bgcolor="#808080">no</td>
            			<td width="16%" align="center" bgcolor="#808080">no</td>
            			<td width="202" align="center">yes (best for &quot;return big data&quot;)</td>
            			<td width="8%" align="center" bgcolor="#808080">no</td>
            		</tr>
            		<tr>
            			<td width="14%" bgcolor="#FFFF00"><b>linb.IAjax</b></td>
            			<td width="7%" align="center">yes</td>
            			<td width="9%" align="center">yes</td>
            			<td width="16%" align="center">yes</td>
            			<td width="202" align="center">yes</td>
            			<td width="8%" align="center">yes</td>
            		</tr>
            	</tbody>
            </table>
            <br /><br />
            <div>
                <p>Request data:</p>
                <textarea id='request' style='width:100%;height:80px;'>{
    key:'test',
    para:{
        p1:'client_set'
    }
}</textarea><br /><br />
                <div> <button id='ajax_get'>use linb.Ajax 'get'</button> <button id='ajax_post'>use linb.Ajax 'post'</button></div><br />
                <div> <button id='sajax'>use linb.SAjax</button></div><br />
                <div> <button id='iajax_get'>use linb.IAjax 'get'</button> <button id='iajax_post'>use linb.IAjax 'post'</button></div><br />
                <div> <button id='linb_request'>use linb.request function</button></div><br />
                <p>Response data:</p>
                <textarea id='response' style='width:100%;height:50px;' readonly=readonly>
                </textarea>
             </div>
        </div>
        
        <script type="text/javascript" src="../../../../runtime/jsLinb/js/linb.js"></script>
        <script type="text/javascript">
            linb.main(function(){
                linb('loading').remove();

                var getRequest=function(){
                    return _.unserialize(linb.Dom.byId('request').value);
                },
                setResponse=function(value){
                    linb('response').attr('value', _.serialize(value.data[0]));
                },
                showErr=function(uri,qs,msg){
                    alert('request raise err in "'+uri+'"' + (qs?' with "'+qs+'"':'') + (msg?': "' + msg +'"':''));            
                },
                onOK=function(response){
                    if(typeof response=='string')response=_.unserialize(response);
                    if(response)setResponse(response);
                    else showErr(this.uri, this.queryString, response);
                },
                onFail=function(msg){
                    showErr(this.uri, this.queryString, msg);
                };

                //use linb.Ajax get method
                linb('ajax_get').onClick(function(){
                    var hash=getRequest();
                    if(hash)
                        linb.Thread.observableRun(function(threadid){
                            linb.Ajax('request.php',hash, onOK, onFail,threadid).start();
                        });
                });
                //use linb.Ajax post
                linb('ajax_post').onClick(function(){
                    var hash=getRequest();
                    if(hash)
                        linb.Thread.observableRun(function(threadid){
                            linb.Ajax('request.php',hash, onOK, onFail,threadid,{method:'POST'}).start();
                        });
                });
                //use linb.SAjax
                linb('sajax').onClick(function(){
                    var hash=getRequest();
                    if(hash)
                        linb.Thread.observableRun(function(threadid){
                            linb.SAjax('request.php',hash, onOK, onFail,threadid).start();
                        });
                });
                //use linb.IAjax get
                linb('iajax_get').onClick(function(){
                    var hash=getRequest();
                    if(hash)
                        linb.Thread.observableRun(function(threadid){
                            linb.IAjax('request.php',hash, onOK, onFail,threadid,{method:'GET'}).start();
                        });
                });
                //use linb.IAjax post
                linb('iajax_post').onClick(function(){
                    var hash=getRequest();
                    if(hash)
                        linb.Thread.observableRun(function(threadid){
                            linb.IAjax('request.php',hash, onOK, onFail,threadid).start();
                        });
                });
                //use linb.request function
                linb('linb_request').onClick(function(){
                    var hash=getRequest();
                    if(hash)
                        linb.Thread.observableRun(function(threadid){
                            linb.request('request.php',hash, onOK, onFail,threadid);
                        });
                });
            });
        </script>

<style>#linbar a{text-decoration:underline;font-size:12px;margin-right:2px;padding:2px;}#linbar_more a{text-decoration:none;padding:3px;font-size:12px;text-decoration:none;display:block;}#linbar a:hover, #linbar_more a:hover{text-decoration:none;color:#fff!important;background:#598EDD;}#linbar small{font-size:9px;}#linbar_more{position:absolute;display:none;top:19px;width:80px;z-index:6000;border:solid 1px;border-color:#E4F1FD #598EDD #598EDD #598EDD; background:#E4F1FD;}</style><script>var linbar={byId:function(id){return document.getElementById(id).style},get1:function(){return this.byId('linbar')},get2:function(){return this.byId('linbar_more')},get3:function(){return this.byId('linbar_l')},show:function(){var n=this;if(n._t1){clearTimeout(n._t1);delete n._t1;}var s=n.get1();s.height='19px';s.backgroundColor='#E4F1FD';n.get3().display='block';},hide:function(){var n=this;if(n._t1){clearTimeout(n._t1);delete n._t1;}n._t1=setTimeout(function(){var s=n.get1();s.height='3px';s.backgroundColor='#598EDD';n.get3().display='none';n.get2().display='none';},600);},showPop:function(ele){var n=this;if(n._t1){clearTimeout(n._t1);delete n._t1;}if(n._t2){clearTimeout(n._t2);delete n._t2;}if(ele){var s=n.get2();s.left=(ele.offsetLeft-4)+'px';s.display='block';}},hidePop:function(){var n=this;if(n._t2){clearTimeout(n._t2);delete n._t2;}n._t2=setTimeout(function(){n.get2().display='none';},100);n.hide();}};</script><div id='linbar' onmouseout="linbar.hide()"  onmouseover="linbar.show()" style='position:absolute;width:100%;left:0;top:0;height:3px;z-index:5000;background:#598EDD;line-height:19px;overflow:hidden;'><nobr><a href='http://www.linb.net'><strong>jsLinb Home</strong></a><a href='http://code.google.com/p/linb/downloads/list'>Download</a><a href='http://linb.googlecode.com/svn/trunk/jsLinb2.0/'>SVN</a><a href='http://groups.google.com/group/linb'>forum</a><a href='http://www.linb.net/API'>API</a><a href='http://www.linb.net/CodeSnip'>CodeSnip</a><a href='http://www.linb.net/VisualJS/UIBuilder.html'>UI Builder</a><a href='http://www.linb.net/Samples' onmouseout="linbar.hidePop()"  onmouseover="linbar.showPop(this)">Samples</a><small style="margin-left:-3px;">&#9660;</small><a href='http://www.sigmawidgets.com/'>Commercial Support</a></nobr></div><div id='linbar_l' style="left:0;position:absolute;top:19px;display:none;border-top:1px solid #598EDD;font-size:0;line-height:0;width:100%;z-index:5500;"></div><div id='linbar_more' onmouseout="linbar.hidePop()"  onmouseover="linbar.showPop()"><a href='http://jsoneditor.appspot.com'>JSONEditor</a><a href='http://www.linb.net/Samples/comb/Themes'>Themes</a><a href='http://www.linb.net/Samples/comb/PicEditor'>PicEditor</a><a href='http://www.linb.net/Samples'>more ...</a></div>
<script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">var pageTracker = _gat._getTracker("UA-414967-1");pageTracker._initData();pageTracker._trackPageview();</script>

</body>
</html>