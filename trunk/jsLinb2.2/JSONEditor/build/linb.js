var undefined,_=window._=function(){return +new Date()},Namespace=window.Namespace=function(C){var B=C.split("."),A=window;return _.get(A,B)||_.set(A,B,{})},Class=window.Class=function(S,I,E){var A,O=[],G=Class,D=window,N=G._fun,B=G._reg,C,K,M,F,Q;E=E||{};if(F=_.get(D,S.split("."))){return F}I=(!I?[]:typeof I=="string"?[I]:I);for(M=0;F=I[M];M++){if(!(O[M]=(_.get(D,F.split("."))||(linb&&linb.SC&&linb.SC(F))))){throw new Error("errNoParent:"+F)}}if(E.Dependency){for(M=0;F=E.Dependency[M];M++){if(!(_.get(D,F.split("."))||(linb&&linb.SC&&linb.SC(F)))){throw new Error("errNoDependency:"+F)}}}C=O[0];A=E.Static||{};F={};for(M in A){if(B[M]){F[M]=1}}for(M in F){delete A[M]}A.Before=E.Before||(C&&C.Before);A.After=E.After||(C&&C.After);A.$End=E.$End||(C&&C.$End);A.__gc=E.__gc||A.__gc||(C&&C.__gc)||function(){Class.__gc(this.$key)};if(typeof E.Constructor=="function"){K=N(E.Constructor,"Constructor",S,C||_.fun());K.Constructor=String(E.Constructor)}else{if(C){var P=_.fun(),H=C.Constructor;if(H){P=new Function(H.slice(H.indexOf("(")+1,H.indexOf(")")).split(","),H.slice(H.indexOf("{")+1,H.lastIndexOf("}")))}K=N(P,"Constructor",S,C.upper);K.Constructor=H}else{K=_.fun()}}Q=_.fun();for(M=O.length-1;F=O[M--];){_.merge(Q,F);_.merge(Q.prototype,F.prototype)}K.KEY=K.$key=K.prototype.KEY=K.prototype.$key=S;G._wrap(K,A,0,Q);if(F=E.Instance){G._wrap(K.prototype,F,1,Q.prototype)}G._inherit(K,Q);G._inherit(K.prototype,Q.prototype);Q=null;if(_.tryF(K.Before,arguments,K)===false){return false}for(M=0;F=O[M];M++){F=(F.$children||(F.$children=[]));for(var L=0,J=F.length,R;L<J;L++){if(F[J]==S){R=true;break}}if(!R){F[F.length]=S}}K.$linb$=1;K.$children=[];K.$parent=O;K.prototype.constructor=K;K[S]=K.prototype[S]=true;_.set(D,S.split("."),K);_.tryF(K.After,[],K);_.tryF(E.Initialize,[],K);_.tryF(K.$End,[],K);_.breakO([E.Static,E.Instance,E],2);return K},linb=window.linb=function(B,A){return linb.Dom.pack(B,A)};_.merge=function(E,D,B){var A,C;if(typeof B=="function"){C=B;B="fun"}switch(B){case"fun":for(A in D){if(true===C(D[A],A)){E[A]=D[A]}}break;case"all":for(A in D){E[A]=D[A]}break;case"with":for(A in D){if(A in E){E[A]=D[A]}}break;default:for(A in D){if(!(A in E)){E[A]=D[A]}}}return E};_.merge(_,{fun:function(){return function(){}},exec:function(A){var D=this,E=document,C=E.getElementsByTagName("head")[0]||E.documentElement,B=E.createElement("script");B.type="text/javascript";if(linb.browser.ie){B.text=A}else{B.appendChild(E.createTextNode(A))}C.insertBefore(B,C.firstChild);C.removeChild(B)},get:function(D,C){if(!C){return D}else{if(typeof C=="string"){return D[C]}else{for(var B=0,A=C.length;B<A;){if(!D||(D=D[C[B++]])===undefined){return }}return D}}},set:function(G,F,E){if(typeof F!="string"){var B,C=0,A,D=F.length-1;for(;C<D;){B=F[C++];if(G[B]&&((A=typeof G[B])=="object"||A=="function")){G=G[B]}else{G=G[B]={}}}F=F[D]}if(E===undefined){delete G[F]}else{return G[F]=E}},tryF:function(A,B,C,D){return(A&&typeof A=="function")?A.apply(C||null,B||[]):D},asyRun:function(A,D,B,C){return setTimeout(typeof A=="string"?A:function(){A.apply(C,B||[]);A=B=null},D||0)},isEmpty:function(B){for(var A in B){return false}return true},resetRun:function(E,A,H,D,F){var G=arguments.callee,C=E,B=G.$cache||(G.$cache={});if(B[C]){clearTimeout(B[C])}if(typeof A=="function"){B[C]=setTimeout(function(){delete B[C];A.apply(F||null,D||[])},H||0)}else{delete B[C]}},observableRun:function(C,A,B){linb.Thread.observableRun(C,A,B)},breakO:function(F,G){var H=G||1,A=1+(arguments[2]||0),B=arguments.callee,D="___gc_",C;if(F&&(typeof F=="object"||typeof F=="function")&&F!==window&&F!==document&&F.nodeType!==1){if(F.hasOwnProperty(D)){return }else{try{F[D]=null}catch(E){return }}for(C in F){if(F.hasOwnProperty(C)&&F[C]){if(typeof F[C]=="object"||typeof F[C]=="function"){if(A<H){B(F[C],H,A)}}try{F[C]=null}catch(E){}}}if(F.length){F.length=0}delete F[D]}},each:function(D,A,C){C=C||D;for(var B in D){if(false===A.call(C,D[B],B,D)){break}}return D},copy:function(B,A){return _.clone(B,A,1)},clone:function(D,A,J){if(D&&typeof D=="object"){var F=D.constructor,H=F==Array;if(H||F==Object){var G=arguments.callee,E=H?[]:{},I,C=0,B;if(!J){if(J===0){return D}else{J=100}}if(H){B=D.length;for(;C<B;C++){if(typeof A=="function"&&false===A.call(D,D[C],C)){continue}E[E.length]=((I=D[C])&&J&&typeof I=="object")?G(I,A,J-1):I}}else{for(C in D){if(A===true?C.charAt(0)=="_":typeof A=="function"?false===A.call(D,D[C],C):0){continue}E[C]=((I=D[C])&&J&&typeof I=="object")?G(I,A,J-1):I}}return E}else{return D}}else{return D}},filter:function(E,B,A){if(!A&&E&&E.constructor==Array){var F,D,H,G=[],C;for(F=0,D=E.length;F<D;F++){G[G.length]=E[F]}E.length=0;for(F=0,D=G.length;F<D;F++){if(typeof B=="function"?false!==B.call(G,G[F],F):1){E[E.length]=G[F]}}}else{var F,I={};for(F in E){if(B===true?F.charAt(0)=="_":typeof B=="function"?false===B.call(E,E[F],F):0){I[F]=1}}for(F in I){delete E[F]}}return E},toArr:function(E,C){if(!E){return[]}var A=[];if(typeof C=="boolean"){for(var D in E){A[A.length]=C?D:E[D]}}else{if(typeof E=="string"){A=E.split(C||",")}else{for(var D=0,B=E.length;D<B;++D){A[D]=E[D]}}}return A},toUTF8:function(A){return A.replace(/[^\x00-\xff]/g,function(C,B){B=C.charCodeAt();return"\\u"+Math.floor(B/16).toString(16)+(B%16).toString(16)})},fromUTF8:function(A){return A.replace(/\\u([0-9a-f]{3})([0-9a-f])/g,function(C,B,D){return String.fromCharCode((parseInt(B,16)*16+parseInt(D,16)))})},urlEncode:function(C){var A=[],B,D;for(B in C){D=C[B];A.push(encodeURIComponent(B)+"="+encodeURIComponent(typeof D=="string"?D:_.serialize(D)))}return A.join("&")},urlDecode:function(H,E){if(!H){return E?"":{}}var A,F={},C=H.split("&"),G;for(var D=0,B=C.length;D<B;D++){G=C[D];A=G.split("=");F[decodeURIComponent(A[0])]=decodeURIComponent(A[1])}return E?F[E]:F},exists:function(A){return A!==undefined},isNull:function(A){return A===null},isObj:function(A){return !!A&&(typeof A=="object"||typeof A=="function")},isBool:function(A){return typeof A=="boolean"},isNumb:function(A){return typeof A=="number"&&isFinite(A)},isDate:function(A){return Object.prototype.toString.call(A)==="[object Date]"},isFun:function(A){return Object.prototype.toString.call(A)==="[object Function]"},isArr:function(A){return Object.prototype.toString.call(A)==="[object Array]"},isHash:function(A){return !!A&&typeof A=="object"&&Object.prototype.toString.call(A)==="[object Object]"},isReg:function(A){return Object.prototype.toString.call(A)==="[object RegExp]"},isStr:function(A){return typeof A=="string"},isArguments:function(A){return !!(A&&A.callee&&A.callee.arguments===A)},str:{startWith:function(B,A){return B.indexOf(A)===0},endWith:function(B,C){var A=B.length-C.length;return A>=0&&B.lastIndexOf(C)===A},repeat:function(B,A){return new Array(A+1).join(B)},initial:function(A){return A.charAt(0).toUpperCase()+A.substring(1)},trim:function(A){return this.ltrim(this.rtrim(A))},ltrim:function(A){return A.replace(/^ */,"")},rtrim:function(A){return A.replace(/ *$/,"")},toDom:function(F){var E=linb.$getGhostDiv(),D=[];E.innerHTML=F;for(var C=0,B=E.childNodes,A=B.length;C<A;C++){D[D.length]=B[C]}E=null;return linb(D)}},arr:{subIndexOf:function(A,D,E){if(E===undefined){return -1}for(var C=0,B=A.length;C<B;C++){if(A[C]&&A[C][D]===E){return C}}return -1},removeFrom:function(A,B,C){A.splice(B,C||1);return A},removeValue:function(A,D){for(var B=A.length,C=B-1;C>=0;C--){if(A[C]===D){A.splice(C,1)}}return A},insertAny:function(A,F,E,D){var C=A.length;D=F.constructor!=Array||D;if(E===0){if(D){A.unshift(F)}else{A.unshift.apply(A,F)}}else{var B;if(!E||E<0||E>C){E=C}if(E!=C){B=A.splice(E,C-E)}if(D){A[A.length]=F}else{A.push.apply(A,F)}if(B){A.push.apply(A,B)}}return E},indexOf:function(A,D){for(var C=0,B=A.length;C<B;C++){if(A[C]===D){return C}}return -1},each:function(A,D,F,G){var E,C,B=A;if(!B){return B}if(B.constructor!=Array){if((B=B._nodes)||B.constructor!=Array){throw new Error("errNotArray")}if(G===undefined){G=1}}C=B.length;F=F||A;if(!G){for(E=0;E<C;E++){if(D.call(F,B[E],E,B)===false){break}}}else{for(E=C-1;E>=0;E--){if(D.call(F,B[E],E,B)===false){break}}}return A}}});_.merge(_.fun,{body:function(fun){with(String(fun)){return slice(indexOf("{")+1,lastIndexOf("}"))}},args:function(fun){with(String(fun)){return slice(indexOf("(")+1,indexOf(")")).split(",")}},clone:function(A){return new Function(_.fun.args(A),_.fun.body(A))}});_.merge(Class,{_reg:{$key:1,$parent:1,$children:1,KEY:1,Static:1,Instance:1,Constructor:1,Initialize:1},_reg2:{constructor:1,prototype:1,toString:1,valueOf:1},_fun:function(A,B,C,D){A.$name$=B;A.$original$=C;if(D){A.upper=D}return A},_other:["toString","valueOf"],_o:{},_inherit:function(D,F,A){var B,E,C=this._reg;for(B in F){if(B in D||(!A&&C[B])||B.charAt(0)=="$"){continue}E=F[B];if(E&&E.$linb$){continue}D[B]=E}},_wrap:function(J,B,L,K){var M=this,G,F,D,E=J.KEY,A=M._reg,C=M._reg2,I=M._fun,H=M._other;for(G in B){if(C[G]||(!L&&A[G])){continue}D=B[G];J[G]=(typeof D!="function")?D:I(D,G,E,typeof K[G]=="function"&&K[G])}for(F=0;G=H[F++];){D=B[G];if(D&&(D==M._o[G])){continue}J[G]=(typeof D!="function")?D:I(D,G,E,typeof K[G]=="function"&&K[G])}},__gc:function(D){if(typeof D=="object"){D=D.KEY||""}var C=_.get(window,D.split(".")),E,B,A;if(C){if(E=_.get(window,["linb","cache","SC"])){delete E[D]}if(C.$parent){C.$parent.length=0}if(E=C.$children){for(var B=0,F;F=E[B];B++){if(F=_.get(window,F.split("."))){F.__gc()}}E.length=0}for(B in C){if(typeof C[B]=="function"){for(A in C[B]){if(C[B].hasOwnProperty(A)){delete C[B][A]}}}}_.breakO(C);C=C.prototype;for(B in C){if(typeof C[B]=="function"){for(A in C[B]){if(C[B].hasOwnProperty(A)){delete C[B][A]}}}}_.breakO(C);_.set(window,D.split("."))}}});_.merge(linb,{Locale:{en:{}},$cache:{thread:{},SC:{},hookKey:{},snipScript:{},ghostDiv:[],domPurgeData:{},profileMap:{},reclaimId:{},template:{},UIKeyMapEvents:{}},$lang:"en",$href:"javascript:;",$langId:"linblangkey",setAppLangKey:function(A){linb.$appLangKey=A},getAppLangKey:function(A){return linb.$appLangKey},getLang:function(){return linb.$lang},setLang:function(I,K){var B=linb.Locale,E=linb.getRes,L,J,D,C,F,A,G,H=[];linb.$lang=I;J=linb.browser.ie?document.all.tags("span"):document.getElementsByTagName("span");for(D=0;L=J[D];D++){if(L.id==linb.$langId){H[H.length]=L}}F=function(){(function(){C=H.splice(0,100);for(D=0;L=C[D];D++){if(typeof (J=E(L.className))=="string"){L.innerHTML=J}}if(H.length){setTimeout(arguments.callee,0)}_.tryF(K)}())},G="linb.Locale."+I,A=function(){var M=linb.$appLangKey;if(M){linb.include(G+"."+M,linb.getPath("Locale."+I,".js"),F,F)}else{F()}};linb.include(G,linb.getPath(G,".js"),A,A)},_r:/\x24(\d+)/g,getRes:function(D){var B,A=D.indexOf("-")!=-1?((B=D.split("-"))&&(D=B[0])&&B):arguments,C=_.get(linb.Locale[linb.$lang],D.split("."));return(B=typeof C)=="string"?C.replace(linb._r,function(E,F){return A[parseInt(F)+1]||E}):B=="function"?C.apply(null,A):C?C:D.substr(D.lastIndexOf(".")+1)},wrapRes:function(D){var A=D,B,C;if(A.charAt(0)=="$"){arguments[0]=A.substr(1,A.length-1)}B=D;C=linb.getRes.apply(null,arguments);if(B==C){C=A}return'<span id="'+linb.$langId+'" class="'+B+'">'+C+"</span>"},request:function(B,C,E,F,D,A){return((A&&A.method.toLowerCase()=="post")?linb.IAjax:linb.absIO.isCrossDomain(B)?linb.SAjax:linb.Ajax).apply(null,arguments).start()},include:function(D,A,B,C){if(D&&linb.SC.get(D)){_.tryF(B)}else{linb.SAjax(A,"",B,C,0,{rspType:"script",checkKey:D}).start()}},_m:[],main:function(A){linb._m.push(A)},getPath:function(F,A,G){F=F.split(".");if(G){var C=[F[0],G];for(var E=1,B=F.length;E<B;E++){C.push(F[E])}F.length=0;F=C}var H,D=linb.ini;if(F[0]=="linb"){H=D.path;F.shift();if(F.length==(G?1:0)){F.push("linb")}}else{H=D.appPath;if(F.length==((G?1:0)+1)&&A==".js"){F.push("index")}if(D.verPath){H+=D.verPath+"/"}if(D.ver){H+=D.ver+"/"}}return H+F.join("/")+(A||"/")},log:_.fun(),message:_.fun(),_pool:[],getObject:function(A){return linb._pool["$"+A]},_ghostDivId:"linb.ghost::",$getGhostDiv:function(){var C=linb.$cache.ghostDiv,B=0,A=C.length,D;do{D=C[B++]}while(B<A&&(D&&D.firstChild));if(!D||D.firstChild){D=document.createElement("div");D.id=linb._ghostDivId;C.push(D)}return D},$linbid:0,$registerNode:function(C){var D,B,A=linb.$cache.domPurgeData;if(!(C.$linbid&&(B=A[C.$linbid])&&B.element==C)){D="!"+linb.$linbid++;B=A[D]||(A[D]={});B.element=C;C.$linbid=B.$linbid=D}C=null;return B},getNodeData:function(A,B){if(!A){return }return _.get(linb.$cache.domPurgeData[typeof A=="string"?A:linb.Event.getId(A,true)],B)},setNodeData:function(A,C,B){if(!A){return }return _.set(linb.$cache.domPurgeData[typeof A=="string"?A:linb.Event.getId(A,true)],C,B)},$purgeChildren:function(F){var B=linb.$cache,J=B.profileMap,A=B.UIKeyMapEvents,K=B.domPurgeData,E=F.getElementsByTagName("*"),G=E.length,N=[],I,H,D,O,M,L,C;for(I=0;I<G;I++){if(!(M=E[I])){continue}if(O=M.$linbid){if(D=K[O]){if(L=D.eHandlers){for(H in L){M[H]=null}}for(H in D){D[H]=null}delete K[O]}if(linb.browser.ie){M.removeAttribute("$linbid")}else{delete M.$linbid}}if(C=M.id){if(C in J){D=J[C];if(!D){continue}O=D.renderId;if("!window"===O||"!document"===O){continue}D.__gc();N[N.length]=I;if(D.$domId&&D.$domId!=D.domId){N[N.length]=D.$domId}}}}for(I=0;I<N.length;){delete J[N[I++]]}F.innerHTML=""},create:function(B){var A,H,F,G=arguments.callee,D=G.r1||(G.r1=/</);if(typeof B=="string"){if(F=linb.absBox.$type[B]){A=[];for(var E=1,C=arguments.length;E<C;E++){A[E-1]=arguments[E]}H=new (linb.SC(F))(false);if(H._ini){H._ini.apply(H,A)}}else{if(D.test(B)){H=_.str.toDom(B)}else{H=document.createElement(B);H.id=typeof id=="string"?id:_.id();H=linb(H)}}}else{H=new (linb.SC(B.key))(B)}return H},use:function(A){var C=linb._tempBox||(linb._tempBox=linb()),B=C._nodes;B[0]=A;if(B.length!=1){B.length=1}return C}});new function(){var H=window,J=navigator.userAgent.toLowerCase(),F=document,G=linb.browser={kde:/webkit/.test(J),opr:/opera/.test(J),ie:/msie/.test(J)&&!/opera/.test(J),gek:/mozilla/.test(J)&&!/(compatible|webkit)/.test(J),isWin:/(windows|win32)/.test(J),isMac:/(macintosh|mac os x)/.test(J),isAir:/adobeair/.test(J),isLinux:/linux/.test(J),isSecure:location.href.toLowerCase().indexOf("https")==0},I=function(M,N){return M+(G.ver=J.split(N)[1].split(".")[0])};_.filter(G,function(M){return !!M});if(G.ie){G[I("ie","msie ")]=true;if(G.ie6){try{document.execCommand("BackgroundImageCache",false,true)}catch(E){}H.XMLHttpRequest=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}}else{if(G.gek){G[I("gek","firefox/")]=true}else{if(G.opr){G[I("opr","opera/")]=true}else{if(G.kde){G[I("kde","webkit/")]=true}}}}G.contentBox=function(M){return(G.ie||G.opr)?!/BackCompat|QuirksMode/.test(F.compatMode):(M=(M=M||F.documentElement).style["-moz-box-sizing"]||M.style["box-sizing"])?(M=="content-box"):true}();var L=linb.ini={};if(window.linb_ini){_.merge(L,window.linb_ini)}if(!L.path){var K,C=document.getElementsByTagName("script"),A=/js\/linb(-[\w]+)?\.js$/,B=C.length;while(--B>=0){K=C[B].src;if(K.match(A)){L.path=K.replace(A,"");break}}}_.merge(L,{appPath:location.href.split("?")[0].replace(/[^\\\/]+$/,""),file_bg:L.path+"bg.gif",dummy_tag:"$_dummy_$"});if(!L.path){L.path=L.appPath+"/jsLinb"}var D=function(){if(F.addEventListener&&!G.kde){F.removeEventListener("DOMContentLoaded",arguments.callee,false)}try{for(var N=0,M=linb._m.length;N<M;N++){_.tryF(linb._m[N])}linb._m.length=0;linb.isDomReady=true}catch(O){_.asyRun(function(){throw O})}};if(F.addEventListener&&!G.kde){F.addEventListener("DOMContentLoaded",D,false)}else{if(G.ie){(function(){try{F.activeElement.id;F.documentElement.doScroll("left");D()}catch(M){setTimeout(arguments.callee,1)}})()}else{(function(){/loaded|complete/.test(F.readyState)?D():setTimeout(arguments.callee,1)})()}}};Class("linb.Thread",null,{Constructor:function(B,C,E,G,H,A,D){var J=this,F=arguments.callee,I=linb.$cache.thread;if(J.constructor!==F||!!J.id){return new F(B,C,E,G,H,A,D)}if(typeof B!="string"){B="$"+(J.constructor.$linbid++)}J.id=B;J.profile=I[B]||(I[B]={id:B,_start:false,time:0,_left:0,_asy:-1,index:0,tasks:C||[],delay:E||0,callback:G,onStart:H,onEnd:A,cache:{},status:"run",cycle:!!D})},Instance:{_fun:_.fun(),__gc:function(){var A=linb.$cache.thread,C=A[this.id];if(C){delete A[this.id];C.tasks.length=0;for(var B in C){C[B]=null}}},_task:function(){var A=this,G=A.profile,C={args:[]},F=G.tasks[G.index],E,B,D=typeof F;G._asy=-1;if(!G.status){return }if(D=="function"){C.task=F}else{if(D=="object"){for(B in F){C[B]=F[B]}}}if(typeof C.task!="function"){C.task=A._fun}if(typeof C.callback!="function"){C.callback=G.callback}C.args.push(G.id);G.index++;G.time=_();E=_.tryF(C.task,C.args||[G.id],C.scope||A,null);if(!G.status){return }if(C.id){G.cache[C.id]=E}if(C.callback){if(false===_.tryF(C.callback,[G.id],A,true)){A.abort();return }}if(G.status!=="run"){return }if(!G||G.status!=="run"){return }A.start()},start:function(E){var B=this,D=B.profile,A,C;if(D._start===false){D._start=true;if(false===_.tryF(D.onStart,[D.id],B)){return B.abort()}}if(!D.tasks.length){return B.abort()}if(D.index>=D.tasks.length){if(D.cycle===true){B.profile.index=0}else{return B.abort()}}A=D.tasks[D.index];C=typeof A=="number"?A:typeof A.delay=="number"?A.delay:D.delay;D._left=(E||E===0)?E:C;if(D._asy!=-1){clearTimeout(D._asy)}D._asy=_.asyRun(B._task,D._left,[],B);D.time=_();return B},suspend:function(){var B,A=this.profile;if(A.status=="pause"){return }A.status="pause";if(A._asy!==-1){clearTimeout(A._asy);if(A.index>0){A.index--}}B=A._left-(_()-A.time);A._left=(B>=0?B:0);return this},resume:function(B){var A=this;if(A.profile.status=="run"){return }B=B===undefined?A.profile._left:B===true?A.profile.delay:B===false?0:(Number(B)||0);A.profile.status="run";A.start(B);return A},abort:function(){var A=this.profile;A.status="stop";clearTimeout(A._asy);_.tryF(A.onEnd,[A.id]);this.__gc()},links:function(A){var C=this.profile,B=C.onEnd,D=C.id;C.onEnd=function(){_.tryF(B,[D]);A.start()};return this},insert:function(A,E){var D=this,F=D.profile.tasks,C=F.length,B;if(A.constructor!=Array){A=[A]}E=E||D.profile.index;if(E<0||E>C){E=C}B=F.splice(E,C-E);F.push.apply(F,A);F.push.apply(F,B);return D},getCache:function(A){return this.profile.cache[A]},setCache:function(A,B){this.profile.cache[A]=B;return this}},After:function(){var C=this,E=function(F){C[F]=function(H){var G;if(linb.$cache.thread[H]){(G=linb.Thread(H))[F].apply(G,Array.prototype.slice.call(arguments,1))}}},B="start,suspend,resume,abort".split(",");for(var D=0,A=B.length;D<A;D++){E(B[D])}},Static:{$linbid:1,__gc:function(){linb.$cache.thread={}},isAlive:function(A){return !!linb.$cache.thread[A]},observableRun:function(E,B,C){var A=linb.Thread,D=linb.Dom;if(!_.isArr(E)){E=[E]}if(linb.$cache.thread[C]){if(typeof B=="function"){E.push(B)}A(C).insert(E)}else{A(C,E,0,null,function(F){if(D){D.busy(F)}},function(F){_.tryF(B,arguments,this);if(D){D.free(F)}}).start()}},group:function(B,F,G,H,A){var I={},E=linb.Thread,D=function(M,J,L){if(typeof M=="string"){M=E(M)}if(M){var K=function(){var N=arguments.callee;_.tryF(N.onEnd,arguments,this);N.onEnd=null;delete I[J];_.tryF(G,[J,L],this);if(_.isEmpty(I)){E.resume(L)}};K.onEnd=M.profile.onEnd;M.profile.onEnd=K;M.start()}};for(var C in F){I[C]=1}return E(B,[function(K){if(!_.isEmpty(F)){E.suspend(K);for(var J in F){D(F[J],J,K)}}}],0,null,H,A)}}});Class("linb.absIO",null,{Constructor:function(C,H,G,A,E,L){if(typeof C=="object"){L=C}else{L=L||{};_.merge(L,{uri:C,query:H,onSuccess:G,onFail:A,threadid:E})}var K=this,I=arguments.callee,B=K.constructor;if((B!==I)||K.id){return new I(L)}_.merge(L,{id:L.id||(_()+""+(B._id++)),uri:L.uri||"",query:L.query||"",asy:L.asy!==false,method:"POST"==(L.method||B.method).toUpperCase()?"POST":"GET"},"all");var J="retry,timeout,rspType,customQS".split(",");for(var F=0,D=J.length;F<D;F++){L[J[F]]=(J[F] in L)?L[J[F]]:B[J[F]]}_.merge(K,L,"all");if(B.events){_.merge(K,B.events)}K.query=K.customQS(K.query);if(!K._useForm&&typeof K.query!="string"){K.query=B._buildQS(K.query,K._single,K.method=="POST")}return K},Instance:{_fun:_.fun(),_flag:0,_response:"",_retryNo:0,_end:false,_time:function(){var A=this,B=A.constructor;A._clear();if(A._retryNo<A.retry){A._retryNo++;_.tryF(A.onRetry,[A._retryNo],A);A.start()}else{_.tryF(A.onTimeout,[],A);A._onError(new Error("errTimout"))}},_onEnd:function(){var A=this;A._end=true;if(A._flag>0){clearTimeout(A._flag);A._flag=0}linb.Thread.resume(A.threadid);_.tryF(A.onEnd,[],A);A._clear()},_onStart:function(){var A=this;linb.Thread.suspend(A.threadid);_.tryF(A.onStart,[],A)},_onResponse:function(){var A=this;if(false!==_.tryF(A.beforeSuccess,[A._response,A.rspType,A.threadid],A)){_.tryF(A.onSuccess,[A._response,A.rspType,A.threadid],A)}A._onEnd()},_onError:function(B){var A=this;if(false!==_.tryF(A.beforeFail,[B,A.threadid],A)){_.tryF(A.onFail,[String(B),A.rspType,A.threadid],A)}A._onEnd()},abort:function(){this._onEnd()}},Static:{$abstract:true,_id:1,method:"GET",retry:2,timeout:60000,rspType:"text",type:"type",randkey:"id",callback:"callback",_buildQS:function(C,A,B){return A?((A=_.serialize(C))&&(B?A:encodeURIComponent(A))):_.urlEncode(C)},customQS:function(A){return A},_if:function(D,F,B){var C=linb.browser.ie,E=D.createElement(C?"<iframe name='"+F+"' "+(B?"onload='linb.IAjax._o(\""+F+"\")'":"")+">":"iframe"),A;if(F){E.id=E.name=F}if(!C&&B){E.onload=B}E.style.display="none";D.body.appendChild(E);A=frames[frames.length-1];return[E,A,A.document]},isCrossDomain:function(D){D=D||"";var C=arguments.callee,B=C.r||(C.r=/(http(s)?\:\/\/)?([\w\.]+(:[\d]+)?)(.*)/),A;if((A=D.indexOf(":"))==-1||A>D.indexOf("/")){return false}if(D.indexOf("file:")===0){return !!location.host}return location.host!=D.replace(B,"$3")},groupCall:function(F,G,A,B,E){var C,D=function(J,H,I){I[H]=linb.Thread(null,[function(K){J.threadid=K;J.start()}])};for(C in F){D(F[C],C,F)}return linb.Thread.group(null,F,G,function(){linb.Thread(E).suspend();_.tryF(A,arguments,this)},function(){_.tryF(B,arguments,this);linb.Thread(E).resume()}).start()}}});Class("linb.Ajax","linb.absIO",{Instance:{_single:true,_XML:null,start:function(){var self=this;if(false===_.tryF(self.beforeStart,[],self)){self._onEnd();return }if(!self._retryNo){self._onStart()}try{with(self){self._XML=new window.XMLHttpRequest();if(asy){self._XML.onreadystatechange=function(){if(self&&self._XML&&self._XML.readyState==4){self._complete.apply(self);self._clear()}}}if(!_retryNo&&method!="POST"){if(query){uri=uri.split("?")[0]+"?"+query}query=null}if(self._XML.overrideMimeType){self._XML.overrideMimeType("text/xml")}self._XML.open(method,uri,asy);if(method!="POST"){self._XML.setRequestHeader("Content-type","application/x-www-form-urlencoded")}self._XML.setRequestHeader("X-Requested-With","XMLHttpRequest");if(self._XML.overrideMimeType){self._XML.setRequestHeader("Connection","close")}try{self._XML.send(query)}catch(e){}if(asy){if(self._XML&&timeout>0){_flag=_.asyRun(function(){if(self&&!self._end){self._time()}},self.timeout)}}else{_complete()}}}catch(e){self._onError(e)}return self},abort:function(){var A=this;if(A._XML){A._XML.onreadystatechange=A._fun;A._XML.abort();A._XML=null}arguments.callee.upper.call(A)},_clear:function(){var A=this;if(A._XML){A._XML.onreadystatechange=A._fun;A._XML=null}},_complete:function(){with(this){var ns=this,status=ns._XML.status;_response=rspType=="text"?ns._XML.responseText:ns._XML.responseXML;if(status===undefined||status===0||status==304||(status>=200&&status<300)){_onResponse()}else{_onError(new Error("errXMLHTTP:"+status))}}}}});Class("linb.SAjax","linb.absIO",{Instance:{start:function(){var B=this,G,F=B.constructor,D,E,C=false;if(false===_.tryF(B.beforeStart,[],B)){B._onEnd();return }if(!B._retryNo){B._onStart()}if(B.rspType=="script"){B.retry=0}G=B.id;if(F._pool[G]){F._pool[G].push(B)}else{F._pool[G]=[B]}var A=F._n=document;E=B.node=A.createElement("script");E.src=B.uri+(B.query?"?"+B.query:"");E.type="text/javascript";E.charset="utf-8";E.id="linb:script:"+B.id;E.onload=E.onreadystatechange=function(){var H=this.readyState;if(!C&&(!H||H=="loaded"||H=="complete")){C=true;if(B.rspType=="script"){if(typeof B.checkKey=="string"){_.asyRun(function(){_.exec("if(linb.SC.get('"+B.checkKey+"'))linb.SAjax._pool['"+G+"'][0]._onResponse();else linb.SAjax._pool['"+G+"'][0]._loaded();")})}else{B._onResponse()}}else{B._loaded()}}};E.onerror=function(){B._loaded()};A.body.appendChild(E);E=null;if(B.timeout>0){B._flag=_.asyRun(function(){if(B&&!B._end){B._time()}},B.timeout)}},_clear:function(){var B=this,E=B.node,D=B.constructor,A=B.constructor._pool;A.length=0;delete A[B.id];if(E){B.node=E.id=E.onload=E.onreadystatechange=E.onerror=null;if(B.rspType!="script"){var C=D._n.createElement("div");C.appendChild(E.parentNode&&E.parentNode.removeChild(E)||E);if(linb.browser.ie){_.asyRun(function(){C.innerHTML="";E.removeNode()})}else{C.innerHTML=""}C=null}}},_loaded:function(){var A=this;_.asyRun(function(){if(A.id&&A.constructor._pool[A.id]){A._onError(new Error("errInData"))}},500)}},Static:{_pool:{},$response:function(E){var B=this;try{if(E&&(o=B._pool[E[B.randkey]])){for(var C=0,A=o.length;C<A;C++){o[C]._response=E;o[C]._onResponse()}}else{B._onError(new Error("errInData:"+E))}}catch(D){linb.Debugger&&linb.Debugger.trace(D)}},customQS:function(F){var G=this.constructor,C=G.type,B=G.randkey,A=G.callback,E=(this.rspType!="script"),D=E?B+"="+this.id+"&type=script&":"";if(typeof F=="string"){return(F&&F+"&")+D+(E?A+"=linb.SAjax.$response":"")}else{if(E){F[C]="script";F[B]=this.id;F[A]="linb.SAjax.$response"}return F}}}});Class("linb.IAjax","linb.absIO",{Instance:{_useForm:true,$e:function(A){this._onError(new Error("errInData:"+A))},start:function(){var L=this,H=L.constructor,G,B,K,D,F,C,I,A,E;if(false===_.tryF(L.beforeStart,[],L)){L._onEnd();return }if(!L._retryNo){L._onStart()}B=L.id;if(H._pool[B]){H._pool[B].push(L)}else{H._pool[B]=[L]}L._onload=E=function(M){if(!L.node){return }var T=L.node.contentWindow,R=linb.IAjax,N,U;if(linb.browser.opr){try{if(T.location=="about:blank"){return }}catch(Q){}}try{T.location=R._getDummy()+"#"+linb.ini.dummy_tag;if(T.name==L.id){L.$e("no response")}else{try{N=_.unserialize(decodeURIComponent(T.name));if(N&&(U=R._pool[N[R.randkey]])){for(var P=0,O=U.length;P<O;P++){U[P]._response=N;U[P]._onResponse()}}else{L.$e(T.name)}}catch(S){L.$e(T.name)}}}catch(Q){}};var J=H._if(document,B,E);L.node=J[0];L.frm=J[1];A=L.form=document.createElement("form");A.style.display="none";A.action=L.uri;A.method=L.method;A.target=B;F=L.query||{};for(G in F){if(F[G]&&F[G].nodeName=="INPUT"){F[G].id=F[G].name=G;A.appendChild(F[G]);I=true}else{K=document.createElement("input");K.id=K.name=G;K.value=typeof F[G]=="string"?F[G]:_.serialize(F[G]);A.appendChild(K)}}if(L.method=="POST"&&I){A.enctype="multipart/form-data";if(A.encoding){A.encoding=A.enctype}}document.body.appendChild(A);A.submit();K=A=null;if(L.timeout>0){L._flag=_.asyRun(function(){if(L&&!L._end){L._time()}},L.timeout)}},_clear:function(){var A=this,G=A.node,B=A.form,F=A.constructor,E=document.createElement("div");if(linb.browser.gek&&G){try{G.onload=null;var D=G.contentWindow.document;D.write(" ");D.close()}catch(C){}}A.form=A.node=A.frm=null;clearTimeout(A._tf);if(G){E.appendChild(G.parentNode.removeChild(G))}if(B){E.appendChild(B.parentNode.removeChild(B))}E.innerHTML="";B=E=null}},Static:{method:"POST",_pool:{},_o:function(D){var A=this,B=A._pool[D],C=B[B.length-1];_.tryF(C._onload)},_getDummy:function(E){E=E||window;var I=this,D,A,H=E.document,K=linb.ini,J=linb.browser,F=I.isCrossDomain;if(I.dummy){return I.dummy}if(K.dummy){return I.dummy=K.dummy}if(J.gek){D=H.getElementsByTagName("link");for(var C=0,B=D.length;C<B;C++){A=D[C];if(A.rel=="stylesheet"&&!F(A.href)){return I.dummy=A.href.split("#")[0]}}}if(!F(K.path)){if(!H.getElementById("linb:img:bg")){A=H.createElement("img");A.id="linb:img:bg";A.src=K.file_bg;A.style.display="none";H.body.appendChild(A);A=null}}D=H.getElementsByTagName("img");for(var C=0,B=D.length;C<B;C++){A=D[C];if(!F(A.src)){return I.dummy=A.src.split("#")[0]}}try{if(E!=E.parent){if((E=E.parent)&&!F(""+E.document.location.href)){return I._getDummy(E)}}}catch(G){}return"/favicon.ico"},customQS:function(C){var B=this,D=B.constructor,A=D.type;C[A]="iframe";C[D.randkey]=B.id;return C}}});Class("linb.SC",null,{Constructor:function(F,G,A,E,B){var D=linb.$cache.SC,C;if(C=D[F]||(D[F]=_.get(window,F.split(".")))){_.tryF(G,[F,null,E],C)}else{B=B||{};B.$cb=G;if(A){B.threadid=E}C=D[F]=linb.SC._call(F||"",B,A)}return C},Static:{__gc:function(A){linb.$cache.SC={}},get:function(B,A){return _.get(A||window,(B||"").split("."))},_call:function(L,M,H){H=!!H;var D,J,A,C,G=[],K=linb.SC.get,E=linb.$cache.snipScript,F=function(Q,R,P){var N=this;if(Q){if(!K(L)){if(N.$p){(N.$cache||E)[N.$tag]=Q}else{try{_.exec(Q)}catch(O){throw new Error('errInEval:"'+O+N.$tag)}}}}_.tryF(N.$cb,[N.$tag,Q,P],K(L)||{})},B=function(O){var N=this;_.tryF(N.$cb,[null,null,N.threadid],N)};if(!(A=K(L))){if(J=E[L]){H=false;F.call({$cb:M.$cb},J);delete E[L]}if(!(A=K(L))){C=linb.getPath(L,".js","js");M=M||{};M.$tag=L;var I;if(H&&!M.$p){M.rspType="script";I=linb.SAjax}else{M.asy=H;I=linb.Ajax}I(C,"",F,B,null,M).start();if(!H){A=K(L)}}}else{if(M.$cb){F.call(M)}}return A},loadSnips:function(F,B,G,A,D){if(!F||!F.length){_.tryF(A,[D]);return }var H={},J={$p:1,$cache:B||linb.$cache.snipScript};for(var E=0,C=F.length;E<C;E++){H[F[E]]=1}if(G||A){J.$cb=function(K){if(G){_.tryF(G,arguments,this)}delete H[K||this.$tag];if(_.isEmpty(H)){_.tryF(A,[D]);A=null;linb.Thread.resume(D)}}}linb.Thread.suspend(D);for(var E=0,I;I=F[E++];){this._call(I,_.merge({$tag:I},J),true)}},runInBG:function(E,F,G,A){var C=0,B,H,I=this,D=function(J){while(E.length>C&&(H=I.get(B=E[C++]))){}if(!H){I._call(B,{threadid:J},true)}if(E.length<C){linb.Thread(J).abort()}if(E.length==C){C++}};linb.Thread(null,[D],1000,F,G,A,true).start()},execSnips:function(A){var B,C=A||linb.$cache.snipScript;for(B in C){try{_.exec(C[B])}catch(D){throw new Error('errInEval:"'+D)}}C={}},groupCall:function(C,E,B,D){if(C){var A=this;A.execSnips();linb.Thread.suspend(D);A.loadSnips(C,0,E,function(){A.execSnips();_.tryF(B,[D]);B=null;linb.Thread.resume(D)})}else{_.tryF(B,[D])}}}});new function(){var max,M={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},H={"@window":"window","@this":"this"},A=/[\x00-\x1f\x7f-\x9f\\\"]/g,C=/^\s*\x7b/,D=/^(-\d+|\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?((?:[+-](\d{2}):(\d{2}))|Z)?$/,E=function(t,i,a,v,m,n){for(i in t){if((a=typeof (v=t[i]))=="string"&&(v=D.exec(v))){m=v[8]&&v[8].charAt(0);if(m!="Z"){n=(m=="-"?-1:1)*((+v[9]||0)*60)+(+v[10]||0)}else{n=0}m=new Date(+v[1],+v[2]-1,+v[3],+v[4],+v[5],+v[6],+v[7]||0);n-=m.getTimezoneOffset();if(n){m.setTime(m.getTime()+n*60000)}t[i]=m}else{if(a=="object"&&a.constructor===Object){E(t[i])}}}return t},R=function(n){return n<10?"0"+n:n},F="function",N="number",L="boolean",S="string",O="object",T={},S16=function(b){return Math.floor(b/16).toString(16)+(b%16).toString(16)},MS=function(x,s){return"."+((s=x[s]())?s<10?"00"+s:s<100?"0"+s:s:"000")},Z=(function(a,b){a=-(new Date).getTimezoneOffset()/60;b=a>0?"+":"-";a=""+Math.abs(a);return b+a+(a.length==1?"0":"")+":00"})();T["undefined"]=function(){return"undefined"};T[L]=function(x){return String(x)};T[N]=function(x){return isFinite(x)?String(x):"null"};T[S]=function(x){return H[x]||'"'+(A.test(x)?x.replace(A,function(a,b){if(b=M[a]){return b}b=a.charCodeAt();return"\\u00"+S16(b)}):x)+'"'};T[O]=function(x,filter,dateformat,deep){var me=arguments.callee,map=me.map||(me.map={prototype:1,constructor:1,toString:1,valueOf:1});deep=deep||1;if(deep>99||max>9999){return'"too much recursion!"'}max++;if(x){var a=[],b=[],c=x.constructor,f,i,l,v;if(x===window){return"window"}if(x===document){return"document"}if((typeof x==O||typeof x==F)&&typeof c!=F){return x.nodeType?"document.getElementById('"+x.id+"')":"$alien"}else{if(c==Array){a[0]="[";l=x.length;for(i=0;i<l;++i){if(typeof filter=="function"&&false==filter.call(x,x[i],i)){continue}if(f=T[typeof (v=x[i])]){if(typeof (v=f(v,filter,dateformat,deep+1))==S){b[b.length]=v}}}a[2]="]"}else{if(c==Date){if(dateformat=="utc"){return'"'+x.getUTCFullYear()+"-"+R(x.getUTCMonth()+1)+"-"+R(x.getUTCDate())+"T"+R(x.getUTCHours())+":"+R(x.getUTCMinutes())+":"+R(x.getUTCSeconds())+MS(x,"getUTCMilliseconds")+'Z"'}else{if(dateformat=="gmt"){return'"'+x.getFullYear()+"-"+R(x.getMonth()+1)+"-"+R(x.getDate())+"T"+R(x.getHours())+":"+R(x.getMinutes())+":"+R(x.getSeconds())+MS(x,"getMilliseconds")+Z+'"'}else{return"new Date("+[x.getFullYear(),x.getMonth(),x.getDate(),x.getHours(),x.getMinutes(),x.getSeconds(),x.getMilliseconds()].join(",")+")"}}}else{if(c==RegExp){return String(x)}else{if(typeof x.serialize==F){x=x.serialize()}if(typeof x==O){if(x.nodeType){return"document.getElementById('"+x.id+"')"}else{a[0]="{";for(i in x){if(map[i]||(filter===true?i.charAt(0)=="_":typeof filter=="function"?false===filter.call(x,x[i],i):0)){continue}if(f=T[typeof (v=x[i])]){if(typeof (v=f(v,filter,dateformat,deep+1))==S){b[b.length]=T.string(i)+":"+v}}}a[2]="}"}}else{return String(x)}}}}}a[1]=b.join(", ");return a[0]+a[1]+a[2]}return"null"};T[F]=function(x){return x.$path?x.$path:String(x)};_.serialize=function(obj,filter,dateformat){max=0;return T[typeof obj](obj,filter,dateformat)||""};_.unserialize=function(str,dateformat){try{str=eval(C.test(str)?"("+str+")":str);if(dateformat){if(typeof str==="object"){E(str)}else{if(typeof str==="string"){return E({a:str}).a}}}return str}catch(e){return false}}};_.id=function(){var A=this,B=arguments.callee;if(A.constructor!==B||A.a){return(B._||(B._=new B)).next()}A.a=[-1];A.b=[""];A.value=""};_.id.prototype={constructor:_.id,_chars:"abcdefghijklmnopqrstuvwxyz".split(""),next:function(i){with(this){var m,k,l,i=(i||i===0)?i:b.length-1;if((m=a[i])>=25){m=0;if(i===0){a.splice(0,0,1);b.splice(0,0,"a");l=a.length;for(k=1;k<l;++k){a[k]=0;b[k]="0"}++i}else{next(i-1)}}else{++m}a[i]=m;b[i]=_chars[m];return value=b.join("")}}};Class("linb.absProfile",null,{Constructor:function(){if(!this.$linbid){this.$linbid=linb.absProfile.$linbid.next()}},Instance:{getId:function(){return this.$linbid},link:function(D,E,C){var A=this,B="$"+A.$linbid;C=C||A;if(D[B]){A.unLink(E)}D[B]=C;if(_.isArr(D)){D.push(C)}A._links[E]=D;return A},unLink:function(D){var A=this,C,B="$"+A.$linbid;if(!A._links){return }if(!(C=A._links[D])){return }if(_.isArr(C)){_.arr.removeValue(C,C[B])}delete C[B];delete A._links[D];return A},unLinkAll:function(){var B=this,E="$"+B.$linbid,A=B._links,D,C;for(C in A){D=A[C];if(_.isArr(D)){_.arr.removeValue(D,D[E])}delete D[E]}B._links={};return B}},Static:{$linbid:new _.id,$abstract:true}});(linb.Locale.en||(linb.Locale.en={})).inline={ok:"O K",cancel:"Cancel",set:"SET",today:"Today",yes:"Yes",no:"No"};linb.Locale.en.date={WEEKS:{"0":"Su","1":"Mo","2":"Tu","3":"We","4":"Th","5":"Fr","6":"Sa","7":"WK"},VIEWS:{"10 ms":"10 millisecond","100 ms":"100 milliseconds","1 s":"1 second","10 s":"10 seconds","1 n":"1 minute","5 n":"5 minutes","10 n":"10 minutes","30 n":"30 minutes","1 h":"1 hour","2 h":"2 hours","6 h":"6 hours","1 d":"1 day","1 w":"1 week","15 d":"15 days","1 m":"1 month","1 q":"1 quarter","1 y":"1 year","1 de":"10 years","1 c":"1 century"},MONTHS:{"1":"Jan.","2":"Feb.","3":"Mar.","4":"Apr.","5":"May.","6":"Jun.","7":"Jul.","8":"Aug.","9":"Sep.","10":"Oct.","11":"Nov.","12":"Dec."},MS:"ms",S:"s",N:"n",H:"h",D:"d",W:"w",M:"m",Q:"q",Y:"y",DE:"de",C:"c",HN:function(C,B,A){return B+":"+A},DHN:function(D,B,A,C){return B+"th "+A+":"+C},MDHN:function(E,B,A,D,C){return A+"th "+linb.getRes("date.MONTHS."+B)+" "+D+":"+C},HNS:function(D,B,A,C){return B+":"+A+":"+C},HNSMS:function(E,B,A,D,C){return B+":"+A+":"+D+" "+C},YM:function(C,B,A){return linb.getRes("date.MONTHS."+A)+" "+B},YQ:function(C,B,A){return A+"Q "+B},YMD:function(D,B,A,C){return A+"/"+C+"/"+B},YMD2:function(D,B,A,C){return linb.getRes("date.MONTHS."+A)+" "+C+", "+B},MD:function(C,B,A){return linb.getRes("date.MONTHS."+B)+" "+A},YMDH:function(E,B,A,D,C){return D+"/"+A+"/"+B+" "+C+":00"},YMDHN:function(F,B,A,E,D,C){return A+"/"+E+"/"+B+" "+D+":"+C},YMDHNS:function(G,B,A,F,E,D,C){return A+"/"+F+"/"+B+" "+E+":"+D+":"+C},ALL:function(H,B,A,G,F,E,D,C){return A+"/"+G+"/"+B+" "+F+":"+E+":"+D+" "+C}};linb.Locale.en.color={LIST:{FFFFFF:"White",FFFFF0:"Ivory",FFFFE0:"Light Yellow",FFFF00:"Yellow",FFFAFA:"Snow",FFFAF0:"Floral White",FFFACD:"Lemon Chiffon",FFF8DC:"Cornislk",FFF5EE:"Sea Shell",FFF0F5:"Lavender Blush",FFEFD5:"Papaya Whip",FFEBCD:"Blanched Almond",FFE4E1:"Misty Rose",FFE4C4:"Bisque",FFE4B5:"Moccasin",FFDEAD:"Navajo White",FFDAB9:"Peach Puff",FFD700:"Gold",FFC0CB:"Pink","FFB6C1 ":"Light Pink",FFA500:"Orange",FFA07A:"Light Salmon",FF8C00:"Dark Orange",FF7F50:"Coral",FF69B4:"Hot Pink",FF6347:"Tomato",FF4500:"Orange Red",FF1493:"Deep Pink",FF00FF:"Magenta",FF00FF:"Fuchsia",FF0000:"Red",FDF5E6:"Old Lace",FAFAD2:"Light Goldenrod Yellow",FAF0E6:"Linen",FAEBD7:"Antique White",FA8072:"Salmon",F8F8FF:"Ghost White",F5FFFA:"Medium Spring Green",F5F5F5:"White Smoke",F5DEB3:"Wheat",F4A460:"Sandy Brown",F0FFFF:"Azure",F0FFF0:"Honeydew",F0F8FF:"Alice Blue",F0E68C:"Khaki",F08080:"Light Coral",EEE8AA:"Pale Godenrod",EE82EE:"Violet",E9967A:"Dark Salmon",E6E6FA:"Lavender",E1FFFF:"Light Cyan",DEB887:"Bruly Wood",DDA0DD:"plum",DCDCDC:"Gainsboro",DC143C:"Crimson",DB7093:"Pale Violet Red",DAA520:"Gold Enrod",DA70D6:"Orchid",D8BFD8:"Thistle",D3D3D3:"Light Grey",D2B48C:"Tan",D2691E:"Chocolate",CD853F:"Peru",CD5C5C:"Indian Red",C71585:"Medium Violet Red",C0C0C0:"Silver",BDB76B:"Dark Khaki",BC8F8F:"Rosy Brown",BA55D3:"Medium Orchid",B22222:"Fire Brick",B0E0E6:"Pow Der Blue",B0C4DE:"Light Steel Blue",AFEEEE:"Pale Turquoise",ADFF2F:"Green Yellow",ADD8E6:"Light BLue",A9A9A9:"Dark Gray",A52A2A:"Brown",A0522D:"Sienna","9932CC":"Dark Orchid","98FB98":"Pale Green","9400D3":"Dark Voilet","9370DB":"Medium Purple","90EE90":"Light Green","8FBC8F":"Dark Sea Green","8B4513":"Saddle Brown","8B008B":"Dark Magenta","8B0000":"Dark Red","8A2BE2":"Blue Violet","87CEFA":"Light Sky Blue","87CEEB":"Sky Blue","808080":"Gray","808000":"Olive","800080":"Purple","800000":"Maroon","7FFFAA":"Auqamarin","7FFF00":"Chartreuse","7CFC00":"Lawn Green","7B68EE":"Medium Slate Blue","778899":"Light Slate Gray","708090":"Slate Gray","6B8E23":"Beige","6A5ACD":"Slate Blue","696969":"Dim Gray","6495ED":"Cornflower Blue","5F9EA0":"Cadet Blue","556B2F":"Olive Drab","4B0082":"Indigo","48D1CC":"Medium Turquoise","483D8B":"Dark Slate Blue","4682B4":"Steel Blue","4169E1":"Royal Blue","40E0D0":"Turquoise","3CB371":"Spring Green","32CD32":"Lime Green","2F4F4F":"Dark Slate Gray","2E8B57":"Sea Green","228B22":"Forest Green","20B2AA":"Light Sea Green","1E90FF":"Doder Blue","191970":"Midnight Blue","00FFFF":"Cyan","00FFFF":"Aqua","00FF7F":"Mint Cream","00FF00":"Lime","00FA9A":"Medium Aquamarine","00CED1":"Dark Turquoise","00BFFF":"Deep Sky Blue","008B8B":"Dark Cyan","008080":"Teal","008000":"Green","006400":"Dark Green","0000FF":"Blue","0000CD":"Medium Blue","00008B":"Dark Blue","000080":"Navy","000000":"Black"}};Class("linb.Event",null,{Constructor:function(N,L,A,P){var I=linb.Event,S=0,K,G,D=linb.DragDrop,C,B,J,F;if(!(N=N||window.event)||!(C=L)){C=L=null;return false}L=null;B=N.type;if("mouseover"==B||"mouseout"==B){S=(D&&D._profile.isWorking)?1:2;if(S!=1&&A){C=null;return I.$FALSE}if(!I._handleMouseHover(N,C,I.getSrc(N),S==1)){C=null;return I.$FALSE}if(S==1){J=D&&D._dropElement}}else{if((F=I._tabHookStack).length&&I._kb[B]&&(N.$key||N.keyCode||N.charCode)==9&&false===I._handleTabHook(I.getSrc(N),F=F[F.length-1])){C=null;return }}K=P||I.getId(C);if(F=I._getProfile(K)){if(B=="mousedown"){_.tryF(linb.Dom._blurTrigger,[F,N])}else{if(B=="resize"){B="size";if(linb.browser.ie&&window===C){var E=linb.browser.contentBox&&document.documentElement.clientWidth||document.body.clientWidth,O=linb.browser.contentBox&&document.documentElement.clientHeight||document.body.clientHeight;if(F._w==E&&F._h==O){C=null;return }F._w=E;F._h=O}}}var M,Q,T,H=true,R=[];for(M=0;M<=2;++M){if(S==1&&M!==0&&!N.$force){break}if(S==2&&M===0){continue}T=I._type[B+M]||(I._type[B+M]=I._getEventName(B,M));if(!N.$e||N.$all||(T==N.$name)){F._getEV(R,K,T,C.$linbid)}}Q=function(V,U){for(var X=0,W;W=arguments.callee.tasks[X++];){if(false===W(F,V,U)){return false}}return true};Q.tasks=R;H=Q(N,C.$linbid);if(D){if(B=="drag"){D._onDrag=Q}else{if(B=="dragover"){D._onDragover=Q}}}else{Q.tasks.length=0;delete Q.tasks;Q=null}if(S==1){if("mouseover"==B&&D._dropElement==C.$linbid&&J&&J!=C.$linbid){G=linb.use(J).get(0);I({type:"mouseout",target:G,$e:true,$name:"beforeMouseout",preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}},G);D.setDropElement(C.$linbid)}if("mouseout"==B&&!D._dropElement&&J&&J==C.$linbid){I._preDropable=K;_.asyRun(function(){delete linb.Event._preDropable})}if(C.$linbid==D._dropElement){H=false}}if(H===false){I.stopBubble(N)}C=null;return H}},Static:{$FALSE:linb.browser.opr?undefined:false,_type:{},_kb:{keydown:1,keypress:1,keyup:1},_reg:/(-[\w]+)|([\w]+$)/g,$eventhandler:function(){return linb.Event(arguments[0],this)},$eventhandler2:function(){return linb.Event(arguments[0],this,1)},_events:("mouseover,mouseout,mousedown,mouseup,mousemove,click,dblclick,contextmenu,keydown,keypress,keyup,scroll,blur,focus,load,unload,change,select,submit,error,location,size,dragbegin,drag,dragstop,dragleave,dragenter,dragover,drop").split(","),_getEventName:function(A,B){return(A=this._map1[A])&&((B===0||B==1||B==2)?A[B]:A)},_getProfile:function(C,B,A){return C&&((B=(A=linb.$cache.profileMap)[C])?B["linb.UIProfile"]?B:(A=A[C.replace(this._reg,"")])?A:B:A[C.replace(this._reg,"")])},_handleTabHook:function(D,C){if(D===document){return true}var B=D,A;do{if(this.getId(B,true)==C[0]){return true}}while(B&&(B=B.parentNode)&&B!==document&&B!==window);A=_.tryF(C[1],[C[0]],D);return false},_handleMouseHover:function(B,F,A,I){if(F==document){return true}var D=(B.type=="mouseover"?B.fromElement:B.toElement)||B.relatedTarget;if(I&&B.type=="mouseover"&&this._preDropable){try{do{if(D&&D.id&&D.id==this._preDropable){return true}}while(D&&(D=D.parentNode)&&D!==document&&D!==window)}catch(H){}}if(linb.browser.gek){try{do{if(D==F){return false}}while(D&&(D=D.parentNode))}catch(H){var G=this.getPos(B),D=linb([F]),C=D.offset(),J=D.cssSize(),E=(G.left<C.left||G.left>C.left+J.width||G.top<C.top||G.top>C.top+J.height);return B.type=="mouseover"?!E:E}}else{do{if(D==F){return false}}while(D&&(D=D.parentNode))}return true},_tabHookStack:[],pushTabOutTrigger:function(B,A){this._tabHookStack.push([linb(B)._nodes[0],A]);return this},popTabOutTrigger:function(A){if(A){this._tabHookStack=[]}else{this._tabHookStack.pop()}return this},getSrc:function(B){var A;return((A=B.target||B.srcElement||null)&&linb.browser.kde&&A.nodeType==3)?A.parentNode:A},getId:function(B,A){return window===B?"!window":document===B?"!document":B?(A?B.$linbid:B.id):""},getBtn:function(A){return linb.browser.ie?A.button==4?"middle":A.button==2?"right":"left":A.which==2?"middle":A.which==3?"right":"left"},getPos:function(D){D=D||window.event;if("pageX" in D){return{left:D.pageX,top:D.pageY}}else{var F=document,E=F.documentElement,A=F.body,B=(E&&E.scrollLeft||A&&A.scrollLeft||0)-(E.clientLeft||0),C=(E&&E.scrollTop||A&&A.scrollTop||0)-(E.clientTop||0);return{left:D.clientX+B,top:D.clientY+C}}},getKey:function(A){A=A||window.event;var F=[],I,C=A.$key||A.keyCode||A.charCode||0;if(typeof C=="string"){F[0]=C}else{var H=String.fromCharCode(C),G=A.type;if((G=="keypress"&&C>=33&&C<=128)||((C>=48&&C<=57)||(C>=65&&C<=90))){F[0]=H}else{if(!(I=arguments.callee.map)){I=arguments.callee.map={};var C,E=("3,enter,8,backspace,9,tab,12,numlock,13,enter,19,pause,20,capslock,27,esc,32, ,33,pageup,34,pagedown,35,end,36,home,37,left,38,up,39,right,40,down,44,printscreen,45,insert,46,delete,50,down,52,left,54,right,56,up,91,win,92,win,93,apps,96,0,97,1,98,2,99,3,100,4,101,5,102,6,103,7,104,8,105,9,106,*,107,+,109,-,110,.,111,/,112,f1,113,f2,114,f3,115,f4,116,f5,117,f6,118,f7,119,f8,120,f9,121,f10,122,f11,123,f12,144,numlock,145,scroll,186,;,187,=,189,-,190,.,191,/,192,`,219,[,220,\\,221,],222,',224,meta,63289,numlock,63276,pageup,63277,pagedown,63275,end,63273,home,63234,left,63232,up,63235,right,63233,down,63272,delete,63302,insert,63236,f1,63237,f2,63238,f3,63239,f4,63240,f5,63241,f6,63242,f7,63243,f8,63244,f9,63245,f10,63246,f11,63247,f12,63248,print").split(",");for(var D=1,B=E.length;D<B;D=D+2){I[E[D-1]]=E[D]}E.length=0;I[188]=","}F[0]=I[C]||H}}if((A.modifiers)?(A.modifiers&Event.CONTROL_MASK):(A.ctrlKey||A.ctrlLeft||C==17||C==57391)){if(C==17||C==57391){F[0]=""}F.push("1")}else{F.push("")}if((A.modifiers)?(A.modifiers&Event.SHIFT_MASK):(A.shiftKey||A.shiftLeft||C==16||C==57390)){if(C==16||C==57390){F[0]=""}F.push("1")}else{F.push("")}if((A.modifiers)?false:(A.altKey||A.altLeft||C==18||C==57388)){if(C==18||C==57388){F[0]=""}F.push("1")}else{F.push("")}return F},getEventPara:function(E,A){var D=this.getKey(E),C={pageX:A&&A.left,pageY:A&&A.top,keyCode:D[0],ctrlKey:D[1],shiftKey:D[2],altKey:D[3]};for(var B in E){if(B.charAt(0)=="$"){C[B]=E[B]}}return C},stopBubble:function(A){A=A||window.event;if(A.stopPropagation){A.stopPropagation()}A.cancelBubble=true;this.stopDefault(A)},stopDefault:function(A){A=A||window.event;if(A.preventDefault){A.preventDefault()}A.returnValue=false},keyboardHook:function(H,A,C,E,G,F,I){if(H){var B=linb.$cache.hookKey,D=(H||"").toLowerCase()+":"+(A?"1":"")+":"+(C?"1":"")+":"+(E?"1":"");if(typeof G!="function"){delete B[D]}else{B[D]=[G,F,I]}}return this}},Initialize:function(){var E=this;var B={location:null,size:null,drag:null,dragstop:null,dragover:null,dragbegin:"onmousedown",dragenter:"onmouseover",dragleave:"onmouseout",drop:"onmouseup"},A=["before","on","after"],F,D,C;F=E._map1={};_.arr.each(E._events,function(G){C=_.str.initial(G);F[G]=[A[0]+C,A[1]+C,A[2]+C]});F=E._eventMap={};D=E._eventHandler={};_.arr.each(E._events,function(G){C=_.str.initial(G);F[G]=F[A[1]+G]=F[A[0]+C]=F[A[1]+C]=F[A[2]+C]=G;D[G]=D[A[1]+G]=D[A[0]+C]=D[A[1]+C]=D[A[2]+C]=(G in B)?B[G]:("on"+G)});window.onresize=E.$eventhandler}});Class("linb.CSS",null,{Static:{_r:linb.browser.ie?"rules":"cssRules",_baseid:"linb:css:base",_firstid:"linb:css:first",_lastid:"linb:css:last",_reg1:/\.(\w+)\[CLASS~="\1"\]/g,_reg2:/\[ID"([^"]+)"\]/g,_reg3:/\*([.#])/g,_reg4:/\s+/g,_reg5:/\*\|/g,_reg6:/(\s*,\s*)/g,_rep:function(B){var A=this;return B.replace(A._reg1,".$1").replace(A._reg2,"#$1").replace(A._reg3,"$1").replace(A._reg4," ").replace(A._reg5,"").replace(A._reg6,",").toLowerCase()},_createCss:function(H,D){var C=this,A=this._getHead(),F=C._firstid,E=C._lastid,B,G;B=document.createElement("style");B.type="text/css";B.id=H;if(!D){G=document.getElementById(F)||A.firstChild;while((G=G.nextSibling)&&!/^(script|link|style)$/i.test(""+G.tagName)){}if(G){A.insertBefore(B,G)}else{if(G=document.getElementById(E)){A.insertBefore(B,G)}else{A.appendChild(B)}}}else{A.appendChild(B)}return B},_getCss:function(B,A){return document.getElementById(B)||this._createCss(B,A)},_getBase:function(){return this._getCss(this._baseid)},_getFirst:function(){return this._getCss(this._firstid)},_getLast:function(){return this._getCss(this._lastid,true)},_getHead:function(){return this._head||(this._head=document.getElementsByTagName("head")[0]||document.documentElement)},_check:function(){if(!linb.browser.ie){return }var E=0;for(var D=this._getHead(),C=0,B=D.childNodes,A;A=B[C++];){if(A.type=="text/css"){E++}}return E>20},get:function(F,E){for(var D=this._getHead(),C=0,B=D.childNodes,A;A=B[C++];){if(A.type=="text/css"&&F in A&&A[F]==E){return A}}},addStyleSheet:function(A,H,B){var F,D=this,C=D._getHead(),E=function(I,M,J){var L=document.createElement("style");L.type="text/css";if(M){L.id=M}if(linb.browser.ie){L.styleSheet.cssText=I||""}else{try{L.appendChild(document.createTextNode(I||""))}catch(K){L.styleSheet.cssText=I||""}}C.insertBefore(L,J?D._getLast():D._getBase());L.disabled=true;L.disabled=false;return L},G=function(I,J){var K=J?D._getLast():D._getBase();K.styleSheet.cssText+=I;return K};if(H&&(H=H.replace(/[^\w\-\_\.\:]/g,"_"))&&(F=D.get("id",H))){return F}if(D._check()){return G(A,B)}else{return E(A,H,B)}},includeLink:function(B,G,E,A){var F,D=this,C=D._getHead();if(B&&(F=D.get("href",B))){}else{F=document.createElement("link");F.type="text/css";F.rel="stylesheet";F.href=B;if(G){F.id=G}F.media="all";_.each(A,function(I,H){F.setAttribute(H,I)})}C.insertBefore(F,E?D._getBase():D._getLast());F.disabled=true;F.disabled=false;return F},remove:function(C,B){var A=this._getHead();if(B=this.get(C,B)){B.disabled=true;A.removeChild(B)}},replaceLink:function(A,I,E,B){var F=this,G=F._getHead(),D={},C,H;D[I]=B;C=F.includeLink(A,null,false,D);if(H=F.get(I,E)){G.replaceChild(C,H)}C.disabled=true;C.disabled=false},_build:function(A,D,B){var C="";_.each(D,function(F,E){C+=E.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+F+";"});return B?C:A+"{"+C+"}"},setStyleRules:function(D,J,B){var I=this,N=true,C=document.styleSheets,H,E,A,L,F,G,M,K;D=_.str.trim(D.replace(/\s+/g," "));if(!(J&&B)){L=D.toLowerCase();_.arr.each(_.toArr(C),function(P){try{P[I._r]}catch(O){return }_.arr.each(_.toArr(P[I._r]),function(Q,R){if(!Q.selectorText){return }if(Q.disabled){return }A=I._rep(Q.selectorText);K=A.split(",");if(!J){N=false;if(_.arr.indexOf(K,L)!=-1&&K.length>1){K=_.arr.removeFrom(K,_.arr.indexOf(K,L)).join(",");M=Q.cssText.slice(Q.cssText.indexOf("{")+1,Q.cssText.lastIndexOf("}"));if(P.insertRule){P.insertRule(K+"{"+M+"}",P[I._r].length)}else{if(P.addRule){P.addRule(K,M)}}if(P.deleteRule){P.deleteRule(R)}else{P.removeRule(R)}P.disabled=true;P.disabled=false}else{if(A==L){if(P.deleteRule){P.deleteRule(R)}else{P.removeRule(R)}P.disabled=true;P.disabled=false}}}else{if(A==L){H=Q;return false}if(_.arr.indexOf(K,L)!=-1){E=Q;return false}}},null,true);if(H){N=false;try{_.each(J,function(R,Q){Q=Q.replace(/(-[a-z])/gi,function(S,T){return T.charAt(1).toUpperCase()});H.style[Q]=typeof R=="function"?R(H.style[Q]):R})}catch(O){}P.disabled=true;P.disabled=false;return false}else{if(E){N=false;P.insertRule(I._build(D,J),P[I._r].length);P.disabled=true;P.disabled=false;return false}}},null,true)}if(B||N){I._addRules(D,J)}return I},$getCSSValue:function(G,E){var K=this,H=K._r,C=document.styleSheets,F=C.length,D,B,L,J,I,A;G=_.str.trim(G.replace(/\s+/g," "));for(J=F-1;J>=0;J--){D=(B=C[J][H]).length;for(I=D-1;I>=0;I--){if((L=B[I]).selectorText&&!L.disabled){A=K._rep(L.selectorText);if(_.arr.indexOf(A.split(","),G)!=-1){return L.style[E]}}}}},_addRules:function(A,C){var B=this,D=B._getLast(),E=D.sheet||D.styleSheet;if(E.insertRule){E.insertRule(B._build(A,C),E[B._r].length)}else{if(E.addRule){E.addRule(A,B._build(A,C,true))}}D.disabled=true;D.disabled=false;return B}},Initialize:function(){var A=linb.browser;this.addStyleSheet("html{color:#000;background:#FFF;}body{cursor:default;font:13px/1.231 arial,helvetica,clean,sans-serif;}"+(linb.browser.ie?"body{font-size:small;font:x-small;}":"")+"body *{line-height:1.22em;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;empty-cells:show;font-size:inherit;font:100%;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:normal;}ol,ul,li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym {border:0;font-variant:normal;}sup {vertical-align:text-top;}sub {vertical-align:text-bottom;}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit;}"+(A.ie?"input,textarea,select{font-size:100%;}":"")+"legend{color:#000;}del,ins{text-decoration:none;}pre,code,kbd,samp,tt{font-family:monospace;"+(A.ie?"font-size:108%;":"")+"line-height:100%;}select,input,button,textarea{font:99% arial,helvetica,clean,sans-serif;border-width:1px;}a{color:#0000ee;text-decoration:none;"+(A.gek?"-moz-user-select:none;":"")+"}a:hover{color:red}"+(A.gek?"a:focus{-moz-outline-offset:-1px !important}":"")+"div{font-size:12px;}span{"+(A.gek?"display:-moz-inline-block;display:-moz-inline-box;display:inline-block;":A.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(A.ie?"zoom:1;":"")+"}h1{font-size:138.5%;}h2{font-size:123.1%;}h3{font-size:108%;}h1,h2,h3{margin:1em 0;}h1,h2,h3,h4,h5,h6,strong {font-weight:bold;}em{font-style:italic;}","linb.CSS")}});Class("linb.DomProfile","linb.absProfile",{Constructor:function(A){arguments.callee.upper.call(this);linb.$cache.profileMap[A]=this},Instance:{__gc:function(){delete linb.$cache.profileMap[this.domId]},_getEV:function(B,F,C){var E=linb.$cache.profileMap[F];if(E&&(E=E.events)&&(E=E[C])){for(var D=0,A=E.length;D<A;D++){if(typeof E[E[D]]=="function"){B[B.length]=E[E[D]]}}}}},Static:{get:function(A){return linb.$cache.profileMap[A]},$abstract:true}});Class("linb.absBox",null,{Constructor:function(){this._nodes=[]},Before:function(B){var A=linb.absBox;if(A){(A=A.$type)[B.replace("linb.","")]=A[B]=B}},Instance:{__gc:function(){this._nodes=0},_get:function(A){var B=this._nodes;return _.isNumb(A)?B[A]:B},get:function(A){return this._get(A)},_each:function(B){var C=this,F;for(var E=0,D=C._nodes,A=D.length;E<A;E++){if(F=D[E]){if(false===B.call(C,F,E)){break}}}F=null;return C},each:function(A){return this._each(A)},isEmpty:function(){return !this._nodes.length},merge:function(D){if(this==linb.win||this==linb.doc||this==linb("body")){return this}var A=this,F=A.constructor,D=D._nodes,C=0,B,E=A._nodes;if(D.length){for(;B=D[C++];){E[E.length]=B}A._nodes=F._unique(E)}return A},reBoxing:function(D,A){var B=this,C=linb.absBox.$type[D||"Dom"];if(C==B.KEY){return B}if(C=linb.SC(C)){return C.pack(B._nodes,A)}}},Static:{$abstract:true,$type:{},pack:function(A,B){var C=new this(false);C._nodes=!A?[]:B===false?A.constructor==Array?A:[A]:typeof this._ensureValues=="function"?this._ensureValues(A):A.constructor==Array?A:[A];return C},_unique:function(A){var F={},B=[],E=0,D,C;for(;D=A[E++];){C=typeof D=="string"?D:D.$linbid;if(!F[C]){F[C]=1;B[B.length]=D}}return B},plugIn:function(B,A){this.prototype[B]=A;return this}}});Class("linb.Dom","linb.absBox",{Instance:{get:function(D){var C=linb.$cache.domPurgeData,F=this._nodes,G;if(_.isNumb(D)){return(G=F[D])&&(G=C[G])&&G.element}else{var B=[],A=F.length;for(var E=0;E<A;E++){B[B.length]=(G=C[F[E]])&&G.element}return B}},each:function(B){var F=this,C=linb.$cache.domPurgeData,G;for(var E=0,D=F._nodes,A=D.length;E<A;E++){if((G=C[D[E]])&&(G=G.element)){if(false===B.call(F,G,E)){break}}}G=null;return F},one:function(B){var D=this,C=linb.$cache.domPurgeData,E,A=null;if((E=C[D._nodes[0]])&&(E=E.element)){A=B.call(D,E)}return A},serialize:function(){var A=[];this.each(function(B){A[A.length]=B.id});return"linb(['"+A.join("','")+"'])"},id:function(D,E){var C,B,A=linb.$cache.profileMap;if(typeof D=="string"){return this.each(function(F){if((B=F.id)!==D){if(!E&&(C=A[B])){A[D]=C;delete A[B]}F.id=D}})}else{return this.get(0).id}},$sum:function(B,C){var A=[],E,D;this.each(function(F){E=B.apply(F,C||[]);if(E){if(_.isArr(E)){for(D=0;F=E[D];D++){A[A.length]=F}}else{A[A.length]=E}}});return linb(A)},children:function(){return this.$sum(function(){return _.toArr(this.childNodes)})},clone:function(A){return this.$sum(function(){var E=this.cloneNode(A?true:false);if(linb.browser.ie){var C=E.getElementsByTagName("*"),B=0,D;E.removeAttribute("$linbid");for(;D=C[B];B++){D.removeAttribute("$linbid")}}return E},arguments)},$iterator:function(C,B,E,A,D){return this.$sum(function(L,H,O,M,N){var Q=arguments.callee;if(typeof M!="function"){var I=M||0;M=function(S,R){return R==I}}var J=0,G,F=this,K=0,P;while(F){if(F.nodeType==1){if(M(F,J++)===true){break}}if(L=="x"){F=H?F.nextSibling:F.previousSibling}else{if(L=="y"){F=H?Q.call(H===1?F.lastChild:F.firstChild,"x",(H!==1),true,0,N):F.parentNode}else{O=_.isBool(O)?O:true;G=null;F=H?(P=O&&F.firstChild)?P:(P=F.nextSibling)?P:(G=F.parentNode):(P=O&&F.lastChild)?P:(P=F.previousSibling)?P:(G=F.parentNode);if(G){while(!(G=H?F.nextSibling:F.previousSibling)){F=F.parentNode;if(!F){if(K){return null}else{K=true;G=H?document.body.firstChild:document.body.lastChild;break}}}F=G}O=true}}}return F},arguments)},query:function(B,J,I){B=B||"*";var G="getElementsByTagName",H=arguments.callee,F=H.f1||(H.f1=function(M,L,P){var O=this[G](M),K=[];if(P.test(this[L])){K[K.length]=this}for(var Q,N=0;Q=O[N];N++){if(P.test(Q[L])){K[K.length]=Q}}return K}),E=H.f2||(H.f2=function(M,L,P){var O=this[G](M),K=[];if(this[L]==P){K[K.length]=this}for(var Q,N=0;Q=O[N];N++){if(Q[L]==P){K[K.length]=Q}}return K}),D=H.f3||(H.f3=function(M,L,P){var O=this[G](M),K=[];if(this[L]){K[K.length]=this}for(var Q,N=0;Q=O[N];N++){if(Q[L]){K[K.length]=Q}}return K}),C=H.f4||(H.f4=function(K){return _.toArr(this[G](K))}),A=H.f5||(H.f5=function(M,L){var O=this[G](M),K=[];if(L(this)){K[K.length]=this}for(var P,N=0;P=O[N];N++){if(L(P)){K[K.length]=P}}return K});return this.$sum(J?typeof J=="function"?A:I?I.constructor==RegExp?F:E:D:C,[B,J,I])},$add:function(L,J,G){if(G){G=linb(J);J=this}else{J=linb(J);G=this}if(J._nodes.length){var I=G.get(0),M=J.get(),E=linb.Dom,A=linb.$cache.profileMap,K,O,B,F,C,D,N,O,H=[];J.each(function(P){O=(B=P.id)&&(B=A[B])&&B.LayoutTrigger&&E.getStyle(I,"display")!="none"&&B.LayoutTrigger;if(O){H.push([O,B])}});if(M.length==1){K=M[0]}else{K=document.createDocumentFragment();for(F=0;C=M[F];F++){K.appendChild(C)}}L.call(I,K);for(F=0;C=H[F];F++){for(D=0;N=C[0][D];D++){N.call(C[1])}if(C[1].onLayout){C[1].boxing().onLayout(C[1])}}H.length=0;I=C=K=null}return this},prepend:function(A,B){return this.$add(function(C){if(this.firstChild){this.insertBefore(C,this.firstChild)}else{this.appendChild(C)}},A,B)},append:function(A,B){return this.$add(function(C){this.appendChild(C)},A,B)},addPrev:function(A,B){return this.$add(function(C){this.parentNode.insertBefore(C,this)},A,B)},addNext:function(A,B){return this.$add(function(C){if(this.nextSibling){this.parentNode.insertBefore(C,this.nextSibling)}else{this.parentNode.appendChild(C)}},A,B)},replace:function(F,E){F=linb(F);var B,C,G=this.get(0),D=F.get(),A=D.length;if(A>0&&(B=D[A-1])){G.parentNode.replaceChild(B,G);for(C=0;C<A-1;C++){B.parentNode.insertBefore(D[C],B)}if(E){this.remove()}}G=B=null;return F},swap:function(C){var A=this,B=linb.Dom.getEmptyDiv().html("*",false);C=linb(C);A.replace(B,false);C.replace(A,false);B.replace(C,false);B.get(0).innerHTML="";document.body.insertBefore(B.get(0),document.body.firstChild);return A},remove:function(A){var B=linb.$getGhostDiv();if(A===false){this.each(function(D,C){if(D.parentNode){D.parentNode.removeChild(D)}})}else{this.each(function(C){B.appendChild(C)});linb.$purgeChildren(B);B.innerHTML="";B=null}return this},empty:function(A){return this.each(function(B){linb([B]).html("",A)})},html:function(D,C){var B="",A,E=this.get(0);C=C!==false;if(D!==undefined){if(E.nodeType==3){E.nodeValue=D}else{if(!E.firstChild&&D==""){return this}if(!C&&linb.browser.ie){while(A=E.firstChild){E.removeChild(A)}}if(C){linb.$purgeChildren(E)}E.innerHTML=D}E=null;return this}else{r=(E.nodeType==3)?E.nodeValue:E.innerHTML;E=null;return r}},outerHTML:function(H,A){var K=this,J,L="",D=K.get(0),C=D.id;if(H!==undefined){var E=K.replace(_.str.toDom(H),false);K._nodes[0]=E._nodes[0];linb([D]).remove(A);return K}else{if(linb.browser.gek){var G=linb.Dom,F=G.getEmptyDiv(),E=G.getEmptyDiv(2),I=E.parent(),B;if(B=D.parentNode){K.replace(E,false)}F.append(D);L=F.html();if(B){E.replace(D,false)}F.empty();I.prepend(E)}else{L=D.outerHTML}D=null;return L}},text:function(C){if(C!==undefined){var B=this,A=[];B.each(function(E){var D=E.firstChild;if(D&&D.nodeType!=1){D.nodeValue=C}else{A[A.length]=E}});if(A.length){linb(A).empty().each(function(D){D.appendChild(document.createTextNode(C))})}return B}else{return(function(I){var F,E=I.childNodes,D=E.length,H="",G=arguments.callee;for(F=0;F<D;F++){if(E[F].nodeType!=8){H+=(E[F].nodeType!=1)?E[F].nodeValue:G(E[F])}}return H})(this.get(0))}},attr:function(B,I){var K=this,H=arguments.callee,F=H.map1||(H.map1={"class":"className",readonly:"readOnly",tabindex:"tabIndex","for":"htmlFor",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",value:"value"}),E=H.map2||(H.map2={href:1,src:1,style:1});if(typeof B=="object"){for(var D in B){H.call(K,D,B[D])}return K}var J=linb.browser.ie&&B=="style",G=!E[B=F[B]||B];if(I!==undefined){return K.each(function(M){if(I===null){if(J){M.style.cssText=""}else{if(G){try{M[B]=null;if(M.nodeType==1){M.removeAttribute(B)}}catch(L){}}}}else{if(J){M.style.cssText=""+I}else{if(G){M[B]=I;if(M.nodeType==1&&typeof I=="string"){M.setAttribute(B,I)}}else{M.setAttribute(B,I)}}}})}else{var A,C=K.get(0);if(J){return C.style.cssText}if(B=="selected"&&linb.browser.kde){C.parentNode.selectedIndex}A=((B in C)&&G)?C[B]:C.getAttribute(B,linb.browser.ie&&!G?2:undefined);C=null;return A}},css:function(A,B){return(typeof A=="object"||B!==undefined)?this.each(function(C){linb.Dom.setStyle(C,A,B)}):linb.Dom.getStyle(this.get(0),A)},caret:function(D,H){var N=this.get(0),P=N.tagName,L=typeof D,C=linb.browser.ie,M;if(!/^(input|textarea)$/i.test(P)){return this}N.focus();if(L=="number"){if(C){var A=N.createTextRange();A.collapse(true);A.moveEnd("character",H);A.moveStart("character",D);A.select()}else{N.setSelectionRange(D,H)}return this}else{if(L=="string"){var A=this.caret(),G=0,F=0,K,O=N.value,E=/\r/g;if(C){G=O.substr(0,A[0]).match(E);G=(G&&G.length)||0;F=D.match(E);F=(F&&F.length)||0}if(linb.browser.opr){G=D.match(/\n/g);G=(G&&G.length)||0;F=D.match(/\r\n/g);F=(F&&F.length)||0;F=G-F;G=0}N.value=O.substr(0,A[0])+D+O.substr(A[1],O.length);K=A[0]-G+F+D.length;this.caret(K,K);return K}else{if(C){var A=document.selection.createRange(),I=A.text,G=I.length,J,F;if(P.toLowerCase()=="input"){A.moveStart("character",-N.value.length);J=A.text.length;return[J-G,J]}else{var B=A.duplicate();B.moveToElementText(N);B.setEndPoint("EndToEnd",A);J=B.text.length;return[J-G,J]}}else{return[N.selectionStart,N.selectionEnd]}}}},show:function(F,E){var C,B,G="auto",A=linb.Dom.HIDE_VALUE,D;return this.each(function(H){if(H.nodeType!=1){return }C=H.style;D=linb.getNodeData(H);if(B=(E||(C.top==A&&(D._top||G)))){C.top=B}if(B=(F||(C.left==A&&(D._left||G)))){C.left=B}if(B=D._position){if(C.position!=B){C.position=B}}D._linbhide=0;if(C.visibility!="visible"){C.visibility="visible"}})},hide:function(){var B,A,C;return this.each(function(D){if(D.nodeType!=1){return }B=D.style;A=linb([D]);C=linb.getNodeData(D);if(C._linbhide!==1){C._position=B.position;C._top=B.top;C._left=B.left;C._linbhide=1}if(B.position!="absolute"){B.position="absolute"}B.top=B.left=linb.Dom.HIDE_VALUE})},cssRegion:function(J,K){var N=this;if(typeof J=="object"){var F,M,B,A=N.get(0),E=linb.Dom,G=E._setPxStyle,B={};for(var D=0,H=E._boxArr;F=H[D++];){B[F]=((F in J)&&J[F]!==null)?G(A,F,J[F]):false}if(K){var G=E.$hasEventHandler;if(G(A,"onsize")&&(B.width||B.height)){N.onSize(true,{width:B.width,height:B.height})}if(G(A,"onlocation")&&(B.left||B.top)){N.onLocation(true,{left:B.left,top:B.top})}}return N}else{var C=J,L=K,I=C?N.offset(null,L):N.cssPos(),O=N.cssSize();return{left:I.left,top:I.top,width:O.width,height:O.height}}},cssSize:function(J,F){var I=this,B=I.get(0),A,C=linb.Dom,D=C._setPxStyle,G,E;if(J){var H;G=J.width!==null?D(B,"width",J.width):false;E=J.height!==null?D(B,"height",J.height):false;if(F&&(G||E)&&C.$hasEventHandler(B,"onsize")){I.onSize(true,{width:G,height:E})}A=I}else{A={width:I._W(B,1)||0,height:I._H(B,1)}}return A},cssPos:function(E,G){var B=this.get(0),C=linb.Dom,D=C._setPxStyle,H,F,A;if(E){var I;H=E.left!=null?D(B,"left",E.left):false;F=E.top!==null?D(B,"top",E.top):false;if(G&&(H||F)&&C.$hasEventHandler(B,"onlocation")){this.onLocation(true,{left:H,top:F})}A=this}else{D=C.getStyle;A={left:parseInt(D(B,"left"))||0,top:parseInt(D(B,"top"))||0}}B=null;return A},offset:function(E,N){var J,H,S=linb.browser,W=this,L=W.get(0),P=L,G=L.parentNode,F=L.offsetParent,V=L.ownerDocument,R=V.documentElement,T=V.body,B=/^inline|table.*$/i,D=linb.Dom.getStyle,C=D(L,"position")=="fixed",U=arguments.callee,I=U.add||(U.add=function(Z,X,Y){Z.left+=parseInt(X,10)||0;Z.top+=parseInt(Y,10)||0}),M=U.border||(U.border=function(X,Y){I(Y,D(X,"borderLeftWidth"),D(X,"borderTopWidth"))}),K=U.TTAG||(U.TTAG={TABLE:1,TD:1,TH:1}),O=U.HTAG||(U.HTAG={BODY:1,HTML:1}),A=U.posDiff||(U.posDiff=function(c,Z){var Y=c.cssPos(),X=c.offset(null,Z);return{left:X.left-Y.left,top:X.top-Y.top}});N=N?linb(N).get(0):V;if(E){if(E.left===null&&E.top===null){return W}var Q=A(W,N);W.cssPos({left:E.left===null?null:(E.left-Q.left),top:E.top===null?null:(E.top-Q.top)});J=W}else{if(!(linb.browser.gek&&L==document.body)&&L.getBoundingClientRect){H=L.getBoundingClientRect();E={left:H.left,top:H.top};if(N.nodeType==1){I(E,-(H=N.getBoundingClientRect()).left+N.scrollLeft,-H.top+N.scrollTop)}else{I(E,Math.max(R.scrollLeft,T.scrollLeft)-R.clientLeft,Math.max(R.scrollTop,T.scrollTop)-R.clientTop)}}else{E={left:0,top:0};I(E,L.offsetLeft,L.offsetTop);while(F&&F!=N&&F!=N.offsetParent){I(E,F.offsetLeft,F.offsetTop);if(S.kde||(S.gek&&!K[F.tagName])){M(F,E)}if(!C&&D(F,"position")=="fixed"){C=true}if(F.tagName!="BODY"){P=F.tagName=="BODY"?P:F}F=F.offsetParent}while(G&&G.tagName&&G!=N&&!O[G.tagName]){if(!B.test(D(G,"display"))){I(E,-G.scrollLeft,-G.scrollTop)}if(S.gek&&D(G,"overflow")!="visible"){M(G,E)}G=G.parentNode}if((S.gek&&D(P,"position")!="absolute")){I(E,-T.offsetLeft,-T.offsetTop)}if(C){I(E,Math.max(R.scrollLeft,T.scrollLeft),Math.max(R.scrollTop,T.scrollTop))}}J=E}return J},hasClass:function(B){var A=this.get(0).className.split(/\s+/);return _.arr.indexOf(A,B)!=-1},addClass:function(B){var A,C,E=arguments.callee,D=(E.reg||(E.reg=/\s+/));return this.each(function(F){A=(C=F.className).split(D);if(_.arr.indexOf(A,B)==-1){F.className=C+" "+B}})},removeClass:function(A){var E,D,C,G,I,H=typeof A=="string",F=arguments.callee,B=(F.reg||(F.reg=/\s+/));return this.each(function(J){E=J.className.split(B);C=E.length;G=[];for(D=0;I=E[D];D++){if(H?(I!=A):(!A.test(String(I)))){G[G.length]=I}}if(C!=G.length){J.className=G.join(" ")}})},replaceClass:function(C,A){var D,B;return this.each(function(E){B=(D=E.className).replace(C,A);if(D!=B){E.className=B}})},tagClass:function(A,E){var D=this,F=arguments.callee,C=F["_r1_"+A]||(F["_r1_"+A]=new RegExp("([-\\w]+"+A+"[-\\w]*)")),B=F._r2||(F._r2=/([-\w]+)/g);D.removeClass(C);return(false===E)?D:D.replaceClass(B,"$1 $1"+A)},$addEventHandler:function(A){var D=linb.Event,C,B=D.$eventhandler;return this.each(function(E){if(E.nodeType==3){return }linb.setNodeData(E,["eHandlers","on"+D._eventMap[A]],B);if(C=D._eventHandler[A]){E[C]=B;linb.setNodeData(E,["eHandlers",C],B)}})},$removeEventHandler:function(A){var C=linb.Event,B;return this.each(function(D){if(B=C._eventHandler[A]){D[B]=null}if(D=linb.getNodeData(D,"eHandlers")){delete D["on"+C._eventMap[A]]}})},$addEvent:function(B,H,I,F){var L=this,A=linb.Event,E=_.arr.removeValue,J=_.arr.insertAny,C,G,K,D;if(!F&&F!==0){F=-1}if(typeof I=="string"){I="$"+I}else{I=undefined}L.$addEventHandler(B).each(function(M){if(M.nodeType==3){return }if(!(C=A.getId(M))){C=M.id=linb.Dom._pickDomId()}if(!(G=linb.$cache.profileMap[C])){G=new linb.DomProfile(C)}K=G.events||(G.events={});D=K[B]||(K[B]=[]);if(I===undefined){D.length=0;D=K[B]=[];F=-1;I="_"}D[I]=H;E(D,I);if(F==-1){D[D.length]=I}else{J(D,I,F)}if(G.clearCache){G.clearCache()}});return L},$removeEvent:function(B,J,D){var L=this,I,K,E,C,G,H,A=linb.Event,F=linb.$cache.profileMap,H=A._eventMap[B];L.each(function(M){if(!(C=A.getId(M))){return }if(!(I=F[C])){return }if(!(K=I.events)){return }if(D){_.arr.each(A._getEventName(H),function(N){delete K[N]})}else{if(typeof J=="string"){J="$"+J;if(E=K[B]){if(_.arr.indexOf(E,J)!=-1){_.arr.removeValue(E,J)}delete E[J]}}else{delete K[B]}}if(I.clearCache){I.clearCache()}});return L},$getEvent:function(C,B){var E;if(!(E=linb.Event.getId(this.get(0)))){return }if(B){return _.get(linb.$cache.profileMap,[E,"events",C,"$"+B])}else{var D=[],A=_.get(linb.$cache.profileMap,[E,"events",C]);_.arr.each(A,function(G,F){D[D.length]={o:A[G]}});return D}},$clearEvent:function(){return this.each(function(A){if(!(A=linb.Event.getId(A))){return }if(!(A=linb.$cache.profileMap[A])){return }_.breakO(A.events,2);delete A.events;_.arr.each(linb.Event._events,function(B){A["on"+B]=null})})},$fireEvent:function(A,F){var H=linb.Event._eventMap[A],J,K="on"+H,I,D,G=arguments.callee,E=linb.Event.$eventhandler,C=G.f1||(G.f1=function(){this.returnValue=false}),B=G.f2||(G.f2=function(){this.cancelBubble=true});return this.each(function(L){if(!(I=linb.getNodeData(L,["eHandlers",K]))){return }D=_.copy(F);_.merge(D,{type:H,target:L,button:1,$e:true,$name:A,preventDefault:C,stopPropagation:B},"all");if("blur"==H||"focus"==H){L[H].call(L,D)}else{I.call(L,D)}})},$canFocus:function(){var D=arguments.callee,A=linb.Dom.getStyle,E=D.map||(D.map={a:1,input:1,select:1,textarea:1,button:1,object:1}),B,C;return !!((C=this.get(0))&&C.focus&&(((B=E[C.tagName.toLowerCase()])&&!(parseInt(C.tabIndex)<=-1))||(!B&&parseInt(C.tabIndex)>=(linb.browser.ie?1:0)))&&A(C,"display")!="none"&&A(C,"visibility")!="hidden"&&C.offsetWidth>0&&C.offsetHeight>0)},focus:function(B){var A=this;if(B||A.$canFocus()){try{A.get(0).focus()}catch(C){}}return A},setSelectable:function(B){var A=arguments.callee,C=A._f||(A._f=function(){return false});return this.each(function(D){if(linb.browser.gek){D.style.MozUserSelect=B?"all":"none"}else{D.unselectable=B?"off":"on";D.onselectstart=B?null:C}})},setInlineBlock:function(){var A=this;if(linb.browser.gek){A.css("display","-moz-inline-block").css("display","-moz-inline-box").css("display","inline-block")}else{if(linb.browser.ie6){A.css("display","inline-block").css({display:"inline",zoom:"1"})}else{A.css("display","inline-block")}}return A},topZindex:function(A){var E=1000,C=0,B,F=this.get(0),G=F.offsetParent,D,H;if(F.nodeType!=1||!G){return 1}D=G.childNodes;for(B=0;H=D[B];B++){if(H==F||H.nodeType!=1||!H.$linbid||H.style.display=="none"||H.style.visibility=="hidden"||linb.getNodeData(H,"zIndexIgnore")){continue}C=parseInt(H.style&&H.style.zIndex)||0;E=E>C?E:C}E++;if(E>=linb.Dom.TOP_ZINDEX){linb.Dom.TOP_ZINDEX=E+1000}if(A){F.style.zIndex=E}else{C=parseInt(F.style.zIndex)||0;return E>C?E:C}return this},nextFocus:function(D,C,B){D=_.isBool(D)?D:true;var A=this.get(0),E=this.$iterator("",D,C,function(F){return F!==A&&linb([F]).$canFocus()});if(!E.isEmpty()&&B!==false){E.focus()}return E},animate:function(I,L,A,C,B,K,D){var J=arguments.callee,F=J.lib||(J.lib={linear:function(N,O){return N/O},expoIn:function(N,O){return(N/O==0)?0:Math.pow(2,10*(N/O-1))},expoOut:function(N,O){return(N/O==1)?1:-Math.pow(2,-10*N/O)+1},expoInOut:function(N,O){if(N==0){return 0}else{if(N==O){return 1}else{if((N/=O/2)<1){return 1/2*Math.pow(2,10*(N-1))}}}return 1/2*(-Math.pow(2,-10*--N)+2)},sineIn:function(N,O){return -1*Math.cos(N/O*(Math.PI/2))+1},sineOut:function(N,O){return Math.sin(N/O*(Math.PI/2))},sineInOut:function(N,O){return -1/2*(Math.cos(Math.PI*N/O)-1)},backIn:function(N,O){var P=1.70158;return(N/=O)*N*((P+1)*N-P)},backOut:function(N,O){var P=1.70158;return((N=N/O-1)*N*((P+1)*N+P)+1)},backInOut:function(N,O){var P=1.70158;if((N/=O/2)<1){return 1/2*(N*N*(((P*=(1.525))+1)*N-P))}return 1/2*((N-=2)*N*(((P*=(1.525))+1)*N+P)+2)},bounceOut:function(N,O){if((N/=O)<(1/2.75)){return 7.5625*N*N}else{if(N<(2/2.75)){return 7.5625*(N-=(1.5/2.75))*N+0.75}else{if(N<(2.5/2.75)){return 7.5625*(N-=(2.25/2.75))*N+0.9375}else{return 7.5625*(N-=(2.625/2.75))*N+0.984375}}}}}),E=J.color||(J.color=function(R,Q,N,O){var P,S,V=0+(100-0)*F[R](O,N),U=Q[0],T=Q[1];if(typeof U!="string"||typeof T!="string"){return"#fff"}if(V<0){return U}else{if(V>100){return T}}P=function(W){return(W.charAt(0)!="#")?("#"+W):W};U=P(U);T=P(T);P=function(Y,X,W){return parseInt(Y.slice(X,W),16)||0};S=function(W){return{red:P(W,1,3),green:P(W,3,5),blue:P(W,5,7)}};U=S(U);T=S(T);P=function(d,Z,X,Y){var W=d[Y]+Math.round((X/100)*(Z[Y]-d[Y]));return(W<16?"0":"")+W.toString(16)};return"#"+P(U,T,V,"red")+P(U,T,V,"green")+P(U,T,V,"blue")});C=C||100;B=B||5;K=F[K]!==undefined?K:"expoIn";var M=this,H=0,G=[function(N){if(++H>B){linb.Thread(N).abort();return false}_.each(I,function(Q,O){if(typeof Q=="function"){Q(F[K](H,B))}else{var P=String(_.str.endWith(O.toLowerCase(),"color")?E(K,Q,B,H):(Q[0]+(Q[1]-Q[0])*F[K](H,B)));(M[O])?(M[O](P)):(M.css(O,P))}})}];return linb.Thread(D||_.id(),G,Math.max(C/B-9,0),null,L,A,true)},popToTop:function(H,G,K){var I,F=this,L;K=linb(K);if(K.isEmpty()){K=linb("body")}F.css({position:"absolute",left:linb.Dom.HIDE_VALUE,top:linb.Dom.HIDE_VALUE,display:"block",zIndex:linb.Dom.TOP_ZINDEX});if(H["linb.Dom"]||H.nodeType==1||typeof H=="string"){G=(G||1).toString();var C=linb(H),M=C.offset(null,K);I={left:M.left,top:M.top,width:C.offsetWidth(),height:C.offsetHeight()}}else{G=G?"3":"0";L=G=="0"?0:8;I=H.region||{left:H.left-L,top:H.top-L,width:L*2,height:L*2}}H={left:0,top:0};var L=linb.win,E={};E.left=L.scrollLeft();E.top=L.scrollTop();E.width=L.width()+E.left;E.height=L.height()+E.top;var J=F.offsetWidth(),D=F.offsetHeight(),B,A;switch(G){case"1":B=false;A=true;break;case"2":B=true;A=false;break;case"3":B=false;A=false;break;case"4":B=A=true;break}if(B){if(I.top+D<E.height){H.top=I.top}else{H.top=I.top+I.height-D}}else{if(I.top+I.height+D<E.height){H.top=I.top+I.height}else{H.top=I.top-D}}if(A){if(I.left+J<E.width){H.left=I.left}else{H.left=I.left+I.width-J}}else{if(I.left+I.width+J<E.width){H.left=I.left+I.width}else{H.left=I.left-J}}if(H.left+J>E.width){H.left=E.width-J}if(H.left<E.left){H.left=E.left}if(H.top+D>E.height){H.top=E.height-D}if(H.top<E.top){H.top=E.top}F.cssPos(H).css({visibility:"visible",display:"block"});K.get(0).appendChild(F.get(0));return this},setBlurTrigger:function(A,C,I){var G=this,H=document,B="$blur_triggers$",E=linb(I?I:G),F=linb.Dom._blurTrigger||(linb.Dom._blurTrigger=function(J,M){var N=arguments.callee,J=linb.Event.getPos(M),L=N.arr,Q=_.copy(L),P,O,R,K,S;_.arr.each(Q,function(T){P=true;if(!(S=L[T].target)){P=false}else{S.each(function(U){if(!linb.Dom.byId(U.id)){return P=false}})}if(!P){_.arr.removeValue(L,T);delete L[T]}});Q=_.copy(L);_.arr.each(Q,function(T){S=L[T];P=true;S.target.each(function(U){if(U.parentNode&&(R=U.offsetWidth)&&(K=U.offsetHeight)){O=linb([U]).offset();if(J.left>=O.left&&J.top>=O.top&&J.left<=(O.left+R)&&J.top<=(O.top+K)){return P=false}}});if(P){_.tryF(S.trigger,[],S.target);_.arr.removeValue(L,T);delete L[T]}else{return false}},null,true);Q.length=0}),D=F.arr||(F.arr=[]);if(!H.onmousedown){H.onmousedown=linb.Event.$eventhandler}E.each(function(J){if(!J.id){J.id=_.id()}});if(!C){_.arr.removeValue(D,A);delete D[A]}else{if(D[A]){_.arr.removeValue(D,A);delete D[A]}}D[A]={trigger:C,target:E};D.push(A);return this},$firfox2:function(){if(!linb.browser.gek2){return this}var A=this;A.css("overflow","hidden");_.asyRun(function(){A.css("overflow","auto")});return A},ieRemedy:function(){if(linb.browser.ie){var A=linb.Dom;if(!A.$_ie){A.$_ie=linb()}A.$_ie.merge(this);_.asyRun(function(){if(!A.$_ie.isEmpty()){A.$_ie.css("wordWrap","break-word")}});_.asyRun(function(){if(!A.$_ie.isEmpty()){A.$_ie.css("wordWrap","normal");A.$_ie._nodes.length=0}})}return this},fixPng:function(A){if(linb.browser.ie6){return this.each(function(B){if(B.tagName=="IMG"){B.style.height=B.height;B.style.width=B.width;B.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+B.src+", sizingMethod="+A+")";B.src=linb.ini.file_bg}})}}},Static:{HIDE_VALUE:"-10000px",TOP_ZINDEX:10000,_boxArr:_.toArr("width,height,left,top,right,bottom"),_cursor:{},_pickDomId:function(){var A;do{A="linb_"+_.id()}while(document.getElementById(A));return A},_map:{html:1,head:1,body:1},_getTag:function(A){return A?A.$linbid?A.$linbid:A.nodeType==1?linb.$registerNode(A).$linbid:0:0},_ensureValues:function(F){var D,C,E=this._map,B=[],A=F===window?["!window"]:F===document?["!document"]:F.constructor==Array?F:F["linb.Dom"]?F._nodes:F._toDomElems?F._toDomElems():typeof F=="function"?F():[F];for(C=0;C<A.length;C++){if(D=!(D=A[C])?0:D===window?"!window":D===document?"!document":typeof (D=A[C])=="string"?D.charAt(0)=="!"?D:this._getTag(E[D]?document.getElementsByTagName(D)[0]:document.getElementById(D)):(D["linb.UIProfile"]||D["linb.Template"])?D.renderId?D.renderId:(D.boxing().render()&&D.renderId):this._getTag(D)){B[B.length]=D}}return B.length<=1?B:this._unique(B)},getStyle:function(C,B){if(!C||C.nodeType!=1){return""}var I,H;if(B=="opacity"&&linb.browser.ie){H=B="filter"}I=C.style[B];if(!I){var G=arguments.callee,J,A=G.map||(G.map={"float":1,cssFloat:1,styleFloat:1}),E=G._c1||(G._c1={}),D=G._c2||(G._c2={}),B=E[B]||(E[B]=B.replace(/\-(\w)/g,function(L,K){return K.toUpperCase()})),F=D[B]||(D[B]=B.replace(/([A-Z])/g,"-$1").toLowerCase());if(A[B]){B=linb.browser.ie?"styleFloat":"cssFloat"}I=((J=document.defaultView)&&J.getComputedStyle)?(J=J.getComputedStyle(C,null))?J.getPropertyValue(F):"":(C.currentStyle&&(C.currentStyle[B]||C.currentStyle[F]))}return H?I?(parseFloat(I.match(/alpha\(opacity=(.*)\)/)[1])||0)/100:1:(I||"")},setStyle:function(F,B,G){if(F.nodeType!=1){return }if(typeof B=="string"){var E=this.getStyle,D=E._c1||(E._c1={}),A=E._r1||(E._r1=/alpha\([^\)]*\)/ig);B=D[B]||(D[B]=B.replace(/\-(\w)/g,function(I,H){return H.toUpperCase()}));if(B=="opacity"){G=parseFloat(G)||0;G=G>0.9999?"":linb.browser.ie?"alpha(opacity="+100*G+")":G;if(linb.browser.ie){F.zoom=1;B="filter";G=F.style.filter.replace(A,"")+G}}F.style[B]=G}else{for(var C in B){arguments.callee.call(this,F,C,B[C])}}},_setPxStyle:function(C,A,D){if(C.nodeType!=1){return false}var B=C.style;if(D||D===0){D=((""+parseFloat(D))==(""+D))?(parseInt(D)||0)+"px":D+"";if((A=="width"||A=="height")&&D.charAt(0)=="-"){D="0"}if(B[A]!=D){B[A]=D;return true}}return false},_emptyDivId:"linb.empty::",getEmptyDiv:function(E){var F=1,B,D,A,C,J,H=0,I=document,G=I.body,K=function(L){L.id=B;linb([L]).attr("style","position:absolute;visibility:hidden;overflow:visible;left:"+linb.Dom.HIDE_VALUE+";top:"+linb.Dom.HIDE_VALUE+";")};E=E||1;while(1){B=this._emptyDivId+F;if(C=linb.Dom.byId(B)){if(!C.firstChild&&++H==E){return linb([C])}}else{C=I.createElement("div");K(C,B);if(G.firstChild){G.insertBefore(C,G.firstChild)}else{G.appendChild(C)}D=linb([C]);G=C=null;return D}F++}G=C=null},setCover:function(C,G){var F=arguments.callee,A="linb.temp:cover:",H="linb.temp:message:",E=typeof C=="string"?C:"",D,B;if((D=linb(A)).isEmpty()){linb("body").prepend(D=linb.create('<div id="'+A+'" style="position:absolute;display:none;left:0;top:0;background-image:url('+linb.ini.file_bg+')"><div id="'+H+'" style="position:absolute;font-size:12px"></div></div>'));linb.setNodeData(D.get(0),"zIndexIgnore",1)}B=linb(H);if(!C){if(typeof F._label=="string"&&F._label!==G){return }if(F._showed){B.empty(false);D.css({zIndex:0,cursor:"",display:"none"});F._showed=false}delete F._label}else{if(typeof G=="string"){F._label=G}var I=linb.win;if(!F._showed){D.css({zIndex:linb.Dom.TOP_ZINDEX*2,display:"",width:I.scrollWidth()+"px",height:I.scrollHeight()+"px",cursor:"wait"});F._showed=true}if(E){B.css({left:I.scrollLeft()+I.width()/2+"px",top:I.scrollTop()+I.height()/2+"px"});B.html(E+"",false)}}},byId:function(A){return document.getElementById(A||"")},$hasEventHandler:function(B,A){return linb.getNodeData(B,["eHandlers",A])},submit:function(D,C,G,E,B){C=_.isHash(C)?C:{};G=G||"get";D=D||"";E=E||"_blank";var A=[];_.each(C,function(I,H){A.push('<textarea name="'+H+'">'+(typeof I=="object"?_.serialize(I):I)+"</textarea>")});if(!_.isEmpty(C)){A.push('<input type="hidden" name="rnd" value="'+_()+'">')}var F=_.str.toDom('<form target="'+E+'" action="'+D+'" method="'+G+(B?'" enctype="'+B:"")+'">'+A.join("")+"</form>");linb.Dom.getEmptyDiv().append(F);F.get(0).submit();F.remove()},busy:function(A){linb.Dom.setCover(true,A)},free:function(A){linb.Dom.setCover(false,A)},animate:function(F,G,I,A,D,B,H,E){var C=document.createElement("div");_.merge(F,{position:"absolute",left:this.HIDE_VALUE,zIndex:this.TOP_ZINDEX+10});linb.Dom.setStyle(C,F);document.body.appendChild(C);return linb([C]).animate(G,I,function(){_.tryF(A);if(C.parentNode){C.parentNode.removeChild(C)}C=null},D,B,H,E)},$enableEvents:function(B){if(!_.isArr(B)){B=[B]}var A=this,C;_.arr.each(B,function(D){C=function(F,H,E){if(typeof F=="function"){return this.$addEvent(D,F,H,E)}else{if(F===null){return this.$removeEvent(D,H,E)}}var G=arguments[1]||{};G.$all=(arguments[0]===true);return this.$fireEvent(D,G)};C.$event$=1;A.plugIn(D,C)})}},After:function(U){var M=this;_.each({parent:["y",false],prev:["x",false],next:["x",true],first:["y",true],last:["y",1]},function(H,B){M.plugIn(B,function(L){return this.$iterator(H[0],H[1],true,L||1)})});_.arr.each(_.toArr("offsetLeft,offsetTop,scrollWidth,scrollHeight"),function(B){M.plugIn(B,function(){var T=this.get(0),R=window,W=document;if(T==R||T==W){if("scrollWidth"==B||"scrollHeight"==B){var L=W.documentElement,H=W.body;return Math.max(L[B],H[B])}else{T=linb.browser.contentBox?W.documentElement:W.body}}return T[B]})});var N="padding",P="margin",X="border",V="inner",O="offset",J="outer",G="width",S="height",A="Width",F="Height",C="Top",E="Left",I="top",Q="left",D="Right",K="Bottom";_.arr.each([["_"+N+"H",N+C,N+K],["_"+N+"W",N+E,N+D],["_"+X+"H",X+C+A,X+K+A],["_"+X+"W",X+E+A,X+D+A],["_"+P+"W",P+E,P+D],["_"+P+"H",P+C,P+K]],function(L){var H,B=linb.Dom.getStyle;M.plugIn(L[0],function(){H=this.get(0);return(parseInt(B(H,L[1]))+parseInt(B(H,L[2])))||0})});_.arr.each([["_W",G,"_"+N+"W","_"+X+"W","_"+P+"W",V+A,O+A],["_H",S,"_"+N+"H","_"+X+"H","_"+P+"H",V+F,O+F]],function(B){M.plugIn(B[0],function(i,T,h){var g,c,Y,k=i.style,u=arguments.callee,Z=linb.browser.contentBox,j=u.r1||(u.r1=/%$/),R=linb.Dom.getStyle,l=linb.Dom._setPxStyle,L=typeof h,W;if(L=="undefined"||L=="boolean"){if(h===true){g=(R(i,"display")=="none");if(g){var q=linb.Dom.getEmptyDiv().html("*",false);linb([i]).swap(q);var s,e,m;s=k.visibility,e=k.position,m=k.display;e=e||"";s=s||"";m=m||"";k.visibility="hidden";k.position="absolute";k.display="block"}}Y=linb([i]);switch(T){case 1:c=R(i,B[1]);if(isNaN(parseInt(c))||j.test(c)){c=u(i,2)-(Z?Y[B[2]]():0)}c=parseInt(c)||0;break;case 2:c=i[B[6]]-Y[B[3]]();break;case 3:c=i[B[6]];if(!c){c=u(i,1)+(Z?Y[B[2]]():0)+Y[B[3]]()}break;case 4:c=u(i,3);c+=Y[B[4]]();break}if(g){k.display=m;k.position=e;k.visibility=s;Y.swap(q);q.empty(false)}return parseInt(c)||0}else{switch(T){case 1:if(l(i,B[1],h)){if(linb.Dom.$hasEventHandler(i,"onsize")){var H={};H[B[1]]=1;linb([i]).onSize(true,H)}}break;case 2:u(i,1,h-(Z?linb([i])[B[2]]():0));break;case 3:u(i,1,h-(Y=linb([i]))[B[3]]()-(Z?Y[B[2]]():0));break;case 4:u(i,1,h-(Y=linb([i]))[B[4]]()-Y[B[3]]()-(Z?Y[B[2]]():0));break}}})});_.arr.each([[V+A,"_W",2],[O+A,"_W",3],[J+A,"_W",4],[V+F,"_H",2],[O+F,"_H",3],[J+F,"_H",4]],function(B){M.plugIn(B[0],function(L){var H=typeof L;if(H=="undefined"||H=="boolean"){return this[B[1]](this.get(0),B[2])}else{return this.each(function(R){this[B[1]](R,B[2],L)})}})});_.arr.each([[Q+"By",Q],[I+"By",I],[G+"By",G],[S+"By",S]],function(B){M.plugIn(B[0],function(Y,W){if(Y===0){return this}var H,T,R=B[1],L=linb.Dom.getStyle;return this.each(function(Z){H=L(Z,R);H=(parseInt(H)||0)+Y;if(R=="width"||R=="height"){H=H>0?H:0}Z.style[R]=H+"px";if(W){T={};T[R]=1;var c=linb.Dom.$hasEventHandler;if((R=="left"||R=="top")&&c(Z,"onlocation")){linb([Z]).onLocation(true,T)}if((R=="width"||R=="height")&&c(Z,"onsize")){linb([Z]).onSize(true,T)}}},this)})});_.arr.each(["scrollLeft","scrollTop"],function(B){M.plugIn(B,function(T){if(T!==undefined){return this.each(function(W){W[B]=T})}else{var R=this.get(0);if(R===window||R===document){var L=document.documentElement,H=document.body;if("scrollTop"==B){return window.pageYOffset||Math.max(L[B],H[B])}if("scrollLeft"==B){return window.pageXOffset||Math.max(L[B],H[B])}}return R[B]}})});_.arr.each("width,height,left,top".split(","),function(B){M.plugIn(B,function(Z){var d=this,H=d.get(0),T=linb.browser,R=typeof Z,Y=document,c;if(!H||H.nodeType==3){return }if(R=="undefined"||R=="boolean"){if((B=="width"&&(c="Width"))||(B=="height"&&(c="Height"))){if(Y===H){return Math.max(Y.body["scroll"+c],Y.body["offset"+c],Y.documentElement["scroll"+c],Y.documentElement["offset"+c])}if(window===H){return T.opr?(Y.body["client"+c]||window["inner"+c]):T.kde?window["inner"+c]:(linb.browser.contentBox&&Y.documentElement["client"+c])||Y.body["client"+c]}}if(B=="width"){Z=parseInt(H.style.width)||d._W(H,1,Z)}else{if(B=="height"){Z=parseInt(H.style.height)||d._H(H,1,Z)}else{Z=linb.Dom.getStyle(H,B)}}return Z=="auto"?Z:(parseInt(Z)||0)}else{var L=linb.Dom._setPxStyle,c,W;return d.each(function(e){if(e.nodeType!=1){return }if(e.style[B]!==Z){if(B=="width"){d._W(e,1,Z)}else{if(B=="height"){d._H(e,1,Z)}else{if(L(e,B,Z)){if((B=="top"||B=="left")&&linb.Dom.$hasEventHandler(H,"onlocation")){W={};W[B]=1;linb([e]).onLocation(true,W)}}}}}})}})});_.arr.each(linb.Event._events,function(B){_.arr.each(linb.Event._getEventName(B),function(H){M.$enableEvents(H)})})},Initialize:function(){_.set(linb.$cache.domPurgeData,"!window",{element:window});_.set(linb.$cache.domPurgeData,"!document",{element:document});linb.win=linb(["!window"],false);linb.doc=linb(["!document"],false);linb.$inlineBlock=linb.browser.gek?["-moz-inline-block","-moz-inline-box","inline-block"]:linb.browser.ie6?["inline-block","inline"]:"inline-block",linb.doc.onKeydown(function(C,B){var A=linb.Event,E,D=A.$keyboard=A.getKey(B);if(D){if(D[0].length==1){D[0]=D[0].toLowerCase()}E=linb.$cache.hookKey[D.join(":")];if(E){if(_.tryF(E[0],E[1],E[2])===false){A.stopBubble(B);return false}}}return true},"document").onKeyup(function(B,A){delete linb.Event.$keyboard},"document");linb.doc.onClick(function(F,E,H){if(!linb.History){return }var D=location.href.split("#")[0],C=linb.Event,G=C.getSrc(E),A,B=0,A;do{if(G.tagName=="A"){A=true;break}if(++B>8){break}}while(G=G.parentNode);if(A){if(G.href.indexOf("javascript:")==0){return false}if(!C.getKey(E)[2]&&C.getBtn(E)=="left"&&(G.href.indexOf(D+"#")==0||G.href.indexOf("#")==0)){linb.History.setFI(G.href.replace(D,""));return false}}},"hookA",0);linb.win.afterUnload(function(){linb.SC.__gc();linb.Thread.__gc();linb([window,document]).$clearEvent();linb("body").empty();_.breakO(linb.$cache,2);_.breakO([linb,Class,_],3);window.Class=window.Namespace=window.linb=window._=undefined},"window",-1)}});Class("linb.DragDrop",null,{Static:{_eh:"_dd",_id:"linb.dd:proxy:",_idi:"linb.dd:td:",_type:{blank:1,move:1,shape:1,deep_copy:1,copy:1,icon:1,none:1},_Icons:{none:"top",move:"-16px",link:"-32px",add:"-48px"},_profile:{},_left:function(value){with(this._profile){if(magneticDistance>0&&xMagneticLines.length){var l=xMagneticLines.length;while(l--){if(Math.abs(value-xMagneticLines[l])<=magneticDistance){return xMagneticLines[l]}}}if(widthIncrement>1){return Math.floor(value/widthIncrement)*widthIncrement}return value}},_top:function(value){with(this._profile){if(magneticDistance>0&&yMagneticLines.length){var l=yMagneticLines.length;while(l--){if(Math.abs(value-yMagneticLines[l])<=magneticDistance){return yMagneticLines[l]}}}if(heightIncrement>1){return Math.floor(value/heightIncrement)*heightIncrement}return value}},_ini:function(D){var C=this,B=C._profile,A=linb.win;C._box={width:A.width()+A.scrollLeft(),height:A.height()+A.scrollTop()};B.ox=B.x;B.oy=B.y;if(C._proxy=D){C._proxystyle=D.get(0).style;C._profile.curPos=C._cssPos=C._proxy.cssPos();C._cssPos_x=B.x-C._cssPos.left;C._cssPos_y=B.y-C._cssPos.top;B.restrictedLeft=B.x-(B.maxLeftOffset||0);B.restrictedRight=B.x+(B.maxRightOffset||0);B.restrictedTop=B.y-(B.maxTopOffset||0);B.restrictedBottom=B.y+(B.maxBottomOffset||0);C._proxyLeft=C._pre.left=C._cssPos.left;C._proxyTop=C._pre.top=C._cssPos.top;if("move"!==B.dragType){C._proxy.css("zIndex",linb.Dom.TOP_ZINDEX*10)}}},_reset:function(){var C=this,B=null,A=false;_.tryF(C.$reset);C.setDropFace();C._resetProxy();C.$proxySize=50;C.$mousemove=C.$mouseup=C.$onselectstart=C.$ondragstart="*";C._cursor="";C._pre={};C._proxyLeft=C._proxyTop=C._cssPos_x=C._cssPos_y=0;C._stop=A;if(C._onDrag&&C._onDrag.tasks){C._onDrag.tasks.length=0;delete C._onDrag.tasks}if(C._onDragover&&C._onDragover.tasks){C._onDragover.tasks.length=0;delete C._onDragover.tasks}C._cssPos=C._box=C._dropElement=C._source=C._proxy=C._proxystyle=C._onDrag=C._onDragover=B;C._profile={dragType:"shape",dragCursor:"move",targetReposition:true,dragIcon:linb.ini.path+"ondrag.gif",magneticDistance:0,xMagneticLines:[],yMagneticLines:[],widthIncrement:0,heightIncrement:0,dragDefer:0,horizontalOnly:A,verticalOnly:A,maxBottomOffset:B,maxLeftOffset:B,maxRightOffset:B,maxTopOffset:B,targetNode:B,targetCSS:B,dragKey:B,dragData:B,targetLeft:B,targetTop:B,targetWidth:B,targetHeight:B,targetOffsetParent:B,shadowFrom:B,proxyNode:B,x:0,y:0,ox:0,oy:0,curPos:{},offset:{},isWorking:A,restrictedLeft:B,restrictedRight:B,restrictedTop:B,restrictedBottom:B,dropElement:B};return C},abort:function(){this._stop=true},_end:function(){var B=this,A=document;if(B._proxy){B._unpack()}if(B.$onselectstart!="*"){A.body.onselectstart=B.$onselectstart}if(B.$ondragstart!="*"){A.ondragstart=B.$ondragstart}if(B.$mousemove!="*"){A.onmousemove=B.$mousemove}if(B.$mouseup!="*"){A.onmouseup=B.$mouseup}return B},startDrag:function(D,E,B,H,C){var F=this;if(F._profile.isWorking){return false}F._end()._reset();F._profile.isWorking=true;B=_.isHash(B)?B:{};D=D||window.event;if(linb.Event.getBtn(D)!=="left"){return true}F._source=B.targetNode=linb(E);F._cursor=F._source.css("cursor");if(!B.targetNode.get(0).id){B.targetNode.get(0).id=linb.Dom._pickDomId()}F._defer=B.dragDefer=_.isNumb(B.dragDefer)?B.dragDefer:0;if(true===B.dragCursor){B.dragCursor=F._cursor}if(typeof B.dragIcon=="string"){B.dragType="icon"}var I=document,J=linb.Event.getPos(D);B.x=J.left;B.y=J.top;B.dragKey=H||B.dragKey||null;B.dragData=C||B.dragData||null;var A=linb.Event.getSrc(D);F._start=function(L){var K=F._profile;_.merge(K,B,"with");F._source.beforeDragbegin();if(F._stop){F._end()._reset();return false}if(linb.Event){linb.Event._preDropable=F._source.get(0).id}if(K.dragType=="icon"){K.targetReposition=false}F._ini(K.dragType=="none"?null:F._pack(J,K.targetNode));if(B.x>=F._box.width||B.y>=F._box.height){F._end()._reset();return true}F._source.onDragbegin();if(K.dragDefer<1){F.$mousemove=I.onmousemove;F.$mouseup=I.onmouseup}if(linb.browser.ie){setTimeout(function(){A.releaseCapture()})}I.onmousemove=F.$onDrag;I.onmouseup=F.$onDrop;F._source.afterDragbegin();if(K.dragDefer>0){F.$onDrag.call(F,L)}};if(linb.browser.ie){F.$ondragstart=I.ondragstart;F.$onselectstart=I.body.onselectstart;I.ondragstart=I.body.onselectstart=null;if(I.selection){_.tryF(I.selection.empty)}}linb.Event.stopBubble(D);if(B.targetNode.get(0)!==I){linb(I).onMousedown(true,linb.Event.getEventPara(D,J))}if(B.dragDefer<1){_.tryF(F._start,[D],F);return false}else{F.$mouseup=I.onmouseup;I.onmouseup=function(K){linb.DragDrop._end()._reset();return _.tryF(document.onmouseup,[K],null,true)};F.$mousemove=I.onmousemove;var G={};I.onmousemove=function(L){var K=linb.Event.getPos(L);if(K.left===G.left&&K.top===G.top){return }G=K;if(--F._defer<=0){linb.DragDrop._start(L)}return false}}},$onDrag:function(C){var D=linb.DragDrop,B=D._profile;C=C||window.event;if((!B.isWorking)||D._stop||(linb.browser.ie&&(!C.button))){D.$onDrop(C);return true}var A=linb.Event.getPos(C);B.x=A.left;B.y=A.top;if(!B.isWorking){return false}if(D._proxy){if(!B.verticalOnly){D._proxyLeft=Math.floor(D._left(((B.maxLeftOffset!==null&&B.x<=B.restrictedLeft)?B.restrictedLeft:(B.maxRightOffset!==null&&B.x>=B.restrictedRight)?B.restrictedRight:B.x)-D._cssPos_x));if(D._proxyLeft-D._pre.left){D._proxystyle.left=D._proxyLeft+"px"}D._pre.left=D._proxyLeft;B.curPos.left=D._proxyLeft+D.$proxySize}if(!B.horizontalOnly){D._proxyTop=Math.floor(D._top(((B.maxTopOffset!==null&&B.y<=B.restrictedTop)?B.restrictedTop:(B.maxBottomOffset!==null&&B.y>=B.restrictedBottom)?B.restrictedBottom:B.y)-D._cssPos_y));if(D._proxyTop-D._pre.top){D._proxystyle.top=D._proxyTop+"px"}D._pre.top=D._proxyTop;B.curPos.top=D._proxyTop+D.$proxySize}}else{B.curPos.left=B.x;B.curPos.top=B.y}if(D._onDrag!=1){if(D._onDrag){D._onDrag(C,D._source._get(0))}else{D._onDrag=1;D._source.onDrag(true,linb.Event.getEventPara(C,A))}}return false},$onDrop:function(D){var E=linb.DragDrop,C=E._profile,A=linb.Event;D=D||window.event;E._end();if(C.isWorking){E.setDropFace();var B=E._source.onDragstop(true,A.getEventPara(D));if(E._dropElement){linb.use(E._dropElement).onDrop(true,A.getEventPara(D))}}E._reset();A.stopBubble(D);_.tryF(document.onmouseup,[D]);return !!B},setDropElement:function(A){this._profile.dropElement=this._dropElement=A;return this},getProfile:function(){var B=this,A=B._profile;A.offset=B._proxy?{x:B._proxyLeft-A.ox+B._cssPos_x,y:B._proxyTop-A.oy+B._cssPos_y}:{x:A.x-A.ox,y:A.y-A.oy};return A},setDropFace:function(G,E){var H=this,D='<div style="position:absolute;z-index:'+linb.Dom.TOP_ZINDEX+";font-size:0;line-height:0;border-",B=":dashed 1px #ff6600;",F=H._Region,A=H._rh,C="backgroundColor";if(F&&F.parent()){F.remove(false)}if(H._R){H._R.css(C,H._RB);delete H._R;delete H._RB}if(G){if(!F||!F.get(0)){F=H._Region=linb.create(D+"top"+B+'left:0;top:0;width:100%;height:0;"></div>'+D+"right"+B+'right:0;top:0;height:100%;width:0;"></div>'+D+"bottom"+B+'bottom:0;left:0;width:100%;height:0;"></div>'+D+'left:solid 2px #ff6600;width:0;left:0;top:0;height:100%;"></div>');A=H._rh=linb([F.get(1),F.get(3)])}G=linb(G);if(linb.browser.ie6){A.height("100%")}if(G.css("display")=="block"){G.append(F);if(linb.browser.ie6&&!A.get(0).offsetHeight){A.height(G.get(0).offsetHeight)}}else{H._RB=G.get(0).style[C];H._R=G;G.css(C,"#FA8072")}H.setDragIcon(E||"move")}else{H.setDragIcon("none")}return H},setDragIcon:function(C){_.resetRun("setDropFace",null);var E=this,D=E._profile,B=D.proxyNode,A=E._Icons;if(B&&D.dragType=="icon"){B.first(4).css("backgroundPosition","left "+(A[C]||A.none))}return E},_setProxy:function(G,F){var B,A,E=this,C=E._profile,D=linb.Dom;if(!D.byId(E._id)){linb("body").prepend(linb.create('<div id="'+E._id+'" style="left:0;top:0;border:0;font-size:0;line-height:0;padding:'+E.$proxySize+'px; position: absolute;"><div style="font-size:0;line-height:0;" id="'+E._idi+'">'+(linb.browser.ie6?"&nbsp;":"")+"</div></div>"))}B=linb(E._id);if(C.dragKey){E.$proxySize=0;B.css("padding",0)}else{F.left-=E.$proxySize;F.top-=E.$proxySize;if(!C.targetOffsetParent){D.setCover(true)}}if(A=C.targetOffsetParent){linb(A).append(B)}if(G){linb(E._idi).empty(false).append(G);C.proxyNode=G}else{C.proxyNode=linb(E._idi)}B.css({display:"",zIndex:D.TOP_ZINDEX*10,cursor:C.dragCursor}).offset(F,A);return B},_resetProxy:function(){var H=this,E=H._profile,G=linb.Dom,D=H._id,C=H._idi;if(G.byId(D)){var B,A,F=linb(C),B=linb(D);if(linb.browser.ie6){F.html("&nbsp;",false)}else{F.empty(false)}F.attr("style","font-size:0;line-height:0;");linb("body").prepend(B.css({zIndex:0,cursor:"",display:"none",padding:H.$proxySize+"px"}));E.proxyNode=H._proxystyle=null;G.setCover(false)}},_pack:function(G,C){var D,F={},I={},E=this,A=E._profile,H;if(A.targetLeft===null||null===A.targetTop){H=C.offset(null,A.targetOffsetParent)}F.left=null!==A.targetLeft?A.targetLeft:H.left;F.top=null!==A.targetTop?A.targetTop:H.top;switch(A.dragType){case"deep_copy":case"copy":var H;I.width=_.isNumb(A.targetWidth)?A.targetWidth:(C.cssSize().width||0);I.height=_.isNumb(A.targetHeight)?A.targetHeight:(C.cssSize().height||0);var B=C.clone(A.dragType=="deep_copy").id("",true).css({position:"relative",cursor:A.dragCursor,margin:0,cssFloat:"none"}).cssSize(I);B.css("opacity",0.5);if(A.targetCSS){B.css(A.targetCSS)}B.cssPos({margin:"0",left:"0",top:"0"}).query().id("",true);D=E._setProxy(B,F);break;case"shape":I.width=null!==A.targetWidth?A.targetWidth:C.offsetWidth();I.height=null!==A.targetHeight?A.targetHeight:C.offsetHeight();I.width-=2;I.height-=2;D=E._setProxy(linb.create("div").css({border:"dashed 1px",fontSize:"0",lineHeight:"0"}).cssSize(I),F);break;case"blank":D=E._setProxy(null,F);break;case"icon":F.left=_.isNumb(A.targetLeft)?A.targetLeft:(G.left-linb.win.scrollLeft()+16);F.top=_.isNumb(A.targetTop)?A.targetTop:(G.top-linb.win.scrollTop()+16);H='<table border="0"><tr><td valign="top"><span style="background:url('+A.dragIcon+") no-repeat left top;width:"+(_.isNumb(A.targetWidth)?A.targetWidth:16)+"px;height:"+(_.isNumb(A.targetHeight)?A.targetHeight:16)+'px;" ></span></td><td id="linb:dd:shadow" '+(A.shadowFrom?'style="border:solid 1px #e5e5e5;"':"")+">"+(A.shadowFrom?linb(A.shadowFrom).clone(true).css({left:"auto",top:"auto",padding:0,margin:0}).outerHTML().replace(/\s*id\=[^\s\>]*/g,""):"")+"</td></tr></table>";D=E._setProxy(linb.create(H),F);break;case"move":E.$proxySize=0;D=C;if(D.css("position")!="absolute"){D.css("position","absolute").offset(F)}D.css("cursor",A.dragCursor)}return D},_unpack:function(){var D=this,C=D._profile,A,B;if(C.targetReposition&&("move"!=C.dragType)){if((A=linb(D._source))){if(!A.isEmpty()){if(A.css("position")!="absolute"){A.css("position","absolute").cssPos(A.offset(null,A.get(0).offsetParent))}if(linb.browser.ie){A.cssRegion({right:"auto",bottom:"auto"})}A.offset(C.curPos,C.targetOffsetParent||document.body)}}}if("move"==C.dragType){D._source.css("cursor",D._cursor)}},_unRegister:function(B,A){var C=this._eh;linb([B]).$removeEvent("beforeMouseover",C).$removeEvent("beforeMouseout",C).$removeEvent("beforeMousemove",C);linb.setNodeData(B.$linbid,["_dropKeys",A])},_register:function(B,A){var C=this._eh;linb(B).beforeMouseover(function(G,F,E){var D=linb.DragDrop,G=D._profile;if(G.dragKey&&linb.getNodeData(E,["_dropKeys",G.dragKey])){D.setDropElement(E);D._onDragover=null;linb.use(E).onDragenter(true);if(D._dropElement){_.resetRun("setDropFace",D.setDropFace,0,[E],D)}}},C).beforeMouseout(function(G,F,E){var D=linb.DragDrop,G=D._profile;if(G.dragKey&&linb.getNodeData(E,["_dropKeys",G.dragKey])){linb.use(E).onDragleave(true);D.setDropElement(D._onDragover=null);_.resetRun("setDropFace",D.setDropFace,0,[null],D)}},C).beforeMousemove(function(D,I,F){var E=linb.DragDrop,G=E._onDragover,H=E._profile;if(G==1){return }if(E._dropElement==F&&H.dragKey&&linb.getNodeData(F,["_dropKeys",H.dragKey])){if(G){G(I,F)}else{E._onDragover=1;linb.use(F).onDragover(true,linb.Event.getEventPara(I))}}},C);linb.setNodeData(B.$linbid,["_dropKeys",A],true)}},After:function(){this._reset();_.each({startDrag:function(D,B,A,C){linb.DragDrop.startDrag(D,this.get(0),B,A||"",C||null);return this},dragable:function(B,E,D,F){var C=this,A=linb.DragDrop;if(B===undefined){B=true}else{if(typeof B=="object"){E=B;B=true}}if(!!B){C.$addEvent("onMousedown",function(H,G,I){if(linb.Event.getSrc(G)!=this){return true}linb.use(I).startDrag(G,E,D,F)},A._eh,-1)}else{C.$removeEvent("onMousedown",A._eh)}return C},dropable:function(A,B){if(A===undefined){A=true}B=B||"default";var C=linb.DragDrop;return this.each(function(D){if(!!A){C._register(D,B)}else{C._unRegister(D,B)}})}},function(B,A){linb.Dom.plugIn(A,B)})}});Class("linb.Com",null,{Constructor:function(C,B,D){var A=this;A._nodes=[];A.host=D||A;A.properties=C||{};A.events=_.copy(A.events)||{};if(B){_.merge(A.events,B,"all")}},Instance:{setHost:function(B,A){this.host=B;return B[A]=this},getHost:function(){return this.host},setProperties:function(B,C){var A=this;if(!B){A.properties={}}else{if(typeof B=="string"){A.properties[B]=C}else{_.merge(A.properties,B,"all")}}return A},getProperties:function(A){return A?this.properties[A]:this.properties},setEvents:function(B,C){var A=this;if(!B){A.events={}}else{if(typeof B=="string"){A.events[B]=C}else{_.merge(A.events,B,"all")}}return A},getEvents:function(A){return A?this.events[A]:this.events},_fireEvent:function(C,B){var D,A=this;if(D=A.events[C]){if(typeof D=="string"){D=A.host[D]}B=B||[];B.splice(0,0,A,A.threadid);A.$lastEvent=C;if(typeof D=="function"){return D.apply(A.host,B)}}},_innerCall:function(B){var A=this;return _.tryF(A[B],[A,A.threadid],A)},show:function(C,D,B,F){var A=this,E=function(){A.render();if(A.customAppend){A.customAppend.call(A,D,B,F)}else{(D||linb("body")).append(A.getUIComponents(),B)}_.tryF(C,[A,F],A.host)};A.threadid=F;if(A.created){E()}else{A.create(E,F)}},render:function(B){var A=this;A.getUIComponents().render(B);A._fireEvent("onRender");A.renderId="ok"},create:function(C,E){var B=this,D,A=[];B.threadid=E;if(false===B._fireEvent("beforeCreated")){return }A.push(function(F){B.threadid=F;B._fireEvent("onCreated")});if((D=B.base)&&D.length){A.push(function(F){linb.SC.groupCall(B.base,function(G){B._fireEvent("onLoadBaseClass",[G])},null,F)})}if(B.iniResource){A.push(function(){B._fireEvent("onIniResource");B._innerCall("iniResource")})}if((D=B.required)&&D.length){A.push(function(F){linb.SC.groupCall(B.required,function(G){B._fireEvent("onLoadReqiredClass",[G])},null,F)})}if(B.iniComponents){A.push(function(){if(false===B._fireEvent("beforeIniComponents")){return }Array.prototype.push.apply(B._nodes,B._innerCall("iniComponents")||[]);B._fireEvent("afterIniComponents")})}if(B.iniExComs){A.push(function(){B._innerCall("iniExComs")})}A.push(function(F){B.loaded=true;if(B.background){linb.SC.runInBG(B.background)}B._fireEvent("onReady")});A.push(function(F){_.tryF(C,[B,F],B.host)});linb.Thread.observableRun(A,function(){B.created=true},E)},iniComponents:function(){},requestData:function(D,B,C){var A=linb.Thread;A.observableRun(function(E){linb.absIO.groupCall(D,null,null,B,A||E)},null,C)},composeUI:function(B,C,A){_.tryF(B)},fillUI:function(B,C,A){_.tryF(B)},getUIComponents:function(){var B=_.copy(this._nodes),C,A="linb.UI";_.filter(B,function(D){return !!(D.box[A]&&!D.box.$noDomRoot)});return linb.UI.pack(B,false)},getComponents:function(){return linb.absObj.pack(_.copy(this._nodes),false)},setComponents:function(C){var A=this,B;_.arr.each(A._nodes,function(D){if((B=A[D.alias])&&B.get(0)==D){delete A[D.alias]}});_.arr.each(A._nodes=C.get(),function(D){A[D.alias]=D.boxing()});return A},destroy:function(B){var A=this;A.threadid=B;A._fireEvent("onDestroy");_.arr.each(A._nodes,function(C){if(C.box){C.boxing().destroy()}});A._nodes.length=0;_.breakO(A)}},Static:{load:function(B,C,E,D){var A=function(){linb.SC(B,function(H){if(H){var F=this,G=function(){var I=new F();if(D!==false){I.show(C)}else{_.tryF(C,[I],I)}};if(E){linb.setLang(E,G)}else{G()}}else{throw new Error(B+" doesnt exists!")}},true)};if(linb.isDomReady){A()}else{linb.main(A)}},$EventHandlers:{beforeCreated:function(A,B){},onLoadBaseClass:function(A,C,B){},onIniResource:function(A,B){},beforeIniComponents:function(A,B){},afterIniComponents:function(A,B){},onLoadRequiredClass:function(A,C,B){},onReady:function(A,B){},onRender:function(A,B){}}}});Class("linb.ComFactory",null,{Static:{_pro:{},_cache:{},_domId:"linb:ComFactory:",getProfile:function(A){return A?this._pro[A]:this._pro},setProfile:function(A,B){if(typeof A=="string"){this._pro[A]=B}else{this._pro=A}return this},destroyAll:function(){_.each(this._cache,function(A){_.tryF(A.destroy,[],A)});this._cache={}},broadcast:function(A){if(typeof A=="function"){var B,C=this._cache;for(B in C){A.call(C[B],B)}}},setCom:function(B,A){this._cache[B]=A;if(A){A.comRefId=B}return this},getComFromCache:function(A){return this._cache[A]||null},getCom:function(B,A,G,H){H=H!==false;var K=this._cache,C=this._pro,P=C._iniMethod;if(H&&K[B]){_.tryF(A,[G,K[B]],K[B]);return K[B]}else{if(!(C=C[B])){return null}var O=arguments.callee,J=this,E=C.children;var L=C.iniMethod||P||"create",F=C.cls||C,I=C.properties,N=C.events,H=C.singleton!==false,M,D=function(Q,S,T){var U=new Q();if(S){_.merge(U.properties,S,"all")}if(N){_.merge(U.events,event,"all")}if(H){linb.ComFactory.setCom(B,U)}var R=[function(X){var V=X.getUIComponents().get(),W=function(Y,Z){var c=arguments.callee;_.arr.each(Y,function(g,h){if(g.key=="linb.UI.Tag"){var d=g,j=d.properties.tagKey;if(j&&E&&E[j]){O.apply(J,[E[j],function(){X[j]=this;this.parent=X;var k=this.getUIComponents(),i;if(!(i=k.get(0))){return }linb.UI.Tag.replace(d,i,Z?X:null)},T])}}if(g.children){var e=[];_.arr.each(g.children,function(i){e[e.length]=i[0]});c(e)}})};W(V,1)}];R.push(T||null);if(A){linb.Thread(T).insert({task:A,args:[T,U],scope:U})}_.tryF(U[L],R,U)};linb.Thread.observableRun(function(R){var Q=function(U,S,V){var T;if(T=linb.SC.get(F)){linb.Thread(V).insert({task:D,args:[T,I,V]})}};linb.SC(F,function(S){if(S){Q(0,0,R)}else{throw new Error(F+" doesnt exists!")}},true,R)},null,G)}},newCom:function(A,B,C){var D=linb.SC.get(A);D=typeof D=="function"?new D():null;if(D){_.tryF(B,[C,D],D)}else{linb.Thread.observableRun(function(E){linb.SC(A,function(G,F){if(G){var H=linb.SC.get(A);H=typeof H=="function"?new H():null;_.tryF(B,[E,H],H)}else{throw new Error(A+" doesnt exists!")}},true,E)},null,C)}},storeCom:function(E){var A,B,D=this._cache,C=this._domId;if(B=D[E]){if(!(A=linb.Dom.byId(C))){linb("body").prepend(linb.create('<div id="'+C+'" style="display:none;"></div>'))}A=linb(C);B=B.getUIComponents();if(!B.isEmpty()){B.get(0).unlinkParent();A.append(B)}}},prepareWidgets:function(){var B=this,A=function(D){var C=false;_.each(linb.UI,function(F){if(F.$linb$&&F["linb.UI"]&&F.$Appearances["default"]){var E=linb.getPath(F.KEY,"/default/css.css","appearance");if(!linb.UI.$cache_csspath[E]){F=(new F).get(0);F.toString();F.destroy();C=true;return false}}});if(!C){linb.Thread(D).abort()}};linb.Thread(null,[A],100,null,null,null,true).start();return this},prepareComs:function(A){var C=this,B=[];_.arr.each(A,function(D){B.push(function(){C.getCom(D)})});linb.Thread(null,B,500).start();return this}}});Class("linb.Profile","linb.absProfile",{Constructor:function(H,F,E,G,D,C,B){arguments.callee.upper.apply(this,arguments);var A=this;_.merge(A,B);A.key=F||A.key||"";A.alias=E||A.alias||"",A.properties=D||A.properties||{};A.events=C||A.events||{};A.host=H||A.host||A;A.box=G||A.box||A.constructor;if(A.events){A.setEvents(A.events);delete A.events}A._links={}},Instance:{setEvents:function(B){var A=this.box.$EventHandlers;return _.merge(this,B,"all",function(D,C){return A[C]})},getEvents:function(){var A=this,B,C={};_.each(A.box.$EventHandlers,function(E,D){if(A[D]){C[D]=A[D]}});return C},_applySetAction:function(A,B){return A.call(this,B)},__gc:function(){var A=this;A.unLinkAll();_.tryF(A.clearCache,[],A);var B=_.get(A,["box","_namePool"]);if(B){delete B[self.alias]}_.breakO([A.properties,A.events,A],2)},boxing:function(){var A=this,B;if(!((B=A.object)&&B.get(0)==A&&B._nodes.length==1)){B=A.object=A.box.pack([A],false)}return B},serialize:function(G,J){var H,I=this,D=(H=I.box._beforeSerialized)?H(I):I,A={alias:D.alias,key:D.key,host:D.host};if(A.host===I){delete A.host}else{if(D.host&&!J){if(G!==false){A.host="@this"}else{delete A.host}}}var F={},C=D.box.$DataStruct,B=linb.absObj.$specialChars;_.merge(F,D.properties,function(L,K){return(K in C)&&C[K]!==L&&!B[K.charAt(0)]});if(!_.isEmpty(F)){A.properties=F}if(!_.isEmpty(H=this.getEvents())){A.events=H}var E=D.box.$EventHandlers;_.filter(A.events,function(L,K){return L!=E[K]});if(_.isEmpty(A.events)){delete A.events}return G===false?A:_.serialize(A)}}});Class("linb.absObj","linb.absBox",{Constructor:function(){arguments.callee.upper.apply(this,arguments);if(arguments[0]!==false&&typeof this._ini=="function"){return this._ini.apply(this,arguments)}},Before:function(B,A,C){linb.absBox.$type[B]=B;return true},After:function(){var M=this,G=arguments.callee,K,L,D,J,B,F,E,C,I,A,H;M._nameId=0;M._namePool={};M._nameTag=(L=M.KEY.split("."))[L.length-1].toLowerCase();M._cache=[];if(M===linb.absObj||M===linb.absObj){return }B=G.a1||(G.a1=_.toArr("$Keys,$DataStruct,$EventHandlers,$DataModel"));for(E=0;I=B[E++];){D={};if((L=M.$parent)&&(F=L.length)){while(F--){_.merge(D,L[F][I])}}M[I]=D}M.setDataModel(M.DataModel);delete M.DataModel;M.setEventHandlers(M.EventHandlers);delete M.EventHandlers;B=G.a5||(G.a5=_.toArr("RenderTrigger,LayoutTrigger"));for(E=0;I=B[E++];){K=[];if((L=M.$parent)&&(C=L.length)){for(F=0;F<C;F++){J=L[F];if(J=J["$"+I]){K.push.apply(K,J)}}}if(M[I]){K.push(M[I])}M["$"+I]=K;delete M[I]}},Static:{$abstract:true,$specialChars:{_:1,$:1},getAll:function(){return this.pack(this._cache)},pickAlias:function(){var B,C=this._namePool,A=this._nameTag;while(C[B=(A+(++this._nameId))]){}return B},setDataModel:function(H){var M=this,K=linb.absObj.$specialChars,E=M.$DataStruct,J=M.$DataModel,B=M.prototype,I,G,L,C,D,F,A;for(I in H){if(!J[I]){J[I]={}}C=H[I];if(null===C||undefined===C){A=_.str.initial(I);delete E[I];delete J[I];delete B["get"+A];delete B["set"+A]}else{L=typeof C;if(L!="object"||C.constructor!=Object){C={ini:C}}E[I]=("ini" in C)?C.ini:(I in E)?E[I]:"";L=J[I];for(G in L){if(!(G in C)){C[G]=L[G]}}J[I]=C}}_.each(H,function(O,N){if(null===O||undefined===O||K[N.charAt(0)]){return }A=_.str.initial(N);D="set"+A;if(!(O&&(O.readonly||O.inner))){L=O.set;F=B[D];B[D]=typeof L=="function"?Class._fun(L,D,M.KEY):typeof F=="function"?F:Class._fun(function(Q,P){return this.each(function(S){if(!S.properties){return }if(S.properties[N]===Q&&!P){return }var T=S.properties[N],R=_.get(S.box.$DataModel,[N,"action"]);S.properties[N]=Q;if(typeof R=="function"&&S._applySetAction(R,Q,T)===false){S.properties[N]=T}})},D,M.KEY);delete O.set;if(B[D]!==F){B[D].$auto$=1}}else{delete B[D]}D="get"+A;if(!(O&&O.inner)){L=O.get;F=B[D];B[D]=typeof L=="function"?Class._fun(L,D,M.KEY):typeof F=="function"?F:Class._fun(function(){return this.get(0).properties[N]},D,M.KEY);delete O.get;if(B[D]!==F){B[D].$auto$=1}}else{delete B[D]}});return M},setEventHandlers:function(B){var A=this;_.each(B,function(E,C){if(null===E){delete A.$EventHandlers[C];delete A.prototype[C]}else{A.$EventHandlers[C]=E;var D=function(G){var F=arguments.length;if(F==1&&(typeof G=="function"||typeof G=="string")){return this.each(function(M){if(M.renderId){M.clearCache()}M[C]=G})}else{if(F==1&&null===G){return this.each(function(M){M.clearCache();delete M[C]})}else{var K=[],I=this.get(0),L=I[C],H=I.host||I,J;if(I.$ignore){return }if(arguments[0]!=I){K[0]=I}for(J=0;J<F;J++){K[K.length]=arguments[J]}I.$lastEvent=C;if(typeof L=="string"){L=H[L]}if(typeof L=="function"){return _.tryF(L,K,H)}}}};D.$event$=1;D.$original$=E.$original$||A.KEY;A.plugIn(C,D)}});return A}},Instance:{alias:function(E){var B=this,D=this.get(0),A;if(E){if(A=D.alias){if(D.host){try{delete D.host[A]}catch(C){D.host[A]=undefined}}delete B.constructor._namePool[A]}B.constructor._namePool[D.alias=E]=1;if(D.host){D.host[E]=B}return B}else{return D.alias}},host:function(C,B){var A=this;if(C){A.get(0).host=C;if(B){A.alias(B);C[B]=A}return A}else{return A.get(0).host}}}});Class("linb.DataBinder","linb.absObj",{Instance:{_ini:function(C,G,F){var H=this,D=H.constructor,A,I,E=D._namePool,B;if(C&&C["linb.Profile"]){A=C;B=A.alias||D.pickAlias()}else{if(C&&C.key&&linb.absBox.$type[C.key]){I=C;C=null;B=I.alias;B=(B&&!E[B])?B:D.pickAlias()}else{B=D.pickAlias()}A=new linb.Profile(F,H.$key,B,D,C,G,I)}E[B]=1;A._n=A._n||[];A.link(D._cache,"self").link(linb._pool,"linb");H._nodes.push(A);return H},destroy:function(){this.each(function(B){var C=B.box,A=B.properties.name;_.arr.each(B._n,function(D){C._unBind(A,D)});delete C._pool[A];B.__gc()})},resetValue:function(A){return this.each(function(C,B){_.arr.each(C._n,function(D){var E=D.properties;D.boxing().resetValue((A&&E.dataField in A)?A[E.dataField]:"")})})},getUI:function(){return linb.UI.pack(this.get(0)._n,false)},checkValid:function(){return linb.absValue.pack(this.get(0)._n,false).checkValid()},getValue:function(){var B=this.get(0);if(this.checkValid()){var A={};_.arr.each(B._n,function(E){var F=E.properties,C=E.boxing(),D;if(E.renderId){C.updateValue()}D=C.getValue();A[F.dataField]=D});return A}else{return null}},host:function(C,B){var A=this;if(C&&B){A.setName(B)}return arguments.callee.upper.apply(A,arguments)}},Static:{_pool:{},destroyAll:function(){this.pack(this._pool,false).destroy();this._pool={}},getFromName:function(A){var B=this._pool[A];return B&&B.boxing()},_bind:function(A,C){var B=this._pool[A];if(!B){B=new linb.DataBinder();B.setName(A);B=B.get(0)}if(C&&_.arr.indexOf(B._n,C)==-1){C.link(B._n,"databinder."+A)}},_unBind:function(A,B){if(this._pool[A]){B.unLink("databinder."+A)}},DataModel:{name:{set:function(D){var E=this.get(0),C=E.properties.name;if(C!==D){var G=linb.DataBinder,A=G._pool,F=A[C],B=A[D];if(F&&B){throw new Error(D+" exists!")}A[E.properties.name=D]=E;if(F&&!B){linb.absValue.pack(E._n).setDataBinder(D);_.arr.each(E._n,function(H){G._unBind(C,H)})}if(B&&!F){E._n=B._n}if(F){delete A[C]}}return this}}}}});Class("linb.UIProfile","linb.Profile",{Instance:{renderId:null,_render:function(){var E=this,D,G=linb.$cache.profileMap;if(!E.renderId){var F=linb.Dom.byId(E.$domId);if(!F){return }if(E.domId!=E.$domId){F.id=E.domId}G[E.domId]=G[E.$domId]=E;if(!F.$linbid){linb.UI.$addEventsHanlder(F,true)}E.renderId=F.$linbid;F=null}if(D=E.RenderTrigger){for(var C=0,A=D.length;C<A;C++){D[C].call(E)}delete E.RenderTrigger;if(E.onRender){E.boxing().onRender(E)}}if(arguments[0]===true&&(D=E.LayoutTrigger)){for(var C=0,A=D.length;C<A;C++){D[C].call(E)}if(E.onLayout){E.boxing().onLayout(E)}}if(E.children){for(var C=0,B;B=E.children[C++];){B[0]._render(true)}}if(E.$attached){for(var C=0,B;B=E.$attached[C++];){B._render(true)}delete E.$attached}},__gc:function(){var C=this,B;if(C.onDestroy){C.boxing().onDestroy()}if(C.destroyTrigger){C.destroyTrigger()}if(!C.serialId){return }if(B=C._$composed){_.each(B,function(D){D.__gc()})}C.clearCache();if(B=C.$dockParent){if(B=C.constructor.getFromDom(B)){_.tryF(B.clearCache,[],B)}}if(!C.$noReclaim){B=linb.$cache.reclaimId;(B[C.key]||(B[C.key]=[])).push(C.serialId)}else{delete C.$noReclaim}delete linb.$cache.profileMap[C.domId];delete linb.$cache.profileMap[C.$domId];if(C.box){delete C.box._namePool[C.alias]}C.unLinkAll();_.tryF(C.$ondestory);if(C.LayoutTrigger){C.LayoutTrigger.length=0}if(C.RenderTrigger){C.RenderTrigger.length=0}if((B=C.children).length){B=_.copy(B);for(var A=0;A<B.length;A++){B[A][0].__gc();B[A].length=0}B.length=0}_.breakO([C.properties,C.events,C.CF,C.CB,C.CC,C.CS,C],2)},unlinkParent:function(){var A=this;delete A.parent;delete A.childrenId;A.unLink("$parent");return A},getRootNode:function(){return linb.getNodeData(this.renderId,"element")},getRoot:function(){return linb([this.renderId],false)},linkParent:function(A,C){var B=this;B.unlinkParent();B.parent=A;B.childrenId=C;B.link(A.children,"$parent",[B,C]);return B},_cacheR1:/^\w[\w_-]*$/,setDomId:function(C){var A=this,B=linb.$cache.profileMap;if(typeof C=="string"&&(A._cacheR1.test(C)||C==A.$domId)&&!linb.Dom.byId(C)){if(A.domId!=A.$domId){delete B[A.domId]}A.domId=C;if(A.renderId){A.getRootNode().id=C}if(B[A.$domId]){B[C]=A}}return A},getDomId:function(){return this.domId},clearCache:function(){var C=this,B=C.$_egetter;for(var A in B){B[A].length=0;delete B[A]}B=C.$_domid;for(var A in B){B[A].__gc();delete B[A]}return C},_getEV:function(H,C,B){var L=this,I=C+"+"+B,G=L.$_egetter||(L.$_egetter={}),A;if(G[I]){Array.prototype.push.apply(H,G[I]);return }else{A=G[I]=[]}var E=linb.$cache.profileMap,K,J;if((K=E[C])&&(K=K.events)&&(K=K[B])){for(var F=0,D=K.length;F<D;F++){if(typeof K[K[F]]=="function"){A.push(H[H.length]=K[K[F]])}}}J=C.split(":")[0].split("-")[1];if(typeof (((K=L._CB)&&(J?(K=K[J]):1))&&(K=K[B]))=="function"){A.push(H[H.length]=K)}else{if(typeof (((K=L.CB)&&(J?(K=K[J]):1))&&(K=K[B]))=="function"){A.push(H[H.length]=K)}else{if(typeof (((K=L.behavior)&&(J?(K=K[J]):1))&&(K=K[B]))=="function"){A.push(H[H.length]=K)}}}},_cacheR2:/<!--([^>^\s]*)-->/g,toHtml:function(){var M=this,I=M.box,F={},J,H="linb.UIProfile",G="linb.Profile",A,E,B,C,L,K,D;D=I._prepareData(M);if(I._dynamicTemplate){I._dynamicTemplate(M)}J=I._build(M,D);if(C=I._getChildren(M)){for(E=0;B=C[E++];){if(B[0][H]){A=B[1]||"";L=F[A]||(F[A]=[]);L[L.length]=B[0].toHtml()}else{if(!B[0][G]){K.ini.call(K,B[0]);B[0]=K.get(0)}}}}return J.replace(M._cacheR2,function(O,N){return F[N]?F[N].join(""):""})},buildItems:function(C,B){var A=this,D=A.box,E=D._rpt(A,linb.UI.$doTemplate(A,_.get(linb.$cache.template,[D.KEY,A._hash]),B,C));return linb.UI.$toDom(E.replace(A._cacheR2,""))},serialize:function(H,K){var I,E,J=this,D=(I=J.box._beforeSerialized)?I(J):J,A={alias:D.alias,key:D.key,host:D.host};if(A.host===J){delete A.host}else{if(D.host&&!K){if(H!==false){A.host="@this"}else{delete A.host}}}if(D.$domId!=D.domId){A.domId=D.domId}var G={},C=D.box.$DataStruct,B=linb.absObj.$specialChars;_.merge(G,D.properties,function(M,L){return(L in C)&&C[L]!==M&&!B[L.charAt(0)]});if(!_.isEmpty(G)){A.properties=G}if(!_.isEmpty(I=this.getEvents())){A.events=I}var F=D.box.$EventHandlers;_.filter(A.events,function(M,L){return M!=F[L]});if(_.isEmpty(A.events)){delete A.events}if(!_.isEmpty(D.CS)){A.CS=_.copy(D.CS)}if(!_.isEmpty(D.CB)){A.CB=_.copy(D.CB)}if(!_.isEmpty(D.CC)){A.CC=_.copy(D.CC)}if(!_.isEmpty(D.CF)){A.CF=_.copy(D.CF)}if(D.children&&D.children.length){D.children.sort(function(L,M){L=parseInt(L[0].properties.tabindex);M=parseInt(M[0].properties.tabindex);return L>M?1:L==M?0:-1});I=A.children=[];_.arr.each(D.children,function(L){E=[L[0].serialize(false,K)];if(L[1]){E[1]=L[1]}I[I.length]=E})}return H===false?A:_.serialize(A)},_applySetAction:function(A,B,C){if(this.renderId){return A.call(this,B,C)}},getKey:function(B){var A;if(B.charAt(0)=="!"){B=linb.use(B).id()}if(B.indexOf(":")==-1){B=(A=linb.$cache.profileMap[B])&&(A.$domId)}return B?B.split(":")[0]:""},getSubId:function(B){var A;if(B.charAt(0)=="!"){B=linb.use(B).id()}if(B.indexOf(":")==-1){B=(A=linb.$cache.profileMap[B])&&(A.$domId)}return B?B.split(":")[2]:""},pickSubId:function(B){var A=this,C,D=A.cache_subid||(A.cache_subid={});if((D[B]||(D[B]=[]))[0]){return D[B].shift()}D=A.subId||(A.subId={});C=(D[B]||(D[B]=new _.id)).next();return C},reclaimSubId:function(C,A){var B=this.cache_subid||(this.cache_subid={});(B[A]||(B[A]=[])).push(C)},_cacheR3:/\./g,_cacheH1:{},getClass:function(C,A){C=this.keys[C]||C;var B=this,D=C+":"+(A||"");return B._cacheH1[D]||(B._cacheH1[D]=C.replace(B._cacheR3,"-").toLowerCase().replace("linb-ui","linb")+(A||""))},_getSubNodeId:function(C,B){var A=this.$domId.split(":");A[0]=C;A[2]=B||"";C=A.join(":");return C==this.$domId?linb.$cache.profileMap[C].domId:C},getSubNode:function(D,B){var A=this;D=A.keys[D]||D;var G,C,F,E=A.$_domid||(A.$_domid={});if(B===true){G=linb([A.renderId]).query("*","id",D==A.keys.KEY?A.domId:new RegExp("^"+D+":"+A.serialId))}else{if(!B&&E[D]&&E[D]._nodes.length==1){return E[D]}G=(C=linb.Dom.byId(F=A._getSubNodeId(D,B)))?linb([C]):((C=A.renderId)&&linb.use(C).query("*","id",F));if(!B){E[D]=G}}return G},getSubNodes:function(A,C){var D=0,B=[],E;for(;E=A[D++];){Array.prototype.push.apply(B,this.getSubNode(E,C).get())}return linb(B)},getSubNodeByItemId:function(A,B){return(B=this.getSubIdByItemId(B))?this.getSubNode(A,B):linb()},getItemByItemId:function(B){var A;if((A=this.ItemIdMapSubSerialId)&&(A=A[B])){return this.SubSerialIdMapItem[A]}},getItemByDom:function(A){return this.SubSerialIdMapItem&&this.SubSerialIdMapItem[this.getSubId(typeof A=="string"?A.charAt(0)=="!"?((A=linb.use(A).get(0))&&A.id):A:A.id)]},getItemIdByDom:function(B){var A;return(A=this.getItemByDom(B))&&A.id},getSubIdByItemId:function(B){var A;return(A=this.ItemIdMapSubSerialId)&&A[B]},_cacheF:function(D,C,B,F,A,E){_.arr.each(D,function(H,G){if(C===true||C.call(null,H,G,D)){E.push(A?[H,G,D]:H);if(F){return false}}if(B&&H.sub&&H.sub.length){f(H.sub,C,B,F,E)}})},queryItems:function(D,C,B,F,A){var E=[];this._cacheF(D,C,B,F,A,E);return E}},Static:{getFromDom:function(A){if((A=typeof A=="string"?A.charAt(0)=="!"?((A=linb.use(A).get(0))&&A.id):A:(A&&A.id))&&(A=linb.Event._getProfile(A))&&A["linb.UIProfile"]){return A}}}});Class("linb.UI","linb.absObj",{Before:function(B,A,C){linb.absBox.$type[B.replace("linb.UI.","").replace("linb.","")]=linb.absBox.$type[B]=B;return true},After:function(){linb.absObj.After.apply(this,arguments);var N=this,G=arguments.callee,L,M,A,K,F,C,B,D,I,J,H,E;N._ctrlId=new _.id();N._idCache=[];N.$cssKeys={};M=N.$Keys;M.KEY=M.$key=N.KEY;N.addTemplateKeys(_.toArr(M,true));J="$Behaviors";A={};if((M=N.$parent)&&(D=M.length)){while(D--){H=M[D][J];for(C in H){if(typeof H[C]=="object"){if(_.isArr(H[C])){K=A[C]||(A[C]=[]);K.push.apply(K,H[C])}else{K=A[C]||(A[C]={});_.merge(K,H[C])}}else{A[C]=H[C]}}}}N[J]=A;J="$Templates";A={};if((M=N.$parent)&&(D=M[0])){for(C in D[J]){if(C.charAt(0)!="$"){A[C]=D[J][C]}}}N[J]=_.clone(A);J="$Appearances";A={};if((M=N.$parent)&&(D=M.length)){while(D--){H=M[D];for(C in H[J]){M=H[J][C];K=A[C]||(A[C]={});_.merge(K,M)}}}N[J]=A;N.setTemplate(N.Templates);delete N.Templates;N.setBehavior(N.Behaviors||{});delete N.Behaviors;N.setAppearance(N.Appearances);delete N.Appearances;if(M=N.PublicAppearance){linb.UI.$cache_css+=N.buildCSSText(M);delete N.PublicAppearance}},Instance:{destroy:function(){this.each(function(A){if(A.beforeDestroy&&false===A.boxing().beforeDestroy()){return }if(A.renderId){A.getRoot().remove()}else{A.__gc()}});this._nodes.length=0},serialize:function(B,C){var A=[];this.each(function(D){A[A.length]=D.serialize(false,C)});return B===false?A:A.length==1?" new "+A[0].key+"("+_.serialize(A[0])+")":"linb.UI.unserialize("+_.serialize(A)+")"},_toDomElems:function(){var A=[];_.arr.each(this._nodes,function(B){if(!B.renderId){A.push(B)}});linb.UI.pack(A,false).render();A.length=0;_.arr.each(this._nodes,function(B){A.push(B.renderId)});return A},_ini:function(F,O,N,A,H,I,E){var P=this,G=P.constructor,B,M="default",Q,K=G._namePool,D,L;if(F&&F["linb.Profile"]){B=F;D=B.alias||G.pickAlias();linb.UIProfile.apply(B,[N,P.$key,D,G,null,O])}else{if(F&&F.key&&linb.absBox.$type[F.key]){Q=F;F=null;D=Q.alias;D=(D&&!K[D])?D:G.pickAlias()}else{D=G.pickAlias()}B=new linb.UIProfile(N,P.$key,D,G,F,O,Q)}K[D]=1;for(var C in (L=G.$DataStruct)){if(!(C in B.properties)){B.properties[C]=typeof L[C]=="object"?_.copy(L[C]):L[C]}}B.keys=G.$Keys;B.CS=A||B.CS||{};B.CB=I||B.CB||{};B.CC=H||B.CC||{};B.CF=E||B.CF||{};B.template=G.getTemplate();B.behavior=G.$Behaviors;if(!B.serialId){B.serialId=G._pickSerialId()}B.$domId=B.key+":"+B.serialId+":";B.domId=B.domId||B.$domId;B.RenderTrigger=_.copy(G.$RenderTrigger);B.LayoutTrigger=_.copy(G.$LayoutTrigger);B.link(linb.UI._cache,"UI").link(G._cache,"self").link(linb._pool,"linb");L=B.children;B.children=[];if(L&&L.length){for(var C=0,J;J=L[C++];){if(!J[0]["linb.UIProfile"]){J[0]=new (linb.SC(J[0].key))(J[0]).get(0)}J[0].linkParent(B,J[1])}}P._nodes.push(B);return P},busy:function(C,B,A){C=typeof C=="string"?C:"Loading...";B=typeof B=="string"?B:'<span style="background:'+linb.UI.$bg("busy.gif","no-repeat left center")("linb.UI.Public")+';padding-left:16px;">'+C+"</span>";return this.each(function(D){_.resetRun(D.$linbid+":busy",function(){var H=D.keys;A=H[A]||H.BORDER||H.PANEL||H.KEY;var E=D.getSubNode(A),F=E.cssSize(),G;if(!(G=D.$busy)){G=D.$busy=linb.create('<div style="left:0;top:0;z-index:10;position:absolute;background-color:#DDD;"></div><div style="left:0;top:0;z-index:20;text-align:center;position:absolute;"><div>'+B+"</div></div>");linb([G.get(0)]).css({opacity:0.5});linb(E).append(G)}G.css({display:"",width:F.width+"px",height:F.height+"px"});linb([G.get(1).firstChild]).html(B,false).css("paddingTop",F.height/2+"px")},50)})},free:function(){return this.each(function(A){_.resetRun(A.$linbid+":busy");if(A.$busy){A.$busy.css("display","none")}})},reLayout:function(A,B){return this.each(function(D){if(!D.renderId){return }var C=D.properties;if((!D.$noB)&&C.border&&D.boxing()._border){D.boxing()._border(null,false)}if(C.dock&&C.dock!="none"){D.getRootNode().style.width=0;D.getRootNode().style.height=0;linb.UI.$dock(D,true,true)}else{linb.UI.$tryResize(D,C.width,C.height,A,B)}})},toHtml:function(){var A=[];_.arr.each(this._nodes,function(B){A[A.length]=B.toHtml()});return A.join("")},render:function(B){var G=this,F=[],E,D,A,C=G._nodes,I,H=[],J=linb.Dom.byId;linb.UI.$applyCSS();for(E=0;A=C[E++];){if(!A.renderId&&!linb.Dom.byId(A.domId)&&!linb.Dom.byId(A.$domId)){F[F.length]=A}}if(D=F.length){for(E=0;E<D;E++){H[H.length]=F[E].toHtml()}linb.UI.$toDom(H.join(""))}for(E=0;A=C[E++];){A._render(B)}H.length=F.length=0;return G},renderOnto:function(E,D){E=linb(E);if(E.isEmpty()){return this}var B=this,F=B.get(0),C=arguments.callee,A=C.para||(C.para=function(H){var G=H.cssRegion();G.tabindex=H.attr("tabIndex");G.zIndex=H.css("zIndex");G.position=H.css("position");return G});_.merge(F.properties,A(E),"all");E.outerHTML(F.toHtml());F.boxing().host(D||window,E.get(0).id||F.alias);F._render(true);return B},setDomId:function(A){this.get(0).setDomId(A);return this},hide:function(){return this.each(function(A){if(A.renderId){A.getRoot().hide();A.properties.top=A.properties.left=-10000;A.properties.dockIgnore=true}})},show:function(B,A,D,C){return this.each(function(H){var F=H.properties,E;D=(D||D===0)?(parseInt(D)||0):null;C=(C||C===0)?(parseInt(C)||0):null;if(D!==null){F.left=D}if(C!==null){F.top=C}if(linb.getNodeData(H.renderId,"_linbhide")){E=1;F.dockIgnore=false;H.getRoot().show(D&&(D+"px"),C&&(C+"px"));if(F.dock&&F.dock!="none"){linb.UI.$dock(H,false,true)}}else{if(!B&&(!H.renderId||(H.getRootNode().id||"").indexOf(linb.Dom._emptyDivId)===0)){B=linb("body")}}var G=B,I;if(G){if(G["linb.UIProfile"]){I=G.renderId;G=G.boxing()}else{if(G["linb.UI"]){I=(I=G.get(0))&&I.renderId}else{I=(G=linb(G))&&G._nodes[0]}}if(I){G.append(H.boxing(),A);if(!E){H.getRoot().show(D&&(D+"px"),C&&(C+"px"))}}}})},clone:function(){var A=[],B=function(D){delete D.alias;delete D.domId;if(D.children){for(var C=0,E;E=D.children[C];C++){B(E)}}};this.each(function(C){C=C.serialize(false,true);B(C);A.push(C)});return this.constructor.unserialize(A)},refresh:function(){var J,C,H,A,I,D,E,G,F,B;return this.each(function(L){if(!L.renderId){return }F=L.box;D=L.$linbid;E=L.serialId;if(H=!!L.parent){A=L.parent.boxing();J=L.childrenId}else{A=L.getRoot().parent()}C=linb.$getGhostDiv();L.boxing().getChildren().reBoxing().each(function(M){C.appendChild(M)});C=null;B=_.copy(L.children);L.boxing().removeChildren();I=L.serialize(false,true);G=L.$addOns;var K=linb.create("span");L.getRoot().replace(K);L.$noReclaim=1;L.boxing().destroy();_.merge(L,I,"all");L.$linbid=D;L.serialId=E;L=new F(L).render();if(G){G.call(G.target,L.get(0))}if(H){A.append(L,J)}else{A.append(L)}_.arr.each(B,function(M){delete M[0].$dockParent;L.append.apply(L,M)});K.replace(L.get(0).getRoot());K.remove();K=null})},append:function(C,B){if(C["linb.UIProfile"]){C=C.boxing()}var D=this.get(0),A;if(B!==false){C.each(function(E){E.linkParent(D,B)})}if(D.renderId){if(B=typeof B=="string"?B:null){B=D.getSubIdByItemId(B)}A=D.keys.PANEL?D.getSubNode(D.keys.PANEL,B):D.getRoot();if(!A.isEmpty()){A.append(C)}}return this},getChildren:function(B){var A=[];_.arr.each(this.get(0).children,function(C){if(B?C[1]==B:1){A.push(C[0])}});return linb.UI.pack(A)},removeChildren:function(A,B){return this.each(function(C){var D=_.copy(C.children);_.arr.each(D,function(E){if(A?(E[1]==A):1){E[0].unlinkParent();if(B){E[0].boxing().destroy()}}})})},dragable:function(A,C,B){return this.each(function(D){D.getSubNode(D.keys[B]||"KEY",true).beforeMousedown(A?function(G,E,F){if(G.properties.disabled){return }linb.use(F).startDrag(E,{dragKey:A,dragData:typeof C=="function"?C():C,dragCursor:"pointer",dragType:"icon",dragDefer:1})}:null,"_d",-1).beforeDragbegin(A?function(E,F,G){linb.use(G).onMouseout(true,{$force:true}).onMouseup(true)}:null,"_d",-1);if(!A){D.clearCache()}})},setCustomFunction:function(A,B){return this.each(function(C){if(typeof A=="string"){if(B){C.CF[A]=B}else{delete C.CF[A]}}else{C.CF=A||{}}})},setCustomClass:function(B,D){var C=arguments.callee,A=(C.fun||(C.fun=function(J,G,H,F){if(!H[G]){return }var I=J.getSubNode(G,true),E;if(!I.isEmpty()){_.arr.each(H[G].split(/\s+/),function(K){I[F?"removeClass":"addClass"](K)})}}));return this.each(function(G){var E=_.copy(G.CC);if(typeof B=="string"){if(G.renderId){if(B in E){A(G,B,E,true)}}if(!D){delete G.CC[B]}else{G.CC[B]=D;if(G.renderId){A(G,B,G.CC)}}}else{if(!!B&&typeof B=="object"){if(G.renderId){for(var F in B){A(G,F,E,true)}for(var F in B){A(G,F,B)}}G.CC=B}else{if(G.renderId){for(var F in E){A(G,F,E,true)}}G.CC={}}}})},setCustomStyle:function(B,D){var C=arguments.callee,A=(C.fun||(C.fun=function(J,G,H,F){if(!H[G]){return }var I=J.getSubNode(G,true),E;if(!I.isEmpty()){_.arr.each(H[G].split(";"),function(M,K){if((E=M.split(":")).length==2){E[0]=E[0].replace(/\-(\w)/g,function(O,N){return N.toUpperCase()});try{I.css(E[0],F?"":E[1])}catch(L){}}})}}));return this.each(function(G){var E=_.copy(G.CS);if(typeof B=="string"){if(G.renderId){if(B in E){A(G,B,E,true)}}if(!D){delete G.CS[B]}else{G.CS[B]=D;if(G.renderId){A(G,B,G.CS)}}}else{if(!!B&&typeof B=="object"){if(G.renderId){for(var F in B){A(G,F,E,true)}for(var F in B){A(G,F,B)}}G.CS=B}else{if(G.renderId){for(var F in E){A(G,F,E,true)}}G.CS={}}}})},setCustomBehavior:function(A,B){return this.each(function(C){if(typeof A=="string"){if(C.keys[A]){C.CB[A]=B||{}}}else{C.CB=A||{}}if(C.CB.KEY){_.merge(C.CB,C.CB.KEY,"all");delete C.CB.KEY}C.clearCache()})}},Initialize:function(){var B=this.prototype;_.arr.each("getSubNode,getDomId,getRootNode,getRoot".split(","),function(D){if(!B[D]){B[D]=function(){var E=this.get(0);return E[D].apply(E,arguments)}}B[D].$original$="linb.UI"});var A=this,C={};_.each(linb.UI.$ps,function(D,E){C[E]={ini:"auto",action:function(I){var G=this,J=G.properties,F=false,H={$type:J.dock};switch(J.dock){case"top":if(E!="height"&&E!="top"){return }H.width=H.height=1;break;case"bottom":if(E!="height"&&E!="bottom"){return }H.width=H.height=1;break;case"left":if(E!="width"&&E!="left"){return }H.width=H.height=1;break;case"right":if(E!="width"&&E!="right"){return }H.width=H.height=1;break;case"width":if("width"==E){return }H.width=1;break;case"height":if("height"==E){return }H.height=1;break;case"fill":case"cover":if(E=="width"&&E=="height"){return }H.width=H.height=1;break}G.getRoot()[E]?G.getRoot()[E](I):linb.Dom._setPxStyle(G.getRootNode(),E,I);if(J.dock!="none"){_.tryF(G.$dock,[G,H],G)}}}});_.merge(C,{renderer:{ini:null},zIndex:{ini:1,action:function(D){this.getRoot().css("zIndex",D)}},tabindex:{ini:1,action:function(F){var E=this,D=new RegExp("^"+E.key+"[-\\w]*:"+E.serialId+":");E.getRoot().query("*",function(G){return G.id&&D.test(G.id)&&G.getAttribute("tabIndex")}).attr("tabIndex",F)}},position:{ini:"absolute",listbox:["","static","relative","absolute"],action:function(D){this.getRoot().css("position",D)}},visibility:{listbox:["","visible","hidden"],action:function(D){this.getRoot().css("visibility",D)}},display:{listbox:["","none","block","inline","inline-block"],action:function(D){if(D=="inline-block"){this.getRoot().setInlineBlock()}else{this.getRoot().css("display",D)}}}});A.setDataModel(C);linb.UI.$cache_css+=linb.UI.buildCSSText({".ui-ctr":{},".ui-dragable":{},".ui-btn, .ui-btni, .ui-btnc":{height:"22px",background:linb.UI.$bg("button.gif","no-repeat",true)},".ui-btn":{$order:1,"white-space":"nowrap","vertical-align":"top",overflow:"hidden","background-position":"right top","padding-right":"4px","font-size":"12px"},".ui-btn *":{cursor:"pointer"},".ui-btnc button, .ui-btnc a":{display:linb.$inlineBlock,zoom:linb.browser.ie?1:null,background:"transparent",border:0,margin:0,padding:0},".ui-btnc a":{padding:"0 4px 1px 4px"},".ui-btni":{$order:1,"background-position":"left -60px","padding-left":"4px","vertical-align":"top"},".ui-btnc":{$order:1,"background-position":"left -30px","background-repeat":"repeat-x","padding-top":"3px","vertical-align":"top"},".ui-btn-mouseover, .ui-btn-focus":{$order:2,"background-position":"right -90px"},".ui-btn-mouseover .ui-btni, .ui-btn-focus .ui-btni":{$order:2,"background-position":"left -150px"},".ui-btn-mouseover .ui-btnc, .ui-btn-focus .ui-btnc":{$order:2,"background-position":"left -120px"},".ui-btn-mousedown, .ui-btn-checked":{$order:3,"background-position":"right -180px"},".ui-btn-mousedown .ui-btni, .ui-btn-checked .ui-btni":{$order:3,"background-position":"left -240px"},".ui-btn-mousedown .ui-btnc, .ui-btn-checked .ui-btnc":{$order:3,"background-position":"left -210px"},".ui-icon":{"vertical-align":"middle",width:"16px",height:"16px",margin:"0 4px 0 2px"},".uicmd-close, .uicmd-opt, .uicmd-land, .uicmd-toggle, .uicmd-toggle2, .uicmd-min, .uicmd-max,.uicmd-restore,.uicmd-pin, .uicmd-check, .uicmd-radio, .uicmd-add":{background:linb.UI.$bg("icons.gif","no-repeat 0 0",true),width:"16px",height:"16px","margin-right":"2px",cursor:"default","vertical-align":"middle"},".uicmd-empty":{width:"16px",height:"16px","margin-right":"2px",cursor:"default","vertical-align":"middle"},".uicmd-opt":{$order:1,"background-position":"0 0"},".uicmd-opt-mouseover":{$order:2,"background-position":"0 -20px"},".uicmd-opt-mousedown":{$order:3,"background-position":"0 -40px"},".uicmd-land":{$order:1,"background-position":"-40px 0"},".uicmd-land-mouseover":{$order:2,"background-position":"-40px -20px"},".uicmd-land-mousedown":{$order:3,"background-position":"-40px -40px"},".uicmd-pin":{$order:1,"background-position":"-80px 0"},".uicmd-pin-mouseover":{$order:2,"background-position":"-80px -20px"},".uicmd-pin-mousedown":{$order:3,"background-position":"-80px -40px"},".uicmd-pin-checked, .uicmd-pin-checked-mouseover, .uicmd-pin-checked-mousedown":{$order:4,"background-position":"-80px -40px"},".uicmd-min":{$order:1,"background-position":"-120px 0"},".uicmd-min-mouseover":{$order:2,"background-position":" -120px -20px"},".uicmd-min-mousedown":{$order:3,"background-position":"-120px -40px"},".uicmd-restore":{$order:1,"background-position":"-160px 0"},".uicmd-restore-mouseover":{$order:2,"background-position":"-160px -20px"},".uicmd-restore-mousedown":{$order:3,"background-position":"-160px -40px"},".uicmd-max":{$order:1,"background-position":"-200px 0"},".uicmd-max-mouseover":{$order:2,"background-position":"-200px -20px"},".uicmd-max-mousedown":{$order:3,"background-position":"-200px -40px"},".uicmd-close":{$order:1,"background-position":"-240px 0"},".uicmd-close-mouseover":{$order:2,"background-position":"-240px -20px"},".uicmd-close-mousedown":{$order:3,"background-position":"-240px -40px"},".uicmd-check":{$order:1,margin:"0 4px 0 2px","background-position":"-20px -70px"},".uicmd-check-mouseover":{$order:2,"background-position":"-20px -90px"},".uicmd-check-mousedown":{$order:3,"background-position":"-20px -110px"},".uicmd-check-checked":{$order:4,"background-position":"0 -70px"},".uicmd-check-checked-mouseover":{$order:5,"background-position":"0 -90px"},".uicmd-check-checked-mousedown":{$order:6,"background-position":"0 -110px"},".uicmd-radio":{$order:1,margin:"0 4px 0 2px","background-position":"-60px -70px"},".uicmd-radio-mouseover":{$order:2,"background-position":"-60px -90px"},".uicmd-radio-mousedown":{$order:3,"background-position":"-60px -110px"},".uicmd-radio-checked":{$order:4,"background-position":"-40px -70px"},".uicmd-radio-checked-mouseover":{$order:5,"background-position":"-40px -90px"},".uicmd-radio-checked-mousedown":{$order:6,"background-position":"-40px -110px"},".uicmd-add":{$order:1,"background-position":"-56px -222px"},".uicmd-add-mouseover":{$order:2,"background-position":"-56px -222px"},".uicmd-add-mousedown":{$order:3,"background-position":"-56px -222px"},".uicmd-toggle":{$order:1,"margin-left":"3px","background-position":"-160px -70px"},".uicmd-toggle-mouseover":{$order:2,"background-position":"-160px -90px"},".uicmd-toggle-mousedown":{$order:3,"background-position":"-160px -110px"},".uicmd-toggle-checked":{$order:4,"background-position":"-180px -70px"},".uicmd-toggle-checked-mouseover":{$order:5,"background-position":"-180px -90px"},".uicmd-toggle-checked-mousedown":{$order:6,"background-position":"-180px -110px"},".uicmd-toggle-busy":{$order:7,background:linb.UI.$bg("busy.gif","no-repeat center center",true)},".uicmd-toggle2":{$order:1,"background-position":"-200px -70px"},".uicmd-toggle2-mouseover":{$order:2,"background-position":"-200px -90px"},".uicmd-toggle2-mousedown":{$order:3,"background-position":"-200px -110px"},".uicmd-toggle2-checked":{$order:4,"background-position":"-220px -70px"},".uicmd-toggle2-checked-mouseover":{$order:5,"background-position":"-220px -90px"},".uicmd-toggle2-checked-mousedown":{$order:6,"background-position":"-220px -110px"},".uibar-top, .uibar-bottom, .uibar-top-s, .uibar-bottom-s":{position:"relative","vertical-align":"top","font-size":0,"line-height":0},".uibar-top td, .uibar-top-s td, .uibar-bottom td, .uibar-bottom-s td":{$order:1,background:linb.UI.$bg("bar_vertical.gif","no-repeat 0 0",true)},".uibar-top, .uibar-top .uibar-t":{height:"29px"},".uibar-top .uibar-tdl":{$order:1,"padding-left":"4px",height:"100%","background-position":"0 0"},".uibar-top .uibar-tdm":{$order:1,"background-position":"0 -30px","background-repeat":"repeat-x"},".uibar-top .uibar-tdr":{$order:1,"padding-left":"4px","background-position":"right -60px"},".uibar-top-focus .uibar-tdl":{$order:2,"padding-left":"4px",height:"100%","background-position":"left -90px"},".uibar-top-focus .uibar-tdm":{$order:2,"background-position":"left -120px","background-repeat":"repeat-x"},".uibar-top-focus .uibar-tdr":{$order:2,"padding-left":"4px","background-position":"right -150px"},".uibar-top .uibar-cmdl":{"-moz-user-select":"none",overflow:"hidden",position:"absolute",left:0,top:"6px",width:"92%",height:"22px","padding-left":"8px","white-space":"nowrap"},".uibar-top .uibar-cmdr":{"-moz-user-select":"none",position:"absolute",top:"6px",right:"8px","text-align":"right"},".uicon-main":{position:"relative","padding-left":"5px","font-size":0,"line-height":0,"z-index":1,overflow:"visible",background:linb.UI.$bg("bar_horizontal.gif","repeat-y -595px top",true)},".uicon-maini":{"padding-right":"5px","font-size":0,"line-height":0,background:linb.UI.$bg("container_right.gif","#AAD2FA repeat-y right top",true)},".uibar-bottom, .uibar-bottom .uibar-t":{height:"12px"},".uibar-bottom .uibar-tdl":{$order:1,"padding-left":"5px",height:"100%","background-position":"left -189px"},".uibar-bottom .uibar-tdm":{$order:1,"background-position":"left -211px","background-repeat":"repeat-x"},".uibar-bottom .uibar-tdr":{$order:1,"padding-left":"5px","background-position":"right -233px"},".uibar-top-s, .uibar-top-s .uibar-t":{$order:3,height:"7px"},".uibar-top-s .uibar-tdl":{$order:3,height:"100%","padding-left":"5px","background-position":"left -261px"},".uibar-top-s .uibar-tdm":{$order:3,"background-position":"left -283px","background-repeat":"repeat-x"},".uibar-top-s .uibar-tdr":{$order:3,"padding-left":"5px","background-position":"right -305px"},".uibar-top-s .uibar-cmdl":{$order:3,display:"none"},".uibar-top-s .uibar-cmdr":{$order:3,display:"none"},".uibar-bottom-s, .uibar-bottom-s .uibar-t":{$order:3,height:"6px"},".uibar-bottom-s .uibar-tdl":{$order:3,height:"100%","padding-left":"5px","background-position":"left -327px"},".uibar-bottom-s .uibar-tdm":{$order:3,"background-position":"left -349px","background-repeat":"repeat-x"},".uibar-bottom-s .uibar-tdr":{$order:3,"padding-left":"5px","background-position":"right -371px"}})+linb.UI.buildCSSText({".uiw-shell":{background:"transparent",display:linb.$inlineBlock,zoom:linb.browser.ie6?1:null,border:0,padding:0,margin:0},".uiw-frame":{$order:1,display:"block",position:"relative",border:0,padding:0,margin:0,width:"100%",height:"100%","-moz-box-flex":"1"},".uiw-border":{$order:2,display:"block",position:"absolute",border:0,padding:0,margin:0,left:0,top:0,width:"100%",height:"100%"},".ui-dirty":{$order:1,background:linb.UI.$bg("icons.gif","no-repeat",true),"background-position":"-390px -290px"},".ui-disabled, .ui-disabled *":{color:"#808080"},".ui-invalid, .ui-invalid *":{"background-color":"#FFEBCD"},"#linblangkey":{"vertical-align":"baseline"}})+linb.UI.buildCSSText({".uibg-base":{"background-color":"#fff"},".uibg-bar":{"background-color":"#aad2fa"},".uiborder-inset":{border:"solid 1px","border-color":"#648cb4 #c8e1fa #c8e1fa #648cb4"},".uiborder-outset":{border:"solid 1px","border-color":"#c8e1fa #648cb4 #648cb4 #c8e1fa"}})},$End:function(){linb.UI.$cache_css+=this.buildCSSText(this.$Appearances)},Static:{$cache_css:"",$css_tag_dirty:"ui-dirty",$css_tag_invalid:"ui-invalid",$tag_left:"{",$tag_right:"}",$tag_special:"#",$ID:"#id#",$DOMID:"#domid#",$CLS:"#cls#",$tag_subId:"_serialId",$childTag:"<!--{id}-->",$theme:"default",$ps:{left:1,top:1,width:1,height:1,right:1,bottom:1},$toDom:function(F){var B=linb.Dom.getEmptyDiv().get(0),E=[];B.innerHTML=F;this.$addEventsHanlder(B);for(var D=0,C=B.childNodes,A=C.length;D<A;D++){linb.$registerNode(C[D]);E[E.length]=C[D].$linbid}B=null;return linb(E,false)},$addEventsHanlder:function(E,L){var A=linb.$cache.UIKeyMapEvents,H=linb.Event._eventHandler,D=_.toArr(E.getElementsByTagName("*")),J,F,I,G,C,B,M,K;if(L){D.push(E)}if(F=D.length){for(J=0;J<F;J++){if((C=D[J]).nodeType!=1){continue}if(B=C.id){if(M=A[B]||A[B.substr(0,B.indexOf(":"))]){K=linb.$registerNode(C);K=K.eHandlers||(K.eHandlers={});for(I in M){K[I]=M[I];if(G=H[I]){K[G]=C[G]=M[I]}}}}}}D.length=0;C=E=null},_getChildren:function(A){return A.children},getFromDom:function(A){if(A=linb.UIProfile.getFromDom(A)){return A.boxing()}},unserialize:function(C,D){if(typeof C=="string"){C=_.unserialize(str)}var B=function(E){if(_.isArr(E)){E=E[0]}delete E.serialId;if(E.children){_.arr.each(E.children,B)}},A=[];_.arr.each(C,function(E){if(!D){B(E)}A.push((new (linb.SC(E.key))(E)).get(0))});return this.pack(A,false)},_ensureValues:function(B){var C=[],G=0,E=0,H,F=this.KEY,D=linb.$cache.profileMap,A=linb.getNodeData;if(B["linb.absBox"]){B=B._nodes}for(;H=B[G++];){if((H.box&&H.box[F])||((H=D[A(H.renderId?H.renderId:H,["element","id"])])&&H.box&&H.box[F])){C[E++]=H}}return C.length<=1?C:this._unique(C)},__gc:function(){var C=this,B=C.$key,A=linb.$cache;_.breakO([A.template[B],A.reclaimId[B],C._cache,C._idCache,C.$DataModel,C.$Templates,C.$Behaviors,C],2);delete linb.absBox.$type[B.replace("linb.UI.","")];delete linb.absBox.$type[B];_.filter(linb.$cache.UIKeyMapEvents,function(E,D){return !(D==B||D.indexOf(B+"-")==0)});Class.__gc(B)},_pickSerialId:function(){var A=linb.$cache.reclaimId[this.$key];if(A&&A[0]){return A.pop()}return this._ctrlId.next()},$bg:function(C,A,B){return function(D){var E=linb.ini.path+"appearance/default/"+(typeof B=="string"?B:B?"Public":(E=D.split("."))[E.length-1])+"/"+C;return"url("+E+") "+(A||"")}},$ieBg:function(B,A){return function(C){var D=linb.ini.path+"appearance/default/"+(typeof A=="string"?A:A?"Public":(D=C.split("."))[D.length-1])+"/"+B;return'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+D+'",sizingMethod="crop")'}},$doTemplate:function(E,I,H,O,P){var L=arguments.callee,N,K,D,M=H.constructor==Array,J=I[O||""],A=!P,P=P||[];if(M){if(typeof J!="function"){J=L}for(var G=0;K=H[G++];){J(E,I,K,O,P)}}else{if(K=H.object){P[P.length]=K.toHtml()}else{if(typeof J=="function"){J(E,I,H,O,P)}else{O=O?O+".":"";var C=J[0],B=J[1];for(var G=0,F=C.length;G<F;G++){if(D=B[G]){if(D in H){K=H[D];if(I[N=O+D]&&K){L(E,I,K,N,P)}else{P[P.length]=K}}}else{P[P.length]=C[G]}}}}}if(A){return P.join("")}},$buildTemplate:function(E,V,c,H,B){if(V&&String(V.tagName).toLowerCase()=="text"){B[B.length]=V.text;return }var L=arguments.callee,K=E.behavior?c?E.behavior[c]:E.behavior:null,Y=L.map1||(L.map1={tagName:1,text:1}),W=L.map2||(L.map2={image:1,input:1,br:1,meta:1,hr:1,abbr:1,embed:1}),Q=L.r2||(L.r2=/[a-z]/),P=L.r3||(L.r3=/^(on|before|after)/),M=L.r7||(L.r7=/([^{}]*)\{([\w]+)\}([^{}]*)/g),F=false,G=linb.UI,J,N,U,C;if(!V){V=E.template}C=c?E.keys[c]:E.key;if(!V.tagName){V.tagName="span"}if(V.id!==null){V.id=c?C+":"+G.$ID+":"+G.$tag_left+G.$tag_subId+G.$tag_right:G.$DOMID}else{delete V.id}if(V.className!==null){J=G.$CLS+(c?"-"+c.toLowerCase():"");U=V.className||"";V["class"]=J+" "+U+" "+(C==E.key?" ui-ctrl ":"")+G.$tag_special+(c||"KEY")+"_CC"+G.$tag_special}delete V.className;V.style=(V.style||"")+";"+G.$tag_special+(c||"KEY")+"_CS"+G.$tag_special;var T=[],S={},D=V.tagName,I=V.text,A=linb.absObj.$specialChars;for(var R in V){if(!V[R]){continue}if(!A[R.charAt(0)]&&!Y[R]){N=V[R];if(!Q.test(R)){if(typeof N=="object"){if(!N.$order){N.$order=0}N.$key=R;T[T.length]=N}}else{S[R]=N}}}T.sort(function(d,e){d=d.$order;e=e.$order;return d>e?1:d==e?0:-1});if(!B){F=true;B=[]}B[B.length]="<"+D+" ";for(var R in S){if(S[R]){B[B.length]=R+'="'+S[R]+'" '}}if(V.className!==null){V.className=U}delete V["class"];B[B.length]="{attributes}>";if(!W[D]&&I){B[B.length]=I}for(var R=0,O=T.length;R<O;){N=T[R++];L(E,N,N.$key,H,B)}if(!W[D]){B[B.length]="</"+D+">"}if(F){var Z=H[0],X=H[1];B.join("").replace(M,function(g,e,i,h){if(e){Z[Z.length]=e}X[Z.length]=Z[Z.length]=i;if(h){Z[Z.length]=h}return""})}},_rpt:function(E,B){var G=arguments.callee,A=linb.UI.$tag_special,F=G._r||(G._r=new RegExp(A+"([0-9A-Z_]+)_C([SC])"+A+"|"+A+"([\\w_\\-\\.]*)"+A,"img")),D={id:E.serialId,cls:E.getClass("KEY"),domid:E.$domId},C={S:E.CS,C:E.CC};return B.replace(F,function(I,H,K,J){return D[J]||C[K][H]||""})},_build:function(B,G){var I,L,C,J=linb.UI,K=[[],[]],M=this,H=M.KEY,A=linb.$cache.template,F=B._hash="b:"+(B.template._subid||"")+";!"+(B._exhash||"");if(!(I=_.get(A,[H,F]))){J.$buildTemplate(B,null,null,K);_.set(A,[H,F,""],K);if(L=B.template.$submap){for(var E in L){if(typeof (C=L[E])!="function"){var K=[[],[]];for(var D in C){if(typeof C[D]=="object"){J.$buildTemplate(B,C[D],D,K)}}C=K}_.set(A,[H,F,E],C)}}I=_.get(A,[H,F])}if(!I){return""}return M._rpt(B,J.$doTemplate(B,I,G))},_setDefaultBehavior:function(G){var A=this,D=arguments.callee,F=D._m||(D._m={"":1,KEY:1,$key:1}),E=D._f1||(D._f1=function(I,K,L){var J=function(R,W,M){var Z,P=linb.use(M).id(),Y,X=R.getSubId(P),O=R.properties,N,V,U;if(O.disabled){return }Y=R.SubSerialIdMapItem&&R.SubSerialIdMapItem[X];if(Y&&Y.disabled){return }switch(typeof I){case"string":N=R.getSubNode(I,X)._get();break;case"function":V=[I];break;case"object":N=[];V=[];for(var Q,T=0,S=I.length;T<S;T++){Q=I[T];if(typeof Q=="string"){N.push.apply(N,R.getSubNode(Q,X)._get())}else{V.push(Q)}}}if(N&&N.length){N=linb(N);U=R.boxing();if(L==1){if(K=="mouseover"&&R.beforeHoverEffect){if(false==U.beforeHoverEffect(R,Y,W,M,"mouseover")){return }}if(K=="mousedown"&&R.beforeClickEffect){if(false==U.beforeClickEffect(R,Y,W,M,"mousedown")){return }}N.tagClass("-"+K)}else{if(K=="mouseup"){if(R.beforeClickEffect&&false==U.beforeClickEffect(R,Y,W,M,"mouseup")){return }N.tagClass("-mousedown",false)}else{if(R.beforeHoverEffect&&false==U.beforeHoverEffect(R,Y,W,M,"mouseout")){return }N.tagClass("(-mouseover|-mousedown)",false)}}}if(V&&V.length){_.arr.each(V,function(c){_.tryF(c,[R],R)});V.length=0}};return J}),B={},C;if(!linb.SC.get("linb.absComposed")){Class("linb.absComposed","linb.absObj",{Instance:{addPanel:function(J,L,M){var N=_.copy(linb.UI.Panel.$DataStruct);_.merge(N,J,"with");_.merge(N,{dock:"fill",tag:J.tag||J.id},"all");var K=new linb.UI.Panel(N),I=[];this.append(K,M&&M.id);_.arr.each(L,function(O){I.push(O[0])});K.append(linb.UI.pack(I,false))},removePanel:function(){this.destroy()},getPanelPara:function(){return _.copy(this.get(0).properties)},getPanelChildren:function(){return this.get(0).children},_e1:function(J,K,L,M,I){},_e2:function(K,J,N,I,M,L,O){},_e3:function(J,K,I,L){},_e4:function(J,M,N,I,L,K){},_e5:function(I,J,K){}},Static:{DataModel:{dragKey:"",dropKeys:""},$abstract:true}})}var H=linb.absComposed.prototype;if(G.HoverEffected){_.each(G.HoverEffected,function(J,I){C=F[I]?G:(G[I]||(G[I]={}));if(!J){C.afterMouseover=C.afterMouseout=null}else{C.afterMouseover=E(J,"mouseover",1);C.afterMouseout=E(J,"mouseout",2)}});B.beforeHoverEffect=H._e1}if(G.ClickEffected){_.each(G.ClickEffected,function(J,I){C=F[I]?G:(G[I]||(G[I]={}));if(!J){C.afterMousedown=C.afterMouseup=null}else{C.afterMousedown=E(J,"mousedown",1);C.afterMouseup=E(J,"mouseup",2)}});B.beforeClickEffect=H._e1}if(G.KeyHook){_.merge(G,{afterKeydown:function(J,K,L){if(J.onHotKeydown){var I=linb.Event.getKey(K);return false!==J.boxing().onHotKeydown(J,I[0],!!I[1],!!I[2],!!I[3],K,L)}},afterKeypress:function(J,K,L){if(J.onHotKeypress){var I=linb.Event.getKey(K);return false!==J.boxing().onHotKeypress(J,I[0],!!I[1],!!I[2],!!I[3],K,L)}},afterKeyup:function(J,K,L){if(J.onHotKeyup){var I=linb.Event.getKey(K);return false!==J.boxing().onHotKeyup(J,I[0],!!I[1],!!I[2],!!I[3],K,L)}}},"all");B.onHotKeydown=B.onHotKeypress=B.onHotKeyup=H._e2}if(G.NavKeys){_.each(G.NavKeys,function(J,L){var I=arguments.callee,K,Q=I.m1||(I.m1={KEY:1,$key:1});if(Q[L]){return }var O=I.m2||(I.m2={input:1,textarea:1}),N=I.m3||(I.m3={tab:1,enter:1,up:1,down:1,left:1,right:1}),M=I.m4||(I.m4={tab:1,up:1,down:1,left:1,right:1}),P=G[L]||(G[L]={});if(null===J){P.afterKeydown=null}else{P.afterKeydown=function(V,Z,R){var W=linb.Event.getKey(Z),d=W[0],S=W[1],U=W[2],Y=W[3],c=false;if(O[W=linb.use(R).get(0).tagName.toLowerCase()]){if(N[d]){var T=linb.use(R).caret(),X=linb.use(R).get(0).value;switch(d){case"up":if(!/[\n\r]/.test(X.substr(0,T[0]))){c=true}break;case"left":if(S||(T[0]===0&&(T[1]!==X.length||T[1]===0))){c=true}break;case"down":if(!/[\n\r]/.test(X.substr(T[1],X.length))){c=true}break;case"right":if(S||(T[1]===X.length&&(T[0]!==0||T[1]===0))){c=true}break;case"enter":if(W=="input"||Y){c=true}break;case"tab":c=true;break}}}else{if(M[d]){c=true}}if(c){if(V.beforeNextFocus&&false===V.boxing().beforeNextFocus(V,d,!!U,Z)){return false}if(d!="tab"){linb.use(R).nextFocus(("up"==d||"left"==d)?false:true)}}}}});B.beforeNextFocus=H._e3}if((C=G.DropableKeys)&&C.length){_.arr.each(C,function(I){A._dropable(I)});C=A.prototype;_.arr.each("addPanel,removePanel,getPanelPara,getPanelChildren,getDropKeys,setDropKeys".split(","),function(I){if(!C[I]){C[I]=H[I]}});A.$DataModel.dropKeys=A.$DataStruct.dropKeys="";B.onDragEnter=B.onDragLeave=B.onDrop=B.onDropTest=B.onDropMarkShow=B.onDropMarkClear=H._e4}if((C=G.DragableKeys)&&C.length){_.arr.each(C,function(I){A._dragable(I)});C=A.prototype;_.arr.each("getDragKey,setDragKey".split(","),function(I){if(!C[I]){C[I]=H[I]}});A.$DataModel.dragKey=A.$DataStruct.dragKey="";B.onGetDragData=B.onStartDrag=B.onDragStop=H._e5}A.setEventHandlers(B)},addTemplateKeys:function(A){var B=this,C=B.KEY,E=arguments.callee,D=E._reg||(E._reg=/\./g);_.arr.each(A,function(F){B.$cssKeys[F]=(B.$Keys[F]=F=="KEY"?C:C+"-"+F).replace(D,"-").toLowerCase().replace("linb-ui","linb")});return B},$CSSCACHE:{},$getCSSValue:function(A,D){var C=this.$CSSCACHE,B=A+"->"+D,F=arguments.callee;if(B in C){return C[B]}var G=linb.Dom.getEmptyDiv().get(0),E;G.className=A;E=C[B]=parseInt(linb.Dom.getStyle(G,D))||0;G.className="";return E},getTheme:function(){return this.$theme},setTheme:function(A){A=A||"default";var B=this;if(A!=B.$theme){if(A!="default"){linb.CSS.includeLink(linb.getPath("linb.appearance."+A,"/theme.css"),"theme:"+A)}var D=linb.CSS.get("id","theme:"+B.$theme);if(D){D.disabled=true;linb(D).remove(false)}B.$theme=A;B.$CSSCACHE={};var C=0;_.asyRun(function(){if(C>5){throw new Error("errLoadTheme:"+A)}C++;var E=linb.CSS.$getCSSValue(".setting-uikey","fontFamily");if(E==A||A=="default"){linb.UI.getAll().reLayout(false,true);C=null}else{_.asyRun(arguments.callee,200*C)}},100)}return this},setAppearance:function(A){_.merge(this.$Appearances,A,"all");return this},getAppearance:function(){return this.$Appearances},setTemplate:function(D,K){if(D){var J=this,G=arguments.callee,A=G.r2||(G.r2=/[a-z]/),F=linb.absObj.$specialChars,E=["KEY"],H=G._fun||(G._fun=function(N,L){var O,M;for(M in N){if(!F[M.charAt(0)]){if(!A.test(M)){L[L.length]=M;O=N[M];if(typeof O=="object"){arguments.callee(O,L)}}}}}),I;H(D,E);J.addTemplateKeys(E);I=J.$Templates;if(typeof K=="string"){D._subid=K;I[K]=D}else{I._=D}if(I=D.$submap){for(var C in I){for(var B in I[C]){G.call(J,I[C],B)}}}}return this},getTemplate:function(A){return this.$Templates[A||"_"]},setBehavior:function(B){if(B){var I=this,G=linb.$cache.UIKeyMapEvents,C=I.$key,Q=linb.absObj.$specialChars,A=linb.Event.$eventhandler,E=linb.Event._eventMap,R=arguments.callee,P=R.r1||(R.r1=/[a-z]/),N=R.r2||(R.r2=/^(on|before|after)/),H=I.$Behaviors,K,O,M,L,J,F,D;I._setDefaultBehavior(B);if(B.KEY){_.merge(B,B.KEY,"all");delete B.KEY}for(O in B){J=B[O];if(!Q[O.charAt(0)]){if(!P.test(O)){K=H[O]||(H[O]={});for(M in J){F=J[M];if(!Q[M.charAt(0)]){if(F){K[M]=F}else{delete K[M]}}}}else{if(N.test(O)){if(J){H[O]=J}else{delete H[O]}}else{H[O]=J}}}}_.filter(G,function(T,S){return !(S==C||S.indexOf(C+"-")==0)});for(O in H){J=H[O];if(!Q[O.charAt(0)]){if(!P.test(O)){for(M in J){if(!Q[M.charAt(0)]&&J[M]){L=C+"-"+O;(G[L]||(G[L]={}))["on"+E[M]]=A}}}else{if(N.test(O)&&J){L=C;(G[L]||(G[L]={}))["on"+E[O]]=A}}}}}return I},getBehavior:function(){return this.$Behaviors},$applyCSS:function(){var B=linb.UI,A=B.$cache_css;if(A){if(!B.$cssNo){B.$cssNo=1}linb.CSS.addStyleSheet(A,"linb.UI-CSS"+(B.$cssNo++));linb.UI.$cache_css=""}},buildCSSText:function(I){var Q=this,M=arguments.callee,D=M._r1||(M._r1=/(^|\s|,)([0-9A-Z_]+)/g),J=[],A=[],K=linb.browser,F=K.ie6,B=K.ie,L=K.gek,N=Q.$cssKeys,P,O,C;for(var H in I){C=I[H];P=H.replace(D,function(S,R,T){return R+"."+(N[T]||T)}).toLowerCase();C.$order=parseInt(C.$order)||0;C.$=P;J[J.length]=C}J.sort(function(R,S){R=R.$order;S=S.$order;return R>S?1:R==S?0:-1});for(var H=0,E=J.length;H<E;){C=J[H++];A[A.length]=C.$+"{";if(P=C.$before){A[A.length]=P}if(P=C.$text){A[A.length]=P}for(var G in C){switch(G.charAt(0)){case"$":continue;break;case"_":if(!F){continue}break;case"*":if(!B){continue}break;case"-":if(!L){continue}break}if((O=C[G])||C[G]===0){switch(typeof O){case"string":case"number":A[A.length]=G+":"+O+";";break;case"function":A[A.length]=G+":"+O(Q.KEY)+";";break;default:_.arr.each(O,function(R){if(R){A[A.length]=G+":"+R+";"}})}}}if(O=C.$after){A[A.length]=O}A[A.length]="}"}return A.join("")},_dropable:function(D){var B=this,C=linb.Event.$eventhandler2,H=B.$Behaviors,A=D=="KEY"?H:(H[D]||(H[D]={})),F=linb.$cache.UIKeyMapEvents,G=D=="KEY"?B.KEY:(B.KEY+"-"+D),E=F[G]||(F[G]={});_.merge(A,{beforeMouseover:function(K,N,I){if(K.properties.disabled||K.properties.readonly){return }var P=I,R=linb.DragDrop,J=R.getProfile(),Q=J.dragKey,L=J.dragData,T,M,S,O;if(!Q||!L||!(new RegExp("\\b"+Q+"\\b")).test(K.box.getDropKeys(K,P))){return }M=K.boxing();if(M.getItemByDom){T=M.getItemByDom(I)}O=[K,N,P,Q,L,T];if((S=K.onDropTest)&&(false===M.onDropTest.apply(M,O))){return }if((S=K.box._onDropTest)&&(false===S.apply(K.host||K,O))){return }R.setDropElement(I);if(K.onDropMarkShow&&(false===M.onDropMarkShow.apply(M,O))){}else{if((S=K.box._onDropMarkShow)&&(false===S.apply(K.host||K,O))){}else{_.resetRun("setDropFace",R.setDropFace,0,[P],R)}}if(S=K.box._onDragEnter){S.apply(K.host||K,O)}if(K.onDragEnter){M.onDragEnter.apply(M,O)}},beforeMouseout:function(K,N,I){if(K.properties.disabled||K.properties.readonly){return }var Q=linb.DragDrop,J=Q.getProfile(),P=J.dragKey,L=J.dragData,R,M,O;if(J.dropElement==I){M=K.boxing();if(M.getItemByDom){R=M.getItemByDom(I)}O=[K,N,I,P,L,R];if(K.onDropMarkClear&&(false===M.onDropMarkClear.apply(M,O))){}else{if((t=K.box._onDropMarkClear)&&(false===t.apply(K.host||K,O))){}else{_.resetRun("setDropFace",Q.setDropFace,0,[null],linb.DragDrop)}}if(t=K.box._onDragLeave){t.apply(K.host||K,O)}if(K.onDragLeave){M.onDragLeave.apply(M,O)}Q.setDropElement(null)}},beforeDrop:function(K,N,I){var Q=linb.DragDrop,J=Q.getProfile(),P=J.dragKey,L=J.dragData,S,R,O,M=K.boxing();if(M.getItemByDom){S=M.getItemByDom(I)}O=[K,N,I,P,L,S];if(K.onDropMarkClear&&(false===M.onDropMarkClear.apply(M,O))){}else{if((R=K.box._onDropMarkClear)&&(false===R.apply(K.host||K,O))){}}if(K.onDrop&&(false===M.onDrop.apply(M,O))){}else{if((R=K.box._onDrop)&&(false===R.apply(K.host||K,O))){}}}},"all");_.merge(E,{onmouseover:C,onmouseout:C,ondrop:C});return B},_dragable:function(D){var B=this,C=linb.Event.$eventhandler2,H=B.$Behaviors,A=D=="KEY"?H:(H[D]||(H[D]={})),F=linb.$cache.UIKeyMapEvents,G=D=="KEY"?B.KEY:(B.KEY+"-"+D),E=F[G]||(F[G]={});_.merge(A,{beforeMousedown:function(L,N,O){if(L.properties.disabled){return }if(!L.properties.dragKey){return }var P=linb.Event.getPos(N),M=L.boxing(),J=[L,N,O],K;if(L.onStartDrag&&(false===M.onStartDrag.apply(M,J))){}else{if((K=L.box._onStartDrag)&&(false===K.apply(L.host||L,J))){}else{var I=L.box;linb.use(O).startDrag(N,{dragType:"icon",targetLeft:P.left+12,targetTop:P.top+12,dragCursor:"pointer",dragDefer:1,dragKey:I.getDragKey(L,O),dragData:I.getDragData(L,N,O)})}}},beforeDragbegin:function(I,J,K){linb.use(K).onMouseout(true,{$force:true}).onMouseup(true)},beforeDragstop:function(J,K,L){var I;if(J.onDragStop){J.boxing().onDragStop(J.e,L)}if(I=J.box._onDragStop){I.apply(J.host||J,arguments)}}},"all");_.merge(E,{onmousedown:C,ondragbegin:C});return B},adjustData:function(D,G,C){if(!C){C={}}var B,H,A=linb.wrapRes,F=arguments.callee,E=F._r||(F._r=/\B\$([\w]+[\.][\w\.]+[\w])/g);for(B in G){if(B.charAt(0)=="$"){continue}if(G.hasOwnProperty(B)&&!C.hasOwnProperty(B)){C[B]=typeof (H=G[B])=="string"?(((H.indexOf("$")!=-1)?(H=H.replace(E,function(J,I){return A(I)})):H)&&((H.charAt(0)=="@")?(linb.SC.get(H.substr(1,H.length))||H):H)):H}}if((typeof (H=C.renderer)=="function")||(typeof (H=G.renderer)=="function")){C.caption=H(G,C,D)}if("disabled" in G){C.disabled=G.disabled?"ui-disabled":""}C.imageDisplay=G.image?"":"display:none";return C},cacheData:function(A,B){_.set(linb.$cache,["UIDATA",A],B);return this},getCachedData:function(A){var B=_.get(linb.$cache,["UIDATA",A]);if(typeof B=="function"){B=B()}return _.clone(B)},Behaviors:{onContextmenu:function(A,B,C){return A.boxing().onContextmenu(A,B,C)!==false}},DataModel:{tag:"",tagVar:{ini:{}},disabled:{ini:false,action:function(A){this.getRoot().css("opacity",A?0.5:1)}},dock:{ini:"none",listbox:["none","top","bottom","left","right","center","middle","origin","width","height","fill","cover"],action:function(A){linb.UI.$dock(this,true,true)}},dockIgnore:{ini:false,action:function(B){var A=this;if(A.properties.dock!="none"){linb.UI.$dock(A,true,true)}}},dockOrder:{ini:1,action:function(B){var A=this;if(A.properties.dock!="none"){linb.UI.$dock(A,true,true)}}},dockMargin:{ini:{left:0,top:0,right:0,bottom:0},action:function(B){var A=this;if(A.properties.dock!="none"){linb.UI.$dock(A,true,true)}}},dockFloat:{ini:false,action:function(B){var A=this;if(A.properties.dock!="none"){linb.UI.$dock(A,true,true)}}},dockMinW:0,dockMinH:0,tips:""},EventHandlers:{onRender:function(A){},onLayout:function(A){},onDestroy:function(A){},beforeDestroy:function(A){},onShowTips:function(A,B,C){},onContextmenu:function(A,C,B){}},RenderTrigger:function(){var B=this,A=B.boxing(),E=B.properties;if(B.box._onresize){var D=B.getRootNode().style,C;if((C=D.visibility)!="hidden"){B._$v=C;D.visibility="hidden"}linb.UI.$tryResize(B,E.width,E.height);D=null}if(E.disabled){A.setDisabled(true,true)}B.inValid=1},$tryResize:function(C,F,D,B,A,G){var I=C.box,H=I._onresize,E=C.$rs_args;if(H&&(F||D)){if(!E){E=C.$rs_args=[C,null,null];_.asyRun(C.$resizeFun=function(){delete C.$rs_args;delete C.$resizeFun;if(!C.getRootNode()){return }H.apply(I,E);var J=C.getRootNode().style;if("_$v" in C){if(J.visibility!="visible"){J.visibility=C._$v}delete C._$v}})}if(F){E[1]=F}if(D){E[2]=D}E[3]=A;E[4]=G}if(B){_.tryF(C.$resizeFun)}},LayoutTrigger:function(){var B=this,A=B.boxing(),D=B.properties;if(D.dock&&D.dock!="none"){if(!B.$laidout){B.$laidout=1;var C=B.getRootNode().style;switch(D.dock){case"top":case"bottom":case"width":C.width=0;break;case"left":case"right":case"height":C.height=0;break;default:C.width=C.height=0}}linb.UI.$dock(this,false,true)}},$dock_args:["top","bottom","left","right","center","middle","width","height"],$dock_map:{middle:1,center:1},$dock:function(G,C,D){var A=G.properties,I=A.dockMargin,F=G.getRoot(),N=A.dock||"none",B=F.parent(),P="auto",J=linb.Event.getId(B.get(0)),E=function(Q,R){Q=parseInt(Q.properties.dockOrder)||0;R=parseInt(R.properties.dockOrder)||0;return Q>R?1:Q==R?0:-1},M,L="$inMatrix",K,O,H=function(Q){return linb.browser.ie6?Q-Q%2:Q};if(B.get(0)==document.body){J="!document"}if(J&&(J==linb.Dom._ghostDivId||_.str.startWith(J,linb.Dom._emptyDivId))){return }if(G.$dockParent!=J||G.$dockType!=N||C){G.$dockParent=J;G.$dockType=N;G.unLink("$dock");G.unLink("$dock1");G.unLink("$dock2");switch(N){case"middle":M={right:P,bottom:P,left:A.left||"",width:A.width||"",height:A.height||""};break;case"center":M={right:P,bottom:P,top:A.top||"",width:A.width||"",height:A.height||""};break;case"origin":M={right:P,bottom:P,width:A.width||"",height:A.height||""};break;case"top":M={left:I.left,right:I.right,bottom:P,height:A.height||""};break;case"bottom":M={left:I.left,right:I.right,top:P,height:A.height||""};break;case"left":M={right:P,width:A.width||""};break;case"right":M={left:P,width:A.width||""};break;case"width":M={bottom:P,height:A.height||"",top:A.top||""};break;case"height":M={right:P,width:A.width||"",left:A.left||""};break;case"fill":case"cover":M={right:P,bottom:P};break;case"none":M={left:A.left,top:A.top,width:A.width||"",height:A.height||""};break}F.cssRegion(M,true);if(B.get(0)===document.body){B=linb.win;if(!linb.$cache._resizeTime){linb.$cache._resizeTime=1}}if(N!="none"){K=B.$getEvent("onSize","dock");if(!K){K=function(g){var d=arguments.callee,Q=linb.UI.$dock_map,X=linb.UI.$dock_args,Y=d.rePos,Z=d.pid=="!window"||d.pid=="!document",T=Z?linb.win:linb(d.pid),R=T.get(0).style,W,V,U,S,e,c;if(g.$dockid||!Z||(_()-linb.$cache._resizeTime>100)){W={left:0,top:0,right:0,bottom:0,width:parseInt(R&&R.width)||T.width(),height:parseInt(R&&R.height)||T.height()};for(U=0;e=X[U++];){c=d[e];if(c.length){if(!Q[e]){g.width=g.height=1}for(V=0;S=c[V++];){if(!S.properties.dockIgnore){Y(S,W,e,g.$dockid,Z||g.width,Z||g.height)}}}}if(W.later){_.each(W.later,function(i){try{i.node.cssRegion(i,true)}catch(h){_.asyRun(function(){i.width+=1;i.height+=1;i.node.cssRegion(i,true)})}})}if(Z){linb.$cache._resizeTime=_()}}d=T=R=null};K.pid=J;_.arr.each(linb.UI.$dock_args,function(Q){K[Q]=[]});K.rePos=function(R,Z,g,e,Y,l){var k=false;if(e&&R.$linbid!=e){k=true}var Q=R.properties,j=Q.dockFloat,d=Q.dockMargin,i=R.getRoot(),m=R.getRootNode().style,T,c,p,V,n,U,X=parseInt(Q._dockBorderWidth)||0,W=parseInt(Q._dockBorderHeight)||0,S={};switch(g){case"middle":i.top((Z.height-i.height())/2);break;case"center":i.left((Z.width-i.width())/2);break;case"top":if(!k){T=d.left;p=d.right;c=(j?0:Z.top)+d.top;if(parseFloat(m.top)!=c){S.top=c}n=Z.width-T-p-X;if(parseFloat(m.width)!=n){S.width=H(n)}if(!_.isEmpty(S)){i.cssRegion(S,true)}}if(!j){Z.top+=(i.offsetHeight()+d.top+d.bottom)}break;case"bottom":if(!k){T=d.left;p=d.right;V=(j?0:Z.bottom)+d.bottom;if(parseFloat(m.bottom)!=V){S.bottom=V}n=Z.width-T-p-X;if(parseFloat(m.width)!=n){S.width=H(n)}if(!_.isEmpty(S)){i.cssRegion(S,true)}}if(!j){Z.bottom+=(i.offsetHeight()+d.top+d.bottom)}break;case"left":if(!k){T=(j?0:Z.left)+d.left;c=(j?0:Z.top)+d.top;V=(j?0:Z.bottom)+d.bottom;if(parseFloat(m.left)!=T){S.left=T}if(parseFloat(m.top)!=c){S.top=c}n=Z.height-c-V-W;if(parseFloat(m.height)!=n){S.height=H(n)}if(!_.isEmpty(S)){i.cssRegion(S,true)}}if(!j){Z.left+=(i.offsetWidth()+d.left+d.right)}break;case"right":if(!k){p=(j?0:Z.right)+d.right;c=(j?0:Z.top)+d.top;V=(j?0:Z.bottom)+d.bottom;if(parseFloat(m.right)!=p){S.right=p}if(parseFloat(m.top)!=c){S.top=c}n=Z.height-c-V-W;if(parseFloat(m.height)!=n){S.height=H(n)}if(!_.isEmpty(S)){i.cssRegion(S,true)}}if(!j){Z.right+=(i.offsetWidth()+d.left+d.right)}break;case"width":if(!Y){return }T=(Q.dock=="cover"?0:(j?0:Z.left))+d.left;p=(Q.dock=="cover"?0:(j?0:Z.right))+d.right;c=Q.dock=="width"?(parseInt(Q.top)||0):((Q.dock=="cover"?0:(j?0:Z.top))+d.top);n=Z.width-T-p-X;Z.later=Z.later||{};Z.later[R.$linbid]=Z.later[R.$linbid]||{};_.merge(Z.later[R.$linbid],{node:i,width:H(Q.dockMinW?Math.max(Q.dockMinW,n):n),left:T,top:c},"all");break;case"height":if(!l){return }c=(Q.dock=="cover"?0:(j?0:Z.top))+d.top;V=(Q.dock=="cover"?0:(j?0:Z.bottom))+d.bottom;T=Q.dock=="height"?(parseInt(Q.left)||0):((Q.dock=="cover"?0:(j?0:Z.left))+d.left);n=Z.height-c-V-W;Z.later=Z.later||{};Z.later[R.$linbid]=Z.later[R.$linbid]||{};_.merge(Z.later[R.$linbid],{node:i,height:H(Q.dockMinH?Math.max(Q.dockMinH,n):n),left:T,top:c},"all");break}};B.onSize(K,"dock")}if(N=="fill"||N=="cover"){G.link(K.height,"$dock1");G.link(K.width,"$dock2");K.height.sort(E);K.width.sort(E)}else{if(N=="origin"){G.link(K.center,"$dock1");G.link(K.middle,"$dock2")}else{G.link(K[N],"$dock");K[N].sort(E)}}linb.$cache._resizeTime=1;G.$dockFun=K}}if(N!="none"&&D){G.$dockFun({width:1,height:1,$dockid:_.arr.indexOf(["width","height","fill","cover"],N)!=-1?G.$linbid:null,$type:N})}},_beforeSerialized:function(D){var E=D.boxing(),A,C,G={};_.merge(G,D,"all");var F=G.properties=_.copy(D.properties);switch(F.dock){case"top":case"bottom":delete F.width;delete F.left;delete F.top;delete F.right;delete F.bottom;break;case"left":case"right":delete F.height;delete F.left;delete F.top;delete F.right;delete F.bottom;break;case"width":delete F.width;delete F.left;delete F.right;break;case"height":delete F.height;delete F.top;delete F.bottom;break;case"fill":case"cover":delete F.width;delete F.height;delete F.left;delete F.top;delete F.right;delete F.bottom;break}for(var B in linb.UI.$ps){if((B in F)&&typeof F[B]!="number"&&F[B]!=""&&F[B]!="auto"){F[B]=isNaN(F[B]=parseFloat(F[B]))?"auto":F[B]}}if(F.items&&F.items.length){C=linb.absObj.$specialChars;F.items=_.clone(F.items,function(I,H){return !C[(H+"").charAt(0)]&&I!=undefined})}if(_.isEmpty(F.tagVar)){delete F.tagVar}if((C=F.dockMargin)&&!C.left&&!C.top&&!C.right&&!C.bottom){delete F.dockMargin}if(F.items&&(F.items.length==0||F.listKey)){delete F.items}return G},getDropKeys:function(A,B){return A.properties.dropKeys},getDragKey:function(A,B){return A.properties.dragKey},getDragData:function(A,C,B){return{profile:A,domId:linb.use(B).id(),data:A.onGetDragData?A.boxing().onGetDragData(A,C,B):null}},_prepareData:function(C,F){var A=C.properties,G=this.$DataModel,H=arguments.callee,B=H.map||(H.map=_.toArr("left,top,bottom,right,width,height")),I=[],J=linb.UI.adjustData,K;F=F||{};if(A.id){delete A.id}if("caption" in G&&A.caption!==null){A.caption=A.caption===undefined?C.alias:A.caption}if("$hborder" in G){F.bWidth=A.width-(A.$hborder||0)*2}if("$vborder" in G){F.bHeight=A.height-(A.$vborder||0)*2}for(var D=0,E;E=B[D];D++){if(A[E]||A[E]===0){if(String(parseFloat(A[E]))==String(A[E])){I[I.length]=E+":"+(parseInt(A[E])||0)+"px"}else{if(A[E]!="auto"&&A[E]){I[I.length]=E+":"+A[E]}}}}if(A.position){I[I.length]="position:"+A.position}if(A.visibility){I[I.length]="visibility:"+A.visibility}if(A.zIndex){I[I.length]="z-index:"+A.zIndex}if(A.display){I[I.length]="display:"+(A.display=="inline-block"?linb.browser.gek?"-moz-inline-block;display:-moz-inline-box;display:inline-block;":"inline-block":A.display)}F._style=";"+I.join(";")+";";if("href" in G){F.href=A.href||linb.$href}if("tabindex" in G){F.tabindex=A.tabindex||"-1"}if("items" in G){C.ItemIdMapSubSerialId={};C.SubSerialIdMapItem={};F.items=this._prepareItems(C,A.items)}F=J(C,A,F);C.prepared=true;return F},_prepareItems:function(D,K,J,F,H){var O=[],N,A,M,C=linb.UI.$tag_subId,B,G=D.properties.tabindex,L=linb.UI.adjustData;for(var I=0,E=K.length;I<E;I++){if(typeof K[I]!="object"){K[I]={id:K[I]}}N=K[I];if(!("caption" in N)){N.caption=N.id}A={id:N.id};if(J){A._pid=J}B=A[C]=typeof H=="string"?H:D.pickSubId("items");if(false!==F){D.ItemIdMapSubSerialId[N.id]=B;D.SubSerialIdMapItem[B]=N}if(M=N.object){M=A.object=M["linb.absBox"]?M.get(0):M;if(M["linb.UIProfile"]){M.properties.position="relative"}N.$linbid=M.$linbid;M.$item=N;M.$holder=D;if(!D.$attached){D.$attached=[]}D.$attached.push(M)}else{A._tabindex=G;L(D,N,A);if(this._prepareItem){this._prepareItem(D,A,N,J,F,H)}}O.push(A)}return O},_showTips:function(A,B,C){if(A.onShowTips){return A.boxing().onShowTips(A,B,C)}}}});Class("linb.absList","linb.absObj",{Instance:{activate:function(){var B=this.get(0),A=B.getSubNode("ITEM",true);if(!A.isEmpty()){A.focus()}return this},insertItems:function(F,B,K){var C,H,I,G,A,D,E,J=this._afterInsertItems;return this.each(function(L){E=L.box;H=E._adjustItems(F);I=L.properties.items;G=_.arr.subIndexOf(I,"id",B);if(L.renderId){D=E._prepareItems(L,H,B);A=L.buildItems("items",D);if(G==-1){C=L.getSubNode(E.ITEMSKEY||L.keys.ITEMS||L.keys.KEY);if(K){C.prepend(A)}else{C.append(A)}}else{C=L.getSubNodeByItemId(E._ITEMKEY||"ITEM",B);if(K){C.addPrev(A)}else{C.addNext(A)}}if(J){L.boxing()._afterInsertItems(L,D,B,K)}}if(G==-1){I.push.apply(I,H)}else{_.arr.insertAny(I,H,K?G:G+1)}})},removeItems:function(B,D){if(!(B instanceof Array)){B=[B]}var E,C,A=this._afterRemoveItems;remove=function(I,F,K,H,J){var G=arguments.callee;if(!H){H=linb()}_.filter(F,function(O){var N,L;if(J||(L=(_.arr.indexOf(K,O.id)!=-1))){if(I.renderId){if(N=I.ItemIdMapSubSerialId[O.id]){delete I.SubSerialIdMapItem[N];delete I.ItemIdMapSubSerialId[O.id];I.reclaimSubId(N,"items");if(!J){if(!(E=I.getSubNode(I.keys[D]?D:"ITEM",N)).isEmpty()){H.merge(E)}if(O.$linbid){H.get().push(linb.getObject(O.$linbid).getRootNode())}}}}}if(O.sub){G(I,O.sub,K,H,J||L)}if(L){for(var M in O){O[M]=null}return false}});H.remove()};return this.each(function(F){var G=F.properties;remove(F,G.items,B);if(C=G.$UIvalue){if((C=C.split(";")).length>1){_.filter(C,function(H){return _.arr.indexOf(B,H)==-1});G.$UIvalue=C.join(";")}else{if(_.arr.indexOf(B,G.$UIvalue)!=-1){G.$UIvalue=null}}}if(A&&F.renderId){F.boxing()._afterRemoveItems(F,B)}})},clearItems:function(A){return this.each(function(B){if(!B.SubSerialIdMapItem){return }B.getSubNode(B.keys[A]||B.keys.ITEMS||"KEY",true).empty();_.each(B.SubSerialIdMapItem,function(D,C){B.reclaimSubId(C,"items")});B.properties.items.length=0;B.SubSerialIdMapItem={};B.ItemIdMapSubSerialId={}})},updateItem:function(B,L){var K=this,D=K.get(0),F=D.box,G=D.properties.items,H=D.queryItems(G,function(M){return typeof M=="object"?M.id===B:M==B},true,true,true),J,E,C,A,I;if(_.isStr(L)){L={caption:L}}if(H.length){H=H[0];if(typeof H[0]!="object"){J=H[2][H[1]]={id:H[0]}}else{J=H[0]}_.merge(J,L,"all");J.id=B;E=_.get(D,["ItemIdMapSubSerialId",B]);arr=F._prepareItems(D,[J],J._pid,false,E);C=D.getSubNodeByItemId("ITEM",B);if(!C.isEmpty()){if(L.sub){delete J._created;delete J._checked}else{if(J.sub){A=D.getSubNodeByItemId("SUB",B)}}C.replace(D.buildItems(arguments[2]||"items",arr),false);if(A&&!A.isEmpty()){if(!(I=D.getSubNodeByItemId("SUB",B)).isEmpty()){I.replace(A)}}}}return K},getItems:function(D){var C=this.get(0).properties.items;if(D=="data"){return _.clone(C,true)}else{if(D=="min"){var B=_.clone(C,true),A;_.arr.each(B,function(F,E){B[E]=F.id});return B}else{return C}}},fireItemClickEvent:function(A){this.getSubNodeByItemId("ITEM",A).onClick();return this}},Initialize:function(){var A=this.prototype;_.arr.each(_.toArr("getItemByItemId,getItemByDom,getSubIdByItemId,getSubNodeByItemId"),function(B){A[B]=function(){var C=this.get(0);return C[B].apply(C,arguments)};Class._fun(A[B],B,A.KEY)})},Static:{$abstract:true,DataModel:{listKey:{set:function(B,A){return this.each(function(D){if(D.properties.listKey!=B||A){var C=D.box.getCachedData(B);if(C){D.boxing().setItems(C)}else{D.boxing().setItems(D.properties.items)}D.properties.listKey=B}})}},items:{ini:[],set:function(A){return this.each(function(B){if(B.renderId){B.boxing().clearItems().insertItems(A)}B.properties.items=B.box._adjustItems(A)})}}},RenderTrigger:function(){this.destroyTrigger=function(){_.each(this.SubSerialIdMapItem,function(A){_.breakO(A)});this.properties.items.length=0}},_adjustItems:function(B){if(!B){B=[_()+""]}if(_.isStr(B)){B=[B]}var C=_.copy(B),A;_.arr.each(C,function(E,D){if(typeof E!="object"){C[D]={id:E}}else{C[D]=_.copy(E)}});return C},_showTips:function(C,E,H){if(C.onShowTips){return C.boxing().onShowTips(C,E,H)}if(!linb.Tips){return }var B=C.properties,G=E.id,A=C.getSubId(G),F=C.SubSerialIdMapItem,D=F&&F[A];if(B.disabled){return }if(D&&D.disabled){return }if(D&&D.tips){linb.Tips.show(H,D);return true}else{return false}}}});Class("linb.absValue","linb.absObj",{Instance:{_getCtrlValue:function(){return this.getUIValue()},_setCtrlValue:function(A){return this},_setDirtyMark:function(){return this},getValue:function(){return this.get(0).properties.value},getUIValue:function(){return this.get(0).properties.$UIvalue},resetValue:function(B){var A=this;A.each(function(C){var D;if(typeof (D=C.box._ensureValue)=="function"){B=D.call(C.box,C,B)}C.boxing()._setCtrlValue(C.properties.$UIvalue=C.properties.value=B);if(typeof (D=C.$onValueSet)=="function"){D.call(C,B)}C.inValid=1});A._setDirtyMark();return A},setUIValue:function(C,B){var A=this;this.each(function(D){var H=D.properties,F,G=H.$UIvalue,E=D.boxing();if(G!==C||B){if(false===D.box._checkValid(D,C)||(D.beforeUIValueSet&&false===(F=E.beforeUIValueSet(D,G,C)))){return }if(F!==undefined){C=F}if(typeof (F=D.box._ensureValue)=="function"){C=F.call(D.box,D,C)}if(typeof (F=D.$onValueUpdated)=="function"){F.call(D,C)}if(D.renderId){E._setCtrlValue(C)}H.$UIvalue=C;if(D.renderId){E._setDirtyMark()}if(D.afterUIValueSet){E.afterUIValueSet(D,G,C)}}});return this},updateValue:function(){this.each(function(A){var B=A.properties;if(A.boxing().checkValid()){B.value=B.$UIvalue}});return this._setDirtyMark()},isDirtied:function(){var A=this.get(0).properties;return A.value!==A.$UIvalue},checkValid:function(){var A=true;this.each(function(B){var C=B.properties;A=B.box._checkValid(B,C.$UIvalue)&&A;if(B.renderId){B.boxing()._setDirtyMark()}});return A}},Static:{$abstract:true,DataModel:{dataBinder:{combobox:function(){return _.toArr(linb.DataBinder._pool,true)},set:function(D,C){var B,A;return this.each(function(F){var G=F.properties,E=G.dataBinder;if(E==D&&!C){return }if(E){linb.DataBinder._unBind(E,F)}G.dataBinder=D;linb.DataBinder._bind(D,F)})}},dataField:"",value:{ini:null,set:function(B,A){this.each(function(D){var H=D.properties,F,G=H.value,E=D.boxing(),C=B;if(G!==C||A){if(D.box._checkValid(D,C)===false){return }if(D.beforeValueSet&&false===(F=E.beforeValueSet(D,G,C))){return }if(F!==undefined){C=F}if(typeof (F=D.box._ensureValue)=="function"){C=F.call(D.box,D,C)}if(typeof (F=D.$onValueSet)=="function"){F.call(D,C)}if(D.renderId){E._setCtrlValue(C)}H.value=H.$UIvalue=C;D.inValid=1;if(D.renderId){E._setDirtyMark()}if(D.afterValueSet){E.afterValueSet(D,G,C)}}});return this}},dirtyMark:true},EventHandlers:{beforeValueSet:function(B,A,C){},afterValueSet:function(B,A,C){},beforeUIValueSet:function(B,A,C){},afterUIValueSet:function(B,A,C){},beforeDirtyMark:function(B,A){}},RenderTrigger:function(){var B=this,A=B.boxing(),E=B.properties,C,D;E.$UIvalue=E.value;if(E.value!==undefined){D=E.value;if(typeof (C=B.box._ensureValue)=="function"){D=C.call(B.box,B,D)}A._setCtrlValue(D)}if(C=E.dataBinder){A.setDataBinder(C,true)}if(C=E.dataField){A.setDataField(C)}},_checkValid:function(A,B){return true}}});new function(){var A="linb.UI";Class(A+".Widget",A,{Static:{Appearances:{KEY:{"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null}},Templates:{className:"uiw-shell ",style:"{_style}",FRAME:{className:"uiw-frame ",BORDER:{style:"width:{bWidth}px;height:{bHeight}px;",className:"uiw-border"}}},Behaviors:{KeyHook:true,onSize:function(E,F){var D=E.getRootNode().style,B=null,C=null;if(F.width){B=parseInt(D.width)||B}if(F.height){C=parseInt(D.height)||C}linb.UI.$tryResize(E,B,C)}},DataModel:{width:100,height:100,$hborder:0,$vborder:0},RenderTrigger:function(){var B=this,C=B.properties,D=B.boxing();if(B.renderId){if((!B.$noB)&&C.border&&D._border){D._border()}}_.asyRun(function(){if(!B.renderId){return }if((!B.$noR)&&C.resizer&&D.setResizer){D.setResizer(C.resizer,true)}if((!B.$noS)&&C.shadow&&D._shadow){D._shadow()}})},_onresize:function(E,B,J){var K=E.properties,C=E.getSubNode("BORDER"),I,G=B,F=J,D=Math.max(0,(K.$b_lw||0)-(K.$hborder||0)),H=Math.max(0,(K.$b_tw||0)-(K.$vborder||0));if(null!==G){G-=Math.max((K.$hborder||0)*2,(K.$b_lw||0)+(K.$b_rw||0));if(linb.browser.ie6){G=(parseInt(G/2))*2}}if(null!==F){F-=Math.max((K.$vborder||0)*2,(K.$b_lw||0)+(K.$b_rw||0));if(linb.browser.ie6){F=(parseInt(F/2))*2}if(linb.browser.ie6&&null===B){C.ieRemedy()}}I={left:D,top:H,width:G,height:F};C.cssRegion(I);if((E.$border||E.$shadow||E.$resizer)&&linb.browser.ie){C.ieRemedy()}return I}}});Class(A+".Link",A,{Static:{Appearances:{KEY:{"font-size":linb.browser.ie?"12px":null,"line-height":linb.browser.ie?"14px":null}},Templates:{tagName:"a",style:"{_style}",href:"{href}",target:"{target}",tabindex:"{tabindex}",text:"{caption}"},Behaviors:{onClick:function(C,E,F){var D;if(!C.properties.disabled&&C.onClick){D=C.boxing().onClick(C,E,F)}var B=linbt(F).attr("href");return(B.indexOf("javascript:")===0||B.indexOf("#")===0||D===undefined)?D:false}},DataModel:{caption:{ini:undefined,action:function(B){this.getRoot().html(B)}},href:{ini:linb.$href,action:function(B){this.getRoot().attr("href",B)}},target:{action:function(B){this.getRoot().attr("target",B)}}},EventHandlers:{onClick:function(B,C){}}}});Class(A+".SLabel",A,{Static:{Templates:{style:"{_style}text-align:{hAlign}",text:"{caption}"},DataModel:{tabindex:null,caption:{ini:undefined,action:function(B){this.room(B)}},hAlign:{ini:"right",listbox:["left","center","right"],action:function(B){this.getRoot().css("textAlign",B)}}}}});Class(A+".SButton",A,{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this}},Static:{Templates:{className:"{_clsName}",style:"{_style}",BTN:{className:"ui-btn",BTNI:{className:"ui-btni",BTNC:{className:"ui-btnc",FOCUS:{tagName:"a",tabindex:"{tabindex}",href:linb.$href,style:"{_align}",text:"{caption}"}}}}},Appearances:{BTN:{overflow:"hidden"},"KEY-auto BTN, KEY-auto BTNI, KEY-auto BTNC, KEY-auto FOCUS":{$order:1,display:linb.$inlineBlock},"BTN,BTNI,BTNC":{display:"block"},"KEY FOCUS":{cursor:"default","font-size":"12px","line-height":"14px","text-align":"center",display:"block"}},Behaviors:{HoverEffected:{BTN:["BTN"]},ClickEffected:{BTN:["BTN"]},NavKeys:{FOCUS:1},onClick:function(B,D,E){var C=B.properties;if(C.disabled){return false}B.getSubNode("FOCUS").focus();if(B.onClick){B.boxing().onClick(B,D,E)}}},DataModel:{caption:{ini:undefined,action:function(B){this.getSubNode("FOCUS").html(B)}},hAlign:{ini:"center",listbox:["left","center","right"],action:function(B){this.getSubNode("FOCUS").css("textAlign",B)}},width:{ini:"auto",action:function(B){if(B=="auto"){this.getRoot().width("auto").tagClass("-auto")}else{this.getRoot().width(B).tagClass("-auto",false)}}},height:{readonly:true}},EventHandlers:{onClick:function(B,D,E,C){}},_prepareData:function(B){var C=arguments.callee.upper.call(this,B);C._align="text-align:"+C.hAlign+";";C._clsName=parseInt(C.width)?"":B.getClass("KEY","-auto");return C}}});Class(A+".SCheckBox",[A,"linb.absValue"],{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this},_setCtrlValue:function(B){return this.each(function(C){C.getSubNode("MARK").tagClass("-checked",!!B)})},_setDirtyMark:function(){return this.each(function(D){if(!D.properties.dirtyMark){return }if(!D.renderId){return }var C=D.properties,F=D.getSubNode("CAPTION"),B=C.value!==C.$UIvalue,E=linb.UI.$css_tag_dirty;if(F.beforeDirtyMark&&false===F.boxing().beforeDirtyMark(D,B)){return }if(B){F.addClass(E)}else{F.removeClass(E)}})}},Static:{Templates:{className:"{_clsName}",style:"{_style}",FOCUS:{tagName:"a",tabindex:"{tabindex}",href:linb.$href,MARK:{className:"uicmd-check"},CAPTION:{$order:1,text:"{caption}"}}},Appearances:{KEY:{overflow:"visible"},FOCUS:{cursor:"default","vertical-align":"middle",padding:"2px 0","font-size":"12px","line-height":"14px","vertical-align":"middle"},CAPTION:{"vertical-align":"middle"}},Behaviors:{HoverEffected:{KEY:"MARK"},ClickEffected:{KEY:"MARK"},NavKeys:{FOCUS:1},onClick:function(C,E,F){var D=C.properties,B=C.boxing();if(D.disabled){return false}B.setUIValue(!D.$UIvalue);if(C.onChecked){B.onChecked(C,E,D.$UIvalue)}C.getSubNode("FOCUS").focus()},FOCUS:{onKeydown:function(C,D,E){var B=linb.Event.getKey(D)[0];if(B==" "||B=="enter"){C.getRoot().onClick(true);return false}}}},DataModel:{value:false,caption:{ini:undefined,action:function(B){this.getSubNode("CAPTION").html(B)}}},EventHandlers:{onChecked:function(B,D,C){}},_ensureValue:function(B,C){return !!C}}});Class(A+".Div",A,{Static:{Appearances:{KEY:{outline:linb.browser.gek?"none":null,zoom:linb.browser.ie6?"1":null,background:linb.browser.ie?"url("+linb.ini.file_bg+") no-repeat left top":null}},Templates:{tagName:"div",style:"{_style}",tabindex:"-1",text:"{html}"+linb.UI.$childTag},DataModel:{disabled:null,width:"100",height:"100",html:{action:function(B){this.getRoot().html(B)}}}}});Class(A+".Tag",A+".Div",{Static:{Templates:{tagName:"div",style:"overflow:auto;border:dashed blue 1px;text-align:center;background:#EBEADB;{_style}",text:"{tagKey}"+linb.UI.$childTag},DataModel:{html:null,tagKey:{action:function(B){this.getRoot().html(B)}}},_l:_.toArr("left,top,bottom,right,width,height,zIndex,tabindex,position,dock,dockFloat,dockMinW,dockMinH,dockOrder,dockMargin"),replace:function(D,E,B){_.arr.each(this._l,function(H){if(H in D.properties){E.properties[H]=D.properties[H]}});_.merge(E.CS,D.CS,"all");_.merge(E.CC,D.CC,"all");if(D.parent){var F=D.parent.children,G=F["$"+D.$linbid],C=_.arr.indexOf(F,G);D.parent.boxing().append(E,G[1]);F[C]=F.pop();D.unLink("$parent");delete D.parent}else{if(B){_.arr.each(B._nodes,function(I,H){if(I===D){B._nodes[H]=E;return false}})}}if(D.renderId){E.boxing().renderOnto(D.getRootNode())}}}});Class(A+".Pane",A+".Div",{Static:{Behaviors:{DropableKeys:["KEY"]}}})};Class("linb.UI.Border","linb.UI",{Instance:{_attachTo:function(F,D){var C=this,B=C.get(0),E;F.append(C);B.$edgeId=linb(F).id();B.$tieId=D;B.$attached=true;if(E=B.properties){if(B.properties.borderActive){var A="tag",G=B.domId;if(linb(D).get(0)){linb(D).afterMouseover(function(J,I){if(J.properties.disabled){return }var H=linb.$cache.profileMap[G];_.tryF(H.behavior.TAG.afterMouseover,[H,I,H.getRootNode()],this)},A).afterMouseout(function(J,I){if(J.properties.disabled){return }var H=linb.$cache.profileMap[G];_.tryF(H.behavior.TAG.afterMouseout,[H,I,H.getRootNode()],this)},A).afterMousedown(function(J,I){if(J.properties.disabled){return }var H=linb.$cache.profileMap[G];_.tryF(H.behavior.TAG.afterMousedown,[H,I,H.getRootNode()],this)},A).afterMouseup(function(J,I){if(J.properties.disabled){return }var H=linb.$cache.profileMap[G];_.tryF(H.behavior.TAG.afterMouseup,[H,I,H.getRootNode()],this)},A)}}}return F},_detach:function(){var D=this,C=D.get(0),F,E,B=null,A="tag";delete C.$attached;if(F=C.$tieId){if(F=linb.Dom.byId(F)){linb(F).afterMouseover(B,A).afterMouseout(B,A).afterMousedown(B,A).afterMouseup(B,A)}}return D}},Initialize:function(){_.each({addBorder:function(B){var C=linb([this.get(0)]),A=arguments[1]||C.id();return new linb.UI.Border(B)._attachTo(C,A)},$getBorder:function(){var B=this.id(),A;_.arr.each(linb.UI.Border._cache,function(C){if(C.$edgeId==B){A=C;return false}});return A&&A.boxing()},removeBorder:function(){var A=this.id();_.arr.each(linb.UI.Border._cache,function(B){if(B.$edgeId==A){B.boxing()._detach().destroy()}});return this}},function(B,A){linb.Dom.plugIn(A,B)});_.each({_border:function(B,A){return this.each(function(H){var F=H.properties,G=H.getSubNode(F._customBorder||"BORDER"),D;if(!B){B={}}if(F._customBorder){D=(B._bkey=H.getClass("KEY"))}else{D="linb-border"}var E="setting-"+D,C;C="borderLeftWidth";F.$b_lw=linb.UI.$getCSSValue(E,C);C="borderRightWidth";F.$b_rw=linb.UI.$getCSSValue(E,C);C="borderTopWidth";F.$b_tw=linb.UI.$getCSSValue(E,C);C="borderBottomWidth";F.$b_bw=linb.UI.$getCSSValue(E,C);if(A!==false){if(G.$getBorder()){return }H.$border=G.addBorder(B);H.clearCache().boxing().reLayout()}})},_unBorder:function(){return this.each(function(C){var B=C.getSubNode("BORDER"),A=C.properties;if(!B.$getBorder()){return }B.removeBorder();delete C.$border;delete A.$b_lw;delete A.$b_rw;delete A.$b_tw;delete A.$b_bw;C.clearCache().boxing().reLayout()})}},function(B,A){linb.UI.Widget.plugIn(A,B)});linb.UI.Widget.setDataModel({border:{ini:false,action:function(B){var A=this.boxing();if(B){A._border()}else{A._unBorder()}}}})},Static:{Templates:{tagName:"div",TAG:{},T:{className:"{cls_t}"},RT:{className:"{cls_rt}",$order:1},R:{className:"{cls_r}"},RB:{className:"{cls_rb}",$order:1},B:{className:"{cls_b}"},LB:{className:"{cls_lb}",$order:1},L:{className:"{cls_l}"},LT:{className:"{cls_lt}",$order:1}},Appearances:{KEY:{width:0,height:0,_display:"inline","font-size":0,"line-height":0},"TAG,T, RT, R, RB, B, LB, L, LT":{position:"absolute",display:"block","font-size":0,"line-height":0},".setting-linb-border":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},T:{width:"100%",left:0,top:"-1px",height:"3px",background:linb.UI.$bg("vertical.gif","repeat-x left top")},B:{width:"100%",left:0,bottom:"-1px",height:"3px",background:linb.UI.$bg("vertical.gif","repeat-x left bottom")},L:{height:"100%",top:0,left:"-1px",width:"3px",background:linb.UI.$bg("horizontal.gif","repeat-y left top")},R:{height:"100%",top:0,right:"-1px",width:"3px",background:linb.UI.$bg("horizontal.gif","repeat-y right top")},LT:{top:"-1px",left:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat left top")},RT:{top:"-1px",right:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat right top")},RB:{right:"-1px",bottom:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat right bottom")},LB:{left:"-1px",bottom:"-1px",width:"3px",height:"3px",background:linb.UI.$bg("corner.gif","no-repeat left bottom")}},Behaviors:{HoverEffected:{TAG:"KEY"},ClickEffected:{TAG:"KEY"}},DataModel:{_bkey:"",borderActive:false},_prepareData:function(A){var C=arguments.callee.upper.call(this,A),B=A.properties._bkey;C.cls_t=B?B+"-b-t":"";C.cls_rt=B?B+"-b-rt":"";C.cls_r=B?B+"-b-r":"";C.cls_rb=B?B+"-b-rb":"";C.cls_b=B?B+"-b-b":"";C.cls_lb=B?B+"-b-lb":"";C.cls_l=B?B+"-b-l":"";C.cls_lt=B?B+"-b-lt":"";return C}}});Class("linb.UI.Image","linb.UI",{Instance:{getRate:function(){return parseFloat(this.get(0)._rate)||1}},Static:{Templates:{tagName:"image",style:"{_style}",border:"0",width:"{width}",height:"{height}"},Behaviors:{HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},DragableKeys:["KEY"],onError:function(A,B,C){A.boxing().onError(A)},onLoad:function(C,E,F){var B=new Image(),D=B.src=linb.use(F).get(0).src,A=C.box._adjust(C,B.width,B.height);C.boxing().afterLoad(C,D,A[0],A[1])}},RenderTrigger:function(){var B=this,C=B.properties,A=C.src;if(A){C.value=C.$UIvalue="";B.boxing().setSrc(A,true)}},EventHandlers:{onError:function(A){},beforeLoad:function(A){},afterLoad:function(C,D,B,A){}},_adjust:function(E,D,A){var H=E.properties,G=E.getRootNode();if(D>0&&A>0){var C=H.maxWidth/D,B=H.maxHeight/A,F=C<B?C:B;if(F>=1){F=1}E._rate=F;G.width=D*F;G.height=A*F;return[D*F,A*F]}return[0,0]},DataModel:{maxWidth:{ini:800,action:function(A){var B=this.getRootNode();this.box._adjust(this,B.width,B.height)}},maxHeight:{ini:600,action:function(A){var B=this.getRootNode();this.box._adjust(this,B.width,B.height)}},width:{ini:"",action:function(A){var B=this.getRootNode();B.width=A}},height:{ini:"",action:function(A){var B=this.getRootNode();B.height=A}},src:{action:function(B){var A=this;if(false!==A.boxing().beforeLoad(this)){_.asyRun(function(){A.getRoot().attr({width:"0",height:"0",src:B})})}}}}}});Class("linb.UI.Button",["linb.UI.Widget","linb.absValue"],{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this},_setCtrlValue:function(A){if(_.isNull(A)||!_.exists(A)){A=false}return this.each(function(D){var C=D.properties;if(C.type!="status"){return }D.getSubNode("BORDER").tagClass("-checked",A);if(C.border){var B=D.getSubNode("BORDER").$getBorder();if(B){B.get(0).getRoot().tagClass("-checked",A)}}})}},Initialize:function(){this.addTemplateKeys(["DROP"]);var A=this.getTemplate();_.merge(A.FRAME,{FOCUS:{$order:2,tagName:"a",href:"{href}",tabindex:"{tabindex}",TB:{cellpadding:"0",cellspacing:"0",width:"100%",height:"100%",border:"0",tagName:"table",TR:{tagName:"tr",TDL:{tagName:"td"},TD:{$order:1,align:"{hAlign}",valign:"{vAlign}",tagName:"td",width:"100%",height:"100%",BOX:{ICON:{$order:1,className:"ui-icon",style:"background:url({image}) transparent no-repeat  {imagePos};{imageDisplay}"},CAPTION:{$order:2,text:"{caption}"}}},TDR:{$order:2,tagName:"td",className:"{dropCls}",TDRI:{}}}}}},"all");this.setTemplate(A)},Static:{Appearances:{KEY:{"font-size":"12px","line-height":"14px"},BORDER:{"font-size":0,"line-height":0,"background-color":"#D2D7DF"},"BORDER-mouseover":{$order:2,"background-color":"#F7D928"},"BORDER-mousedown, BORDER-checked":{$order:2,"background-color":"#F9E56A"},DROP:{$order:10,background:linb.UI.$bg("drop.gif","no-repeat left bottom","Button"),"padding-left":"16px"},"DROP-mouseover":{$order:11,"background-position":"-16px bottom"},"DROP-mousedown":{$order:12,"background-position":"right bottom"},"TDR,TDL":{"padding-left":"6px"},".setting-linb-button":{"border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},"KEY-b-t":{top:"-1px",height:"10px",background:linb.UI.$bg("vertical.gif","repeat-x left top","Button")},"KEY-b-b":{bottom:"-1px",height:"10px",background:linb.UI.$bg("vertical.gif","repeat-x left bottom","Button")},"BORDER-mouseover KEY-b-t, BORDER-mouseover KEY-b-b":{$order:1,"background-image":linb.UI.$bg("vertical_mouseover.gif","","Button")},"BORDER-checked KEY-b-t, BORDER-checked KEY-b-b, BORDER-mousedown KEY-b-t, BORDER-mousedown KEY-b-b":{$order:2,"background-image":linb.UI.$bg("vertical_mousedown.gif","","Button")},"KEY-b-l":{left:"-1px",width:"4px",background:linb.UI.$bg("horizontal.gif","repeat-y left top","Button")},"KEY-b-r":{right:"-1px",width:"4px",background:linb.UI.$bg("horizontal.gif","repeat-y right top","Button")},"BORDER-mouseover KEY-b-l, BORDER-mouseover KEY-b-r":{$order:1,"background-image":linb.UI.$bg("horizontal_mouseover.gif","","Button")},"BORDER-checked KEY-b-l, BORDER-checked KEY-b-r, BORDER-mousedown KEY-b-l, BORDER-mousedown KEY-b-r":{$order:2,"background-image":linb.UI.$bg("horizontal_mousedown.gif","","Button")},"KEY-b-lt":{top:"-1px",left:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat left top","Button")},"KEY-b-rt":{top:"-1px",right:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat right top","Button")},"KEY-b-rb":{right:"-1px",bottom:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat right bottom","Button")},"KEY-b-lb":{left:"-1px",bottom:"-1px",width:"4px",height:"10px",background:linb.UI.$bg("corner.gif","no-repeat left bottom","Button")},"BORDER-mouseover KEY-b-lt, BORDER-mouseover KEY-b-rt, BORDER-mouseover KEY-b-rb, BORDER-mouseover KEY-b-lb":{$order:1,"background-image":linb.UI.$bg("corner_mouseover.gif","","Button")},"BORDER-checked KEY-b-lt, BORDER-checked KEY-b-rt, BORDER-checked KEY-b-rb, BORDER-checked KEY-b-lb, BORDER-mousedown KEY-b-lt, BORDER-mousedown KEY-b-rt, BORDER-mousedown KEY-b-rb, BORDER-mousedown KEY-b-lb":{$order:2,"background-image":linb.UI.$bg("corner_mousedown.gif","","Button")},FOCUS:{overflow:"hidden",display:"block",left:0,top:0,"z-index":"20",width:"100%",height:"100%",position:"absolute","-moz-outline-offset":"-1px !important"},BOX:{display:"inline","white-space":"nowrap"},CAPTION:{cursor:"pointer","vertical-align":"middle",display:"inline","font-size":"12px","line-height":"14px"}},Behaviors:{HoverEffected:{KEY:["BORDER"]},ClickEffected:{KEY:["BORDER"]},NavKeys:{FOCUS:1},onClick:function(B,D,E){var C=B.properties;if(C.disabled){return false}B.getSubNode("FOCUS").focus();var A=B.boxing();if(C.type=="status"){A.setUIValue(!C.$UIvalue);if(B.onChecked){A.onChecked(B,D,C.$UIvalue)}}if(B.onClick){A.onClick(B,D,E,C.$UIvalue)}},TDR:{onMousedown:function(A,B,C){if(A.properties.type!="drop"){return }linb.use(C).addClass(A.getClass("DROP","-mousedown"));return false},onMouseup:function(A,B,C){if(A.properties.type!="drop"){return }linb.use(C).removeClass(A.getClass("DROP","-mousedown"));return false},onMouseover:function(A,B,C){if(A.properties.type!="drop"){return }linb.use(C).addClass(A.getClass("DROP","-mouseover"))},onMouseout:function(A,B,C){if(A.properties.type!="drop"){return }linb.use(C).removeClass(A.getClass("DROP","-mouseover")).removeClass(A.getClass("DROP","-mousedown"))},onClick:function(A,B,C){if(A.properties.type!="drop"){return }A.boxing().onClickDrop(A,B,C);return false}}},DataModel:{caption:{ini:undefined,action:function(A){this.getSubNode("CAPTION").get(0).innerHTML=A}},image:{action:function(A){this.getSubNode("ICON").css("display",A?"":"none").css("backgroundImage","url("+(A||"")+")")}},imagePos:{action:function(A){this.getSubNode("ICON").css("backgroundPosition",A)}},hAlign:{ini:"center",listbox:["left","center","right"],action:function(A){this.getSubNode("TD").attr("align",A)}},vAlign:{ini:"middle",listbox:["top","middle","bottom"],action:function(A){this.getSubNode("TD").attr("valign",A)}},href:linb.$href,value:false,type:{ini:"normal",listbox:["normal","status","drop"],action:function(E){var C=this,A=C.getRoot(),D=C.getSubNode("TDR"),B=C.getClass("DROP");if(E=="drop"){D.addClass(B)}else{D.removeClass(B)}C.box._onresize(C)}},width:120,height:22,_customBorder:"BORDER",border:true},_ensureValue:function(A,B){return !!B},_prepareData:function(A){var B=arguments.callee.upper.call(this,A);B.dropCls=B.type=="drop"?A.getClass("DROP"):"";return B},RenderTrigger:function(){var A=this,B=A.properties,C=A.boxing();if(B.type=="status"&&B.value){C.setValue(true,true)}},EventHandlers:{onClick:function(A,C,D,B){},onClickDrop:function(A,B,C){},onChecked:function(A,C,B){}}}});Class("linb.UI.Input",["linb.UI.Widget","linb.absValue"],{Instance:{_setTB:function(C){var B=this.get(0),D=B.properties,E,A;if(!B.host||!D.tipsBinder){return }A=B.tips=B.tips||D.tips||"";E=B.host[D.tipsBinder];if(E&&E.KEY=="linb.UI.Div"){E.get(0).getRootNode().innerHTML=A.charAt(0)=="$"?linb.wrapRes(A):A;E.reBoxing().css("color",C==1?"gray":C==2?"red":"#000")}},activate:function(){var A=this.get(0);if(A.renderId){var B=A.getSubNode("INPUT").get(0);B.focus();if(!B.readOnly&&B.select){B.select()}}return this},_setCtrlValue:function(A){if(_.isNull(A)||!_.exists(A)){A=""}return this.each(function(B){B.getSubNode("INPUT").attr("value",A+"")})},_getCtrlValue:function(){var A=this.get(0);return A.getSubNode("INPUT").attr("value")},_setDirtyMark:function(){return this.each(function(B){if(!B.properties.dirtyMark){return }var F=B.properties,A=B.getSubNode("INPUT"),I=B.box,D=B.boxing(),E=linb.UI.$css_tag_dirty,H=linb.UI.$css_tag_invalid,G=F.value!==F.$UIvalue;if(B.beforeDirtyMark&&false===D.beforeDirtyMark(B,G)){}else{if(G){A.addClass(E)}else{A.removeClass(E)}}if(B.beforeFormatMark&&false===D.beforeFormatMark(B,B.inValid==2)){}else{var C=B.getSubNode("ERROR");if(B.inValid==2){A.addClass(H);C.css("display","block")}else{A.removeClass(H);C.css("display","none")}}if(B.inValid==2){B.tips=F.tipsErr||F.tips;if(F.mask){_.asyRun(function(){D.setUIValue(A.get(0).value=B.$Mask)})}}else{if(B.inValid==1){B.tips=F.tips}else{B.tips=F.tipsOK||F.tips}}D._setTB(B.inValid)})}},Initialize:function(){var A=this.getTemplate();_.merge(A.FRAME.BORDER,{BOX:{WRAP:{tagName:"div",INPUT:{tagName:"input",type:"{type}",tabindex:"{tabindex}",cursor:"{cursor}",style:"{_css}"}}}},"all");A.FRAME.ERROR={};this.setTemplate(A)},Static:{_maskMap:{"~":"[+-]","1":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},_maskSpace:"_",Appearances:{KEY:{"font-family":'"Verdana", "Helvetica", "sans-serif"',position:"relative"},BORDER:{"line-height":"0px","font-size":"0px"},WRAP:{left:0,position:"absolute",overflow:linb.browser.gek?"auto":"hidden"},BOX:{left:0,top:0,position:"absolute","background-color":"#fff",border:"solid 1px #648CB4","z-index":10},"BOX-focus, BOX-mouseover":{"border-color":"#FAE100"},INPUT:{"padding-top":"2px","background-color":"transparent",border:0,margin:0,"margin-top":linb.browser.ie?"-1px":null,"font-size":"12px",position:"relative",overflow:"auto","overflow-y":(linb.browser.gek||linb.browser.ie)?"auto":"","overflow-x":(linb.browser.gek||linb.browser.ie)?"hidden":""},ERROR:{width:"16px",height:"16px",position:"absolute",right:"2px",top:"2px",display:"none","font-size":0,background:linb.UI.$bg("icons.gif","no-repeat left -244px",true),"z-index":"50"},".setting-linb-input":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},"KEY-b-t":{height:"2px",top:"-1px",background:linb.UI.$bg("vertical.gif","repeat-x left top","Input")},"KEY-b-b":{height:"2px",bottom:"-1px",background:linb.UI.$bg("vertical.gif","repeat-x left bottom","Input")},"BOX-focus KEY-b-t, BOX-focus KEY-b-b, BOX-mouseover KEY-b-t, BOX-mouseover KEY-b-b":{$order:1,"background-image":linb.UI.$bg("vertical_mouseover.gif","","Input")},"KEY-b-l":{width:"2px",left:"-1px",background:linb.UI.$bg("horizontal.gif","repeat-y left top","Input")},"KEY-b-r":{width:"2px",right:"-1px",background:linb.UI.$bg("horizontal.gif","repeat-y right top","Input")},"BOX-focus KEY-b-l, BOX-focus KEY-b-r, BOX-mouseover KEY-b-l, BOX-mouseover KEY-b-r":{$order:1,"background-image":linb.UI.$bg("horizontal_mouseover.gif","","Input")},"KEY-b-lt":{width:"2px",height:"2px",left:"-1px",top:"-1px",background:linb.UI.$bg("corner.gif","no-repeat left top","Input")},"KEY-b-rt":{width:"2px",height:"2px",right:"-1px",top:"-1px",background:linb.UI.$bg("corner.gif","no-repeat right top","Input")},"KEY-b-rb":{width:"2px",height:"2px",right:"-1px",bottom:"-1px",background:linb.UI.$bg("corner.gif","no-repeat right bottom","Input")},"KEY-b-lb":{width:"2px",height:"2px",left:"-1px",bottom:"-1px",background:linb.UI.$bg("corner.gif","no-repeat left bottom","Input")},"BOX-focus KEY-b-lt, BOX-focus KEY-b-rt, BOX-focus KEY-b-rb, BOX-focus KEY-b-lb, BOX-mouseover KEY-b-lt, BOX-mouseover KEY-b-rt, BOX-mouseover KEY-b-rb, BOX-mouseover KEY-b-lb":{$order:1,"background-image":linb.UI.$bg("corner_mouseover.gif","","Input")}},Behaviors:{HoverEffected:{BOX:["BOX"]},NavKeys:{INPUT:1},INPUT:{onChange:function(A,B,D){var C=A.inValid;A.boxing().setUIValue(linb.use(D).get(0).value);A.properties.$UIvalue=linb.use(D).get(0).value;if(C!==A.inValid){if(A.renderId){A.boxing()._setDirtyMark()}}},onKeydown:function(E,G,H){var F=E.properties,B=F.multiLines,A=E.box,C=linb.Event,D=C.getKey(G);if(D[0]=="enter"&&(!B||D[3])){linb.use(H).onChange()}if(F.mask){if(D[0].length>1){E.$ignore=true}else{delete E.$ignore}switch(D[0]){case"backspace":A._changeMask(E,linb.use(H).get(0),"",false);return false;case"delete":A._changeMask(E,linb.use(H).get(0),"");return false}}},onKeypress:function(D,G,H){var F=D.properties,B=D.box,E=B._maskMap;if(F.mask){if(D.$ignore){delete D.$ignore;return true}var A=linb.Event,C=A.getKey(G);if(C[1]||C[3]){return true}B._changeMask(D,linb.use(H).get(0),C[0],true);return false}},onKeyup:function(A,C,D){var B=A.properties;if(B.dynCheck){A.box._checkValid(A,linb.use(D).get(0).value);A.boxing()._setDirtyMark()}},onFocus:function(B,D,E){var C=B.properties,A=B.box;if(C.disabled){return false}if(B.onFocus){B.boxing().onFocus(B)}B.getSubNode("BORDER").tagClass("-focus");if(C.mask){if(linb.browser.opr||linb.browser.kde){A._maskF(B,linb.use(E).get(0))}if(!linb.use(E).get(0).value){_.asyRun(function(){B.boxing().setUIValue(linb.use(E).get(0).value=B.$Mask);A._setCaret(B,linb.use(E).get(0))})}}B.boxing()._setTB(3)},onBlur:function(A,C,D){var B=A.properties;if(B.disabled){return false}if(A.onBlur){A.boxing().onBlur(A)}A.getSubNode("BORDER").tagClass("-focus",false);if(B.$UIvalue==linb.use(D).get(0).value){A.box._checkValid(A,linb.use(D).get(0).value)}A.boxing()._setDirtyMark()}}},DataModel:{_customBorder:"BOX",tipsErr:"",tipsOK:"",border:true,dynCheck:false,valueFormat:{helpinput:[{caption:"required",id:"[^.*]"},{caption:"email",id:"^[\\w\\.=-]+@[\\w\\.-]+\\.[\\w\\.-]{2,4}$"},{caption:"charOnly",id:"^[a-zA-Z]*$"},{caption:"words",id:"^[\\w ]*$"},{caption:"integer",id:"^-?\\d\\d*$"},{caption:"positiveInteger",id:"^\\d\\d*$"},{caption:"number",id:"^-?(\\d\\d*\\.\\d*$)|(^-?\\d\\d*$)|(^-?\\.\\d\\d*$)"},{caption:"filepath",id:"([\\/]?[\\w_]+)+\\.\\w{1,9}$"},{caption:"URL",id:"^(http|https|ftp)\\:\\/\\/[\\w\\-\\_\\.]+[\\w\\-\\_](:[\\w]*)?\\/?([\\w\\-\\._\\?\\,\\'\\/\\\\\\+&amp;%\\$#\\=~])*$"},{caption:"color",id:"^\\#[0-9A-Fa-f]{6}$"},{caption:"HH:MM",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])$"},{caption:"HH:MM:SS",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])\\:([0-5][0-9])$"},{caption:"YYYY-MM-DD",id:"^([0-9]{4})\\-(([0][0-9])|([1][0-2]))\\-([0-3][0-9])$"},{caption:"DD/MM/YYYY",id:"^(([0-2][0-9])|([3][0-1]))/(([0][0-9])|([1][0-2]))/([0-9]{4})$"}]},mask:{action:function(D){var B=this,A=B.box;if(D){B.$MaskFormat=function(J,I){var G=J._maskMap,H=[],K=/[A-Za-z0-9]/;_.arr.each(I.split(""),function(M,L){H.push(G[M]||(K.test(M)?"":"\\")+M)});return"^"+H.join("")+"$"}(A,D);B.$Mask=function(K,I){var G=K._maskMap,H=[],J=K._maskSpace;_.arr.each(I.split(""),function(M,L){H.push(G[M]?J:M)});return H.join("")}(A,D);if(B.renderId){var F=linb.browser.ie,E=B.getSubNode("INPUT").get(0),C=function(G){A._maskF(B,E,F&&G.propertyName)};if(F){E.attachEvent("onpropertychange",C);E.attachEvent("ondrop",C);B.$ondestory=function(){E.detachEvent("onpropertychange",C);E.detachEvent("ondrop",C)}}else{E.addEventListener("input",C,false);if(linb.browser.gek){E.addEventListener("dragdrop",C,false)}B.$ondestory=function(){E.removeEventListener("input",C,false);E.addEventListener("dragdrop",C,false)}}}}else{delete B.$MaskFormat;delete B.$Mask;if(B.renderId){_.tryF(B.$ondestory)}}}},value:"",width:120,height:22,disabled:{ini:false,action:function(A){this.getRoot().css("opacity",A?0.5:1);this.getSubNode("INPUT").attr("disabled",A)}},readonly:{ini:false,action:function(A){this.getSubNode("INPUT").attr("readonly",A).css("cursor",A?"default":"")}},type:{ini:"text",listbox:["text","password"],action:function(A){this.getSubNode("INPUT").attr("type",A)}},multiLines:{ini:false,action:function(B){var C=this.getSubNode("INPUT").outerHTML();C=C.replace(/^(<)[a-zA-Z]+(\s)/i,"$1"+(B?"textarea":"input")+"$2");var A=this.boxing().getValue();this.getSubNode("INPUT").outerHTML(C);this.boxing().setUIValue(A)}},tipsBinder:""},EventHandlers:{onFocus:function(A){},onBlur:function(A){},beforeFormatCheck:function(A,B){},beforeFormatMark:function(A,B){}},_prepareData:function(A){var B=arguments.callee.upper.call(this,A);B.cursor=B.readonly?"default":"";B.type=B.type||"";if(linb.browser.kde){B._css="resize:none;"}return B},_dynamicTemplate:function(D){var B=D.properties,A,E=D._exhash="$multiLines:"+B.multiLines,C=D.box.getTemplate(E);B.$UIvalue=B.value;if(!C){C=_.clone(D.box.getTemplate());if(B.multiLines){A=C.FRAME.BORDER.BOX.WRAP.INPUT;A.tagName="textarea";delete A.type}D.box.setTemplate(C,E)}D.template=C},RenderTrigger:function(){var A=this,B=A.properties;_.asyRun(function(){A.boxing()._setTB(1)});A.getSubNode("WRAP").$firfox2();if(B.readonly){A.boxing().setReadonly(true,true)}},LayoutTrigger:function(){var A=this.properties;if(A.mask){this.boxing().setMask(A.mask,true)}},_changeMask:function(C,E,F,K){var R=this,J=C.properties,Q=R._maskMap,L=R._maskSpace,A=J.mask,B=C.$Mask,G=linb(E),H=G.caret();if(K===false&&H[0]==H[1]&&H[0]>0){G.caret(H[0]-1,H[0])}if(K===undefined&&H[0]==H[1]){G.caret(H[0],H[0]+1)}if(K===true){if(B.charAt(H[0])!=L){var N=H[0]+B.substr(H[0],B.length).indexOf(L);G.caret(N,Math.max(H[1],N))}}var H=G.caret(),M=E.value,D=R._maskMap[J.mask.charAt(H[0])],O,I;if(D&&new RegExp("^"+D+"$").test(F)||F==""){I=M;if(H[0]!=H[1]){I=I.substr(0,H[0])+B.substr(H[0],H[1]-H[0])+I.substr(H[1],I.length-H[1])}if(F){I=I.substr(0,H[0])+F+I.substr(H[0]+1,I.length-H[0]-1)}var P=[];_.arr.each(A.split(""),function(T,S){P.push((new RegExp("^"+(Q[T]?Q[T]:"\\"+T)+"$").test(I.charAt(S)))?I.charAt(S):B.charAt(S))});if(K===true){F=B.substr(H[0]+1,M.length-H[0]-1);O=F.indexOf(L);O=H[0]+(O==-1?0:O)+1}else{O=H[0]}if(linb.browser.opr){if(K===undefined){_.arr.insertAny(P,L,O)}if(K===false){_.arr.insertAny(P,L,O++)}}C.boxing().setUIValue(E.value=P.join(""));R._setCaret(C,E,O)}},_setCaret:function(A,B,C){if(A.properties.mask){if(typeof C!="number"){C=B.value.indexOf(this._maskSpace)}linb(B).caret(C,C)}},_checkValid:function(C,D){var E=C.properties,B=(E.mask&&C.$MaskFormat),A=E.valueFormat||C.$valueFormat;if((C.beforeFormatCheck&&(C.boxing().beforeFormatCheck(C,D)===false))||(B&&typeof B=="string"&&!(new RegExp(B)).test(D||""))||(A&&typeof A=="string"&&!(new RegExp(A)).test(D||""))){C.inValid=2;return false}C.inValid=3;return true},_maskF:function(A,C,B){var D=C.id;_.resetRun(A.$linbid+"_mask",function(){if(linb.browser.ie&&B!="value"){return }var E=linb.Dom.byId(D);if(E.value.length!=A.$Mask.length){A.box._changeMask(A,E,"",true)}})},_onresize:function(E,A,L){var D=1,K=1,N=linb.UI.$getCSSValue("linb-input-input","paddingTop");var M=E.properties,B=E.getSubNode("BOX"),J=E.getSubNode("INPUT"),I,G=A,F=L,C=Math.max(0,(M.$b_lw||0)-D),H=Math.max(0,(M.$b_tw||0)-K);if(null!==G){G-=Math.max(D*2,(M.$b_lw||0)+(M.$b_rw||0));if(linb.browser.ie6){G=(parseInt(G/2))*2}}if(null!==F){F-=Math.max(K*2,(M.$b_lw||0)+(M.$b_rw||0));if(linb.browser.ie6){F=(parseInt(F/2))*2}if(linb.browser.ie6&&null===A){B.ieRemedy()}}I={left:C,top:H,width:G,height:F};B.cssRegion(I);if(G||F){J.cssSize({width:G,height:F?(F-N):null})}if((E.$border||E.$shadow||E.$resizer)&&linb.browser.ie){B.ieRemedy()}}}});Class("linb.UI.ComboInput","linb.UI.Input",{Instance:{_setCtrlValue:function(E,B){var D=arguments.callee,C=D._r1||(D._r1=/\</),A=D._r2||(D._r2=/\<\/?[^>]+\>/g);return this.each(function(G){if(!G.$typeOK){G.box._iniType(G)}var H=G.getSubNode("INPUT"),F=G.properties.type;E=B?E:G.boxing()._getShowValue(E);if(F!=="none"&&!G.properties.multiLines&&typeof E=="string"&&C.test(E)){E=E.replace(A,"")}H.attr("value",E||"");if(F=="colorpicker"){G.getSubNode("BOX").css("backgroundColor",E);H.css("color",linb.UI.ColorPicker.getTextColor(E))}})},_compareValue:function(D,C){var B=this.get(0),A;if(A=B.CF.compareValue||B.$compareValue){return A(B,D,C)}return D===C},_getShowValue:function(D){var C=this.get(0),E=C.properties,A,B;if(B=C.CF.getShowValue||C.$getShowValue){A=B(C,D)}else{if("listbox"==E.type||"combobox"==E.type){if((A=_.arr.subIndexOf(E.items,"id",D))!=-1){A=E.items[A].caption;A=A.charAt(0)=="$"?linb.getRes(A.slice(1)):A}else{A=""}}else{A=C.$showValue}}A=A||((D||D===0)?String(D):"");if(A!==D){C.$caption=A}else{delete C.$caption}return A},_getEditValue:function(C){var B=this.get(0),D=B.properties,A;if(A=B.CF.getEditValue||B.$getEditValue){return A(B,C)}return C},_fromEditValue:function(C){var B=this.get(0),D=B.properties,A;if(A=B.CF.fromEditValue||B.$fromEditValue){return A(B,C)}return C},_cache:function(){var B=this.get(0),A=B.$drop;if(A){if(linb.browser.opr){A.getRoot().css("display","none")}_.asyRun(function(){B.getSubNode("POOL").append(A.getRoot())})}delete B.$poplink},clearPopCache:function(){var A=this.get(0);if(A.renderId){A.getSubNode("POOL").empty()}delete A.$drop;return this},getUploadObj:function(){var A=this.get(0);if(A.renderId&&A.properties.type=="upload"){var B=A.getSubNode("UPLOAD"),C=B.clone();delete A.$_domid[A.keys.UPLOAD];B.addPrev(C).remove(false);this.setValue("",true);return B.get(0)}},resetValue:function(A){this.each(function(B){if(B.properties.type=="upload"){B.getSubNode("UPLOAD").attr("value","")}});return arguments.callee.upper.apply(this,arguments)},_drop:function(A,B){return this.each(function(E){var J=E.properties;if(J.disabled){return }if(J.type=="upload"||J.type=="none"||J.type=="spin"){return }if(E.$poplink){return }var C,K,G=E.boxing(),F=E.getRoot(),I=F.offset(),M=F.cssSize();M.width+=2;I.top+=F.offsetHeight();if((E.beoforeComboPop&&false===G.beoforeComboPop(E,I,A,B))||J.type=="getter"||J.type=="cmdbox"||J.type=="popbox"){return }var H;switch(J.type){case"timepicker":case"datepicker":case"colorpicker":H=J.type;break;default:if(J.listKey){if(typeof _.get(linb.$cache,["UIDATA",J.listKey])=="function"){E.$drop=H=null}else{H=J.listKey}}else{H=E.$linbid}}if(H){_.filter(E.box.$drop,function(N){return !!N.renderId});E.$drop=E.box.$drop[H]}if(!E.$drop){switch(J.type){case"combobox":case"listbox":case"helpinput":linb.SC("linb.UI.List");C=linb.create("List").render();C.host(E).setItems(_.copy(J.items)).setListKey(J.listKey||"").adjustSize();C.beforeUIValueSet(function(Q,P,O){var N=this.boxing();N.setUIValue(O).activate()._cache();return false});break;case"timepicker":linb.SC("linb.UI.TimePicker");C=linb.create("TimePicker").render();C.host(E);C.beforeClose(function(){this.boxing().activate()._cache();return false});C.beforeUIValueSet(function(O,P,N){this.boxing().setUIValue(N).activate()._cache()});break;case"datepicker":linb.SC("linb.UI.DatePicker");C=linb.create("DatePicker").render();C.host(E);C.beforeClose(function(){this.boxing().activate()._cache();return false});C.beforeUIValueSet(function(O,P,N){this.boxing().setUIValue(String(N.getTime())).activate()._cache()});break;case"colorpicker":linb.SC("linb.UI.ColorPicker");C=linb.create("ColorPicker").render();C.host(E);C.beforeClose(function(){this.boxing().activate()._cache();return false});C.beforeUIValueSet(function(O,P,N){this.boxing().setUIValue("#"+N).activate()._cache()});break}E.$drop=C.get(0);if(H){E.box.$drop[H]=E.$drop}}C=E.$drop.boxing();C.host(E);switch(J.type){case"combobox":case"listbox":case"helpinput":C.setWidth(E.getRoot().width());case"timepicker":C.setValue(G.getUIValue(),true);break;case"datepicker":var L=E.$drop.properties;L.WEEK_FIRST=J.WEEK_FIRST;if(L=G.getUIValue()){C.setValue(new Date(parseInt(L)),true)}break;case"colorpicker":C.setValue(G.getUIValue().replace("#",""),true);break}E.$poplink=C.get(0);var D=C.reBoxing();D.popToTop(E.getRoot());_.tryF(C.activate,[],C);D.setBlurTrigger(E.key+":"+E.$linbid,function(){G._cache()},null,E.$linbid);linb.Event.keyboardHook("esc",0,0,0,function(){G._cache();G.activate();linb.Event.keyboardHook("esc")})})}},Initialize:function(){this.addTemplateKeys(["UPLOAD","BTN","TOP","MID","RBTN","R1","R1T","R1B","R2","R2T","R2B"]);var A=this.getTemplate();_.merge(A.FRAME.BORDER,{SBTN:{$order:5,style:"{_saveDisplay}",STOP:{},SMID:{}}},"all");A.FRAME.POOL={};this.setTemplate(A)},Static:{_iniType:function(B){var F=B.properties,C=F.type;if(C=="listbox"||C=="upload"){B.boxing().setReadonly(true)}if(C!="listbox"&&C!="combobox"&&C!="helpinput"){F.items=[]}if(C=="timepicker"){var E=linb.SC("linb.UI.TimePicker");_.merge(B,{$compareValue:null,$getShowValue:function(G,H){return H?E._ensureValue(G,H):""},$getEditValue:null,$fromEditValue:function(G,H){return E._ensureValue(G,H)}},"all");if(F.value){F.$UIvalue=F.value=E._ensureValue(B,F.value)}}else{if(C=="datepicker"){var A=linb.Date;_.merge(B,{$compareValue:function(I,H,G){return String(H)==String(G)},$getShowValue:function(G,H){return H?A.getText(new Date(parseInt(H)),"ymd"):""},$getEditValue:function(H,I){var G=new Date(parseInt(I));return I?(A.get(G,"m")+1)+"/"+A.get(G,"d")+"/"+A.get(G,"y"):""},$fromEditValue:function(H,I){var G=linb.Date.parse(I);if(G){G=linb.Date.getTimSpanStart(G,"d",1)}return G?String(G.getTime()):"0"}},"all");var D=new Date(parseInt(F.value)||0);F.$UIvalue=F.value=String(A.getTimSpanStart(D,"d",1).getTime())}else{delete B.$compareValue;delete B.$getShowValue;delete B.$getEditValue;delete B.$fromEditValue;if(_.isDate(F.value)){F.$UIvalue=F.value=String(F.value)}}}B.$typeOK=true},$drop:{},Appearances:{POOL:{position:"absolute",left:0,top:0,width:0,height:0,display:"none",visibility:"hidden"},UPLOAD:{opacity:0,"*filter":"alpha(opacity=0)","z-index":"3",border:0,height:"100%",position:"absolute",top:0,right:0,cursor:"pointer","font-size":"12px",overflow:"hidden"},"RBTN,SBTN,BTN":{display:"block","z-index":"1",cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"relative","float":"right"},"SBTN,BTN,R1,R2":{"margin-top":"2px"},"R1, R2, BTN, SBTN, STOP, TOP, R1T, R2T, R1B, R2B, SMID,MID":{background:linb.UI.$bg("bg.gif")},"SBTN,BTN":{$order:1,"background-position":"left bottom"},"R1,R2":{$order:1,display:"block","font-size":0,"line-height":0,cursor:"pointer",width:"16px",position:"absolute",height:"50%","background-position":"left bottom","margin-top":"2px"},R1:{top:0},R2:{bottom:"-2px"},"BTN-mouseover, SBTN-mouseover, R1-mouseover, R2-mouseover":{$order:2,"background-position":"-16px bottom"},"BTN-mousedown, SBTN-mousedown, R1-mousedown, R2-mousedown":{$order:3,"background-position":"-32px bottom"},"STOP, TOP, R1T, R2T":{$order:1,cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",top:"-2px",left:0,height:"4px","background-position":"left -104px"},"BTN-mouseover TOP,SBTN-mouseover STOP, R1-mouseover R1T, R2-mouseover R2T":{$order:2,"background-position":"-16px -104px"},"BTN-mousedown TOP,SBTN-mousedown STOP, R1-mousedown R1T, R2-mousedown R2T":{$order:3,"background-position":"-32px -104px"},"R1B,R2B":{cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",left:0,top:"50%","margin-top":"-4px",height:"6px","z-index":2},R1B:{$order:1,"background-position":"-14px -36px"},R2B:{$order:1,"background-position":"left -5px"},"SMID,MID":{$order:2,cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",bottom:"0",left:0,height:"16px","background-position":"0 0"},SMID:{$order:3,"background-position":"-14px -16px"},".setting-linb-comboinput":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"}},Behaviors:{HoverEffected:{BOX:"BOX",BTN:"BTN",SBTN:"SBTN",R1:"R1",R2:"R2"},ClickEffected:{BTN:"BTN",SBTN:"SBTN",R1:"R1",R2:"R2"},UPLOAD:{onClick:function(A,B,C){if(A.onFileDlgOpen){A.boxing().onFileDlgOpen(A,C)}},onChange:function(A,B,C){A.getSubNode("INPUT").attr("value",C.value).onChange()}},BTN:{onClick:function(A,B,C){A.boxing()._drop(B,C)}},SBTN:{onClick:function(A,B,C){if(A.onSave){A.boxing().onSave(A,C)}}},INPUT:{onChange:function(C,E,G){if(C.$_onedit||C.$_inner){return }var F=C.inValid,A=C.boxing(),B=A._fromEditValue(G.value),D=C.properties.$UIvalue;if(!A._compareValue(D,B)){C.$_inner=1;delete C.$_inner;if(B===null){A._setCtrlValue(D)}else{A.setUIValue(B);C.properties.$UIvalue=B;if(F!==C.inValid){if(C.renderId){A._setDirtyMark()}}}}},onKeyup:function(A,C,D){var B=A.properties;if(B.dynCheck){if(B.$UIvalue!=D.value){A.box._checkValid(A,D.value)}A.boxing()._setDirtyMark()}},onFocus:function(C,F,G){var E=C.properties,D=E.$UIvalue;if(E.disabled){return false}var A=C.boxing(),B=A._getEditValue(D);if(B!==D){C.$_onedit=true;G.value=B;delete C.$_onedit}if(C.onFocus){C.boxing().onFocus(C)}C.getSubNode("BORDER").tagClass("-focus");C.boxing()._setTB(3)},onBlur:function(C,F,G){var E=C.properties,A=C.boxing(),D=E.$UIvalue,B=A._fromEditValue(G.value);if(E.disabled){return false}if(C.onFocus){A.onFocus(C)}C.getSubNode("BORDER").tagClass("-focus",false);if(A._compareValue(E.$UIvalue,B)){C.box._checkValid(C,B);A._setCtrlValue(D)}A._setDirtyMark()},onKeydown:function(C,D,E){var F=C.properties,A=F.multiLines,B=linb.Event.getKey(D);if(B[0]=="enter"&&(!A||B[3])){linb.use(E).onChange()}if(B[0]=="down"||B[0]=="up"){if(F.type=="spin"){C.box._spin(C,B[0]=="up");return false}if(B[1]&&F.type){C.boxing()._drop(D,E);return false}}},onKeyup:function(B,C,D){var E=B.properties,A=linb.Event.getKey(C);if(A[0]=="down"||A[0]=="up"){if(E.type=="spin"){linb.Thread.abort(B.$linbid+":spin");return false}}},onClick:function(A,B,C){if(C.readOnly){A.boxing()._drop(B,C)}}},R1:{onMousedown:function(A){A.box._spin(A,true)},onMouseout:function(A){linb.Thread.abort(A.$linbid+":spin")},onMouseup:function(A){linb.Thread.abort(A.$linbid+":spin")}},R2:{onMousedown:function(A){A.box._spin(A,false)},onMouseout:function(A){linb.Thread.abort(A.$linbid+":spin")},onMouseup:function(A){linb.Thread.abort(A.$linbid+":spin")}}},EventHandlers:{onFileDlgOpen:function(A,B){},onSave:function(A,B){},beoforeComboPop:function(A,D,B,C){}},_posMap:{none:"",combobox:"left top",listbox:"left top",upload:"-16px top",getter:"left -31px",helpinput:"-16px -46px",cmdbox:"left -16px",popbox:"left -46px",timepicker:"left -60px",datepicker:"left -75px",colorpicker:"-16px -60px"},DataModel:{listKey:{set:function(A){var B=this.constructor.getCachedData(A);return this.each(function(C){C.boxing().setItems(B?B:C.properties.items);C.properties.listKey=A})}},items:{ini:[],action:function(B){var A=this;A.boxing().setValue(null,true);A.SubSerialIdMapItem={};A.ItemIdMapSubSerialId={};A.box._prepareItems(A,B);A.boxing().clearPopCache()}},image:{action:function(A){this.getSubNode("MID").css("backgroundImage","url("+(A||"")+")")}},imagePos:{action:function(A){this.getSubNode("MID").css("backgroundPosition",A)}},readonly:{ini:false,action:function(A){if(!A&&this.properties.type=="listbox"){return }this.getSubNode("INPUT").css("cursor",A?"pointer":"default").attr("readonly",A)}},type:{ini:"combobox",listbox:_.toArr("none,combobox,listbox,upload,getter,helpinput,cmdbox,popbox,timepicker,datepicker,colorpicker,spin"),set:function(B,A){return this.each(function(C){if(C.properties.type!=B||A){C.properties.type=B;C.box._iniType(C);if(C.renderId){C.boxing().refresh()}}})}},scale:2,increment:0.01,min:0,max:1,saveBtn:{ini:false,action:function(A){this.boxing().refresh()}}},RenderTrigger:function(){var B=this,A=B.boxing(),C=B.properties;B.box._iniType(B);if(C.readonly){A.setReadonly(true,true)}},_spin:function(D,B){var G=D.$linbid+":spin";if(linb.Thread.isAlive(G)){return }var F=D.properties,E=F.increment*(B?1:-1),C={delay:300},A=function(){D.boxing().setUIValue(String((+F.$UIvalue||0)+E));C.delay*=0.9};C.task=A;linb.Thread(G,[C],500,null,A,null,true).start()},_dynamicTemplate:function(D){var B=D.properties,E=D._exhash="$multiLines:"+B.multiLines+";type:"+B.type+";",C=D.box.getTemplate(E);B.$UIvalue=B.value;if(!C){C=_.clone(D.box.getTemplate());var A=C.FRAME.BORDER;if(B.multiLines){A.BOX.WRAP.INPUT.tagName="textarea";delete A.BOX.WRAP.INPUT.type}switch(B.type){case"spin":A.RBTN={$order:5,style:"{rDisplay}",R1:{R1T:{},R1B:{}},R2:{R2T:{},R2B:{}}};break;case"none":break;case"upload":A.UPLOAD={$order:2,tagName:"input",type:"file",size:"1"};default:A.BTN={$order:4,style:"{_popbtnDisplay}",TOP:{},MID:{style:"{_btnStyle}"}}}D.box.setTemplate(C,E)}D.template=C},_prepareData:function(A){var B=arguments.callee.upper.call(this,A),C=A.box._posMap;if(C[B.type]){B._btnStyle=B.image?("background: url("+B.image+")"+(B.imagePos||"")):("background-position:"+C[B.type])}B._saveDisplay=B.saveBtn?"":"display:none";B._popbtnDisplay=B.type!="none"?"":"display:none";return B},_ensureValue:function(B,D){var C=arguments.callee,A=C._reg||(C._reg=/^#[\w]{6}$/),F=B.properties;switch(B.properties.type){case"datepicker":return(D.constructor==Date?D.getTime():D)+"";case"colorpicker":return"#"+linb.UI.ColorPicker._ensureValue(null,D);case"timepicker":return linb.UI.TimePicker._ensureValue(null,D);case"spin":var E=Math.pow(10,F.scale);D=+D||0;D=Math.ceil((D-3e-13)*E)/E;return String(D>F.max?F.max:D<F.min?F.min:D);default:return typeof D!=="string"?D:(D||D===0)?String(D):""}},_onresize:function(C,M,K){var R=1,A=1,F=linb.UI.$getCSSValue("linb-comboinput-input","paddingTop");var H=C.properties,L=C.getSubNode("BOX"),N=C.getSubNode("BORDER"),J="px",P=function(S){return S?C.getSubNode(S).get(0):null},B=P("INPUT"),O=P(H.saveBtn?"SBTN":null),G=P(H.type=="spin"?"RBTN":H.type=="none"?null:"BTN"),Q=M,D=K,E=Math.max(0,(H.$b_lw||0)-R),I=Math.max(0,(H.$b_tw||0)-A);if(null!==Q){Q-=Math.max(R*2,(H.$b_lw||0)+(H.$b_rw||0));Q-=((O?O.offsetWidth:0)+(G?G.offsetWidth:0));if(linb.browser.ie6){Q=(parseInt(Q/2))*2}}if(null!==D){D-=Math.max(A*2,(H.$b_lw||0)+(H.$b_rw||0));if(linb.browser.ie6){D=(parseInt(D/2))*2}if(linb.browser.ie6&&null===M){L.ieRemedy()}}if(null!==Q){B.style.width=Q+J}if(null!==D){B.style.height=(D-F)+J}if(K-2>0){if(O){O.style.height=(K-2)+J}if(G){G.style.height=(K-2)+J}}if(H.type=="spin"){if(K/2-2>0){K=(K/2-2)+J;P("R1").style.height=K;P("R2").style.height=K}}L.cssRegion({left:E,top:I,width:Q,height:D});N.cssRegion({width:M,height:K});if((C.$border||C.$shadow||C.$resizer)&&linb.browser.ie){L.ieRemedy();N.ieRemedy()}}}});Class("linb.UI.ToolBar",["linb.UI","linb.absList"],{Instance:{updateItem:function(B,A){return arguments.callee.upper.apply(this,[B,A,"items.sub"])},showItem:function(B,A){return this.each(function(C){C.getItemByItemId(B).visible=A!==false;C.getSubNodeByItemId("ITEM",B).css("display",A===false?"none":"")})},showGroup:function(A,B){return this.each(function(C){_.arr.each(C.properties.items,function(D){if(D.id==A){D.visible=B!==false;return false}});C.getSubNodeByItemId("GROUP",A).css("display",B===false?"none":"");linb.UI.$dock(C,true,true)})}},Static:{Templates:{tagName:"div",ITEMS:{className:"uibg-bar uiborder-outset",tagName:"div",style:"{mode}",text:"{items}"},$submap:{items:{GROUP:{className:"{groupClass}",style:"{grpDisplay} {groupStyle}",HANDLER:{style:"{mode2}"},LIST:{$order:1,tagName:"text",text:"{sub}"}}},"items.sub":{ITEM:{style:"{itemDisplay}",IBWRAP:{tagName:"div",SPLIT:{style:"{splitDisplay}"},LABEL:{className:" {disabled}",style:"{labelDisplay}",text:"{label}"},BTN:{className:"ui-btn {itemClass}",style:"{itemStyle} {boxDisplay}",BTNI:{className:"ui-btni",BTNC:{className:"ui-btnc",BOX:{tagName:"a",href:linb.$href,tabindex:"{_tabindex}",BOXWRAP:{tagName:"div",ICON:{$order:1,className:"ui-icon",style:"background:url({image}) transparent no-repeat  {imagePos}; {imageDisplay}"},CAPTION:{$order:2,text:"{caption}",className:" {disabled}",style:"{captionDisplay}"},DROP:{$order:3,style:"{dropDisplay}"}}}}}}}}}}},Appearances:{KEY:{"font-size":0,"line-height":0,position:"absolute",left:0,top:0},ICON:{margin:0,"vertical-align":"top"},ITEMS:{display:"block","padding-bottom":"1px","font-size":0,"line-height":0},HANDLER:{height:"22px",width:"7px",background:linb.UI.$bg("handler.gif"," left top",true),cursor:"move","vertical-align":"middle"},GROUP:{"font-size":0,"line-height":0,position:"relative",padding:"2px 4px 0px 2px","vertical-align":"baseline"},ITEM:{"vertical-align":"middle",padding:"1px"},"BTNC a":{padding:0},SPLIT:{$order:1,width:"6px",height:"19px","vertical-align":"middle",background:linb.UI.$bg("split_vertical.gif","repeat-y left top",true)},BTN:{"padding-right":"3px"},BTNI:{"padding-left":"3px"},DROP:{width:"14px",height:"16px","vertical-align":"top",background:linb.UI.$bg("drop.gif","no-repeat left center","Button")},"BTN-mouseover DROP":{$order:2,"background-position":"-16px center"},"BTN-mousedown DROP, BTN-checked DROP":{$order:2,"background-position":"-32px center"},"LABEL, CAPTION":{height:"16px","vertical-align":"middle","margin-left":"2px","margin-right":"2px",cursor:"default","font-size":"12px"},LABEL:{"padding-top":"3px"}},Behaviors:{HoverEffected:{BTN:["BTN"]},ClickEffected:{BTN:["BTN"]},BTN:{onClick:function(C,E,F){if(C.properties.disabled){return }var B=linb.use(F).parent(3).id(),A=C.getItemByDom(B);if(A.disabled){return }var D=C.getItemByDom(F);if(D.disabled){return }linb.use(F).focus();if(D.statusButton){linb.use(F).tagClass("-checked",D.value=!D.value)}C.boxing().onClick(C,D,A,E,F);return false}}},DataModel:{listKey:null,height:{ini:"auto",readonly:true},width:"auto",left:0,top:0,handler:{ini:true,action:function(A){this.getSubNode("HANDLER",true).css("display",A?"":"none")}},position:"absolute",hAlign:{ini:"left",listbox:["left","center","right"],action:function(A){this.getSubNode("ITEMS",true).css("textAlign",A)}},dock:{ini:"top",listbox:["top","bottom"]}},EventHandlers:{onClick:function(A,B,D,C,E){}},_prepareData:function(A){var C=arguments.callee.upper.call(this,A);var B=A.properties;C.mode=B.hAlign=="right"?"text-align:right;":"";return C},_prepareItem:function(B,C,K,H,D,E){var F="display:none",I=function(Q,N,R,M,L,P){var S=N[linb.UI.$tag_subId]=typeof P=="string"?P:("a_"+Q.pickSubId("aitem")),O;if(typeof R=="string"){R={caption:R}}if(false!==L){Q.ItemIdMapSubSerialId[R.id]=S;Q.SubSerialIdMapItem[S]=R}if(O=R.object){O=N.object=O["linb.absBox"]?O.get(0):O;if(O["linb.UIProfile"]){O.properties.position="relative";if(!O.CS.KEY){O.CS.KEY=""}O.CS.KEY="vertical-align:middle;margin-left:4px;"+O.CS.KEY}R.$linbid=O.$linbid;O.$item=R;O.$holder=Q;if(!Q.$attached){Q.$attached=[]}Q.$attached.push(O)}else{if(R.type=="split"){R.split=true}linb.UI.adjustData(Q,R,N);N.splitDisplay=N.split?"":F;N.labelDisplay=N.label?"":F;N.captionDisplay=N.caption?"":F;N.dropDisplay=R.dropButton?"":F;N.boxDisplay=(!N.split&&(N.caption||N.image))?"":F}N.itemDisplay=R.visible===false?F:"";R._pid=M};if(H){I(B,C,K,H,D,E)}else{var G=[],A,J=K.sub||[];H=K.id;C.mode2=B.properties.handler?"":F;C.grpDisplay=K.visible===false?F:"";C.sub=G;_.arr.each(J,function(L){A={id:L.id};I(B,A,L,H,D,E);G.push(A)})}}}});Class("linb.UI.Layout",["linb.UI","linb.absList"],{Instance:{getPanel:function(A){return this.get(0).getSubNodeByItemId("PANEL",A)},append:function(B,A){var C=this.get(0);return arguments.callee.upper.call(this,B,A||"main")},fireCmdClickEvent:function(A){this.getSubNodeByItemId("CMD",A).onMousedown();return this}},Static:{Templates:{tagName:"div",style:"{_style}",text:"{items}",$submap:{items:{ITEM:{tagName:"div",className:"{cls1} {itemClass}",style:"{size};{itemStyle}",MOVE:{$order:0,tagName:"div",className:"uibg-bar {cls2} ",style:"{display}"},CMD:{$order:1,tagName:"div",style:"{cmdDisplay}",className:"{cls3} "},PANEL:{tagName:"div",className:"uibg-base",style:"position:absolute;left:0;top:0;",text:linb.UI.$childTag}}}}},Appearances:{".setting-linb-layout":{width:"9px"},KEY:{position:"absolute",overflow:"hidden",left:0,top:0,"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},MOVE:{$order:0,position:"absolute","z-index":"10","font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},"MOVE-mouseover":{$order:1,"background-color":"#C8E1FA"},CMD:{position:"absolute",cursor:"pointer","z-index":"20","font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},ITEM:{position:"absolute","z-index":1,overflow:"hidden","border-width":linb.browser.opr?"0px":null,"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},PANEL:{position:"absolute",overflow:"hidden","border-width":linb.browser.opr?"0px":null,"font-size":linb.browser.ie?0:null,"line-height":linb.browser.ie?0:null},"ITEM-MAIN":{left:0,right:0,top:0,bottom:0},"ITEM-TOP, ITEM-BOTTOM":{left:0,right:0},"ITEM-LEFT, ITEM-RIGHT":{top:0,bottom:0},"MOVE-TOP, MOVE-BOTTOM":{width:"100%",height:"7px",cursor:"n-resize","border-top":"solid 1px #c8e1fa","border-bottom":"solid 1px #648cb4"},"MOVE-LEFT, MOVE-RIGHT":{height:"100%",width:"7px",cursor:"w-resize","border-left":"solid 1px #c8e1fa","border-right":"solid 1px #648cb4"},"MOVE-TOP":{bottom:0},"MOVE-BOTTOM":{top:0},"MOVE-LEFT":{right:0},"MOVE-RIGHT":{left:0},"CMD-TOP, CMD-BOTTOM, CMD-LEFT, CMD-RIGHT":{background:linb.UI.$bg("icons.gif","no-repeat",true)},"CMD-TOP":{$order:1,left:"50%","margin-left":"-20px",bottom:0,width:"40px",height:"9px","background-position":"-360px -232px"},"CMD-BOTTOM":{$order:1,left:"50%","margin-left":"-20px",top:0,width:"40px",height:"9px","background-position":"-360px -258px"},"CMD-LEFT":{$order:1,top:"50%","margin-top":"-20px",right:0,height:"40px",width:"9px","background-position":"-310px -240px"},"CMD-RIGHT":{$order:1,top:"50%","margin-top":"-20px",left:0,height:"40px",width:"9px","background-position":"-336px -240px"},"CMD-TOP-mouseover":{$order:2,"background-position":"-360px -245px"},"CMD-BOTTOM-mouseover":{$order:2,"background-position":"-360px -271px"},"CMD-LEFT-mouseover":{$order:2,"background-position":"-323px -240px"},"CMD-RIGHT-mouseover":{$order:2,"background-position":"-349px -240px"},"MOVE-MAIN":{$order:5,display:"none"},"CMD-MAIN":{$order:5,display:"none"}},Behaviors:{DropableKeys:["PANEL"],HoverEffected:{MOVE:"MOVE",CMD:"CMD"},onSize:function(A,B){var C=A.getRoot();linb.UI.$tryResize(A,B.width?C.width():null,B.height?C.height():null)},MOVE:{onMousedown:function(E,J,A){var K=E.getSubId(A),P=E.getItemByDom(A);if(P.hide){return }var G=E.getItemByItemId("main"),D=E.getSubNode("ITEM",K),F=E.getSubNodeByItemId("ITEM","main"),N=linb.use(A).css("cursor"),O=E.properties,H,L,I,M,C,B;E.pos=P.pos;if(O.type=="vertical"){H=E._cur=D.height();I=F.height();if(P.pos=="before"){C=H-P.min;B=P.max?Math.min(parseInt(P.max)-H,(I-G.min)):(I-G.min)}else{C=P.max?Math.min(parseInt(P.max)-H,(I-G.min)):(I-G.min);B=H-P.min}linb.use(A).startDrag(J,{dragType:"copy",targetReposition:false,verticalOnly:true,maxTopOffset:C,maxBottomOffset:B,dragCursor:N})}else{L=E._cur=D.width();M=F.width();if(P.pos=="before"){C=L-P.min;B=P.max?Math.min(parseInt(P.max)-L,(M-G.min)):(M-G.min)}else{C=P.max?Math.min(parseInt(P.max)-L,(M-G.min)):(M-G.min);B=L-P.min}linb.use(A).startDrag(J,{dragType:"copy",targetReposition:false,horizontalOnly:true,maxLeftOffset:C,maxRightOffset:B,dragCursor:N})}E._limited=0},onDrag:function(C,E,G){var B=C.properties,F=linb.DragDrop,D=linb.DragDrop._profile,A=0;if(B.type=="vertical"){if((D.y<=D.restrictedTop)||(D.y>=D.restrictedBottom)){A=true}}else{if(D.x<=D.restrictedLeft||D.x>=D.restrictedRight){A=true}}if(A){if(!C._limited){C._bg=D.proxyNode.css("backgroundColor");D.proxyNode.css("backgroundColor","#ff6600");C._limited=true}}else{if(C._limited){D.proxyNode.css("backgroundColor",C._bg);C._limited=0}}},onDragstop:function(B,E,G){var A=B.properties,F=linb.use(G).parent(),D=B.getRoot(),C=B.getItemByDom(G);if(A.type=="vertical"){F.height(C.size=B._cur+(B.pos=="before"?1:-1)*linb.DragDrop.getProfile().offset.y);linb.UI.$tryResize(B,null,D.height())}else{F.width(C.size=B._cur+(B.pos=="before"?1:-1)*linb.DragDrop.getProfile().offset.x);linb.UI.$tryResize(B,D.width(),null)}B._limited=0}},CMD:{onMousedown:function(G,J,B){var M=G.properties,K=G.getSubId(B),L=G.getItemByDom(B),C=G.getRoot(),H=G.getItemByItemId("main"),F=G.getSubNodeByItemId("ITEM","main"),D=G.getSubNode("ITEM",K),A=G.getSubNode("PANEL",K),E=G.getSubNode("MOVE",K),I=linb.UI.$getCSSValue("setting-linb-layout","width");if(M.type=="vertical"){if(L.hide){if(L.size<=F.height()-H.min+I){D.height(L.size);A.show();L.hide=false;if(L.pos=="before"){linb.use(B).replaceClass(/bottom/g,"top")}else{linb.use(B).replaceClass(/top/g,"bottom")}if(!L.locked){E.css("cursor","n-resize")}G.getSubNode("MOVE").tagClass("-checked",false)}else{linb.message("no enough space!")}}else{D.height(I);A.hide();L.hide=true;if(L.pos=="before"){linb.use(B).replaceClass(/top/g,"bottom")}else{linb.use(B).replaceClass(/bottom/g,"top")}if(!L.locked){E.css("cursor","default")}G.getSubNode("MOVE").tagClass("-checked")}linb.UI.$tryResize(G,null,C.height())}else{if(L.hide){if(L.size<=F.width()-H.min+I){D.width(L.size);A.show();L.hide=false;if(L.pos=="before"){linb.use(B).replaceClass(/right/g,"left")}else{linb.use(B).replaceClass(/left/g,"right")}if(!L.locked){E.css("cursor","w-resize")}G.getSubNode("MOVE").tagClass("-checked",false)}else{linb.message("no enough space!")}}else{D.width(I);A.hide();L.hide=true;if(L.pos=="before"){linb.use(B).replaceClass(/left/g,"right")}else{linb.use(B).replaceClass(/right/g,"left")}if(!L.locked){E.css("cursor","default")}G.getSubNode("MOVE").tagClass("-checked")}linb.UI.$tryResize(G,C.width(),null)}return false}}},DataModel:{disabled:null,position:"absolute",type:{listbox:["vertical","horizontal"],ini:"vertical",action:function(E,F){if(E!=F){var C=this,H="auto",A=C.getSubNode("ITEM",true),B=C.getSubNode("MOVE",true),G=C.getSubNode("CMD",true);B.merge(A).merge(G);if(E=="vertical"){B.replaceClass(/(-left)(\b)/ig,"-top$2");B.replaceClass(/(-right)(\b)/ig,"-bottom$2");A.each(function(I){linb(I).height(linb(I).width())}).cssRegion({left:0,top:H,right:H,bottom:H})}else{B.replaceClass(/(-top)(\b)/ig,"-left$2");B.replaceClass(/(-bottom)(\b)/ig,"-right$2");A.each(function(I){linb(I).width(linb(I).height())}).cssRegion({left:H,top:0,right:H,bottom:H})}var D=C.getRoot().cssSize();linb.UI.$tryResize(C,D.width,D.height)}}},dock:"fill",listKey:null,width:200,height:200,items:{ini:[],set:function(A){return this.each(function(H){if(H.renderId){var E=H.boxing(),B=linb.$getGhostDiv(),D=_.copy(H.children),G,F;H.children.length=0;_.arr.each(D,function(I){delete I[0].$dockParent;B.appendChild(I[0].getRootNode())});E.clearItems();F=H.box._prepareV(H,A);E.insertItems(F);_.arr.each(D,function(I){E.append.apply(E,I)});B.innerHTML="";var C=H.getRoot().cssSize();linb.UI.$tryResize(H,C.width,C.height)}else{H.properties.items=_.copy(A)}})}}},_prepareV:function(C,B){var A,D=[],E=[];_.arr.each(B,function(F){if(F.id=="main"){A=F}else{if(F.pos=="before"){D.push(F)}else{F.pos="after";E.push(F)}}});A=A||{};A.id="main";A.min=A.min||10;B.length=0;_.arr.insertAny(B,D,0);_.arr.insertAny(B,A);_.arr.insertAny(B,E);_.arr.each(B,function(F){F.id=_.isStr(F.id)?F.id:C.$linbid+":"+_.id();F.min=F.min||10;if(F.id!="main"){F.size=parseInt(F.size)||20;F.locked=typeof F.locked=="boolean"?F.locked:false;F.hide=typeof F.hide=="boolean"?F.hide:false;F.cmd=typeof F.cmd=="boolean"?F.cmd:false}});return B},_prepareData:function(A){var B=A.properties;if(!B.items||B.items.constructor!=Array){B.items=_.clone([{id:"before",pos:"before",locked:false,size:60,min:50,max:200},{id:"after",pos:"after",locked:false,size:60,min:50,max:200}])}B.items=this._prepareV(A,B.items);return arguments.callee.upper.call(this,A)},_prepareItem:function(B,C){var A=B.properties;if(C.id=="main"){C.cls1=B.getClass("ITEM","-main");C.cls2=B.getClass("MOVE","-main");C.cls3=B.getClass("CMD","-main");return }if(A.type=="vertical"){C.size="height:"+C.size+"px"}else{C.size="width:"+C.size+"px"}var D;if(A.type=="vertical"){if(C.pos=="before"){D="top"}else{D="bottom"}}else{if(C.pos=="before"){D="left"}else{D="right"}}C.cls1=B.getClass("ITEM","-"+D);C.cls2=B.getClass("MOVE","-"+D);C.cls3=B.getClass("CMD","-"+D);C.display=C.locked?"display:none":"";C.cmdDisplay=C.cmd?"":"display:none"},RenderTrigger:function(){var A,B=this;_.arr.each(B.properties.items,function(C){if(C.id!="main"){if(C.hide&&(A=B.getSubIdByItemId(C.id))){C.hide=false;B.getSubNode("CMD",A).onMousedown()}}})},_onresize:function(G,C,P){var O,Q=G.properties,H,E,L,D,B,N,M=G.keys.ITEM,A=G.keys.PANEL,F=G.getSubNode("MOVE",true),J=linb.UI.$getCSSValue("setting-linb-layout","width");var K={},I={};_.arr.each(Q.items,function(R){L=G.getSubIdByItemId(R.id);K[L]={};I[L]={}});if(Q.type!="vertical"){if(!_.isNull(C)){N=D=B=0;_.arr.each(Q.items,function(R){if(R.id=="main"){return }L=G.getSubIdByItemId(R.id);if(R.pos=="before"){E=G.getSubNode("ITEM",L);if(R.hide){H=I[L].width=J}else{H=E.width()}I[L].left=D;D+=H;I[L].right="auto";K[L].right="auto";K[L].left=0;K[L].width=H-(R.locked?0:J)}});_.arr.each(Q.items,function(R){if(R.id=="main"){return }L=G.getSubIdByItemId(R.id);if(R.pos=="after"){E=G.getSubNode("ITEM",L);if(R.hide){H=I[L].width=J}else{H=E.width()}I[L].right=B;B+=H;I[L].left="auto";K[L].right=0;K[L].left="auto";K[L].width=H-(R.locked?0:J)}},null,true);N=D+B;if(C-N>=0){O=G.getSubIdByItemId("main");K[O].width=C-N;I[O].width=C-N;I[O].left=D}}if(!_.isNull(P)){_.each(K,function(R,S){R.height=P;I[S].height=P})}}else{if(!_.isNull(P)){N=D=B=0;_.arr.each(Q.items,function(R){if(R.id=="main"){return }L=G.getSubIdByItemId(R.id);if(R.pos=="before"){E=G.getSubNode("ITEM",L);if(R.hide){H=I[L].height=J}else{H=E.height()}I[L].top=D;D+=H;I[L].bottom="auto";K[L].top=0;K[L].bottom="auto";K[L].height=H-(R.locked?0:J)}});_.arr.each(Q.items,function(R){if(R.id=="main"){return }L=G.getSubIdByItemId(R.id);if(R.pos=="after"){E=G.getSubNode("ITEM",L);H=E.height();if(R.hide){H=I[L].height=J}else{H=E.height()}I[L].bottom=B;B+=H;I[L].top="auto";K[L].bottom=0;K[L].top="auto";K[L].height=H-(R.locked?0:J)}},null,true);N=D+B;if(P-N>=0){O=G.getSubIdByItemId("main");K[O].height=P-N;I[O].height=P-N;I[O].top=D}}if(!_.isNull(C)){_.each(K,function(R,S){R.width=C;I[S].width=C})}}_.each(I,function(R,S){G.getSubNode("ITEM",S).cssRegion(I[S]);G.getSubNode("PANEL",S).cssRegion(K[S],true)})}}});Class("linb.UI.TreeGrid",["linb.UI","linb.absValue"],{Instance:{_setCtrlValue:function(A){return this.each(function(D){if(!D.renderId){return }if(D.properties.activeMode=="none"){return }var I=D.boxing(),N=I.getUIValue(),B=D.properties,F=B.activeMode=="row"?"CELLS":"CELL",G=function(P,Q){return D.getSubNode(P,Q)},J=function(P){var R=D.rowMap2;if(B.activeMode=="row"){return R[P]}else{if(!P){return }var Q=P.split("|");return _.get(D.rowMap,[R[Q[0]],"_cells",Q[1]])}};if(B.selMode=="single"){var M=J(N);if(N&&M){G(F,M).tagClass("-checked",false)}M=J(A);if(M){G(F,M).tagClass("-checked")}if(M){var C=G(F,M);if(C){var L=C.offsetTop(),K=G("SCROLL"),H=K.scrollHeight(),O=K.scrollTop(),E=K.height();if(H>E){if(L<O||L>O+E){K.scrollTop(L)}}}}}else{if(B.selMode=="multi"){N=N?N.split(";"):[];A=A?A.split(";"):[];_.arr.each(N,function(P){if(_.arr.indexOf(A,P)==-1){G(F,J(P)).tagClass("-checked",false)}});_.arr.each(A,function(P){if(_.arr.indexOf(N,P)==-1){G(F,J(P)).tagClass("-checked")}})}}})},_insertRowsToDom:function(C,F,E,B,H){if(E){var I=C.rowMap[E];if(I&&!I._created){return }}var D,G,G=C.getSubNode("HFCELL").width();_.arr.each(F,function(J){J._row0DfW=G;_.arr.each(J.cells,function(K,L){K.width=K._col.width})});var A=C.buildItems("rows",F);if(!B){if(E){D=C.getSubNode("SUB",E)}else{D=C.getSubNode("BODY")}if(H){D.prepend(A)}else{D.append(A)}}else{D=C.getSubNode("ROW",B);if(H){D.addPrev(A)}else{D.addNext(A)}}_.arr.each(F,function(J){J.open=false});delete C.$allrowscache},_refreshHeader:function(F){var C=this.get(0),E=C.properties,D=_.copy(E.rows);_.breakO(C.colMap,2);F=C.box._adjustHeader(F);var A=C.box._prepareHeader(C,F);var B=E.header.length;E.header=F;this.removeAllRows();C.getSubNode("HCELL",true).remove();if(A.length){C.getSubNode("HCELLS").append(_.str.toDom(C.buildItems("header",A)))}if(B==A.length&&D.length){this.insertRows(D)}C.box._ajdustBody(C)},_expendRows:function(B){var A=this;if(B&&B.length){_.arr.each(B,function(C){if(C.sub&&C.sub.length&&!C.iniFold&&!C._checked){A.toggleRow(C.id,true)}})}},getRows:function(D){var C=this.get(0).properties.rows;if(D=="data"){return _.clone(C,true)}else{if(D=="min"){var B=_.clone(C,true),A;_.arr.each(B,function(F,E){_.each(A=B[E]=B[E].cells,function(G,H){A[H]=G.value})});return B}else{return C}}},toggleRow:function(D,A){var B=this.get(0),C=B.rowMap[B.rowMap2[D]];if(C&&C.sub){B.box._setSub(B,C,typeof A=="boolean"?A:!C._checked)}},getRowbyRowId:function(C){var B=this.get(0),A=B.rowMap2[C];return A?B.rowMap[A]:null},getRowbyCell:function(A){return A._row},updateRow:function(D,J){var G=this,A=G.getRowbyRowId(D),H=A._serialId,I,F;if(!A){return G}if(_.isStr(J)){J={value:J}}else{_.filter(J,true)}J.id=D;if(("group" in J&&J.group!=A.group)||"cells" in J||("sub" in J&&!((!J.sub&&A.sub&&A.sub.length==0)||(J.sub&&J.sub.length==0&&!A.sub)))){var B="__special",E=A._pid,C=G.get(0);A.id=B;C.rowMap2[B]=C.rowMap2[D];delete C.rowMap2[D];A=_.clone(A,true);_.merge(A,J,"all");if("sub" in J&&!J.sub){delete A.sub}G.insertRows([A],E,B,true);G.removeRows([B])}else{if("sub" in J){I=G.getSubNode("FCELLCMD",H);if(J.sub){I.removeClass("uicmd-empty").addClass("uicmd-toggle2")}else{I.removeClass("uicmd-toggle2").addClass("uicmd-empty")}}if(I=J.height){G.getSubNode("CELLS",H).height(I)}if(I=J.rowStyle){(F=G.getSubNode("CELLS",H)).attr("style",F.attr("style")+";"+I)}if(I=J.rowClass){G.getSubNode("CELLS",H).addClass(I)}if(I=J.firstCellStyle){(F=G.getSubNode("FCELL",H)).attr("style",F.attr("style")+";"+I)}if(I=J.firstCellClass){G.getSubNode("FCELL",H).addClass(I)}if("caption" in J){G.getSubNode("FCELLCAPTION",H).get(0).innerHTML=J.caption}if("previewDisplay" in J){I=!!J.previewDisplay;G.getSubNode("PREVIEW",H).css("display",(J.previewDisplay=I)?"block":"none")}if("preview" in J){G.getSubNode("PREVIEW",H).html(J.preview)}if("summaryDisplay" in J){I=!!J.summaryDisplay;G.getSubNode("SUMMARY",H).css("display",(J.summaryDisplay=I)?"block":"none")}if("summary" in J){G.getSubNode("SUMMARY",H).html(J.summary)}if("rowResizer" in J){I=!!J.rowResizer;G.getSubNode("FHANDLER",H).css("display",(J.rowResizer=I)?"block":"none")}_.merge(A,J,"all")}return G},insertRows:function(E,D,A,J){var H=this.constructor,C=this.get(0),K=C.properties,B=C.rowMap2,L;A=B[A];if(A){L=C.rowMap[A];if(L){D=L._pid}}if(!E){E=[[]]}E=H._adjustRows(E);var M=H._prepareItems(C,E,D),F,I=C.rowMap;D=B[D];if(!D){F=(K.rows||(K.rows=[]))}else{F=(I[D].sub||(I[D].sub=[]))}if(!A){_.arr.insertAny(F,E,J?0:-1)}else{var G=_.arr.subIndexOf(F,"_serialId",A);_.arr.insertAny(F,E,J?G:(G+1))}if(M.length){this._insertRowsToDom(C,M,D,A,J)}if(!K.iniFold){C.boxing()._expendRows(M)}C.box._asy(C);return this},removeRows:function(F){var D=this,E=D.get(0),G=E.properties,A=E.cellMap,C=[],B;F=_.isArr(F)?F:[F];_.arr.each(F,function(M){if(!(M=E.rowMap2[M])){return }var L;if(L=E.rowMap[M]){var J=L._cells,K=L.id,I;if(L.sub&&_.isArr(L.sub)){var H=[];_.arr.each(L.sub,function(N){H.push(N.id)});D.removeRows(H)}_.each(J,function(O,N){delete A[O]._col._cells[K];_.breakO(A[O]);delete A[O];E.reclaimSubId(O.slice(2),"cell")});if(I=L._pid?(I=E.rowMap[E.rowMap2[L._pid]])?I.sub:null:E.properties.rows){if(_.isArr(I)){_.filter(I,function(N){return N._serialId!=M})}}delete E.rowMap2[K];_.breakO(E.rowMap[M]);delete E.rowMap[M];C.push(E.getSubNode("ROW",M).get(0))}E.reclaimSubId(M.slice(2),"row")});if(B=G.value){if((B=B.split(";")).length>1){_.filter(B,function(H){return _.arr.indexOf(arr,H)==-1});G.value=B.join(";")}else{if(_.arr.indexOf(arr,G.value)!=-1){G.value=null}}}linb(C).remove();E.box._asy(E);return D},removeAllRows:function(){var B=this.get(0);for(var A in B.cellMap){B.reclaimSubId(A.slice(2),"cell")}for(var A in B.rowMap){B.reclaimSubId(A.slice(2),"row")}_.each(B.colMap,function(C){C._cells={}});_.breakO([B.rowMap,B.cellMap],3);B.rowMap={};B.cellMap={};B.rowMap2={};B.properties.rows.length=0;if(B.renderId){B.getSubNode("BODY").empty();B.getSubNode("SCROLL").scrollTop(0).scrollLeft(0)}return this},resetRowValue:function(C){var B=this.get(0),D=this.getRowbyRowId(C),A=[];_.each(D.cells,function(E){if(E._$value!==E.value){E._$value=E.value;A.push(B.getSubNode("CELLA",E._serialId).get(0))}});linb(A).removeClass("ui-dirty")},getActiveRow:function(){var A,B=this.get(0);if(B.properties.activeMode!="row"){return }if(!(A=B.$activeRow)){return }return B.rowMap[B.getSubId(A)]},setActiveRow:function(C){var B,D,A=this.get(0);if(A.properties.activeMode!="row"){return }if(!(D=this.getRowbyRowId(C))){return }if(!(B=A.getSubNode("CELLS",D._serialId)).isEmpty()){A.box._activeRow(A,B.get(0).id)}return this},getHeader:function(D){var C=this.get(0).properties.header;if(D=="data"){return _.clone(C,true)}else{if(D=="min"){var B=_.clone(C,true),A;_.arr.each(B,function(F,E){B[E]=F.id});return B}else{return C}}},updateHeader:function(E,B){var D=this,F=D.getHeaderByColId(E),A=F._serialId,C;if(!F){return D}if(_.isStr(B)){B={caption:B}}else{_.filter(B,true)}delete B.id;if(C=B.width){var G=[];G.push(D.getSubNode("HCELL",A).get(0));_.each(F._cells,function(H){G.push(D.getSubNode("CELL",H).get(0))});linb(G).width(C)}if(C=B.headerStyle){(tt=D.getSubNode("HCELL",A)).attr("style",tt.attr("style")+";"+C)}if(C=B.headerClass){D.getSubNode("HCELL",A).addClass(C)}if("caption" in B){D.getSubNode("HCELLCAPTION",A).get(0).innerHTML=B.caption}if("colResizer" in B){C=!!B.colResizer;D.getSubNode("HHANDLER",A).css("display",(B.colResizer=C)?"block":"none")}_.merge(F,B,"all")},getHeaderByColId:function(C){var A=this.get(0).properties.header,B=_.arr.subIndexOf(A,"id",C);return A[B]},getHeaderByCell:function(A){return A._header},showColumn:function(B,A){return this.each(function(F){var H=F.colMap2,G=F.colMap,E,C,D,I=[];if(E=G[C=H[B]]){I.push(F.getSubNode("HCELL",C).get(0));_.each(E._cells,function(J){I.push(F.getSubNode("CELL",J).get(0))});linb(I).css("display",(E.visibility=(A===false?false:true))?"":"none")}F.box._ajdustBody(F)})},getCellbyRowCol:function(D,C){var B=this.get(0),A;A=_.get(B.rowMap,[B.rowMap2[D],"_cells",C]);return A?B.cellMap[A]:null},updateCellByRowCol:function(G,E,C,F){var D,B=this,A=B.constructor;if(D=A._getCellId(B.get(0),G,E)){A._updCell(B.get(0),D,C,F)}return B},updateCell:function(C,B,D){var A=this;A.constructor._updCell(A.get(0),C,B,D);return A},editCellbyRowCol:function(D,C){var B=this.get(0),A=B.box;return A._editCell(B,A._getCellId(B,D,C))},getActiveCell:function(){var A,B=this.get(0);if(B.properties.activeMode!="cell"){return }if(!(A=B.$activeCell)){return }return B.cellMap[B.getSubId(A)]},setActiveCell:function(E,C){var D,A,B=this.get(0);if(B.properties.activeMode!="cell"){return }if(!(A=this.getCellbyRowCol(E,C))){return }if(!(D=B.getSubNode("CELL",A._serialId)).isEmpty()){B.box._activeCell(B,D.get(0).id)}return this},resetGridValue:function(){return this.each(function(A){_.each(A.cellMap,function(B){B._$value=B.value});A.getSubNode("CELLA",true).removeClass("ui-dirty")})},getSubNodeInGrid:function(B,E,D){var C=this,A=(E&&D)?C.getCellbyRowCol(E,D):D?C.getHeaderByColId(D):E?C.getRowbyRowId(E):null;return C.getSubNode(B,(A&&A._serialId)||true)}},Initialize:function(){this.addTemplateKeys(["ALT","PROGRESS"])},Static:{Templates:{tagName:"div",style:"{_style}",BORDER:{tagName:"div",BOX:{tagName:"div",HEADER:{$order:0,tagName:"div",style:"{showHeader}",HI:{tagName:"div",style:"width:10000px;",HCELLS:{tagName:"div",style:"{headerHeight};",HFCELL:{$order:0,style:"{rowHandlerDisplay};width:{_row0DfW}px;",HFCELLA:{HHANDLER:{tagName:"div",style:"{colDDDisplay}"},FHANDLER:{tagName:"div",style:"{rowDDDisplay}"},GRIDCAPTION:{text:"{gridHandlerCaption}"}}},OTHERHCELLS:{$order:1,tagName:"text",text:"{header}"}}}},SCROLL:{$order:1,tagName:"div",className:"uibg-base ",BODY:{tagName:"div",text:"{rows}"}},FOOTER:{$order:2},COLLIST:{tagName:"div"}}},$submap:{header:{HCELL:{className:"{headerClass}",style:"width:{width}px;{headerStyle}",HCELLA:{HCELLCAPTION:{text:"{caption}"},SORT:{style:"{sortDisplay}"},HHANDLER:{$order:2,tagName:"div",style:"{colDDDisplay}"}}}},rows:{ROW:{tagName:"div",PREVIEW:{$order:1,tagName:"div",style:"{previewDisplay}",text:"{preview}"},CELLS:{$order:2,tagName:"div",className:"{rowCls} {rowClass}",style:"height:{rowHeight}px;{rowStyle}",FCELL:{$order:0,style:"{rowHandlerDisplay};width:{_row0DfW}px;{firstCellStyle}",className:"{firstCellClass}",FCELLA:{FCELLRULER:{style:"width:{_rulerW}px"},FCELLCMD:{$order:1,className:"{subClass}"},FHANDLER:{tagName:"div",style:"{rowDDDisplay}"},FCELLINN:{$order:2,ROWNUM:{},FCELLCAPTION:{$order:1,text:"{caption}"}}}},OTHERCELLS:{tagName:"text",$order:1,text:"{cells}"}},SUB:{$order:3,tagName:"div"},SUMMARY:{$order:4,tagName:"div",style:"{summaryDisplay}",text:"{summary}"}}},"rows.cells":function(E,D,C,B,A){var F=arguments.callee,G=F._m||(F._m={checkbox:".checkbox",button:".button",progress:".progress"});linb.UI.$doTemplate(E,D,C,B+(G[C.type]||".input"),A)},"rows.cells.input":{CELL:{style:"width:{width}px;{cellDisplay};{cellStyle}",className:"{cellCls} {cellClass}",CELLA:{tagName:"a",style:"{bgcolor};{color};",href:linb.$href,tabindex:"{_tabindex}",text:"{caption}"}}},"rows.cells.button":{CELL:{style:"width:{width}px;{cellDisplay};{cellStyle}",className:"{cellCls} {cellClass}",CELLA:{tagName:"button",tabindex:"{_tabindex}",text:"{caption}"}}},"rows.cells.checkbox":{CELL:{style:"width:{width}px;{cellDisplay};{cellStyle}",className:"{cellCls} {cellClass}",CELLA:{tagName:"a",href:linb.$href,tabindex:"{_tabindex}",CHECKBOX:{className:"{checkboxCls}"}}}},"rows.cells.progress":{CELL:{style:"width:{width}px;{cellDisplay};{cellStyle}",className:"{cellCls} {cellClass}",CELLA:{tagName:"a",href:linb.$href,tabindex:"{_tabindex}",PROGRESS:{tagName:"div",style:"width:{progress};",text:"{caption}"}}}}}},Appearances:{KEY:{display:"block",position:"absolute",overflow:"hidden"},BOX:{display:"block",position:"relative",overflow:"hidden"},HEADER:{background:linb.UI.$bg("head.gif","#CAE3FF repeat-x left top"),position:"relative",overflow:"hidden"},HI:{position:"relative"},SCROLL:{overflow:"auto",position:"relative"},COLLIST:{position:"absolute","z-index":"10",left:0,top:0,cursor:"pointer",visibility:"hidden",background:linb.UI.$bg("collist.gif","#FFF1A0 no-repeat center bottom"),border:"1px solid","border-color":"#fff #ACA899 #ACA899 #fff"},BODY:{overflow:"visible",position:"absolute","background-color":"#fff",left:0,top:"0","font-size":0,"line-height":0,"border-bottom":"1px solid #ACA899"},"SORT, SORT-checked":{width:"16px",height:"16px"},SORT:{background:linb.UI.$bg("icons.gif","no-repeat -110px -220px",true),position:"absolute",right:"2px",bottom:"2px"},"HCELL-mouseover SORT":{$order:1,"background-position":"-110px -240px"},"HCELL-mousedown SORT":{$order:2,"background-position":"-110px -260px"},"SORT-checked":{$order:3,"background-position":"-130px -220px"},"HCELL-mouseover SORT-checked":{$order:4,"background-position":"-130px -240px"},"HCELL-mousedown SORT-checked":{$order:5,"background-position":"-130px -260px"},HHANDLER:{position:"absolute",background:linb.browser.ie?"url("+linb.ini.file_bg+")":null,width:"4px",top:"0",right:"0",height:"100%",cursor:"e-resize","font-size":0,"line-height":0},"HCELLS, CELLS":{"overflow-y":linb.browser.ie?"hidden":"",position:"relative","white-space":"nowrap","font-size":"12px","line-height":"18px"},HCELLS:{"padding-bottom":"2px"},"CELLS-group":{$order:1,"border-right":"1px solid #ACA899"},"CELLS-group FCELL":{"border-right":0,"padding-right":"1px"},"CELLS-group FCELLCAPTION, CELLS-group FCELLA":{"font-weight":"bold",color:"#3764A0",overflow:"visible"},"PREVIEW,SUMMARY":{position:"relative",display:"none","padding-left":"16px","border-right":"1px solid #ACA899"},PREVIEW:{"border-bottom":"1px dashed #ACA899"},SUMMARY:{"border-top":"1px dashed #ACA899"},"CELLS-mouseover":{$order:4,"background-color":"#DFE8F6"},"CELL-disabled":{$order:8,"background-color":"#EBEADB"},"CELL-disabled CELLA":{$order:8,color:"#999"},"CELLS-active, CELL-active":{$order:5,"background-color":"#A3BAE9"},"CELLS-checked, CELL-checked, CELLS-checked CELLA, CELL-checked CELLA":{$order:6,"background-color":"#7199E8",color:"#fff"},"HFCELLA, FCELLA":{"-moz-box-flex":"1","-moz-user-select":"none",display:"block",position:"relative",overflow:"hidden",height:"100%"},FCELLA:{"text-align":"left","padding-left":"4px"},FHANDLER:{position:"absolute",height:"4px",left:"0px",width:"100%",bottom:"0px",cursor:"n-resize","z-index":10,"font-size":0,"line-height":0},"HFCELL, HCELL":{height:"100%","border-left":"1px solid #fff","border-top":"1px solid #fff","border-right":"1px solid #A2BBD9",padding:0,"vertical-align":"top","font-size":"12px","line-height":"14px"},"HCELL-mouseover":{background:linb.UI.$bg("head-mouseover.gif","#FFF1A0 repeat-x left top")},ROW:{position:"relative",zoom:linb.browser.ie?1:null,"border-top":"1px solid #A2BBD9","font-size":0,"line-height":0},ROWNUM:{"padding-right":"6px",color:"#808080"},"FCELL, CELL":{"padding-left":"1px","border-right":"1px solid #A2BBD9",height:"100%",position:"relative",overflow:linb.browser.ie6?"hidden":"","font-size":"12px","line-height":"20px","vertical-align":"top"},ALT:{"background-color":"#EFF8FF"},"CELL-label a":{color:"#000"},"CELL-input":{},"CELL-number":{"text-align":"right"},"CELL-checkbox":{"text-align":"center"},"CELL-button CELLA":{width:"100%"},"CELL-mouseover":{$order:5,"background-color":"#DFE8F6"},HCELLA:{position:"relative"},"HCELLA, CELLA":{display:"block",overflow:"hidden","-moz-box-flex":"1","-moz-user-select":"none",height:"100%",color:"#000",width:linb.browser.ie?"100%":""},"CELLA-inline":{$order:5,display:"inline","-moz-box-flex":0},"HCELLA, HFCELLA":{"text-align":"center"},PROGRESS:{height:"100%","background-color":"#00ffff","text-align":"center",overflow:"visible",opacity:0.7,"*filter":"alpha(opacity=70)"},CHECKBOX:{cursor:"pointer",width:"16px",height:"16px",background:linb.UI.$bg("icons.gif","no-repeat -20px -70px",true)},"CELL-mouseover CHECKBOX":{$order:1,"background-position":"-20px -90px"},"CELL-mousedown CHECKBOX":{$order:2,"background-position":"-20px -110px"},"CHECKBOX-checked":{$order:3,"background-position":"0 -70px"},"CELL-mouseover CHECKBOX-checked":{$order:4,"background-position":"0 -90px"},"CELL-mousedown CHECKBOX-checked":{$order:5,"background-position":"0 -110px"},SUB:{"*zoom":1,height:0,position:"relative",overflow:"hidden","font-size":"1px","line-height":"1px"}},Behaviors:{HoverEffected:{FCELLCMD:"FCELLCMD",HCELL:"HCELL"},ClickEffected:{FCELLCMD:"FCELLCMD",CELL:"CELL",HCELL:"HCELL"},DropableKeys:["SCROLL","CELLS","FCELLCMD"],DragableKeys:["FCELL"],onSize:function(A,B){var C=A.getRoot();linb.UI.$tryResize(A,B.width?C.width():null,C.height?C.height():null)},HFCELLA:{onClick:function(A,B,C){A.getSubNode("COLLIST").onClick(true)}},SCROLL:{onScroll:function(B,C,D){var A=D.scrollLeft||0;if(B.$sl!=A){B.getSubNode("HEADER").get(0).scrollLeft=B.$sl=A}}},HHANDLER:{onMousedown:function(G,I,A){var D=G.properties,E=linb(A),H=E.parent(2).width()-D._minColW,J=G.getSubNode("SCROLL"),C=J.offset().left+J.width()-linb.Event.getPos(I).left-4,B=G.getSubId(A),F=G.colMap[B];if(D.disabled){return false}if(F&&F.disabled){return false}E.startDrag(I,{horizontalOnly:true,dragType:"blank",dragDefer:2,maxLeftOffset:H,maxRightOffset:C,targetReposition:false});linb.use(A).parent(2).onMouseout(true,{$force:true}).onMouseup(true)},onDragbegin:function(A,B,C){linb.DragDrop.getProfile().proxyNode.css({height:A.getRoot().height()+"px",width:"4px",backgroundColor:"#ddd",cursor:"e-resize"})},onDrag:function(B,D,F){var E=linb.DragDrop,C=E.getProfile(),A=0;if(C.x<=C.restrictedLeft||C.x>=C.restrictedRight){A=true}if(A){if(!B._limited){C.proxyNode.css("backgroundColor","#ff6600");B._limited=true}}else{if(B._limited){C.proxyNode.css("backgroundColor","#ddd");B._limited=0}}},onDragstop:function(E,F,A){var C=linb(A).parent(2),H=C.width()+linb.DragDrop.getProfile().offset.x,D=E.colMap[E.getSubId(A)];C.width(H);if(D){D.width=H}var B=[],G=[];if(_.str.startWith(linb.use(A).parent().id(),E.keys.HFCELLA)){E.box._setRowHanderW(E,H)}else{var I=E.colMap[E.getSubId(A)]._cells;_.each(I,function(J){B.push(E.getSubNode(E.keys.CELL,J).id())});linb(B).width(H)}E.getSubNode("SCROLL").onScroll();E.box._ajdustBody(E);E._limited=0},onClick:function(){return false},onDblclick:function(E,H,A){if(E.getKey(linb.use(A).parent().id())==E.keys.HFCELLA){E.box._setRowHanderW(E,true);return }var B=E.properties,C=E.getSubId(A),F=E.colMap[C],K=F._cells,L=E.getClass("CELLA","-inline"),D,I=[],G=[],J;_.each(K,function(M){D=E.getSubNode("CELLA",M);if(D._nodes.length){I.push(D.get(0));G.push(D.addClass(L).width())}});G.push(B._minColW);J=parseInt(Math.max.apply(null,G));if(J>B._maxColW){J=B._maxColW}linb(I).parent().width(J);linb.use(A).parent(2).width(F.width=J);linb(I).removeClass(L);E.box._ajdustBody(E);return false}},FHANDLER:{onMousedown:function(D,E,A){var B=D.properties,H=D.rowMap[D.getSubId(A)],C=linb(A),I=C.parent(3).height()-B._minRowH,G=D.getSubNode("SCROLL"),F=G.offset().top+G.height()-linb.Event.getPos(E).top-4;if(B.disabled||(H&&H.disabled)){return false}C.startDrag(E,{verticalOnly:true,dragType:"blank",dragDefer:2,maxTopOffset:I,maxBottomOffset:F,targetReposition:false});linb.use(A).parent(2).onMouseout(true,{$force:true}).onMouseup(true)},onDragbegin:function(A,B,C){linb.DragDrop.getProfile().proxyNode.css({width:A.getRoot().width()+"px",height:"4px",backgroundColor:"#ddd",cursor:"n-resize"})},onDrag:function(B,D,F){var E=linb.DragDrop,C=E.getProfile(),A=0;if(C.y<=C.restrictedTop||C.y>=C.restrictedBottom){A=true}if(A){if(!B._limited){C.proxyNode.css("backgroundColor","#ff6600");B._limited=true}}else{if(B._limited){C.proxyNode.css("backgroundColor","#ddd");B._limited=0}}},onDragstop:function(B,C,F){var E=linb(F).parent(3),A=E.height()+linb.DragDrop.getProfile().offset.y,D=B.rowMap[B.getSubId(F)];if(linb.browser.ie&&A%2==1){A+=1}E.height(A);if(_.str.startWith(linb.use(F).parent().id(),B.keys.HFCELLA)){B.properties.headerHeight=A;linb.UI.$tryResize(B,null,B.getRoot().height())}else{D.height=A}B._limited=0},onDblclick:function(C,E,G){var D=C.properties,A=C.getSubId(G),F,B;if(A){F=C.rowMap[A];B=C.getSubNode("CELLS",A);B.height(F.height=B.height("auto").height())}else{B=C.getSubNode("HCELLS");B.height(C.properties.headerHeight=B.height("auto").height());linb.UI.$tryResize(C,null,C.getRoot().height())}return false},onClick:function(){return false}},FCELLCMD:{onClick:function(A,C,E){var B=A.properties,D=A.rowMap[A.getSubId(E)];if(B.disabled||D.disabled){return false}if(!D.sub){return false}A.box._setSub(A,D,!D._checked);return false}},HCELL:{onClick:function(F,I,A){var C=F.properties,B=F.getSubId(A),D=F.colMap[B];linb(A).first().focus();if(C.disabled||D.disabled){return false}if(!(("colSortable" in D)?D.colMovable:C.colSortable)){return }var G=D._order||false,L=D.type||"input",M=D.sortby,H=_.arr.indexOf(C.header,D),K=arguments.callee,J=K.fun||(K.fun=function(O,X,Q,P,U,Y){var S,R,W=arguments.callee;if(X){S=X.sub;R=O.getSubNode("SUB",X._serialId).get(0)}else{X={_created:true};S=O.properties.rows;R=O.getSubNode("BODY").get(0)}var k=[],j=[],g=[],T,V;_.arr.each(S,function(c){if(c.sub&&c.sub.length>1){W(O,c,Q,P,U,Y)}k[k.length]=(T=c.cells)?(T=T[Q])?T.value:"":c[Q];j[j.length]=j.length});if(typeof U!="function"){switch(P){case"number":V=function(c){return parseFloat(c)||0};break;case"date":V=function(c){return new Date(c).getTime()||0};break;default:V=function(c){return c||""}}U=function(c,i){c=V(k[c]);i=V(k[i]);return(c>i?1:c==i?0:-1)*(Y?1:-1)}}j.sort(U);var e=X._created,h=_.copy(S),d;if(e){k=R.childNodes}_.arr.each(j,function(l,c){S[c]=h[l];if(e){g[c]=k[l]}});if(e){var N=document.createDocumentFragment();for(var Z=0;T=g[Z];Z++){N.appendChild(T)}R.appendChild(N)}});J(F,"",H,L,M,G);F.getSubNode("SORT",true).css("display","none");var E=F.getSubNode("SORT",D._serialId).css("display","");E.tagClass("-checked",!(D._order=!D._order));F.box._asy(F);delete F.$allrowscache;return false},onMousedown:function(B,D,G){var C=B.properties;if(C.disabled||!C.colMovable){return }var A=B.colMap[B.getSubId(G)];if(!(("colMovable" in A)?A.colMovable:1)){return }if(false===B.boxing().beforeColDrag(B,A.id)){return }var H=linb.Event.getPos(D),F=linb(G),E=B.getSubId(G);F.startDrag(D,{dragType:"icon",shadowFrom:G,dragCursor:"pointer",targetLeft:H.left+12,targetTop:H.top+12,targetReposition:false,dragDefer:2,dragKey:B.$linbid+":col",dragData:F.id()})},onDragbegin:function(A,B,C){linb(C).onMouseout(true,{$force:true}).onMouseup(true)},beforeMouseover:function(A,B,C){if(false===A.box._colDragCheck(A,C)){return }linb.DragDrop.setDropElement(C).setDropFace(C,"move")},beforeMouseout:function(A,B,C){linb.DragDrop.setDropElement(null).setDropFace(null,"none");if(false===A.box._colDragCheck(A,C)){return }},onDrop:function(F,K,A){if(false===F.box._colDragCheck(F,A)){return }var D=F.properties,J=linb.DragDrop.getProfile().dragData,I=J&&F.getSubId(J),E=F.getSubId(A);var B=F.colMap,H=B[I],C=B[E];if(false===F.boxing().beforeColMoved(F,H.id,C.id)){return }linb.DragDrop.setDropFace(A,"none");var L=_.arr.subIndexOf(D.header,"_serialId",I),G=_.arr.subIndexOf(D.header,"_serialId",E);if(L===G||L===G-1){return }F.getSubNode("HCELL",E).addPrev(linb.DragDrop.getProfile().dragData);_.each(C._cells,function(P,O){F.getSubNode("CELL",P).addPrev(F.getSubNode("CELL",H._cells[O]))});var N=D.header[L];_.arr.removeFrom(D.header,L);_.arr.insertAny(D.header,N,G);var M=F.queryItems(D.rows,true,true);_.arr.each(M,function(O){O=O.cells?O.cells:O;if(!O||O.constructor!=Array){return }N=O[L];_.arr.removeFrom(O,L);_.arr.insertAny(O,N,G)});F.boxing().afterColMoved(F,H.id,C.id);delete F.$allrowscache},onMouseover:function(C,E,F){if(C.properties.disabled||!C.properties.colHidable){return }var A=C.colMap[C.getSubId(F)];if(!(("colHidable" in A)?A.colHidable:1)){return }_.resetRun(C.$linbid+":collist",null);var D={},G=linb.use(F).offset(null,C.getSubNode("BOX")),B=linb.use(F).cssSize();if(B.width<16){return }D.height=B.height;var A=C.colMap[C.getSubId(F)];D.width=14;D.left=G.left;D.top=G.top;C.getSubNode("COLLIST").cssRegion(D).css("visibility","visible")},onMouseout:function(B,C,D){if(B.properties.disabled||!B.properties.colHidable){return }var A=B.colMap[B.getSubId(D)];if(!(("colHidable" in A)?A.colHidable:1)){return }_.resetRun(B.$linbid+":collist",function(){B.getSubNode("COLLIST").css({visibility:"hidden",left:0,top:0})})}},COLLIST:{onMouseover:function(A,B,C){_.resetRun(A.$linbid+":collist",null)},onMouseout:function(A,B,C){_.resetRun(A.$linbid+":collist",function(){linb.use(C).css("visibility","hidden")})},onClick:function(C,D,E){if(!C.properties.colHidable){return }if(!C.$col_pop){var B=[],A;_.arr.each(C.properties.header,function(F){if(("colHidable" in F)?F.colHidable:1){B.push({id:F.id,caption:F.caption,type:"checkbox",value:true})}});A=C.$col_pop=new linb.UI.PopMenu({hideAfterClick:false,items:B}).render(true);A.onMenuSelected(function(I,G,H){var F=1;_.arr.each(I.properties.items,function(J){if(J.value!==false){return F=false}});if(!F){C.boxing().showColumn(G.id,G.value)}else{I.getSubNodeByItemId("CHECKBOX",G.id).tagClass("-checked");G.value=true}})}C.$col_pop.pop(E)}},CELLS:{afterMouseover:function(A,B,C){if(A.properties.activeMode=="row"){linb.use(C).tagClass("-mouseover")}},afterMouseout:function(A,B,C){if(A.properties.activeMode=="row"){linb.use(C).tagClass("-mouseover",false)}},onDblclick:function(A,C,E){var B=A.properties,D=A.rowMap[A.getSubId(E)];if(B.disabled||D.disabled){return false}if(A.onDblClickRow){A.boxing().onDblClickRow(A,D,C,E)}return false},onClick:function(A,C,E){var B=A.properties,D=A.rowMap[A.getSubId(E)];if(D.group){A.getSubNode("FCELLCMD",D._serialId).onClick()}}},CELL:{afterMouseover:function(A,B,C){if(A.properties.activeMode=="cell"){linb.use(C).tagClass("-mouseover")}},afterMouseout:function(A,B,C){if(A.properties.activeMode=="cell"){linb.use(C).tagClass("-mouseover",false)}}},CELLA:{onDblclick:function(C,G,A){var I=C.cellMap[C.getSubId(A)];if(!I){return }var F=C.box,E=F.getCellPro,H=E(C,I,"type"),D=E(C,I,"disabled"),B=E(C,I,"editable");if(!D&&(!B||(H=="button"||H=="label"))){C.boxing().onDblClickCell(C,I,G,A)}},onClick:function(F,K,A){var M=F.cellMap[F.getSubId(A)];if(!M){return }var D=F.properties,I=F.box,H=I.getCellPro,L=H(F,M,"type"),G=H(F,M,"disabled"),B=H(F,M,"event"),J=D.activeMode,E=H(F,M,"editable"),C;if(!G&&(!E||(L=="button"||L=="label"))){if(typeof B=="function"&&false===B.call(F._host||F,F,M,null,null,K,A)){}else{F.boxing().onClickCell(F,M,K,A)}if(L=="button"){return false}}if(!G&&L=="checkbox"){if(E){I._updCell(F,M,!M.value)}}if(!D.editable){if(J=="cell"){if(H(F,M,"disabled")){return false}C=linb(A).parent().id();I._sel(F,"cell",A,C,K)}else{if(J=="row"){if(D.disabled||M._row.disabled){return false}C=linb(A).parent(2).id();I._sel(F,"row",A,C,K)}}}linb.use(A).focus();return false},onFocus:function(D,H,A){var C=D.properties,F=D.box,E=F.getCellPro,I=D.cellMap[D.getSubId(A)],G=C.activeMode,B;if(E(D,I,"editable")){if(E(D,I,"disabled")){return false}F._editCell(D,I._serialId);_.asyRun(function(){linb.use(A).parent().onMouseout(true,{$force:true}).parent().onMouseout(true,{$force:true})})}if(!C.editable){if(G=="cell"){B=linb.use(A).parent().id();F._activeCell(D,B)}else{if(G=="row"){B=linb.use(A).parent(2).id();F._activeRow(D,B)}}}},onKeydown:function(D,I,A){var Q=linb.Event.getKey(I),O=Q[0],B=Q[2],N=linb(A),F=D.getSubNode("BODY"),E=F.nextFocus(true,true,false),M=F.nextFocus(false,true,false);switch(O){case"tab":if(B){if(A!=E.get(0)){E.focus();return false}}else{if(A!=M.get(0)){M.focus();return false}}break;case"left":if(N.get(0)==E.get(0)){M.focus()}else{N.nextFocus(false)}return false;break;case"right":if(N.get(0)==M.get(0)){E.focus()}else{N.nextFocus()}return false;break;case"up":if(N.get(0)==E.get(0)){M.focus();return }case"down":var H=1,C=D.keys.FCELL,P=N.parent().get(0),J=P.parentNode.childNodes.length;while(P=P.previousSibling){H++}P=N.parent(2).get(0);if(!D.$allrowscache){var K=D.getSubNode("CELLS",true).get();_.filter(K,function(R){return !!R.offsetWidth&&D.getKey(R.lastChild.id)!=C});D.$allrowscache=K}var G=_.arr.indexOf(D.$allrowscache,P),L=D.$allrowscache.length;if(O=="up"){G--;if(G==-1){G=L-1;H--;if(H==0){H=J}}}else{G++;if(G==L){G=0;H++;if(H==J+1){H=1}}}node=linb(D.$allrowscache[G]).first().next(H-1).first();if(!node.isEmpty()){node.focus()}return false;break}}},FCELL:{onClick:function(B,D,F){var C=B.properties,E=B.rowMap[B.getSubId(F)],A=B.box;if(!E.group){if(C.disabled||E.disabled){return false}if(C.activeMode=="row"){A._sel(B,"row",F,F,D)}if(E.cells[0]){linb.use(F).next().first().focus()}}}}},DataModel:{directInput:true,listKey:null,selMode:{ini:"none",listbox:["single","none","multi"]},dock:"fill",altRowsBg:{ini:false,action:function(E){var D=this;var C=D.getClass("ALT"),A=D.getSubNode("CELLS",true),F,B;A.removeClass(C);if(E){F=[];B=0;A.each(function(H,G){if(H.offsetHeight){H=linb([H]);if((B++)%2==1){if(!H.hasClass(C)){H.addClass(C)}}else{if(H.hasClass(C)){H.removeClass(C)}}}});linb(F).addClass(C)}}},rowNumbered:{ini:false,action:function(J){var I=this,G=I.CF.getNumberedStr||function(O){return O},C=I.getSubNode("ROWNUM",true),F=0,B=I.rowMap,N,H=0,E=0,D=[],A=[],M="",K,L;if(J){C.each(function(O){if(O.parentNode.offsetHeight){N=B[I.getSubId(O.id)];E=N._layer;if(E>H){D.push(F);A.push(M);M=M+F+".";F=0}else{if(E<H){while(E<H--){F=D.pop();M=A.pop()}}}F++;H=E;K=G(M+F);if(L=O.firstChild){if(L.nodeValue!=K){L.nodeValue=K}}else{O.appendChild(document.createTextNode(K))}}})}else{C.text("")}}},editable:false,$subMargin:16,iniFold:true,animCollapse:false,position:"absolute",width:300,height:200,_minColW:5,_maxColW:300,_minRowH:20,gridHandlerCaption:{ini:"",action:function(A){this.getSubNode("GRIDCAPTION").get(0).innerHTML=A}},rowHandlerWidth:{ini:100,set:function(A){return this.each(function(B){if(B.renderId){B.box._setRowHanderW(B,A)}else{B.rowHandlerWidth=A}})}},showHeader:{ini:true,action:function(A){this.getSubNode("HEADER").css("display",A?"":"none")}},headerHeight:{ini:18,action:function(A){this.getSubNode("HCELLS").height(A);linb.UI.$tryResize(this,this.getRoot().width(),this.getRoot().height())}},rowHeight:{ini:20,action:function(A){this.getSubNode("CELLS",true).height(A)}},_colDfWidth:80,rowHandler:{ini:true,action:function(A){this.getSubNode("HFCELL").css("display",A?"":"none");this.getSubNode("FCELL",true).css("display",A?"":"none");this.box._ajdustBody(this)}},rowResizer:{ini:true,action:function(A){this.getSubNode("FHANDLER",true).css("display",A?"":"none")}},colHidable:false,colResizer:{ini:true,action:function(A){this.getSubNode("HHANDLER",true).css("display",A?"":"none")}},colSortable:{ini:true,action:function(A){if(!A){this.getSubNode("SORT",true).css("display","none")}}},colMovable:false,header:{ini:{},set:function(A){return this.each(function(B){if(B.renderId){B.boxing()._refreshHeader(A)}else{B.properties.header=B.box._adjustHeader(A)}})}},rows:{ini:{},set:function(A){return this.each(function(B){if(B.renderId){B.boxing().removeAllRows().insertRows(A)}else{B.properties.rows=B.box._adjustRows(A)}})}},activeMode:{ini:"row",listbox:["row","cell","none"],action:function(B){var A=this;if(B!="cell"&&A.$activeCell){linb(A.$activeCell).tagClass("-active",false);delete A.$activeCell}if(B!="row"&&A.$activeRow){linb(A.$activeRow).tagClass("-active",false);delete A.$activeRow}}}},EventHandlers:{onGetContent:function(A,B,C){},onRowSelected:function(A,C,B){},beforeColDrag:function(A,B){},beforeColMoved:function(B,C,A){},afterColMoved:function(B,C,A){},beforeRowActive:function(A,B){},afterRowActive:function(A,B){},beforeCellActive:function(B,A){},afterCellActive:function(B,A){},beforeIniEditor:function(B,A){},beforeCellUpdated:function(C,A,B){},afterCellUpdated:function(C,A,B){},onDblClickRow:function(A,D,B,C){},beoforeComboPop:function(C,B,A,F,D,E){},onClickCell:function(B,A,C,D){},onDblClickCell:function(B,A,C,D){}},RenderTrigger:function(){var B=this,C=B.properties,A=B.boxing();B.destroyTrigger=function(){var D=this,E=D.properties;_.breakO([D.colMap,D.rowMap,D.cellMap],3);E.header.length=0;E.rows.length=0};B.$cache_editor={};if(!C.iniFold){A._expendRows(C.rows)}B.box._asy(B);B.box._ajdustBody(B)},_asy:function(B){var C=B.properties,A=B.boxing(),D=B.$linbid;if(C.altRowsBg){_.resetRun(D+"1",function(){A.setAltRowsBg(true,true)})}if(C.rowNumbered){_.resetRun(D+"2",function(){A.setRowNumbered(true,true)})}},_setRowHanderW:function(C,F){var I=C.properties,D=I.$subMargin,A=C.rowMap,G=C.getSubNode("HFCELL"),B,H;if(typeof F=="number"){H=F}else{if(F===true){var E=[],J;C.getSubNode("FCELLINN",true).each(function(K){if((J=K.parentNode).parentNode.offsetWidth>0&&linb.Dom.getStyle(J,"overflow")!="visible"){if(B=A[C.getSubId(K.id)]){E.push(linb([K]).width()+B._layer*D)}}});E.push(I._minColW);H=parseInt(Math.max.apply(null,E))+D*2}else{H=G.width()}}if(H){if(H<I._minColW){H=I._minColW}if(I.rowHandlerWidth!=H){G.width(I.rowHandlerWidth=H);C.getSubNode("FCELL",true).width(H);C.getSubNode("FCELLRULER",true).each(function(K){B=A[C.getSubId(K.id)];K.style.width=B._layer*D+"px"});C.box._ajdustBody(C)}}},_onStartDrag:function(A,B,C){var D=linb.Event.getPos(B);A.$_ond=C;linb.use(C).startDrag(B,{dragType:"icon",shadowFrom:linb.use(C).parent()._get(0),targetLeft:D.left+12,targetTop:D.top+12,dragCursor:"pointer",dragDefer:2,dragKey:A.box.getDragKey(A,C),dragData:A.box.getDragData(A,B,C)});return false},_onDropTest:function(B,G,A,J,F,L){var C=F&&F.domId,E=A,H=F&&F.profile,K;if(E){var D=B.getKey(E),I=B.keys,M=B.rowMap[B.getSubId(E)];if(D==I.FCELLCMD&&!M.sub){return false}}if(H&&H.$linbid==B.$linbid){if(C&&B.getSubId(C)==B.getSubId(E)){return false}K=B.$_ond;A=linb(A).get(0);if(_.get(A,["parentNode","previousSibling"])==K){return false}do{if(A==K){A=K=null;return false}}while(A&&(A=A.parentNode)&&A!==document&&A!==window);A=K=null}},_onDragstop:function(B,E,F,A,D,C){delete B.$_ond},_onDrop:function(E,I,C,L,H,N){linb.DragDrop.setDragIcon("none");if(!H.profile||!H.profile[E.KEY]){return }var G=E.getKey(C),D=H.profile,B=H.domId,F,K=E.keys,M=linb.absObj.$specialChars,J=E.boxing(),A=D.rowMap[D.getSubId(B)],O=E.rowMap[E.getSubId(C)];A=_.clone(A,function(Q,P){return !M[(P+"").charAt(0)]});D.boxing().removeRows([A.id]);if(G==K.SCROLL){J.insertRows([A],null,null,false)}else{if((G==K.FCELLCMD)&&O.sub){J.insertRows([A],O.id,null,false)}else{if(G==K.CELLS){J.insertRows([A],O._pid,O.id,true)}}}return false},_beforeSerialized:function(C){var E=arguments.callee.upper.call(this,C),A=C.properties,D=linb.absObj.$specialChars,B;E.properties.header=_.clone(A.header,function(G,F){return !D[(F+"").charAt(0)]});E.properties.rows=_.clone(A.rows,function(G,F){return !D[(F+"").charAt(0)]});if(E.properties.header.length===0){delete E.properties.header}if(E.properties.rows.length===0){delete E.properties.rows}return E},_clsCache:{},_colDragCheck:function(D,F){var A=linb.DragDrop.getProfile(),C=A.dragKey,E=A.dragData,B=D.colMap[D.getSubId(F)];if(!(("colMovable" in B)?B.colMovable:1)){return false}if(!C||!E||C!=(D.$linbid+":col")){return false}if(E==linb.use(F).id()||E==linb.use(F).pre().id()){return false}},_prepareData:function(A){var B=arguments.callee.upper.call(this,A),D="display:none";A.rowMap2={};A.rowMap={};A.cellMap={};var C=A.properties;B.showHeader=C.showHeader?"":D;B.colDDDisplay=C.colResizer?"":D;B.rowDDDisplay=C.rowResizer?"":D;B.rowHandlerDisplay=C.rowHandler?"":D;B.headerHeight=B.headerHeight?("height:"+B.headerHeight+"px;"):"";if(C.header&&C.header.constructor!=Array){C.header=[]}if(C.rows&&C.rows.constructor!=Array){C.rows=[]}B.header=this._prepareHeader(A,C.header);B._row0DfW=B.rowHandlerWidth;arguments.callee.upper.call(this,A);B.rows=this._prepareItems(A,C.rows);return B},_prepareHeader:function(B,D){var G=B.colMap2={},F=B.colMap={},A=linb.UI.$tag_subId,H=B.properties,C=[],I,J,E="display:none";_.arr.each(D,function(L,K){I="h_"+B.pickSubId("header");if(typeof L=="string"){L=D[K]={id:L}}if(typeof L.id!="string"){L.id=L.caption||(_()+"")}L._cells={};L[A]=I;F[I]=L;L.width=L.width||H._colDfWidth;J={sortDisplay:E,rowHandlerDisplay:H.rowHandler?"":E};J[A]=I;J._tabindex=H.tabindex;J.colDDDisplay=(("colResizer" in L)?L.colResizer:H.colResizer)?"":"display:none";if(!L.type){L.type="label"}if(!L.caption){L.caption=L.id}linb.UI.adjustData(B,L,J);G[L.id]=I;C.push(J)});return C},_renderCell:function(C,A,J){var O=C.box.getCellPro,L=J["linb.Dom"],Q=L?A:J,D=O(C,A,"type"),F="",E="",M,K=(!L)&&J.caption,N=/</g,P=arguments.callee,R=P._dcls||(P._dcls=C.getClass("CELL","-disabled")),B=P._ren||(P._ren=function(V,T,S,U){return typeof T.$caption=="string"?T.$caption:typeof S.caption=="string"?S.caption:typeof T.renderer=="function"?T.renderer(T):typeof U=="function"?U(T.value):String(T.value)||""}),I=P._f1=(P._f1=function(S){return linb.Date.getText(new Date(parseInt(S)),"ymd")}),H=P._f2=(P._f2=function(S){return(S.split("\n")[0]||"").replace(/ /g,"&nbsp;").replace(N,"&lt;")}),G=P._f3=(P._f3=function(S){return S*1000/10+"%"});switch(D){case"number":A.value=parseFloat(A.value)||0;M=K||B(C,A,Q);if(L){J.html(M||A.value,false)}break;case"datepicker":A.value=(parseInt(A.value)?new Date(parseInt(A.value)):new Date()).getTime();M=K||B(C,A,Q,I);if(L){J.html(M,false)}break;case"textarea":A.value=A.value||"";M=K||B(C,A,Q,H);if(L){J.html(M,false)}break;case"colorpicker":A.value="#"+linb.UI.ColorPicker._ensureValue(0,A.value);M=K||B(C,A,Q);F=linb.UI.ColorPicker.getTextColor(A.value);if(L){J.html(M,false);J.css("color",F).css("backgroundColor",A.value)}else{J.color="color:"+F+";";J.bgcolor="background-color:"+A.value+";"}break;case"checkbox":A.value=!!A.value;M=A.value+"";if(L){J.first().tagClass("-checked",A.value)}else{J.checkboxCls=C.getClass("CHECKBOX",A.value?"-checked":"")}break;case"progress":A.value=parseFloat(A.value)||0;A.value=Math.min(Math.max(A.value,0),1);M=K||B(C,A,Q,G);if(L){J.first().html(M,false).width(M)}else{J.progress=M}break;default:A.value=A.value||"";M=K||B(C,A,Q);if(L){J.html(M||A.value,false)}}A._$tips=M;var E=O(C,A,"disabled");if(!L){J.cellCls=C.getClass("CELL","-"+D)+(E?(" "+R):"");J.type=D;J.value=A.value;J.caption=M;J.cellStyle=O(C,A,"cellStyle");J.cellClass=O(C,A,"cellClass")}else{if(E){J.addClass(R)}else{J.removeClass(R)}}},_prepareItems:function(B,A,L){var M=this,G=B.properties,Q=G.$subMargin,W=B.rowMap2,U=B.rowMap,T=B.cellMap,K=L?U[W[L]]?(U[W[L]]._layer+1):0:0,D=linb.UI.$tag_subId,X=arguments.callee,V=X._id||(X._id=new _.id()),H=[],S,C,J,E,R,O,I,F="display:none";for(var P=0,N=A.length;P<N;P++){S="r_"+B.pickSubId("row");if(!A[P].id||W[A[P].id]){while(W[J=V.next()]){}A[P].id=J}E=A[P];E._pid=L;E._cells={};E._layer=K;E[D]=S;E._tabindex=G.tabindex;U[S]=E;J={id:E.id};if(E.group){J.rowCls=B.getClass("CELLS","-group")}if(E.summary){J.summaryDisplay="display:block;"}if(E.preview){J.previewDisplay="display:block;"}J._row0DfW=G.rowHandlerWidth;J._rulerW=K*Q;J.rowHeight=E.height||G.rowHeight;J.rowHandlerDisplay=G.rowHandler?"":F;J.rowDDDisplay=(("rowResizer" in E)?E.rowResizer:G.rowResizer)?"":F;C=J.cells=[];J[D]=S;J.subClass=E.sub?"uicmd-toggle2":"uicmd-empty";W[E.id]=S;if(E.group){E.cells=null}if(!"caption" in E){E.caption=""+(E.value||E.id)}if(E.caption&&!E.tips){E._$tips=E.caption}if(I=E.cells){_.arr.each(G.header,function(Y,Z){R=I[Z]||(I[Z]={});var c={};R._row=E;R._col=Y;R[D]="c_"+B.pickSubId("cell");M._adjustCell(B,R,c);C.push(c);T[c[D]]=R;E._cells[Y.id]=c[D];Y._cells[E.id]=c[D]})}linb.UI.adjustData(B,E,J);H.push(J)}return H},_adjustCell:function(D,A,G){var B=this,F=D.properties,C=A._col,E;if(E=B.getCellPro(D,A,"cellRenderer")){A.renderer=E}linb.UI.adjustData(D,A,G);A._$value=A.value;if(!G.width){G.width=C.width}G._tabindex=F.tabindex;G.cellDisplay=C.visibility===false?"display:none;":"";B._renderCell(D,A,G)},_setSub:function(E,N,J){var C=E.domId,K=E.properties,F=E.rowMap2[N.id],G=E.getSubNode("FCELLCMD",F),I=E.getSubNode("SUB",F);if(linb.Thread.isAlive(E.key+E.id)){return }if(N._checked){if(!J){var H=I.height();if(K.animCollapse){I.animate({height:[H,0]},null,null,100,5,"expoIn",E.key+E.id).start()}else{I.height(0)}G.tagClass("-checked",false);N._checked=false;E.box._asy(E)}}else{if(J){var D=function(R,W,P,S,U,O){var V=R.boxing(),Q=R.properties;if(!W._created){delete W.sub;W._created=true;if(typeof O=="string"){U.html(W.sub=O,false)}else{if(_.isArr(O)){V.insertRows(O,W.id)}else{if(O["linb.Template"]||O["linb.UI"]){U.append(W.sub=O.render(true))}}}V._setCtrlValue(V.getUIValue(),true)}var T=U.height(true);if(Q.animCollapse){U.animate({height:[0,T]},null,function(){U.css({height:"auto"})},100,5,"expoOut",R.key+R.id).start()}else{U.css({height:"auto"})}S.tagClass("-checked");W._checked=true;R.box._asy(R)};var B=N.sub,L=function(O){D(E,N,C,G,I,O)},M;if((M=typeof B)=="string"||M=="object"){L(B)}else{if(E.onGetContent){var A=E.boxing().onGetContent(E,N,L);if(A){L(A)}}}}}delete E.$allrowscache},_getCellId:function(A,C,B){return _.get(A.rowMap,[A.rowMap2[C],"_cells",B])},_updCell:function(C,A,I,H){var D=C.box,F=linb.absObj.$specialChars,G,B;if(typeof A=="string"){G=C.cellMap[A]}else{G=A;A=G._serialId}if(!G){return }if(!_.isObj(I)){I={value:I}}I=_.filter(I,function(K,J){return !F[J.charAt(0)]||J=="$caption"});if(false===C.boxing().beforeCellUpdated(C,G,I)){return }delete G.caption;if(G.caption!==undefined){I.caption=I.caption;delete I.caption}_.merge(G,I,"all");B=C.getSubNode("CELLA",A);if("type" in I){var E={};D._adjustCell(C,G,E);B.parent().replace(_.str.toDom(C.buildItems("rows.cells",[E])))}else{D._renderCell(C,G,B)}C.boxing().afterCellUpdated(C,G,I);if("value" in I){if(H===false){G._$value=G.value}else{if(G.value===G._$value){B.removeClass("ui-dirty")}else{B.addClass("ui-dirty")}}}},_ensureValue:function(B,C){if(B.properties.selMode=="multi"){var A=(C||"").split(";");A.sort();return A.join(";")}else{return C}},_sel:function(C,D,F,N,S){var G=C.properties;if(G.activeMode!=D){return }var B=C.getSubId(N),T=D=="cell"?C.cellMap:C.rowMap,J=C.boxing(),I=T[B],V=linb.Event.getKey(S),E=D=="cell"?(I._row.id+"|"+I._col.id):I.id,L=G.selMode,H,K;switch(L){case"none":H=J.onRowSelected(C,I,F);break;case"multi":var P=J.getUIValue(),A=P?P.split(";"):[];if(A.length&&(V[1]||V[2])){K=false;if(V[2]&&D=="row"){if(C.$firstV._pid!=I._pid){return false}var M=G.rows;if(I._pid){var U=T[I._pid];if(U){M=U.sub}}var Q=_.arr.subIndexOf(M,"id",C.$firstV.id),O=_.arr.subIndexOf(M,"id",I.id),R;A.length=0;for(R=Math.min(Q,O);R<=Math.max(Q,O);R++){A.push(M[R].id)}}else{if(_.arr.indexOf(A,E)!=-1){_.arr.removeValue(A,E)}else{A.push(E)}}A.sort();P=A.join(";");if(J.getUIValue()==P){H=false}else{J.setUIValue(P);if(J.getUIValue()==P){H=J.onRowSelected(C,I,F)}}break}case"single":if(J.getUIValue()==E){H=false}else{C.$firstV=I;J.setUIValue(E);if(J.getUIValue()==E){H=J.onRowSelected(C,I,F)||K}}break}return H},_activeCell:function(C,E){if(C.properties.activeMode!="cell"){return }var B=C.getSubId(E),D=C.cellMap,A=D[B];if(C.beforeCellActive&&(false===C.boxing().beforeCellActive(C,A))){return }if(C.$activeCell){linb(C.$activeCell).tagClass("-active",false)}linb(C.$activeCell=E).tagClass("-active");C.boxing().afterCellActive(C,A)},_activeRow:function(C,E){if(C.properties.activeMode!="row"){return }var A=C.getSubId(E),D=C.rowMap,B=D[A];if(C.beforeRowActive&&(false===C.boxing().beforeRowActive(C,B))){return }if(C.$activeRow){linb(C.$activeRow).tagClass("-active",false)}linb(C.$activeRow=E).tagClass("-active");C.boxing().afterRowActive(C,B)},getCellPro:function(D,A,C){var B=A;return(C in B)?B[C]:((B=A._row)&&(C in B))?B[C]:((B=A._col)&&(C in B))?B[C]:((B=D.properties)&&(C in B))?B[C]:null},_editCell:function(E,C){var L=typeof C=="string"?E.cellMap[C]:C,I=E.box,H=I.getCellPro,K,F,J;if(!L){return }if(E.beforeIniEditor&&false===E.boxing().beforeIniEditor(E,L)){return }if(J=E.$curEditor){J.getRoot().setBlurTrigger(E.$linbid);if(J){_.tryF(J.undo)}E.$curEditor=null}K=H(E,L,"type");F=E.getSubNode("CELL",C);if(K=="checkbox"){F.first().focus();return }else{if(K=="button"||K=="label"){return }}var B=this,D=E.getSubNode("SCROLL"),A=F.offset(null,D),O=F.cssSize(),G=H(E,L,"editorFormat"),M=H(E,L,"editorReadonly"),N;if(E.$cache_editor[K]){J=E.$cache_editor[K]}else{J=new linb.UI.ComboInput({left:-1000,top:-1000,position:"absolute",visibility:"hidden",zIndex:100});switch(K){case"number":J.setType("none").setCustomStyle("INPUT","text-align:right;");break;case"progress":J.setType("none").setValueFormat("^(0([\\.]\\d*[0-9]+)|0|1)$").setCustomStyle("INPUT","text-align:right;");break;case"input":J.setType("none");break;case"textarea":J.setType("none").setMultiLines(true).setSaveBtn(true).onSave(function(P){P.boxing().hide()});_.tryF(J.setResizer,[true],J);break;case"listbox":case"combobox":case"helpinput":case"timepicker":case"datepicker":case"colorpicker":case"getter":case"popbox":case"cmdbox":J.setType(K).beoforeComboPop(function(T,U,R,S){var P=T.$cell,Q=H(E,P,"event");if(H(E,P,"disabled")){return false}if(typeof Q=="function"){return Q.call(E._host||E,E,P,T,U,R,S)}else{return E.boxing().beoforeComboPop(E,P,T,U,R,S)}});break}D.append(J);E.$cache_editor[K]=J}E.$curEditor=J;J.get(0).$cell=L;switch(K){case"listbox":case"combobox":case"helpinput":if(N=H(E,L,"editorListKey")){J.setListKey(N)}else{if(N=H(E,L,"editorListItems")){J.setItems(N)}}break}J.setValue(L.$editorValue||L.value,true);delete L.$editorValue;if(L.$tag){if(J.setCaption){J.setCaption(L.$tag)}else{if(J.setValue){J.setValue(L.$tag)}}}if(J.setReadonly){J.setReadonly(!!M)}if(G){if(typeof G=="function"){if(J.beforeFormatCheck){J.beforeFormatCheck(G)}}else{if(J.setValueFormat){J.setValueFormat(G)}}}J.undo=function(){if(!J){return }if(!E.properties.directInput){J.afterUIValueSet(null).beforeNextFocus(null);if(J.beforeFormatCheck){J.beforeFormatCheck(null)}if(J.setValueFormat){J.setValueFormat("")}J.setValue("",true)}J.reBoxing().hide();J=null};J.afterUIValueSet(function(R,Q,P){if(H(E,L,"type")=="number"){P=parseFloat(P)}B._updCell(E,C,{value:P,$caption:R.$caption})}).beforeNextFocus(function(T,Q,P,S){if(J){J.undo();var R=linb.Event.getEventPara(S);if(R.keyCode=="enter"){R.keyCode="down"}E.getSubNode("CELLA",L._serialId).onKeydown(true,R)}return false});J.getRoot().setBlurTrigger(E.$linbid,function(){if(J){J.undo()}return false});if(K=="textarea"){J.setWidth(Math.max(200,O.width+3)).setHeight(Math.max(100,O.height+2)).reLayout(true,true).reBoxing().popToTop(F,4,D)}else{J.setWidth(O.width+3).setHeight(O.height+2).reLayout(true,true);J.reBoxing().show((A.left-1)+"px",(A.top-1)+"px")}_.asyRun(function(){_.tryF(J&&J.activate,[],J)})},_ajdustBody:function(A){_.resetRun(A.$linbid+"4",function(){var B=A.getSubNode("BODY"),C,E=A.keys,D=A.properties.showHeader?A.getSubNode("HCELLS").last().get(0):B.nextFocus(false,true,false).get(0);if(D.id&&(C=A.getKey(D.id))&&(C==E.HCELL||(C==E.CELLA&&(D=D.parentNode)))){B.width(B.get(0).offsetHeight?D.offsetWidth+D.offsetLeft:0)}})},_adjustHeader:function(B){var C=_.copy(B),A;_.arr.each(C,function(E,D){if(typeof E!="object"){C[D]={id:E}}else{C[D]=_.copy(E)}});return C},_adjustRows:function(B){var C,A;if(_.isArr(B)&&typeof B[0]!="object"){C=[B]}else{C=_.copy(B)}_.arr.each(C,function(E,D){if(_.isArr(E)){C[D]={cells:E}}else{C[D]=_.copy(E)}A=C[D].cells=_.copy(C[D].cells);_.arr.each(A,function(G,F){if(typeof G!="object"){A[F]={value:G}}else{A[F]=_.copy(G)}})});return C},_showTips:function(D,C,F){if(D.onShowTips){return D.boxing().onShowTips(D,C,F)}if(!linb.Tips){return }var G=D.keys,I,H=G.HCELL+":",B,A,E;if(D.properties.disabled){return }A=C.id;E=C.parentNode.id;B=D.getSubId(A);if(A.indexOf(G.FCELL)==0||E.indexOf(G.FCELL)==0){I=D.rowMap[B]}else{if(A.indexOf(G.HCELL)==0||E.indexOf(G.HCELL)==0){I=D.colMap[B]}else{if(A.indexOf(G.CELL)==0||E.indexOf(G.CELL)==0){I=D.cellMap[B]}}}if(I){linb.Tips.show(F,("tips" in I)?I.tips:(I._$tips||I.caption))}else{linb.Tips.hide()}return true},_onresize:function(E,D,A){E.getSubNode("BORDER").cssSize({width:D,height:A});var F=E.getSubNode("HEADER"),C=E.getSubNode("SCROLL"),B=0;E.getSubNode("BOX").cssSize({width:D,height:A});if(D){F.width(D)}if(A){B=F.offsetHeight()}C.cssSize({width:D,height:A?(A-B):null});_.asyRun(function(){C.onScroll()})}}});Class("linb.UI.TextEditor",["linb.UI.Widget","linb.absValue"],{Instance:{activate:function(){var A=this.get(0);A.getSubNode("INPUT").focus();return this},_setCtrlValue:function(A){if(_.isNull(A)||!_.exists(A)){A=""}return this.each(function(C){var D=C.getSubNode("INPUT").get(0);if(D.value.replace(/(\r\n|\r)/g,"\n")!=A.replace(/(\r\n|\r)/g,"\n")){var B=D.scrollTop;D.value=A;D.scrollTop=B}})},_getCtrlValue:function(B){var A=this.get(0);return A.getSubNode("INPUT").attr("value").replace(/(\r\n|\r)/g,"\n").replace(/( +)(\n)/g,"$2").replace(/\t/g,"    ")}},Initialize:function(){var A=this.getTemplate();_.merge(A.FRAME.BORDER,{BOX:{tagName:"div",INPUT:{tagName:"textarea",tabindex:"{tabindex}",style:"{_css}"}},BAK1:{},BAK2:{tagName:"div"}},"all");this.setTemplate(A)},Static:{Appearances:{BOX:{width:"100%",height:"100%",left:0,top:0,position:"absolute",overflow:linb.browser.gek?"auto":"","z-index":"10"},INPUT:{"font-family":"Courier New, Courier, monospace","font-size":"12px","line-height":"14px",position:"absolute","background-color":"#fff",left:0,top:0,border:0,margin:0,padding:0,overflow:"auto","overflow-y":(linb.browser.gek||linb.browser.ie)?"auto":"","overflow-x":(linb.browser.gek||linb.browser.ie)?"hidden":""},"BAK1, BAK2":{"font-family":"Courier New, Courier, monospace","font-size":"12px",position:"absolute",visibility:"hidden",left:"-10000px",top:"-10000px"}},Behaviors:{INPUT:{onFocus:function(A,B,C){A.box._onchange(A,linb.use(C).get(0))},onChange:function(A,B,C){A.boxing().setUIValue(linb.use(C).get(0).value);A.box._onchange(A,linb.use(C).get(0))},afterKeydown:function(E,H,B){var J=E.properties,I,L;if(J.disabled||J.readonly){return }if(E.$change){delete E.$change}var K=linb.Event.getKey(H),D=linb.use(B).get(0),F=K[0];switch(F){case"tab":var A=linb.use(B).caret(),C=D.value.slice(A[0],A[1]);if(/(\n|\r)/.test(C)){I=D.value.slice(0,A[0]);if(C.charAt(0)!="\n"&&C.charAt(0)!="\r"){C=I.slice(A[0]=I.lastIndexOf("\n"))+C}if(linb.browser.ie){L=(L=I.match(/\r/g))?L.length:0;A[0]-=L;L=(L=(D.value.slice(0,A[1])).match(/\r/g))?L.length:0;A[1]-=L}linb.use(B).caret(A[0],A[1]);if(K[2]){C=C.replace(/(\n|\n\r)    /g,"$1")}else{C=C.replace(/(\n|\n\r)/g,"$1    ")}E.box.insertAtCaret(E,C);A[1]=A[0]+C.length;if(linb.browser.ie){L=(L=C.match(/\r/g))?L.length:0;A[1]-=L}linb.use(B).caret(A[0],A[1])}else{if(K[2]){linb.use(B).caret(A[0]-4,A[0]-4);A[0]-=4;A[1]-=4}else{E.box.insertAtCaret(E,"    ");A[0]+=4;A[1]+=4}}E.$pos=A;return false;case"enter":var M=E.box.getParas(E);I=M[1];var G=I.length-_.str.ltrim(I).length;if(I.charAt(I.length-1)=="{"){G+=4}if(G){E.box.insertAtCaret(E,"\n"+_.str.repeat(" ",G));E.$enter=true;return false}break;default:if(E.tips){E.tips.destroy();E.tips=null}}D=null},afterKeypress:function(C,F,A){if(C.properties.disabled||C.properties.readonly){return }var K=linb.Event.getKey(F),D=K[0];var H=arguments.callee,B=H.map||(H.map={space:1,enter:1,backspace:1,tab:1,"delete":1});if(D.length==1||B[D]){C.$change=true}switch(D){case"tab":if(linb.browser.opr){_.asyRun(function(){linb.use(A).caret(C.$pos[0],C.$pos[1])})}return false;case"enter":if(C.$enter){delete C.$enter;return false}case"}":if(K[2]){var M=C.box.getParas(C);var E=M[0],G=M[1],I=M[2],J=M[3];if(/ {4}$/.test(G)){var L=linb(A).scrollTop();J.value=J.value.substr(0,E).replace(/ {4}$/,"}")+J.value.substr(E,J.value.length);linb(J).onChange();C.box.setCaretTo(J,E-4+1,L);return false}}break}},afterKeyup:function(C,F,G){var B=linb.Event.getKey(F),A=B[0];var D=arguments.callee,E=D.map||(D.map={space:1,enter:1,backspace:1,tab:1,"delete":1});if(A.length==1||E[A]){C.$change=true}if(C.$change){delete C.$change;C.box._onchange(C,linb.use(G).get(0))}}}},DataModel:{left:0,top:0,width:200,height:200,position:"absolute",disabled:{ini:false,action:function(A){b.boxing().setReadonly(A)}},readonly:{ini:false,action:function(A){this.getSubNode("INPUT").attr("readonly",A).css("background",A?"#EBEADB":"")}}},EventHandlers:{onChange:function(C,B,A){}},RenderTrigger:function(){var A=this;if(A.properties.readonly){A.boxing().setReadonly(true,true)}var D=linb.browser.ie,C=A.getSubNode("INPUT").get(0),B=function(F){if(D&&F.propertyName!="value"){return true}var E=D?F.srcElement:this;A.box._onchange(A,E)};if(D){C.attachEvent("onpropertychange",B);C.attachEvent("ondrop",B);A.$ondestory=function(){C.detachEvent("onpropertychange",B);C.detachEvent("ondrop",B)}}else{C.addEventListener("input",B,false);C.addEventListener("dragdrop",B,false);A.$ondestory=function(){C.removeEventListener("input",B,false);C.addEventListener("dragdrop",B,false)};A.getSubNode("BOX").$firfox2()}},_onchange:function(B,C){if(B.onChange){var A=C.id;_.resetRun(B.$linbid+"_drop",function(){A=linb.Dom.byId(A).value||"";B.$prevV=B.$prevV||"";if(A!=B.$prevV){B.boxing().onChange(B,B.$prevV,A);B.$prevV=A}})}},_prepareData:function(A){var B=arguments.callee.upper.call(this,A);if(linb.browser.kde){B._css="resize:none;"}return B},_onresize:function(D,C,A){var B=arguments.callee.upper.apply(this,arguments);D.getSubNode("BOX").cssSize(B);D.getSubNode("INPUT").cssSize(B)},insertAtCaret:function(C,E){var A=C.getSubNode("INPUT"),D=A.scrollTop()||null,B;A.onChange();B=A.caret(E);this.setCaretTo(A.get(0),B||0,D)},setCaretTo:function(A,G,D){A.focus();var C,F,B,E=linb([A]);if(_.isNumb(D)){E.scrollTop(D)}if(D===true){if(E.get(0).tagName.toLowerCase()=="textarea"&&E.scrollHeight()!==E.offsetHeight()){C=E.attr("value").substr(0,G);F=E.clone().id("").css({visibility:"hidden",position:"absolute",left:5000+"px"}).attr("value",C);linb("body").append(F);B=Math.max((F.scrollHeight()>F.offsetHeight())?F.scrollHeight()-30:0,0);E.scrollTop(B);F.remove()}}E.caret(G,G)},getParas:function(C){var O=C.getSubNode("INPUT"),S=arguments.callee,D=S.reg||(S.reg=/\r\n/g),K=O.get(0).value,G=O.caret();if(G[0]<0){G[0]=0}var R=0,Q=K.substr(0,G[0]).match(D);if(Q){R=Q.length}K=K.replace(D,"\n");var M=K.substr(0,G[0]-R);var L=M.lastIndexOf("\n"),I=M.substr(L+1,G[0]-L),J=O.innerWidth(),P=C.getSubNode("BAK1"),N=C.getSubNode("BAK2");if(M.charAt(M.length-1)=="\n"){M+="*"}N.width(J);var H=P.html(I.replace(/ /g,"&nbsp;"),false).width(),F=N.html(M.replace(/\n/g,"<br />"),false).height()-O.scrollTop();if(H>J){N.html(I,false);var A=I;var B=N.height();while(A){A=A.replace(/ [^ ]*$/,"");N.html(A,false);if(N.height()!=B){break}}A=I.substr(A.length,I.length-A.length);H=P.html(A,true).width()}P.html("",false);N.html("",false);var E=C.getRoot().offset();E.left+=H;E.top+=F;return[G[0],I,E,O.get(0),M]}}});Class("linb.Coder",null,{Initialize:function(){linb.CSS.addStyleSheet('.sh {font-family: "Courier New" , Courier, mono;font-size: 12px;border: 1px solid #92D1E4;background:#fff;}.sh .sh-con{padding-bottom:3px;background-color: #fff;}.sh .sh-cmd{padding: 3px 8px 3px 8px;font: 9px Verdana, Geneva, Arial, Helvetica, sans-serif;color: silver;border-bottom: 1px solid #EBEADB;}.sh .sh-cmd a{font-size: 12px;color: blue;text-decoration: none;margin-right: 10px;}.sh .sh-cmd a:hover{color: red;}.sh .cmd-ruler{width:25px;}.sh .sh-toggle{width:16px;cursor:pointer;font-size:14px;color:blue;vertical-align:baseline;}.sh ol{color: #FF97A9; margin: 0px 0px 0px 45px; padding: 0; border-bottom: 1px solid #EBEADB; }.sh ol li{color: #000157;border-left: 3px solid #6CE26C;padding-left: 10px;line-height: 14px;list-style: decimal none;margin:0;border-bottom: 1px dashed #E2E2E2;}.sh-con span{vertical-align:inherit;'+(linb.browser.ie?"zoom:0;":"")+"}.sh .js .comment, .sh .php .comment{ color: green; }.sh .js .string, .sh .php .string{ color: #ff1493; }.sh .js .reg, .sh .php .reg{ color: #ff1493; }.sh .js .number,.sh .php .number { color: darkred; }.sh .js .keyword, .sh .php .keyword{ color: blue; }.sh .js .keyword2, .sh .php .keyword2 { font-weight: bold; color: red; }.sh .js .special, .sh .php .special{ font-weight: bold; color: navy; }.sh .php .vars{color:#079BFA}.sh .css .comment { color: green; }.sh .css .string { color: red; }.sh .css .colors { color: darkred; }.sh .css .vars { color: #d00; }.sh .css .number { color: blue; }.sh .css .keyword {color:teal;}.sh .css .selector {font-weight: bold; color: navy;}.sh .html .comment { color: green; }.sh .html .string{ color: #ff1493; }.sh .html .script{ color: #ff1493; }.sh .html .attr { color: blue; }.sh .html .speical{color:#079BFA}.sh .html .tag { font-weight: bold; color: navy; }",this.KEY);this._profiles={js:{multicomment:this.$COM_REG.BLOCK_COMMENT,comment:this.$COM_REG.LINE_COMMENT,reg:this.$COM_REG.REG,string1:this.$COM_REG.DQ_STRING,string2:this.$COM_REG.SQ_STRING,number:this.$COM_REG.NUMBER,keyword:"try|throw|catch|finally|arguments|break|case|continue|default|delete|do|else|false|for|function|if|in|instanceof|new|null|return|switch|this|true|typeof|var|void|while|with|toString|valueOf|window|prototype|document|escape|unescape|parseInt|parseFloat|setTimeout|clearTimeout|setInterval|clearInterval|NaN|isNaN|Infinity|Error",keyword2:"exists|isNull|isObj|isEmpty|isArr|isBool|isDate|isFun|isHash|isNumb|isStr|_.arr|_.bool|_.cls|_.date|_.fun|_.hash|_.numb|_.str|_.id|_|alias|host|append|toArr|breakO|tryF|each|copy|clone|filter|asyRun|resetRun|merge|each|swap|removeFrom|filter|indexOf|clean|insertAny|serialize|unserialize|Class|Instance|Initialize|Before|After|Static|Constructor|reBoxing|copy|clone|left|top|right|bottom|startWith|endWith|initial|trim|ltrim|rtrim|blen|toDom|create",special:/linb[\w\.]*|(\bon|before|after|set|get)[A-Z]\w*/},css:{multicomment:this.$COM_REG.BLOCK_COMMENT,string:[this.$COM_REG.DQ_STRING,this.$COM_REG.SQ_STRING],IGNORE:/\([^'")]*\)/,keyword:[/@\w[\w.\s]*/,/attr|rect|rgb|url/],selector:/[\w-:\[.#][^{};]*\{/,colors:/\#[a-zA-Z0-9]{3,6}/,number:[/(\d*\.?\d+|\d+\.?\d*)(cm|em|ex|pt|px|%|\:)?/],vars:[/(-[\w-]+)\s*[ ]*:/,/([\w-]+)\s*[ ]*:/]},php:{multicomment:this.$COM_REG.BLOCK_COMMENT,comment:this.$COM_REG.LINE_COMMENT,reg:this.$COM_REG.REG,string:[this.$COM_REG.DQ_STRING,this.$COM_REG.SQ_STRING],number:this.$COM_REG.NUMBER,keyword:"abs|acos|acosh|addcslashes|addslashes|array_change_key_case|array_chunk|array_combine|array_count_values|array_diff|array_diff_assoc|array_diff_key|array_diff_uassoc|array_diff_ukey|array_fill|array_filter|array_flip|array_intersect|array_intersect_assoc|array_intersect_key|array_intersect_uassoc|array_intersect_ukey|array_key_exists|array_keys|array_map|array_merge|array_merge_recursive|array_multisort|array_pad|array_pop|array_product|array_push|array_rand|array_reduce|array_reverse|array_search|array_shift|array_slice|array_splice|array_sum|array_udiff|array_udiff_assoc|array_udiff_uassoc|array_uintersect|array_uintersect_assoc|array_uintersect_uassoc|array_unique|array_unshift|array_values|array_walk|array_walk_recursive|atan|atan2|atanh|base64_decode|base64_encode|base_convert|basename|bcadd|bccomp|bcdiv|bcmod|bcmul|bindec|bindtextdomain|bzclose|bzcompress|bzdecompress|bzerrno|bzerror|bzerrstr|bzflush|bzopen|bzread|bzwrite|ceil|chdir|checkdate|checkdnsrr|chgrp|chmod|chop|chown|chr|chroot|chunk_split|class_exists|closedir|closelog|copy|cos|cosh|count|count_chars|date|decbin|dechex|decoct|deg2rad|delete|ebcdic2ascii|echo|empty|end|ereg|ereg_replace|eregi|eregi_replace|error_log|error_reporting|escapeshellarg|escapeshellcmd|eval|exec|exit|exp|explode|extension_loaded|feof|fflush|fgetc|fgetcsv|fgets|fgetss|file_exists|file_get_contents|file_put_contents|fileatime|filectime|filegroup|fileinode|filemtime|fileowner|fileperms|filesize|filetype|floatval|flock|floor|flush|fmod|fnmatch|fopen|fpassthru|fprintf|fputcsv|fputs|fread|fscanf|fseek|fsockopen|fstat|ftell|ftok|getallheaders|getcwd|getdate|getenv|gethostbyaddr|gethostbyname|gethostbynamel|getimagesize|getlastmod|getmxrr|getmygid|getmyinode|getmypid|getmyuid|getopt|getprotobyname|getprotobynumber|getrandmax|getrusage|getservbyname|getservbyport|gettext|gettimeofday|gettype|glob|gmdate|gmmktime|ini_alter|ini_get|ini_get_all|ini_restore|ini_set|interface_exists|intval|ip2long|is_a|is_array|is_bool|is_callable|is_dir|is_double|is_executable|is_file|is_finite|is_float|is_infinite|is_int|is_integer|is_link|is_long|is_nan|is_null|is_numeric|is_object|is_readable|is_real|is_resource|is_scalar|is_soap_fault|is_string|is_subclass_of|is_uploaded_file|is_writable|is_writeable|mkdir|mktime|nl2br|parse_ini_file|parse_str|parse_url|passthru|pathinfo|readlink|realpath|rewind|rewinddir|rmdir|round|str_ireplace|str_pad|str_repeat|str_replace|str_rot13|str_shuffle|str_split|str_word_count|strcasecmp|strchr|strcmp|strcoll|strcspn|strftime|strip_tags|stripcslashes|stripos|stripslashes|stristr|strlen|strnatcasecmp|strnatcmp|strncasecmp|strncmp|strpbrk|strpos|strptime|strrchr|strrev|strripos|strrpos|strspn|strstr|strtok|strtolower|strtotime|strtoupper|strtr|strval|substr|substr_compare",keyword2:"and|or|xor|__FILE__|__LINE__|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|old_function|return|static|switch|use|require|require_once|var|while|__FUNCTION__|__CLASS__|__METHOD__|abstract|interface|public|implements|extends|private|protected|throw",vars:/\$\w+/},html:{multicomment:this.$COM_REG.HTML_COMMENT,tag:/\x02\/?\w+/,attr:/\w+=/,script:/(>([^<][^\/]*<+)*\/)(script|style)>/,special:/<!DOCTYPE[^>]+>/,string:[this.$COM_REG.DQ_STRING,this.$COM_REG.SQ_STRING]}}},Static:{$COM_REG:{HTML_COMMENT:/<!\s*(--([^-]|[\r\n]|-[^-])*--\s*)>/,BLOCK_COMMENT:/\/\*[^*]*\*+([^\/][^*]*\*+)*\//,LINE_COMMENT:/\/\/[^\n]*/,REG:/\/(\\[\/\\]|[^*\/])(\\.|[^\/\n\\])*\/[gim]*/,DQ_STRING:/"(\\.|[^"\\])*"/,SQ_STRING:/'(\\.|[^'\\])*'/,NUMBER:/-?(\d*\.?\d+|\d+\.?\d*)([eE][+-]?\d+|%)?\b/},replace:function(D,B,P,A){var H,J,N,E,C,G,S=[],R=[],Q=arguments.callee,O=Q.reg1||(Q.reg1=/\\./g),M=Q.reg2||(Q.reg2=/\(/g),L=Q.reg3||(Q.reg3=/\$\d/),K=Q.reg4||(Q.reg4=/^\$\d+$/),I=Q.reg5||(Q.reg5=/'/),F=Q.reg6||(Q.reg6=/\\./g),T=Q.reg11||(Q.reg11=/(['"])\1\+(.*)\+\1\1$/);if(!_.isArr(B)){B=[B,P]}else{A=P}if(!_.isArr(B[0])){B=[B]}_.arr.each(B,function(U){E=typeof U[0]=="string"?U[0]:U[0].source;C=U[1]||"";J=((E).replace(O,"").match(M)||"").length;if(typeof C!="function"){if(L.test(C)){if(K.test(C)){N=parseInt(C.slice(1));if(N<=J){C=N}}else{G=I.test(C.replace(F,""))?'"':"'";H=J;while(H+1){C=C.split("$"+H).join(G+"+a[o+"+H--+"]+"+G)}C=new Function("a,o","return"+G+C.replace(T,"$1")+G)}}}S.push(E||"^$");R.push([C,J,typeof C])});return D.replace(new RegExp("("+S.join(")|(")+")",A?"gim":"gm"),function(){var X=1,V=0,U=arguments,Y,W;if(!U[0]){return""}while(Y=R[V++]){if(W=U[X]){switch(Y[2]){case"function":return Y[0](U,X,V-1);case"number":return U[Y[0]+X];default:return Y[0]}}else{X+=Y[1]+1}}})},formatText:function(B,E,M){var I,L,R,A=[];var P=0,Q,O=20,T=function(U){var V="";while(U--){V+=" "}return V},S=[""];for(Q=1;Q<O;Q++){S.push(T(Q*4))}B=B.replace(/(\r\n|\r)/g,"\n");if(E=="html"){A.push([/[\s]*(<[\w]+[^>]+>)[\s]*/,"$1"]);A.push([/[\s]*(<\/[\w]+>)[\s]*/,"$1"]);B=this.replace(B,A);A.length=0;A.push([this.$COM_REG.HTML_COMMENT,"$0\\n"]);A.push([/<!\[CDATA\[(([^\]])|(\][^\]])|(\]\][^>]))*\]\]>/,function(U,V){return S[P]+U[V]+"\n"}]);A.push([/<input[^>]+>/,function(U,V){return S[P]+U[V]+"\n"}]);A.push([/<img[^>]+>/,function(U,V){return S[P]+U[V]+"\n"}]);A.push([/<[\w]+[^>]*\/>/,function(U,V){return S[P]+U[V]+"\n"}]);A.push([/[^<]+/,function(U,V){return S[P]+U[V]+"\n"}]);A.push([/<[\w]+[^>]*>/,function(U,V){return S[P++]+U[V]+"\n"}]);A.push([/<\/[\w]+>/,function(U,V){return S[--P]+U[V]+"\n"}]);B=this.replace(B,A,true)}else{var A=[],K=1,J=1,H=1,G=1,F=1,D=1,C=1,N={a:{},b:{},c:{},d:{},e:{},f:{},g:{}};I=this.$COM_REG;B=B.replace(/\\\r?\n/g,"");B=B.replace(/([\x01\x02\x03\x04])/g,"$1-");B=linb.Coder.replace(B,[[I.BLOCK_COMMENT.source,M?"":function(W,V){var U="\x01d"+G+++"\x02";N.d[U]=W[V];return U}],[I.LINE_COMMENT.source,M?"":function(W,V){var U="\x01e"+F+++"\x02";N.e[U]=W[V];return U}],[/\/\*@|@\*\/|\/\/@[^\n]*\n/.source,function(W,V){var U="\x01c"+H+++"\x02";N.c[U]=W[V];return U}],[I.SQ_STRING.source,function(W,V){var U="\x03a"+K+++"\x04";N.a[U]=W[V];return U}],[I.DQ_STRING.source,function(W,V){var U="\x03b"+J+++"\x04";N.b[U]=W[V];return U}],[I.REG.source,function(W,V){var U="\x03f"+D+++"\x04";N.f[U]=W[V];return U}],[/function\s*\([^)]*\)/.source,function(W,V){var U="\x03g"+C+++"\x04";N.g[U]=W[V];return U}]]);A=[["([+-])\\s+([+-])","$1 $2"],["\\b[\\s]+\\b"," "],["[\\s]+",""]];if(E=="css"){_.arr.insertAny(A,[/\s+(\.)/.source," $1"],2,true);_.arr.insertAny(A,[/(\d*\.?\d+|\d+\.?\d*)(cm|em|ex|pt|px|%|\:)?/," $0 "],-1,true)}B=linb.Coder.replace(B,A);if(!M){A=[[/[\{]/.source,function(U,V){return U[V]+"\n"+S[++P]}],[/[\x02\;]/.source,function(U,V){return U[V]+"\n"+S[P]}],[/(\,)([\x03\x04\w_\-]+\:)/.source,function(U,V){return U[V+1]+"\n"+S[P]+U[V+2]}],[/\x01/.source,function(U,V){return"\n"+S[P]+U[V]}],[/[\}]\s*[\,\;]*/.source,function(U,V){return"\n"+S[--P]+U[V]+"\n"+S[P]}]];if(E!="css"){A.push([/for\s*\([\w ]+\sin\s/.source,"$0"],[/for\s*\(([^;]*);([^;]*);([^)]*)\)/.source,"for($1; $2; $3)"],[/(,)(("[^"\n\r]*"|'[^'\n\r]*'|\w+)?(:|=>))/.source,function(U,V){return U[V+1]+"\n"+S[P]+U[V+2]}],[/\b(case|default)\b[^:]+:/.source,function(U,V){return U[V]+"\n"+S[P]}])}B=linb.Coder.replace(B,A);B=linb.Coder.replace(B,[[/ *[\n\r]/.source,"\n"],[/\{\s+\}/.source,"{}"],[/\}\n *(else|catch|finnally)/.source,"}$1"],[I.NUMBER,"$0"],[/(\/\/)|(\/\*)|(\*\/)/.source,"$0"],[/\s*((\+\+|\-\-|\&\&|\|\||!!)|([=!]==)|((<<|>>>|>>)=?)|([\+\-\*\/\%\&|^<>!=~]=?)|([?:]))\s*/.source," $1 "]])}B=linb.Coder.replace(B,[[/[\n\r]+/.source,"\n"],[/( *)(\x01[d]\d+\x02)/.source,function(V,U){V[U+1]=V[U+1]||"";return V[U+1]+N.d[V[U+2]].replace(/(\n)(\s*)/g,"$1"+V[U+1])}],[/\x03[g]\d+\x04/.source,function(V,U){return N.g[V[U]].replace(/\s*,\s*/g,","+(M?"":" "))}],[/[\x01\x03]([\w])\d+[\x02\x04]/.source,function(V,U){return N[V[U+1]][V[U]]}],[/\}\s*([\)\]])/.source,"}$1"]]);B=B.replace(/([\x01\x02\x03\x04])-/g,"$1")}return B},$linbid:1,formatHTML:function(E,L,K,D,P){if(!D){D=""+this.$linbid++}var C=this.$key,O=E,J=this,B=function(R){return R.replace(/\x02|\x03/g,function(S){return S=="\x02"?"&lt;":"&amp;"})},H=function(R){return R.replace(/<|\&/g,function(S){return S=="<"?"\x02":"\x03"})};E=E.replace(/^\s*(.*)\s*$/g,"$1");E=H(E);var M,N;if(!this._profiles[L]){L="js"}M=_.copy(this._profiles[L]);E=this.replace(E,[[/(\r\n|\r)/g,"\n"],[/( +)(\n)/g,"$2"],[/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"],[/ /g,"&nbsp;"]]);var G=[];var I=function(T,R,S){if(T){if(!_.isArr(T)){T=[T]}_.arr.each(T,function(U){if(typeof U=="string"){U="\\b("+U+")\\b"}G.push([U,S?S:"<span class='"+R+"'>$0</span>"])})}};if(N=M.multicomment){I(N,"multicomment",function(R,S){return"<span class='comment'>"+R[S].split("\n").join("</span>\n<span class='comment'>")+"</span>"});delete M.multicomment}if(N=M.comment){I(N,"comment",function(R,S){return"<span class='comment'>"+R[S].replace("\n","")+"</span>"});delete M.comment}if(N=M.IGNORE){I(N,"IGNORE","$0");delete M.IGNORE}if(M.reg){(function(S,R){if(S){if(!_.isArr(S)){S=[S]}_.arr.each(S,function(T){if(typeof T=="string"){T="\\b("+T+")\\b"}G.push([T,"$1<span class='"+R+"'>$2</span>$5"])})}})(M.reg,"reg");delete M.reg}_.arr.each(["string1","string2","number"],function(R){if(M[R]){I(M[R],R);delete M[R]}});_.each(M,function(S,R){I(S,R)});E=this.replace(E,G);E=B(E);var Q="";var F=E.split("\n");if(F[0]==""){F.shift()}if(F[F.length-1]==""){F.pop()}var A=[];A.push("<div id='"+C+":"+D+":' class='sh'>");if(K&&K[0]){A.push("<div id='"+C+"-sh-cmd:"+D+":' class='sh-cmd'>");A.push("<span class='sh-toggle' href='javascript:;' onclick='linb.Coder._toggle(this);'>-</span> <span class='cmd-ruler'></span>");_.arr.each(K,function(R){A.push("<a id='"+C+"-"+R+":"+D+":' href='javascript:;' onclick='linb.Coder._action(this,\""+R+"\",arguments[0]);'>"+R+"</a>")});A.push("<span>"+L+" source code viewer, powered by <a href='http://www.linb.net' target='_blank' style='font-size:9px;color:#000157;'>LINB</a></span>");A.push("</div>")}A.push("<pre style='display:none'>");A.push(O.replace(/<([\w\/])/g,"&lt;$1"));A.push("</pre>");A.push("<div id='"+C+"-sh-con:"+D+":'class='sh-con' "+(P?"style='overflow:auto;height:"+P+"px;'":"")+"><ol id='"+C+"-ol:"+D+":' start='1' class='"+L+"'><li>");A.push(F.join("&nbsp;</li><li>"));A.push("</li></ol></div>");A.push("</div>");B=H=null;_.asyRun(function(){linb.Coder._remedy(D)});return A.join("")},formatAll:function(D,C,E,F,B){var A=_.toArr(arguments);A[0]=this.formatText.call(this,D,C);return this.formatHTML.apply(this,A)},applyById:function(E,D){var C=0,B=this,A=function(H){if(linb.Dom.byId(E)){var G,I,F;C++;G=linb(E);F=(G.get(0).className||"").split(/\s+/g);I=_.str.toDom(linb.Coder[D?"formatAll":"formatHTML"](G.text(),F[0],F[1]&&F[1].split("-"),E+":"+C));G.replace(I)}else{linb.Thread(H).abort()}};linb.Thread(null,[A],null,null,null,null,true).start()},_remedy:function(E){var C=this.$key+":"+E+":";if(!(C=linb(C)).isEmpty()){var D=C.parent(),B=D.scrollWidth(),A=D.width();D.css("positoin","relative");if(B>A){C.width(B)}}},$action:{run:function(D,C){var B=linb(D).parent().next().text(),A=new Function([],B);A.call(linb(D).parent(2),C)},plain:function(C){var B=linb(C).parent().next().text();var B=B.replace(/</g,"&lt;");var A=window.open("","_blank","width=750, height=400, location=0, resizable=1, menubar=0, scrollbars=1");A.document.write('<pre style="width:100%;height:100%;border:none;">'+B+"</pre>");A.document.close();A=null}},_action:function(C,A,B){if(this.$action[A]){this.$action[A](C,B||window.event)}},_toggle:function(B){var A=B.parentNode.nextSibling.nextSibling.style;if(A.display=="none"){A.display="";B.innerHTML="-"}else{A.display="none";B.innerHTML="+"}}}});Class("App","linb.Com",{Instance:{events:{beforeCreated:"_beforeCreated",afterIniComponents:"_afterinicomponents"},sampleCode:'{"name":"JSON Editor","powered by":"jsLinb","version":"1.0","test data":{"int":23,"float":23.23,"string":"This\'s a string.","html":"<div>a<span>c</span>b</div>","hash":{"a":1,"b":"2"},"array":[1,"2",3],"regexp":/^{[w]*}$/gim,"NULL":null,"Date":new Date(1998,10,20,4,23,14,120),"function":function (a,b,c){return a+b+c;}}}',iniComponents:function(){var C=this,B=[],A=function(D){B.push(D.get(0))};A((new linb.UI.Image).host(C,"image2").setTop("2").setRight("18").setZIndex("100").setSrc("img/logo.gif"));A((new linb.UI.ToolBar).host(C,"toolbar").setItems([{id:"group1",sub:[{id:"sample",caption:"Insert Sample Code"},{id:"format",caption:"Format Code"},{id:"compress",caption:"Compress Code"},{id:"totreegrid",caption:"goto TreeView"}],caption:"group1"},{id:"group2",visible:false,sub:[{id:"tocode",caption:"goto CodeView"}],caption:"group1"}]).onClick("_toolbar_onclick"));return B},_beforeCreated:function(){SPA=this},_onrender:function(){},toCodeView:function(){var B=SPA.$cv.getRoot(),C=SPA.$tv.getRoot(),D=C.cssRegion(),E=_.copy(D),A=D.width;E.left=A;B.css("display","").cssRegion(E);C.animate({move:function(F){C.left(-F*A);B.left((1-F)*A)}},_.fun(),function(){B.cssRegion(D);C.css("display","none");SPA.toolbar.showGroup("group2",false);SPA.toolbar.showGroup("group1",true);SPA.$cvhost.setCode(linb.Coder.formatText(SPA.$tvhost.getCode()))},200,20,"expoOut").start()},getType:function(A){return A===null?null:_.isStr(A)?"string":_.isNumb(A)?"number":_.isHash(A)?"hash":_.isArr(A)?"array":_.isBool(A)?"boolean":_.isDate(A)?"date":_.isReg(A)?"regexp":_.isFun(A)?"function":"undefined"},toTreeView:function(){var F=SPA.$cvhost.getCode();if(!SPA.eval2(F)){return }var C=SPA.$cv.getRoot(),B=SPA.$tv.getRoot(),D=C.cssRegion(),E=_.copy(D),A=D.width;E.left=-A;B.css("display","").cssRegion(E);C.animate({move:function(G){C.left(G*A);B.left((G-1)*A)}},_.fun(),function(){B.cssRegion(D);C.css("display","none");SPA.toolbar.showGroup("group1",false);SPA.toolbar.showGroup("group2",true);SPA.$tvhost.setCode(linb.Coder.formatText(F))},200,20,"expoOut").start()},_afterinicomponents:function(){var A=linb.ComFactory;A.setProfile({codeview:{cls:"App.CodeView"},treeview:{cls:"App.TreeView"}});A.getCom("codeview",function(){if(!SPA.$cv){SPA.$cvhost=this;SPA.$cv=this.getUIComponents();SPA.$cv.setZIndex(2);linb(document.body).append(SPA.$cv)}});A.getCom("treeview",function(){if(!SPA.$tv){SPA.$tvhost=this;SPA.$tv=this.getUIComponents();SPA.$tv.setZIndex(1);linb(document.body).append(SPA.$tv)}})},_toolbar_onclick:function(A,B,D,C,F){if(D.id=="group1"){var E=SPA.$cvhost.getCode();switch(B.id){case"sample":SPA.$cvhost.setCode(SPA.sampleCode,true);break;case"format":if(SPA.eval2(E)){SPA.$cvhost.setCode(linb.Coder.formatText(E),true)}break;case"compress":if(SPA.eval2(E)){SPA.$cvhost.setCode(linb.Coder.formatText(E,"js",true),true)}break;case"totreegrid":SPA.toTreeView();break}}else{switch(B.id){case"tocode":SPA.toCodeView();break}}},eval2:function(txt){if(typeof txt!="string"||!txt){alert("No conent!");return false}var r=true,iframe=document.createElement("iframe");iframe.style.display="none";document.body.appendChild(iframe);frames[frames.length-1].document.write("<script>var MSIE/*@cc_on =1@*/;parent.sandbox=MSIE?this:{eval:function(s){return eval(s)}}<\/script>");txt=_.str.trim(txt);try{try{sandbox.eval(txt)}catch(a){sandbox.eval("("+txt+")")}}catch(e){var line=e.line||e.lineNumber;alert((e.name?e.name+" : ":"")+(e.description||e.message||"")+(line?"\n line : "+line:""));r=false}finally{document.body.removeChild(iframe)}return r},onCmdClick:function(A){SPA.$tvhost.onCmdClick(A)}}});Class("App.CodeView","linb.Com",{Instance:{events:{onReady:"_onready"},_onready:function(){this.texteditor.setValue(linb.Coder.formatText(SPA.sampleCode),true)},iniComponents:function(){var C=this,B=[],A=function(D){B.push(D.get(0))};A((new linb.UI.Layout).host(C,"layout6").setItems([{id:"main",min:10,caption:"main"},{id:"after",pos:"after",size:30,locked:true,min:10,hide:false,cmd:false,caption:"after"}]).setLeft(0).setTop(0).setType("horizontal"));C.layout6.append((new linb.UI.TextEditor).host(C,"texteditor").setDock("fill").setLeft(380).setTop(190),"main");C.layout6.append((new linb.UI.Button).host(C,"button25").setDock("fill").setLeft(20).setTop(110).setCaption(">").setVAlign("middle").onClick("_button25_onclick").setCustomStyle({KEY:"background:#eee;"}),"after");return B},_button25_onclick:function(A,C,D,B){SPA.toTreeView()},setCode:function(B){var A=this;A.$code=B;A.texteditor.setValue(B,true)},getCode:function(){return this.texteditor.getUIValue()}}});Class("App.TreeView","linb.Com",{Instance:{events:{onReady:"_onready"},iniComponents:function(){var C=this,B=[],A=function(D){B.push(D.get(0))};A((new linb.UI.Layout).host(C,"layout7").setItems([{id:"before",pos:"before",size:30,locked:true,min:10,hide:false,cmd:false,caption:"after"},{id:"main",min:10,caption:"main"}]).setType("horizontal"));C.layout7.append((new linb.UI.TreeGrid).host(C,"tg").setEditable(true).setColSortable(false).setColMovable(false).setRowNumbered(true).setHeader([{id:"key",width:100,type:"input",caption:"key"},{id:"value",width:400,type:"textarea",caption:"value"},{id:"action",width:90,type:"label",cellRenderer:function(D){D.tips="";return"<button onclick='javascript:SPA.onCmdClick(this)' class=\"c-cmd1\"></button><button onclick='javascript:SPA.onCmdClick(this)' class=\"c-cmd2\"></button><button onclick='javascript:SPA.onCmdClick(this)' class=\"c-cmd3\"></button>"},caption:"action"}]).beforeIniEditor("_tg_beforeIniEditor").beforeCellUpdated("_tg_beforecellupdated"),"main");C.layout7.append((new linb.UI.Button).host(C,"button26").setDock("fill").setLeft(20).setTop(110).setCaption("<").setVAlign("middle").onClick("_button26_onclick").setCustomStyle({KEY:"background:#eee;"}),"before");return B},_button26_onclick:function(A,C,D,B){SPA.toCodeView()},_onready:function(){linb.CSS.addStyleSheet(".c-cmd1{border:0;width:36px;height:18px;background:url(img/pre.gif) center;}.c-cmd2{border:0;width:36px;height:18px;background:url(img/next.gif) center;}.c-cmd3{border:0;width:18px;height:18px;background:url(img/del.gif) center;}")},onCmdClick:function(C){var H=C.parentNode.id,E=linb.UIProfile.getFromDom(H),A=E.cellMap[E.getSubId(H)],B=C.className,F=A._row,D;if(B=="c-cmd1"){var G=_();if(F._pid){D=_.get(E.rowMap,[E.rowMap2[F._pid],"_type"])}E.boxing().insertRows([{id:G,caption:"",cells:[{value:D=="array"?"[index]":"new",disabled:D=="array"},"null",""]}],null,F.id,true);_.asyRun(function(){E.getSubNode("FIRSTCELL",E.rowMap2[G]).onClick()})}else{if(B=="c-cmd2"){var G=_();if(F._pid){D=_.get(E.rowMap,[E.rowMap2[F._pid],"_type"])}E.boxing().insertRows([{id:G,caption:"",cells:[{value:D=="array"?"[index]":"new",disabled:D=="array"},"null",""]}],null,F.id,false);_.asyRun(function(){E.getSubNode("FIRSTCELL",E.rowMap2[G]).onClick()})}else{if(B=="c-cmd3"){if(confirm("Do you want to delete this row?")){E.boxing().removeRows([F.id])}}}}},getCellValue:function(C){try{var A=_.str.trim(C);if(/^"(\\.|[^"\\\n])*"$/.test(A)||/^'(\\.|[^'\\\n])*'$/.test(A)){A=["string",_.unserialize(A)]}else{A=A.replace(/^\s*/,"").replace(/\s*$/,"");A=A=="null"?["null","null"]:String(parseFloat(A))==A?["number",A]:/^\/(\\[\/\\]|[^*\/])(\\.|[^\/\n\\])*\/[gim]*$/.test(A)?["regexp",A]:/^(true|false)$/.test(A)?["boolean",A.toLowerCase()]:/^new Date\([0-9 \,]*\)$/i.test(A)?["date",_.serialize(_.unserialize(A))]:/^((function\s*([\w$]+\s*)?\(\s*([\w$\s,]*)\s*\)\s*)(\{([^\{\}]*)\}))$/i.test(A)?["function",A]:/^\{[\s\S]*\}$/.test(A)?["hash",_.serialize(_.unserialize(A))]:/^\[[\s\S]*\]$/.test(A)?["array",_.serialize(_.unserialize(A))]:["string",C]}}catch(B){A=null}if(A[0]=="string"){if(A[1]===false){return null}A[1]=_.serialize(A[1])}if(A[1]==="false"&&A[0]!="string"){A[0]="boolean"}return A},_json2rows:function(C,D,B){var A=arguments.callee;if(!B){B=[]}_.each(C,function(H,E){var G={},F=SPA.getType(H);E={value:D?"[index]":E,disabled:D};if(F=="hash"){G.sub=[];G.cells=[E,{value:"{...}"},""];A(H,false,G.sub)}else{if(F=="array"){G.sub=[];G.cells=[E,{value:"[...]"},""];A(H,true,G.sub)}else{SPA.getType(H);G.cells=[E,_.serialize(H),""]}}G._type=F;G.caption="";B.push(G)});return B},setCode:function(B){var A=this;A.$code=B;A.tg.removeAllRows().busy();_.asyRun(function(){var D=_.unserialize(B),C=A._json2rows(D);A.tg.insertRows(C).free()})},_rows2json:function(A,F){var D=arguments.callee,B=[],C,E;_.arr.each(A,function(G){C=((typeof G.cells[0]=="object")?G.cells[0].value:G.cells[0]);if(G._type=="hash"){E=D(G.sub)}else{if(G._type=="array"){E=D(G.sub,true)}else{E=(typeof G.cells[1]=="object")?G.cells[1].value:G.cells[1]}}if(F){B.push(E)}else{B.push('"'+C+'":'+E)}});return F?"["+B.join(",")+"]":"{"+B.join(",")+"}"},getCode:function(){var A=this.tg.getRows();return this._rows2json(A)},_tg_beforeIniEditor:function(C,A){if(A._col.id!="value"){return }var B=A._row._type;if(B=="hash"||B=="array"){A.$editorValue=linb.Coder.formatText(this._rows2json(A._row.sub,B=="array"))}},_tg_beforecellupdated:function(E,A,B){var G={hash:1,array:2},H=A._row;if(A._col.id=="value"){var D=H._type,F=this.getCellValue(B.value);if(!F){alert("Text format is not valid!");return false}else{H._type=F[0];B.value=F[1];var C={};if(G[F[0]]){C.sub=this._json2rows(_.unserialize(F[1]),F[0]=="array");B.caption=F[0]=="hash"?"{...}":"[...]"}else{C.sub=null}_.asyRun(function(){E.boxing().updateRow(H.id,C)})}}else{if(!/^"(\\.|[^"\\])*"$/.test('"'+B.value+'"')){alert("Text format is not valid!");return false}}}}});