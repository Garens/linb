<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html style="height:100%" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="keywords" content="javascript framework,RIA,SPA,linb,jsLinb,RAD,IDE,Web IDE,widgets,OOP,opensource,open-source,Ajax,cross-browser,web2.0,platform-independent,language-independent" />
    <meta name="description" content="Ajax RIA solution for professional application" />
    <meta name="copyright" content="copyright@www.linb.net" />
    <meta http-equiv="imagetoolbar" content="no" />
    <title>Visual JS, powered by LINB</title>
    <style>
        #prgId{color:#333;font:12px arial;margin:0pt auto;width:400px;}
        #prgId p{font-weight:bold;}
        #prgId a{display:block;text-decoration:none;padding:2px;}
        #prgId a:hover{color:#DD8700;background-color:#ddd;}
        #prgList{line-height:20px;padding:4px;border-top:solid #ddd 1px;border-bottom:solid #ddd 1px;}
        #prgLoading{padding-top:10px;}
        #lang{padding:2px;color:#A0522D;}
    </style>
</head>
    <body style="height:100%;overflow:hidden;" scroll="no">
        <div id='prgId'>
            <div style="height:40px;"></div>
            <p>Please choose your prefer language: <span id='lang'></span></p>
            <div id="prgList">
                <a id="en" href="javascript:;" onclick="document.cookie='lang=en';document.getElementById('lang').innerHTML=this.innerHTML;return false">English</a>
                <a id="cn" href="javascript:;" onclick="document.cookie='lang=cn';document.getElementById('lang').innerHTML=this.innerHTML;return false">中文(Chinese)</a>
            </div>
            <div id="prgLoading">Loading</div>
        </div>
        <script type="text/javascript">
        (function(){
            //is dummey proxy?
            var proxy;
            if((proxy=parent) && (proxy=proxy.parent) && (proxy=proxy.linb) && (proxy=proxy.iajax) &&location.href.indexOf('#')!=-1)
                proxy=true;
            //get data from server
            if(proxy){
                var p=parent.parent.linb.iajax,
                    rtn=(location.href.split('#')[1]||'');
                //return multi str
                if(rtn.indexOf('&')!=-1){
                    var hash={},
                        a=rtn.split('&'),
                        arr,o;
                    for(var i=0,l=a.length;i<l;i++){
                        o=a[i];
                        arr=o.split('=');
                        hash[arr[0]]=arr[1];
                    }
                    p.response(hash.s,hash.r,parseFloat(hash.i),parseFloat(hash.l));
                }else
                    p.response(rtn);
            }else{
                //var appHost=location.href.split('?')[0].replace(/[^\\\/]+$/,'');
                //*** Switch to this line, and you can copy this html file to anywhere ***
                var appHost='http://www.linb.net/VisualJS/';
                document.write(unescape("%3Cscript src='" + appHost + "api.js?prgId=prgId&dummy=1&module=visualjs&appPath="+appHost+"' type='text/javascript'%3E%3C/script%3E"));
                //set default lang
                var dftLang=function(){
                    var dft='en-us',
                        map={
                            'en-us':'en',
                            'zh-cn':'cn'
                        },
                        n=navigator,
                        l=(n.language || n.userLanguage || n.systemLanguage || n.browserLanguage || '').toLowerCase();
                    return map[l] || map[dft];
                },
                cookieLang=function(key){
                	var i,a,ca = document.cookie.split( "; " );
                	for(i=0;i<ca.length;i++){
                		a=ca[i].split("=");
                		if(a[0]=='lang')
                		    return a[1];
                	}
                }
                if(!cookieLang())
                    document.cookie='lang='+dftLang();    
                var n=document.getElementById(cookieLang() || dftLang());
                n.focus();
                document.getElementById('lang').innerHTML=n.innerHTML;

                //show loading progress
                (function(){
                    var n=document.getElementById('prgLoading');
                    if(n){
                        n.innerHTML = n.innerHTML + " .";
                        setTimeout(arguments.callee,200);
                    }
                }());
            }
        }())
        </script>
    </body>
</html>